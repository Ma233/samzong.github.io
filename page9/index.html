
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
  <head>
    <meta charset="utf-8">
	<link rel="manifest" href="/pwa/manifest.json">
	<title> Home | 船长的课记 </title>
    
		
    <meta name="author" content="船长">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#2196F3">
	<meta name="google-site-verification" content="puZt0ZyqB-t67BYdYAgLUyIPBeismG68J0dmEc01QeY" />

	
    <script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function () {
				navigator.serviceWorker
										.register('/sw.js')
										.then(function(registration) {
											console.log("Successfully registered service worker", registration.scope);
										}).catch(function(err) {
											console.log("Service worker registration failed: ", err);
										});
				//navigator.serviceWorker.ready always resolve
				navigator.serviceWorker.ready.then(function (registration) {
					console.log('Service worker successfully registered on scope', registration.scope);
				});
			});
		}
    </script>
	<script type="text/javascript" src="/assets/themes/evjekylltheme/jquery-3.6.0.slim.min.js"></script>

	<link href="/assets/themes/evjekylltheme/google-code-prettify/desert.css" type="text/css" rel="stylesheet" />

    <!-- Le styles -->
    <link href="/assets/themes/evjekylltheme/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/evjekylltheme/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/favicon.ico">

    <!-- atom & rss feed -->
    <link href="" type="application/atom+xml" rel="alternate" title="Jekyll auto generate ATOM Feed">
    <link href="" type="application/atom+xml" rel="alternate" title="Site ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Site RSS Feed">
	<link rel="stylesheet" href="/assets/themes/evjekylltheme/font-awesome-4.4.0/css/font-awesome.min.css">
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-W2LDG64');</script>
		<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8529425670069509"
						crossorigin="anonymous"></script>
	<script async src="https://cdn.splitbee.io/sb.js"></script>
  </head>

  <body>
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LDG64"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div class="navbar navbar-default navbar-fixed-top">
				<div class="container">
          <div class="row mobilepadding">
					<!-- <a class="navbar-brand" href="/">船长的课记</a> -->
					<a class="navbar-brand" href="/">SAMZONG</a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse" id="mNavbar">
  					<ul class="nav navbar-nav">
  						
  						
  						


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/friends.html">Friends</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



						  <li class="dropdown">
							  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Other</a>
							  <ul class="dropdown-menu">
									<li><a href="/about.html">About</a></li>
									<li><a href="https://yuque.com/samzong/note" target="_blank">船长的课记</a></li>
									<li><a href="https://yuque.com/samzong/ap" target="_blank">果粉日记</a></li>
									<li><a href="https://yuque.com/samzong/code" target="_blank">Code Snippet</a></li>
									<li><a href="https://www.yuque.com/samzong/mcx" target="_blank">集</a></li>
									<li><a href="https://www.yuque.com/zooka" target="_blank">藏金阁</a></li>
								</ul>
						  </li>
  					</ul>
  					<form id="search-form" class="navbar-form navbar-right" role="search">
  						<div class="form-group">
  						<input type="text" class="form-control input-sm" placeholder="Search" id="query">
  						</div>
  					</form>
  					<div class="nav-icon">
  						<a href="/feed.xml"><i class="fa fa-rss fa-2x"></i></a>
  					</div>
          </div>
				</div>
      </div>
    </div>

    <div class="container">
			<div class="row mobilepadding">
        <div class="row">
					<div class="col-md-12">
						<div class="searchresult">
						</div>
						<div id="search-loader" class="img-wrap">
						</div>
					</div>
        </div>
				<meta itemprop="image" content="https://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com/uPic/telegram-cloud-photo-size-4-5971176114485308439-x.jpg">
<div class="row">
  <div class="col-xs-12 col-md-8">
    
    
    <h1><a class="title" href="/post/2016/08/HowTo-Setup-MariaDB-Galera-Cluster-10-On-CentOS-6-x.html">HowTo Setup MariaDB Galera Cluster 10 On CentOS 6.x</a></h1>
    <div class="post_at_index">
      <h4 id="介绍">介绍</h4>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MariaDB Galera Cluster 是一套在MySQL InnoDB存储引擎上面实现multi-master及数据实时同步的系统架构，业务层面无需做读写分离工作，数据库读写压力都能按照既定的规则分发到 各个节点上去。在数据方面完全兼容 MariaDB 和 MySQL。使用MariaDB Galera的解决方案，可以方便快速的搭建出高可用的数据库Cluster，不是主备模式，而是双活模式，也就是说，没有主节点和备份节点，每个节点都可以看做是主节点，都可以进行读写，由Galera来实现底层的数据同步。
</p>

<ul>
  <li>真正的多主架构，任何节点都可以进行读写</li>
  <li>同步复制，各节点间无延迟且节点宕机不会导致数据丢失</li>
  <li>紧密耦合，所有节点均保持相同状态</li>
  <li>自动节点配置，无需手工备份当前数据库并拷贝至新节点</li>
</ul>

<h4 id="实验环境">实验环境</h4>

<ul>
  <li>Cluster node4 IP address 172.16.102.168</li>
  <li>Cluster node5 IP address 172.16.102.165</li>
  <li>Cluster node6 IP address 172.16.102.164</li>
  <li>setenforce 0；sed -i ‘s/SELINUX=enforcing/SELINUX=disabled/’ /etc/selinux/config</li>
  <li>/etc/init.d/iptables stop;chkconfig iptables off</li>
</ul>

<blockquote>
  <p>使用vmware 测试需注意:克隆机器需要删除 <code>/etc/udev/rules.d/70-persistent-net.rules</code> 以及<code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>中的网卡mac地址选项，不然网卡起不来</p>
</blockquote>

<h4 id="环境检测">环境检测</h4>
<ul>
  <li>
    <table>
      <tbody>
        <tr>
          <td>检查iptables状态：/etc/init.d/iptables status;chkconfig –list</td>
          <td>grep iptables</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>检查selinux状态：getenforce</li>
  <li>检查openssh-client包是否安装：系统中是否有ssh命令</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>检查是否系统中含有mysql相关的包：rpm -qa</td>
          <td>grep mysql，有的话都需要卸载掉</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>检查网络是否通畅：ping www.baidu.com</li>
</ul>

<h4 id="安装">安装</h4>
<h5 id="1-在所有节点编辑etchosts">1. 在所有节点编辑/etc/hosts</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@node4 ~]# vi /etc/hosts

127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

# add follows
172.16.102.164 node6
172.16.102.165 node5
172.16.102.168 node4

[root@node4 ~]#

# 依次在node5和node6上编辑/etc/hosts
</code></pre></div></div>

<h5 id="2-在所有node上安装-mariadb-galera">2. 在所有node上安装 MariaDB Galera</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@node4 ~]# vi /etc/yum.repos.d/mariadb.repo
 # MariaDB 10.0 CentOS repository list
# http://mariadb.org/mariadb/repositories/
[mariadb]
name = MariaDB
baseurl = http://yum.mariadb.org/10.0/centos6-amd64
gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
gpgcheck=1
enabled=0

[root@node4 ~]# yum --enablerepo=mariadb -y install MariaDB-Galera-server

# 依次在node5和node6上安装 MariaDB-Galera-server
</code></pre></div></div>

<blockquote>
  <p><i>注意安装完成之后，不要启动mysql</i></p>
</blockquote>

<h5 id="3-在其中一个节点上编辑etcmycnfdservercnf配置文件">3. 在其中一个节点上编辑/etc/my.cnf.d/server.cnf配置文件</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@node4 ~]# vi /etc/my.cnf.d/server.cnf
# 19 行，取消下面的注释，并修改为需求
[galera]
wsrep_provider=/usr/lib64/galera/libgalera_smm.so
# 指定节点地址，这里也可以使用ip,如果没做安装1，可以直接把cluster的ip写在这里。
wsrep_cluster_address="gcomm://node4,node5,node6"
binlog_format=row
default_storage_engine=InnoDB
innodb_autoinc_lock_mode=2
bind-address=0.0.0.0

# add follows
# cluster name
wsrep_cluster_name="Visionet_MariaDB_Cluster"
# replication provider
wsrep_sst_method=rsync
# own IP address
wsrep_node_address="172.16.102.168"
wsrep_node_name="node4"

# 启动数据库
[root@node4 ~]# /etc/rc.d/init.d/mysql bootstrap
Starting MySQL. SUCCESS!

# 初始化你的数据库
[root@node4 ~]# mysql_secure_installation
</code></pre></div></div>

<h5 id="4-在其它节点上编辑etcmycnfdservercnf配置文件">4. 在其它节点上编辑/etc/my.cnf.d/server.cnf配置文件</h5>

<h5 id="node5">node5</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@node5 ~]# vi /etc/my.cnf.d/server.cnf
# 19 行，取消下面的注释，并修改为需求
[galera]
wsrep_provider=/usr/lib64/galera/libgalera_smm.so
# 指定节点地址，这里也可以使用ip,如果没做安装1，可以直接把cluster的ip写在这里。
wsrep_cluster_address="gcomm://node4,node5,node6"
binlog_format=row
default_storage_engine=InnoDB
innodb_autoinc_lock_mode=2
bind-address=0.0.0.0

# add follows
# cluster name
wsrep_cluster_name="Visionet_MariaDB_Cluster"
# replication provider
wsrep_sst_method=rsync

# 以下内容注意，注意应设置为当前服务器信息
wsrep_node_address="172.16.102.165"
wsrep_node_name="node5"

# 启动数据库
[root@node5 ~]# /etc/rc.d/init.d/mysql start
Starting MySQL...SST in progress, setting sleep higher. SUCCESS!
</code></pre></div></div>

<h5 id="node6">node6</h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@node6 ~]# vi /etc/my.cnf.d/server.cnf
# 19 行，取消下面的注释，并修改为需求
[galera]
wsrep_provider=/usr/lib64/galera/libgalera_smm.so
# 指定节点地址，这里也可以使用ip,如果没做安装1，可以直接把cluster的ip写在这里。
wsrep_cluster_address="gcomm://node4,node5,node6"
binlog_format=row
default_storage_engine=InnoDB
innodb_autoinc_lock_mode=2
bind-address=0.0.0.0

# add follows
# cluster name
wsrep_cluster_name="Visionet_MariaDB_Cluster"
# replication provider
wsrep_sst_method=rsync

# 以下内容注意，注意应设置为当前服务器信息
wsrep_node_address="172.16.102.164"
wsrep_node_name="node6"

# 启动数据库
[root@node6 ~]# /etc/rc.d/init.d/mysql start
Starting MySQL...SST in progress, setting sleep higher. SUCCESS!
</code></pre></div></div>

<blockquote>
  <p>注意：只需要初始化第一个节点服务器的数据库，其他数据的配置文件会自动同步，所以你给node4设置的root可以在node5和node6直接使用，当然这是安装正确的前提。</p>
</blockquote>

<h4 id="登陆各个节点数据库检查配置是否成功">登陆各个节点数据库检查配置是否成功</h4>

<p>        server.cnf的配置如果没有问题，那么wsrep_local_state_comment的状态应该是Synced。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@node4 ~]# mysql -u root -p
Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 15
Server version: 10.0.26-MariaDB-wsrep MariaDB Server, wsrep_25.13.raf7f02e

Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MariaDB [(none)]&gt; show status like 'wsrep_local_state_comment';
+---------------------------+--------+
| Variable_name             | Value  |
+---------------------------+--------+
| wsrep_local_state_comment | Synced |
+---------------------------+--------+
1 row in set (0.01 sec)

MariaDB [(none)]&gt;
</code></pre></div></div>

<h4 id="结论">结论</h4>

<p>        MariaDB Galera没有主节点和备份节点，配置成功之后，可以在任何一个node节点上操作会自动同步到其他节点，任何一个节点宕机不会影响其他节点的数据和稳定性，配置HAProxy设置VIP的方式来实现负载均衡，提高服务的高可用性，另外，当宕机节点上线之后，事务会自动同步不丢失。</p>


      
    </div>
    <br/>
    <div>
      <cite>2016-08-04</cite> <i class="icon-tag"></i>
      <a href="/tags.html#MariaDB">MariaDB</a>
      , 
      <a href="/tags.html#CentOS">CentOS</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/08/HowTo-Install-Openfire-on-CentOS.html">HowTo Install Openfire  on CentOS</a></h1>
    <div class="post_at_index">
      <h4 id="install-centos-6x-x86_64">Install Centos 6.x x86_64</h4>
<p><em>略.</em></p>

<h4 id="安装依赖软件">安装依赖软件</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install wget java glibc.i686
</code></pre></div></div>

<h4 id="下载openfire-38-到本地">下载openfire 3.8 到本地</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://download.igniterealtime.org/openfire/openfire-3.8.1-1.i386.rpm
</code></pre></div></div>

<h4 id="安装openfire-38">安装openfire 3.8</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install ./openfire*rpm
</code></pre></div></div>
<h4 id="设置服务开启自启动">设置服务开启自启动</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chkconfig openfire on

</code></pre></div></div>
<h4 id="yum-install-mysql-server">Yum Install mysql-server</h4>
<p>详见： <a href="http://blog.ultraera.org/how-to-install-mysql-5-6-on-centos/">How to Install MySQL 5.5/6/7 on RHEL/CentOS 5/6/7</a></p>

<h4 id="创建openfire数据库">创建openfire数据库</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql -u root -p

create database openfire character set utf8;
grant all privileges on openfire.* to 'openfire'@'127.0.0.1' identified by 'openfire' with grant option;
</code></pre></div></div>
<h4 id="启动openfire">启动openfire</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://Host:9090
</code></pre></div></div>

<h4 id="之后的初始化步骤请根据实际操作注意设定数据库地址用户名和密码时不要出错">之后的初始化步骤，请根据实际操作，注意设定数据库地址用户名和密码时不要出错</h4>

<h4 id="faq">FAQ</h4>
<p>openfire安装完毕后无法登录控制台</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>报错：Login failed:make sure your username and password are correct and that you’re an admin or moderator

解决方案如下：
1.使用Mysql查看工具进入数据库，进入表“ofuser”，将该表清空，然后执行该SQL
INSERT INTO ofUser (username, plainPassword, name, email, creationDate, modificationDate)
    VALUES ('admin', 'admin', 'Administrator', 'admin@example.com', '0', '0');

2.关闭openfire服务，就是从其控制台stop然后再start，再用用户名：admin,密码：admin登录即可
</code></pre></div></div>

<p>openfire 进程无法启动</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>报错：nohup: failed to run command `/opt/openfire/jre/bin/java': No such file or directory

解决方案如下：
经检查是由于openfire未能正确识别jre环境变量导致，安装时自带的jre是32位，但操作系统却是64位操作平台。
，故在/etc/init.d/openfire的启动脚本修改，
JAVA_HOME="/usr/lib/jvm/jre-$VERSION.x86_64"
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2016-08-02</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Openfire">Openfire</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/08/HowTo-Use-Docker-create-a-Tomcat-Project.html">HowTo Use Docker create a Tomcat Project</a></h1>
    <div class="post_at_index">
      <h4 id="1-安装centos-7x"><strong>1. 安装CentOS 7.x</strong></h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>略。 #### **2. 安装docker** 详见： [How to Install Docker on CentOS 6.x](https://samzong.me/2016/07/07/HowTo-Install-Docker-on-CentOS-6-x/) #### **3. 基础docker命令** ``` ＃ 获取centos6 docker镜像 [root@docker ~]# docker pull centos6 Using default tag: latest latest: Pulling from library/centos:centos6
</code></pre></div></div>

<p>43db9dbdcb30: Downloading 41.14 MB/49.33 MB
43db9dbdcb30: Pull complete
2dc64e8f8d4f: Pull complete
670a583e1b50: Pull complete
183b0bfcd10e: Pull complete
Digest: sha256:c6674c44c6439673bf56536c1a15916639c47ea04c3d6296c5df938add67b54b
Status: Downloaded newer image for centso:centos6</p>

<p>＃ 查看当前服务器上的docker镜像
[root@docker ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos6-visionet    latest              aeed37612ecb        6 hours ago         1.916 GB
centos              centos6             a3c09d36ab4a        2 days ago          194.6 MB
registry            latest              c6c14b3960bd        3 days ago          33.28 MB
＃ 查找docker镜像
[root@docker ~]# docker search centos:centos6
NAME                                     DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
imagine10255/centos6-lnmp-php56          centos6-lnmp-php56                              10                   [OK]
lemonbar/centos6-ssh                     Installed openssh-server on centos6, defau…   7                    [OK]
sergeyzh/centos6-nginx                                                                   2                    [OK]
guyton/centos6                           From official centos6 container with full …   2                    [OK]
paijp/centos6-apache-php-sqlite2         php5.3.3 with sqlite2 and apache on CentOS…   1                    [OK]
edrans/centos6                                                                           1                    [OK]
mohri1219/centos6.7-ruby2.2.2-mysql5.6   centos6.7-ruby2.2.2-mysql5.6                    1                    [OK]
…
…</p>

<p>＃ 删除 centos6 docker镜像
[root@docker ~]# docker rmi IMAGES_NAME
[root@docker ~]# docker rmi centos:centos6</p>
<h1 id="报错无法删除">报错无法删除</h1>
<p>Error response from daemon: conflict: unable to remove repository reference “centos” (must force) - container 705a30cbc002 is using its referenced image 42118e3df429</p>
<h1 id="这是因为之间的运行的进程没有清楚导致该images正在使用中使用一下命令查看占有的进程">这是因为之间的运行的进程没有清楚导致该images正在使用中，使用一下命令查看占有的进程</h1>
<p>[root@docker ~]# docker ps -a ＃ 查看所有的docker进程
CONTAINER ID        IMAGE               COMMAND               CREATED             STATUS                     PORTS               NAMES
705a30cbc002        centos:centos6              “/bin/bash”           6 minutes ago       Exited (0) 6 minutes ago                       centos6
[root@docker ~]# docker rm 705a30cbc002
705a30cbc002
[root@docker ~]# docker rmi centos:centos6
Untagged: centos:centos6
Deleted: sha256:42118e3df429f09ca581a9deb3df274601930e428e452f7e4e9f1833c56a100a
Deleted: sha256:d72d0199021776e77ac14a764a3decd156e9f6f18b37e25b867b0f1ca42fb3d9
Deleted: sha256:fb178c6cea1453d089ce033b96eba0efdb42274138e042517ea2d5ea7bb51665
Deleted: sha256:8945af30572845a904adce2aeaf73402c842d86e99e8f10688b25cb27834110b
Deleted: sha256:ea9f151abb7e06353e73172dad421235611d4f6d0560ec95db26e0dc240642c1</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### **4. 运行一个docker镜像**
#### 进入交互式程序
</code></pre></div></div>
<p>[root@docker ~]# docker run  -it centos:centos6 /bin/bash
[root@c1d190f95562 /]# cat /etc/redhat-release
CentOS release 6.8 (Final)</p>
<h1 id="install-openssh-server-and-httpd">Install openssh-server and httpd</h1>
<p>root@d8c122dbe09d:/# yum install -y openssh-sever httpd
root@d8c122dbe09d:/# exit</p>

<h1 id="注意当你执行exit从容器之中退出时容器也会随着关闭这时如果还继续执行上条命令">注意当你执行exit，从容器之中退出时，容器也会随着关闭，这时如果还继续执行上条命令</h1>
<h1 id="你会发现之前所有的操作都被还原因为相对于docker又是新开了一个进程">你会发现之前所有的操作都被还原，因为相对于docker，又是新开了一个进程</h1>
<h1 id="在exit退出之后使用一下命令查看上次提交然后commit修改便可保存之前的修改">在exit退出之后，使用一下命令查看上次提交，然后commit修改，便可保存之前的修改</h1>

<p>[root@docker ~]# docker ps -l
[root@docker ~]# docker commit c1d190f95562 centos:centos6-httpd
sha256:77eb12e36c7bbe9ef874555b1873019022b5258740aa731627e2cd6fa749c325
[root@docker ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos              centos6-httpd       77eb12e36c7b        3 seconds ago       290.3 MB
centos6-visionet    latest              aeed37612ecb        6 hours ago         1.916 GB
centos              centos6             a3c09d36ab4a        2 days ago          194.6 MB
registry            latest              c6c14b3960bd        3 days ago          33.28 MB</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### **5. 编辑Dockerfile**
</code></pre></div></div>
<h1 id="dockfile的第一行一定是from指定了父镜像">dockfile的第一行一定是FROM，指定了父镜像</h1>
<p>FROM centos:centos6</p>

<h1 id="run-指的是运行的命令">RUN 指的是运行的命令</h1>
<p>RUN yum install -y epel-release
RUN yum install -y bash-completion
RUN yum install -y openssh-server openssh-client sudo
RUN sed -i ‘s/UsePAM yes/UsePAM no/g’ /etc/ssh/sshd_config
RUN cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</p>

<h1 id="增加一个用户并赋予sudo权限">增加一个用户，并赋予sudo权限</h1>
<p>RUN useradd visionet
RUN echo “visionet:visionet” | chpasswd
RUN echo “visionet   ALL=(ALL)       ALL” » /etc/sudoers</p>

<p>＃ 注意，如果没有执行一下两个命令，sshd是无法远程登陆的
RUN ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key
RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</p>

<p>＃ EXPOSE 22， 将22端口暴露出来，方便ssh远程连接
RUN mkdir /var/run/sshd
EXPOSE 22
＃ CMD 为系统内部执行命令
CMD [“/usr/sbin/sshd”, “-D”]</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### **6. 生成自定义docker镜像**
</code></pre></div></div>
<h1 id="build-编译镜像">build 编译镜像</h1>
<p>[root@docker ~]# docker build -f dockerfile3 -t centos:centos6-ssh .
Sending build context to Docker daemon 44.54 kB
Step 1 : FROM centos:centos6
 —&gt; a3c09d36ab4a
Step 2 : RUN yum install -y epel-release
 —&gt; Using cache
 —&gt; 04d81f280a63
Step 3 : RUN yum install -y bash-completion
 —&gt; Using cache
 —&gt; 5ca26894dc9d
Step 4 : RUN yum install -y openssh-server openssh-client sudo
 —&gt; Using cache
 —&gt; 42278450311e
Step 5 : RUN sed -i ‘s/UsePAM yes/UsePAM no/g’ /etc/ssh/sshd_config
 —&gt; Using cache
 —&gt; db35bef562a2
Step 6 : RUN cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
 —&gt; Using cache
 —&gt; dc9f2b82e198
Step 7 : RUN useradd visionet
 —&gt; Using cache
 —&gt; 06c574a51755
Step 8 : RUN echo “visionet:visionet” | chpasswd
 —&gt; Using cache
 —&gt; 03412f053d04
Step 9 : RUN echo “visionet   ALL=(ALL)       ALL” » /etc/sudoers
 —&gt; Using cache
 —&gt; bf8476812a62
Step 10 : RUN ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key
 —&gt; Using cache
 —&gt; 2314cce75171
Step 11 : RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key
 —&gt; Using cache
 —&gt; 99304cd9ac15
Step 12 : RUN mkdir /var/run/sshd
 —&gt; Using cache
 —&gt; f87283751553
Step 13 : EXPOSE 22
 —&gt; Using cache
 —&gt; 56c41202dcb9
Step 14 : CMD /usr/sbin/sshd -D
 —&gt; Using cache
 —&gt; d6dccb483fa6
Successfully built d6dccb483fa6
[root@docker ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos              centos6-ssh         d6dccb483fa6        2 minutes ago         363 MB
centos              centos6-httpd       77eb12e36c7b        6 minutes ago       290.3 MB
centos6-visionet    latest              aeed37612ecb        6 hours ago         1.916 GB
centos              centos6             a3c09d36ab4a        2 days ago          194.6 MB
registry            latest              c6c14b3960bd        3 days ago          33.28 MB</p>

<h1 id="后台运行docker容器并指定nat端口转发">后台运行docker容器，并指定nat端口转发</h1>
<p>[root@docker ~]# docker run -d -p 2222:22 -P –name=sshd centos:centos6-ssh
b4211f7a304d9e34b72b510230be2c7a76b276886b488f08f3e12896a4d3c172</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#### **7. ssh登陆到docker容器内，部署项目环境**
</code></pre></div></div>
<h1 id="inspect-查看docker-容器ip地址">inspect 查看docker 容器IP地址</h1>
<p>[root@docker ~]# docker inspect sshd | grep IPAddress
[root@docker ~]# ssh visionet@172.17.0.2
visionet@172.17.0.2’s password:
[visionet@b4211f7a304d ~]$</p>

<h1 id="install-mysql">Install mysql</h1>
<h1 id="install-tomcat-server">Install tomcat server</h1>

<p>[visionet@b4211f7a304d ~]$ exit
[root@docker ~]# docker stop sshd
sshd
[root@docker ~]# docker ps -l
CONTAINER ID        IMAGE                COMMAND               CREATED             STATUS                       PORTS               NAMES
b4211f7a304d        centos:centos6-ssh   “/usr/sbin/sshd -D”   6 minutes ago       Exited (255) 3 seconds ago                       sshd
[root@docker ~]# docker commit b4211f7a304d centos:centos6-tomcat
sha256:b4f114d5484822d9a3ddf1100b76b460985ba5e5d31e936570e8d7dbd8df282c
[root@docker ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
centos              centos6-tomcat      b4f114d54848        4 seconds ago       363.1 MB
centos              centos6-httpd       77eb12e36c7b        15 minutes ago      290.3 MB
centos6-visionet    latest              aeed37612ecb        7 hours ago         1.916 GB
centos              centos6-ssh         d6dccb483fa6        9 hours ago         363 MB
centos              centos6             a3c09d36ab4a        2 days ago          194.6 MB
registry            latest              c6c14b3960bd        3 days ago          33.28 MB</p>

<p>```</p>

<h4 id="8-推送centoscentos6-tomcat到私有docker仓库"><strong>8. 推送centos:centos6-tomcat到私有docker仓库</strong></h4>

      
    </div>
    <br/>
    <div>
      <cite>2016-08-02</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Docker">Docker</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/08/%E4%BD%A0%E5%A5%BD-%E5%85%AB%E6%9C%88.html">你好，八月</a></h1>
    <div class="post_at_index">
      <p>还剩不到1小时就要进入8月，也许写完这篇文章就已经8月，我其实不擅长写作文，自小如此，所以每次都是特别慢；时间慢慢流逝，听着音乐，随心所致，大概也是件快乐的事情吧。</p>

<p>定期自省己身，所行之事，所思之虑，有则改之，无则勉之，坚守吾心，戒嗔戒躁，自打懂得事理之后，便妄以此法施加吾身，奈何小子年幼，定力不坚，常因一时欢愉便抛诸脑后，事后便懊悔不已；虽言，生而为人，便逃不过七情六欲加身，然，时时自省吾身，常思吾之过，常念德行事，方可为人；撰此文，便是警醒己身。</p>

<p>犯错并不是一件可怕的事儿，从小做了不知多少混账事，也没见的把天捅破，可见，所谓捅破天也不是件容易的事儿；首先是工作上的失职，自今年年初，开始搭建自身的团队班子，虽然只有三三两两人，刚开始做小头头，我并没有正确认识到自己的责任，在完成本职工作的同时，也要照顾底下的员工，不光是工作安排，还有学习成长，很多事情吩咐下去之后，自己又要去检查，弄的比自己一人工作时还要劳累；之后，连着手下两名员工都离职了，我开始反省自己，从招聘到工作分配到培养，头大如斗，深感做领导的不易。公司因装修改造，扩展一个会议室，我自己怕麻烦，便将工作推给一个员工，却未考虑他的自身的能力，导致原本清晰简单的事，拖拖拉拉2个月才算弄完，还害得这名员工离职，对行政部门的工作也造成了影响，经此事之后，发觉自身管理能力十分不足。另一事，公司微软云资源的账单，之前一人工作时制定的账单每月资源消耗账单，但是由于后将该事务分配与他人，导致最后帐不对本，弄巧成拙，最后还是花费大量时间，重新制作了所有的账单，问题在于自身没有将事务认真贯彻执行下去，而且任务甩出手之后，缺乏关心。另有很多这样大大小小之事，十分头疼，真应该好好学学如何做一个好领导。</p>

<p>我不太会写叙述的文章，前面一段文字，自己看着都揪心，也是那些复杂的事儿都过去了，才能有闲工夫来写这些东西，两个助手离职之后，拉来之前同事过来帮忙，现在事情都在往好的方向发展，一点点在建立规则，接下来的工作和学习的重心都会放在大数据上，实在的事是公司给了我很好的学习机会，在这家公司也成长了非常的多，感谢的话言之不尽，唯有努力工作方可回报。</p>

<p>谈下关于博客，最近找了一个漂亮的主题，所以一直在折腾怎么弄好看，感觉有点逾越了当初创建博客的初衷；所以，接下来的时间，要整理之前的博文，对知识进行梳理，好记性不如烂笔头，用XMind做思维导图，TodoList工具计划任务清单，博客记录学习内容FAQ等，一直认为好的学习方法才能达到事半功倍的效果，要加快成长，每次参加一些培训和技术的研讨会，都恨不得自己早生十年。</p>

<p>谈下关于减肥，首先这肯定是一个永恒无止尽的话题，之前这段时间因为工作上的乱七八糟导致每天下班时间都到9-10多点钟，再加上公司到家地铁要1小时，所以健身房也一直没去，再加上饮食不规律，体重又回升到了可怕85KG，8月开始，要认真去健身了，该吃吃，该练练，目标体重75KG。</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-08-01</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Zero">Zero</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/07/%E5%9C%A8%E7%BD%91%E9%A1%B5%E4%B8%AD%E6%8F%92%E5%85%A5%E6%AD%8C%E6%9B%B2.html">在网页中插入歌曲</a></h1>
    <div class="post_at_index">
      <p>纠正下，在下面博文中的错误，关于单曲不能生成外链的问题，现已经纠正。</p>

<p>我试过百度音乐、QQ音乐、虾米音乐和网易云音乐，目前只有网易云音乐有此功能，先在网易云音乐选择歌曲即可：</p>
<h4 id="分享单曲">分享单曲</h4>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&amp;id=101906&amp;auto=1&amp;height=66"></iframe>

<h4 id="分享专辑歌单">分享专辑，歌单</h4>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="450" src="//music.163.com/outchain/player?type=0&amp;id=26096079&amp;auto=1&amp;height=430"></iframe>

<p><br />
       <strong>选定歌单之后，在歌单页面有个生成外链播放器的按钮</strong></p>
<div align="center">
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/1-6UcK4gXBrACw.jpg" />
</div>
<p><br />
       <strong>然后，根据页面提示信息，生成你要的html代码，并嵌入到你的页面之中。</strong></p>
<div align="center">
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/2-6UcK4gXBrACw.jpg" />
</div>

      
    </div>
    <br/>
    <div>
      <cite>2016-07-31</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Ghost">Ghost</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/07/HowTo-Trun-Off-IPv6-in-CentOS-6-x.html">HowTo Trun Off IPv6 in CentOS 6.x</a></h1>
    <div class="post_at_index">
      <h2 id="1-centos-6x">1. CentOS 6.x</h2>

<p>CentOS 6 上是默认打开了IPv6，但其实在我们实际使用中很难用到它，所以本篇的内容就是如何关闭IPv6。</p>

<p>＃ 可以看到 inet6 ，说明还没关闭。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# ifconfig eth0
eth0      Link encap:Ethernet  HWaddr 00:0C:29:3A:F9:6F
          inet addr:172.16.102.161  Bcast:172.16.102.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fe3a:f96f/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:199 errors:0 dropped:0 overruns:0 frame:0
          TX packets:122 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:20124 (19.6 KiB)  TX bytes:17182 (16.7 KiB)
</code></pre></div></div>

<p>＃ 修改/etc/modprobe.d/dist.conf</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# vi /etc/modprobe.d/dist.conf
# 添加下面两行内容
alias net-pf-10 off
alias ipv6 off
# 保存退出，并且重新启动系统

# 开机不启动
[root@ultraera ~]# chkconfig ip6tables off
</code></pre></div></div>

<p>＃ 系统重启完成后，检查是否加载IPv6</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# lsmod | grep v6
</code></pre></div></div>

<p>＃ 补充</p>

<ul>
  <li>修改/etc/sysconfig/network，追加
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NETWORKING_IPV6=no
</code></pre></div>    </div>
  </li>
  <li>修改/etc/hosts文件，把ipv6的那句本地主机名解析的也注释掉
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#::1   localhost localhost6 localhost6.localdomain6
</code></pre></div>    </div>
  </li>
</ul>

<p><br /></p>

<h2 id="2-centos-7x">2. CentOS 7.x</h2>

<h4 id="setup-1-修改grub文件在启动引导时不加载ipv6">Setup 1. 修改grub文件，在启动引导时不加载ipv6</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# vim /etc/default/grub

# 在GRUB_CMDLINE_LINUX=" " ,中增加
ipv6.disable＝1

# 重新生产启动引导文件，注意，这里重启系统是没用的，需要手动重建引导文件
[root@ultraera ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
[root@ultraera ~]# reboot
</code></pre></div></div>

<p>＃ 验证是否关闭</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# lsmod | grep ipv6
</code></pre></div></div>

<h4 id="setup-2-第二种方式">Setup 2. 第二种方式</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 修改/etc/sysctl.conf,增加以下：
net.ipv6.conf.all.disable_ipv6 = 1

reboot
</code></pre></div></div>
<blockquote>
  <p>IPv6是默认支持的，所以当你要重新开起IPv6支持时，将以上添加的指令注释掉即可。</p>
</blockquote>

<blockquote>
  <font color="red"><b>之前碰到过安装某些服务时，不能启动，后来检查原因是因为关闭ipv6的问题，因为在这些服务的conf文件，指定了类似监听ipv6,因为关闭了ipv6导致服务无法启动，将其关闭即可。<b>&lt;/font&gt;
</b></b></font>
</blockquote>


      
    </div>
    <br/>
    <div>
      <cite>2016-07-29</cite> <i class="icon-tag"></i>
      <a href="/tags.html#CentOS">CentOS</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/07/HowTo-Install-KVM-Manage-Server-webvirtmgr.html">HowTo Install KVM Manage Server webvirtmgr</a></h1>
    <div class="post_at_index">
      <p>生产环境的KVM宿主机越来越多，需要对宿主机的状态进行调控。这里用webvirtmgr进行管理。图形化的WEB，让人能更方便的查看kvm 宿主机的情况和操作.</p>

<p><strong><em><a href="https://github.com/retspen/webvirtmgr">GitHub Project.</a></em></strong></p>

<h3 id="install">Install</h3>

<h4 id="安装支持的软件源">安装支持的软件源</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install -y epel-release
</code></pre></div></div>

<h4 id="安装相关软件">安装相关软件</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y install git python-pip libvirt-python libxml2-python python-websockify supervisor nginx
</code></pre></div></div>

<h4 id="从git-hub中下载相关的webvirtmgr代码">从git-hub中下载相关的webvirtmgr代码</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /usr/local/src/
git clone git://github.com/retspen/webvirtmgr.git
</code></pre></div></div>

<h4 id="安装webvirtmgr">安装webvirtmgr</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd webvirtmgr/
pip install -r requirements.txt
</code></pre></div></div>

<h4 id="安装数据库">安装数据库</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install python-sqlite2
</code></pre></div></div>

<h4 id="对django进行环境配置">对django进行环境配置</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./manage.py syncdb

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): yes
Username (leave blank to use 'root'): admin
Email address: luchuanjia@msn.com
Password:*********
Password (again):*********

./manage.py collectstatic #生成配置文件
./manage.py createsuperuser #添加管理员账号
</code></pre></div></div>

<h4 id="拷贝web到-相关目录">拷贝web到 相关目录</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ..
rm -rf /var/www
mkdir -pv /var/www
cp -Rv webvirtmgr /var/www/webvirtmgr
</code></pre></div></div>

<h4 id="设置ssh">设置ssh</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen
ssh-copy-id 192.168.2.32
ssh 192.168.2.32 -L localhost:8000:localhost:8000 -L localhost:6080:localhost:6080
</code></pre></div></div>

<h4 id="编辑nginx配置文件">编辑nginx配置文件</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak
vim /etc/nginx/conf.d/webvirtmgr.conf  #添加下面内容到文件中

server {
    listen 80 default_server;

    server_name $hostname;
    #access_log /var/log/nginx/webvirtmgr_access_log;

    location /static/ {
        root /var/www/webvirtmgr/webvirtmgr; # or /srv instead of /var
        expires max;
    }

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-for $proxy_add_x_forwarded_for;
        proxy_set_header Host $host:$server_port;
        proxy_set_header X-Forwarded-Proto $remote_addr;
        proxy_connect_timeout 600;
        proxy_read_timeout 600;
        proxy_send_timeout 600;
        client_max_body_size 1024M; # Set higher depending on your needs
    }
}
</code></pre></div></div>

<h4 id="启动nginx">启动nginx</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service nginx start
</code></pre></div></div>

<h4 id="修改防火墙规则--如果关闭selinux此步可省略">修改防火墙规则 ( 如果关闭selinux，此步可省略)</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/sbin/setsebool httpd_can_network_connect true
</code></pre></div></div>

<h4 id="设置-supervisor">设置 supervisor</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chown -R nginx:nginx /var/www/webvirtmgr
vim /etc/supervisord.conf #在文件末尾添加

[program:webvirtmgr]
command=/usr/bin/python /var/www/webvirtmgr/manage.py run_gunicorn -c /var/www/webvirtmgr/conf/gunicorn.conf.py
directory=/var/www/webvirtmgr
autostart=true
autorestart=true
logfile=/var/log/supervisor/webvirtmgr.log
log_stderr=true
user=nginx

[program:webvirtmgr-console]
command=/usr/bin/python /var/www/webvirtmgr/console/webvirtmgr-console
directory=/var/www/webvirtmgr
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/webvirtmgr-console.log
redirect_stderr=true
user=nginx

修改/var/www/webvirtmgr/conf/gunicorn.conf.py
bind = "0:8000"
</code></pre></div></div>

<h4 id="设置开机启动">设置开机启动</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chkconfig supervisord on
chkconfig nginx on
vim /etc/rc.local
      /usr/sbin/setsebool httpd_can_network_connect true
</code></pre></div></div>

<h4 id="启动进程">启动进程</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>service nginx start
service supervisord start
</code></pre></div></div>

<h4 id="访问">访问</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://$server_ip/login/
</code></pre></div></div>


      
    </div>
    <br/>
    <div>
      <cite>2016-07-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#KVM">KVM</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/07/Yum%E4%B8%AD-releasever%E5%92%8C-basearch%E7%9A%84%E5%8F%96%E5%80%BC.html">Yum中$releasever和$basearch的取值</a></h1>
    <div class="post_at_index">
      <h4 id="查看etcyumreposdcentos-baserepo">查看/etc/yum.repos.d/CentOS-Base.repo</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[base]
name=CentOS-$releasever - Base
mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os&amp;infra=$infra
#baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</code></pre></div></div>

<p>其实在日常使用之中，我们在很多地方，特别是脚本内看到了调用<code>$releasever</code>和<code>$basearch</code></p>

<ol>
  <li>$releasever的值,这个表示当前系统的发行版本</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera /]# rpm -qi centos-release
Name        : centos-release               Relocations: (not relocatable)
Version     : 6                                 Vendor: CentOS
Release     : 7.el6.centos.12.3             Build Date: Tue 04 Aug 2015 12:13:46 AM CST
Install Date: Sat 21 May 2016 03:31:27 AM CST      Build Host: c6b9.bsys.dev.centos.org
Group       : System Environment/Base       Source RPM: centos-release-6-7.el6.centos.12.3.src.rpm
Size        : 35634                            License: GPLv2
Signature   : RSA/SHA1, Tue 04 Aug 2015 12:15:08 AM CST, Key ID 0946fca2c105b9de
Packager    : CentOS BuildSystem &lt;http://bugs.centos.org&gt;
Summary     : CentOS release file
Description :
CentOS release files

# 其中Version 6 就是我们的版本号
</code></pre></div></div>

<ol>
  <li>$basearch是我们的系统硬件架构(CPU指令集),就是我们常说的i386\i486\i586\i686\</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera /]# arch
i386
</code></pre></div></div>
<p>但是，当我在命令行查看是却发现<code>$releasever</code>和<code>$basearch</code>是空的。
<br />
Google 一下之后，说明Yum变量的说明可以在这里（5.3.3. Using Yum Variables）找到，说明如下：</p>
<blockquote>
  <p>5.3.3. Using Yum Variables</p>
</blockquote>

<p>You can use and reference the following built-in variables in yum commands and in all Yum configuration files (that is, /etc/yum.conf and all .repo files in the /etc/yum.repos.d/ directory):</p>

<p>$releasever<br />
You can use this variable to reference the release version of Red Hat Enterprise Linux. Yum obtains the value of $releasever from the distroverpkg=value line in the /etc/yum.conf configuration file. If there is no such line in /etc/yum.conf, then yum infers the correct value by deriving the version number from the redhat-release package.</p>

<p>$arch<br />
You can use this variable to refer to the system’s CPU architecture as returned when calling Python’s os.uname() function. Valid values for $arch include: i586, i686 and x86_64.</p>

<p>$basearch<br />
You can use $basearch to reference the base architecture of the system. For example, i686 and i586 machines both have a base architecture of i386, and AMD64 and Intel64 machines have a base architecture of x86_64.</p>

<p>$YUM0-9<br />
These ten variables are each replaced with the value of any shell environment variables with the same name. If one of these variables is referenced (in /etc/yum.conf for example) and a shell environment variable with the same name does not exist, then the configuration file variable is not replaced.</p>

<p>To define a custom variable or to override the value of an existing one, create a file with the same name as the variable (without the “$” sign) in the /etc/yum/vars/ directory, and add the desired value on its first line.</p>

<p>For example, repository descriptions often include the operating system name. To define a new variable called $osname, create a new file with “Red Hat Enterprise Linux” on the first line and save it as /etc/yum/vars/osname:</p>

<p><code>echo “Red Hat Enterprise Linux” &gt; /etc/yum/vars/osname</code></p>

<p>Instead of “Red Hat Enterprise Linux 6”, you can now use the following in the .repo files: name=$osname $releasever</p>

<p>文中说到$releasever的定义可以查看 /etc/yum.conf 文件的事distroverpkg=value 行，打开 /etc/yum.conf 看一下，默认文件（我的是CentOS 6）内容如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[main]
cachedir=/var/cache/yum/$basearch/$releasever
keepcache=0
debuglevel=2
logfile=/var/log/yum.log
exactarch=1
obsoletes=1
gpgcheck=1
plugins=1
installonly_limit=5
bugtracker_url=http://bugs.centos.org/set_project.php?project_id=16&amp;ref=http://bugs.centos.org/bug_report_page.php?category=yum
distroverpkg=centos-release
</code></pre></div></div>

<p>distroverpkg=centos-release 代表什么？ 去哪找 centos-release 。找到这里我再一次表示困惑。
不过另一篇文章进行了我的视野： yum的$releasever真是太反动了， 关键内空如下：<br />
在 /etc/yum.repos.d/ 目录下的软件库定义文件中，常常会在 baseurl 的路径中提到 $releasever 这个变量，表示当前发行版的大版本号，但大家知道这个变量是在哪设置的吗？我 grep 了整个 etc 目录都没找到，还是看了 yum.conf 才知道的，是在 yum.conf 文件里 distroverpkg 选项定义的。但这个选项就很有问题：<br />
distroverpkg 和 releasever 名字不同，且看不出什么联系
distroverpkg 的值，并不是明文，而是“redhat-release”。不知道大家看到这个会有什么想法，反正我是首先想到了 /etc/redhat-release 文件，但我错了。实际上指的是 redhat-release 这个RPM包。所谓“distroverpkg=redhat-release”的意思，其实是将 $releasever 设置为 redhat-release 这个RPM包的版本号.</p>

<h5 id="小结">小结：<br /></h5>
<p>yum中的$releasever变量是取redhat-release-server rpm包的属性值( %{version})。
[root@ldap01 ~]# rpm -q –qf %{version} redhat-release-server;echo
6Server</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-07-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Yum">Yum</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/07/Manage-Tomcat-Service-Use-Shell-Script.html">Manage Tomcat Service Use Shell Script</a></h1>
    <div class="post_at_index">
      <h4 id="tomcat-项目管理交互式脚本">Tomcat 项目管理交互式脚本.</h4>

<ul>
  <li>Install pssh</li>
  <li>Use Key Login Server Hosts</li>
  <li>~/.ssh/config 配置使用host名登录服务</li>
  <li>指定 Server Group Files 存放位置</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#!/bin/bash

# Author Alex LU
# Date 2016-07-20
# Version 1.0

# HostFile
HostDIR=~/.ssh/host/

# war包上传到该目录
# /warfolder

:'
jobs_select (){
    STRING=``cat $vmname | grep group
    if [ -z "$STRING" ]
    then
        job_tomcat
    else
        job2_tomcat
    fi
}
'

function HOST()
{
    echo ""
    echo "############ Host List ###############"
    echo "ckgroup:ck01,ck02,ck03,ck04"
    echo "sjgroup:sj01,sj02,sj03,sj04"
    echo "ddgroup:dd01,dd02,dd03,dd04"
    echo "htgroup:ht01,ht02"
    echo "othergroup:report,tg"
    echo "######################################"
    echo ""
    echo " Tips: 如果要选择ck01，则输入ck01即可，如果输入ck组，输入ckgroup即可,如果要退出当前脚本输入exit"
    echo " Tips: 退回上一步请输入back"
    read -p "请输入你的选择:" vmname

    case "$vmname" in
        ck01|ck02|ck03|ck04|sj01|sj02|sj03|sj04|dd01|dd02|dd03|dd04|report|tg|ht01|ht02)
            job_tomcat $vmname
            ;;
        ckgroup|sjgroup|htgroup|ddgroup|othergroup)
            job2_tomcat $vmname
            ;;
        exit)
            exit 0;
            ;;
        back)
            clear
            echo ""
            echo "Tips: 欢迎使用Tomcat项目服务管理工具,您需要预先安装pssh工具，以及配置好ssh免密登录到服务器"
            main
            ;;
        *)
            echo "请输入的选择!"
            HOST
            ;;
    esac
}

function job_tomcat ()
{
    echo ""
    echo "############ 动作 ###############"
    echo "  1. 查看当前tomcat7状态"
    echo "  2. 关闭tomcat7"
    echo "  3. 启动tomcat7"
    echo "  4. 重启tomcat7"
    echo "  5. 获取最近200行日志"
    echo "  6. 重新选择主机"
    echo "  7. 回到顶层目录"
    echo ""
    echo "#################################"

    read -p "请输入你的选择:" service_tomcat

    case $service_tomcat in
        1)
        pssh -H $vmname -i "ps aux | grep tomcat"
        job_tomcat
        ;;
        2)
        pssh -H $vmname -i "service tomcat7 stop"
        # tips： 下面grep的字符串要和你的tomcat项目名称契合
        pssh -H $vmname -i "ps aux | grep tomcat7 | awk '{print $2}' | xargs kill -9 "
        # tips: 下面用到的路径为绝对路径，请更改为自己tomcat的目录，也可以在前面增加自定义变量
        pssh -H $vmname -i "rm -rf /tomcat7/work/*"
        pssh -H $vmname -i "rm -rf /tomcat7/logs/*"
        pssh -H $vmname -i "rm -rf /tomcat7/temp/*"
        job_tomcat
        ;;
        3)
        pssh -H $vmname -i "service tomcat7 start"
        job_tomcat
        ;;
        4)
        pssh -H $vmname -i "service tomcat7 stop"
        # tips： 下面grep的字符串要和你的tomcat项目名称契合
        pssh -H $vmname -i "ps aux | grep tomcat7 | awk '{print $2}' | xargs kill -9 "
        # tips: 下面用到的路径为绝对路径，请更改为自己tomcat的目录，也可以在前面增加自定义变量
        pssh -H $vmname -i "rm -rf /tomcat7/work/*"
        pssh -H $vmname -i "rm -rf /tomcat7/logs/*"
        pssh -H $vmname -i "rm -rf /tomcat7/temp/*"
        sleep 1
        pssh -H $vmname -i "service tomcat7 start"
        job_tomcat
        ;;
        5)
        pssh -H $vmname -i "tail -n 200 /tomcat7/logs/catalina.out"
        job_tomcat
        ;;
        6)
        echo ""
        HOST
        ;;
        7)
        clear
        echo ""
        echo "Tips: 欢迎使用Tomcat项目服务管理工具,您需要预先安装pssh工具，以及配置好ssh免密登录到服务器"
        main
        ;;
        *)
        echo "请输入正确的选项！"
        job_tomcat
        ;;
    esac
}

function job2_tomcat ()
{
    echo ""
    echo "############ 动作 ###############"
    echo "  1. 查看当前tomcat7状态"
    echo "  2. 关闭tomcat7"
    echo "  3. 启动tomcat7"
    echo "  4. 重启tomcat7"
    echo "  5. 获取最近200行日志"
    echo "  6. 重新选择主机"
    echo "  7. 回到顶层目录"
    echo ""
    echo "################################"

    read -p "请输入你的选择:" service_tomcat

    case $service_tomcat in
        1)
        pssh -h $HostDIR/$vmname -i "ps aux | grep tomcat"
        job2_tomcat
        ;;
        2)
        pssh -h $HostDIR/$vmname -i "service tomcat7 stop"
        # tips： 下面grep的字符串要和你的tomcat项目名称契合
        pssh -h $HostDIR/$vmname -i "ps aux | grep tomcat7 | awk '{print $2}' | xargs kill -9 "
        # tips: 下面用到的路径为绝对路径，请更改为自己tomcat的目录，也可以在前面增加自定义变量
        pssh -h $HostDIR/$vmname -i "rm -rf /tomcat7/work/*"
        pssh -h $HostDIR/$vmname -i "rm -rf /tomcat7/logs/*"
        pssh -h $HostDIR/$vmname -i "rm -rf /tomcat7/temp/*"
        job2_tomcat
        ;;
        3)
        pssh -h $HostDIR/$vmname -i "service tomcat7 start"
        job2_tomcat
        ;;
        4)
        pssh -h $HostDIR/$vmname -i "service tomcat7 stop"
        # tips： 下面grep的字符串要和你的tomcat项目名称契合
        pssh -h $HostDIR/$vmname -i "ps aux | grep tomcat7 | awk '{print $2}' | xargs kill -9 "
        # tips: 下面用到的路径为绝对路径，请更改为自己tomcat的目录，也可以在前面增加自定义变量
        pssh -h $HostDIR/$vmname -i "rm -rf /tomcat7/work/*"
        pssh -h $HostDIR/$vmname -i "rm -rf /tomcat7/logs/*"
        pssh -h $HostDIR/$vmname -i "rm -rf /tomcat7/temp/*"
        sleep 1
        pssh -h $HostDIR/$vmname -i "service tomcat7 start"
        job2_tomcat
        ;;
        5)
        pssh -h $HostDIR/$vmname -i "tail -n 200 /tomcat7/logs/catalina.out"
        job2_tomcat
        ;;
        6)
        echo ""
        HOST
        ;;
        7)
        clear
        echo ""
        echo "Tips: 欢迎使用Tomcat项目服务管理工具,您需要预先安装pssh工具，以及配置好ssh免密登录到服务器"
        main
        ;;
        *)
        echo "请输入正确的选项！"
        job_tomcat
        ;;
    esac
}

function HOST2()
{
    echo ""
    echo "############ Host List ###############"
    echo "ckgroup:ck01,ck02,ck03,ck04"
    echo "sjgroup:sj01,sj02,sj03,sj04"
    echo "ddgroup:dd01,dd02,dd03,dd04"
    echo "htgroup:ht01,ht02"
    echo "othergroup:report,tg"
    echo "######################################"
    echo ""
# 确认是否所有项目包发布后立即启动
    echo -e "\033[7m 更新订单服务器的war包时，会自动启动tomcat程序，为了释放war包，修改order.no，请设置war包内order.no＝0 ,其它服务器tomcat不会自启动，请使用命令操作 \033[0m"
    echo " Tips: 如果要选择ck01，则输入ck01即可，如果输入ck组，输入ckgroup即可,如果要退出当前脚本输入exit"
    echo " Tips: 退回上一步请输入back"
    read -p "请输入你的选择:" vmname
    case "$vmname" in
        ck01|ck02|ck03|ck04|sj01|sj02|sj03|sj04|dd01|dd02|dd03|dd04|report|tg|ht01|ht02)
            read -p "请输入war包的名称,例如:dzcx_ck.war :" warname
            pscp_tomcat $vmname $warname
            ;;
        ckgroup|sjgroup|htgroup|othergroup)
            read -p "请输入war包的名称,例如:dzcx_ck.war :" warname
            pscp2_tomcat $vmname $warname
            ;;
        ddgroup)
            read -p "请输入war包的名称,例如:dzcx_ck.war :" warname
            pscp3_tomcat $vmname $warname
            ;;
        exit)
            exit 0;
            ;;
        back)
            clear
            echo ""
            echo "Tips: 欢迎使用Tomcat项目服务管理工具,您需要预先安装pssh工具，以及配置好ssh免密登录到服务器"
            main
            ;;
        *)
            echo "请输入的选择!"
            HOST
            ;;
    esac
}

function pscp_tomcat ()
{
    # single host
    pscp.pssh -H $vmname /warfolder/"$warname" /tomcat7/webapps/
    HOST2
}

function pscp2_tomcat ()
{
    # group
    pscp.pssh -h $HostDIR/$vmname /warfolder/"$warname" /tomcat7/webapps/
    HOST2
}

function pscp3_tomcat ()
{
    # group dd 因为订单需要修改服务器编号
    pscp.pssh -h $HostDIR/$vmname /warfolder/"$warname" /tomcat7/webapps/
    pssh -h $vmname -i "service tomcat7 start"
    sleep 10
    pssh -H dd02 "sed -i 's/order.no=0/order.no=1/g' /tomcat7/webapps/dzcx_socket/WEB-INF/classes/base.properties"
    pssh -H dd03 "sed -i 's/order.no=0/order.no=2/g' /tomcat7/webapps/dzcx_socket/WEB-INF/classes/base.properties"
    pssh -H dd04 "sed -i 's/order.no=0/order.no=3/g' /tomcat7/webapps/dzcx_socket/WEB-INF/classes/base.properties"
    HOST2
}

function main ()
{
echo ""
echo "######################################"
echo ""
echo "#  1. 更新war包"
echo "#  2. 管理tomcat7"
echo "#  3. 管理mysql"
echo "#  4. 管理redis"
echo "#  5. 同步服务器时间"
echo "#  6. 清理当前屏幕"
echo "#  7. 退出"
echo ""
echo "######################################"

read -p "请输入你的选择:" num

case "$num" in
    1)
        HOST2
        ;;
    2)
        HOST
        ;;
    3)
        echo "该功能暂未开放"
        ;;
    4)
        echo "该功能暂未开放"
        ;;
    5)
        pssh -h $HostDIR/allhost -i "service ntpd restart"
        ;;
    6)
        clear
        echo ""
        echo "Tips: 欢迎使用Tomcat项目服务管理工具,您需要预先安装pssh工具，以及配置好ssh免密登录到服务器"
        main
        ;;
    7)
        exit 0
        ;;
    *)
        echo "请输入正确的数值！"
        main
    ;;
esac

}

# --------------------------------- main -------------------------------------------------

clear

echo ""
echo "Tips: 欢迎使用Tomcat项目服务管理工具,您需要预先安装pssh工具，以及配置好ssh免密登录到服务器"
command -v pssh &gt; /dev/null 2&gt;&amp;1

if [ $? -eq 0 ]
then
    main
else
    echo -e "\033[07m"
    echo -e "系统检测到您还没安装pssh，请预先安装pssh"
    echo "yum install -y epel-release"
    echo "yum install -y pssh"
    echo "安装成功请重新运行此脚本"
    echo -e "\033[0m"

fi


</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2016-07-26</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Shell">Shell</a>
      , 
      <a href="/tags.html#CentOS">CentOS</a>
      , 
      <a href="/tags.html#Tomcat">Tomcat</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/07/HowTo-Play-Pokemon-GO-in-China.html">HowTo Play Pokemon GO in China</a></h1>
    <div class="post_at_index">
      <h2 id="installtions">Installtions</h2>

<ul>
  <li><a href="http://www.tutuapp.cn">TuTuAPP</a></li>
  <li><a href="https://shadowsocks.biz/?ref=518">VPN</a></li>
  <li><a href="https://accounts.google.com">Google Account ID</a></li>
</ul>

<p>&emsp;&emsp;最近看到身边朋友都在玩Pokemon GO, 心痒难耐，于是跟同事请教琢磨了，终于在自己的手机上玩起来了，由于我的手机是iPhone 5s，身边朋友也都是iPhone，所以不确定是Android是否可以玩耍，想来应该是没有问题话，Android平台做破解等操作一直以来比iPhone更加方便。
</p>
<div align="center">
&lt;img src=http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/pokemongo1.jpg&gt;
</div>
<p>  1. 点击上面的TuTuAPP，可以打开兔兔助手的网站，用手机扫描首页的二维码(可以用微信等，带有二维码扫描的都可以)，注意如果你的iPhone已经越狱，请切换标签页到越狱版本。</p>

<p>  2. 安装时注意按照提示添加信任，等待兔兔助手安装完成之后，打开软件，在Search栏输入“精灵宝可梦GO”，请下载美区版，有两个版本：懒人版与移动版；懒人版有移动按钮，可以不需要走动躺在床上玩耍，移动版是需要人走动才能玩耍，我下载的移动版，你根据自己的喜欢选择，选择完成后，按提示按钮安装即可。</p>

<p>  3. 安装完成Pokemon GO之后也需要设定信任，请按照提示操作；好了， 到这一步，Pokemon GO已经安装在你的手机上了，下一步就是怎么登录玩耍。</p>

<p>  4. 到这里及一下的步骤能继续下去的前提是，你有一个美国的VPN节点。打开你手机App Store，搜索VPN，列表中会有很多的免费应用，因为我一直用的是付费VPN，所以对这些不是很清楚，朋友推荐<strong>ArkVPN</strong>，如果你没有付费VPN，可以试试这个，注意VPN节点要选择US，如果你也要使付费VPN的，我推荐Shadowsocks＋Potatso( App)</p>

<p>  5. 注册Google Account ID，<a href="https://account.google.com">点击</a></p>
<div align="center">
&lt;img src=http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/pokemongo2.jpg width="360" height="640"&gt;
</div>
<p>  6. 进入游戏，登录Google ID，然后授权，进入游戏。</p>
<div align="center">
&lt;img src=http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/pokemongo3.png width="360" height="640"&gt;
</div>
<p>  7. 开始捕捉你的小精灵吧，手动微笑。</p>

<blockquote>
  <p>Tips：这款游戏会大量耗电发热，因为打开摄像头捕捉小精灵；另外很容易入迷，在室外玩耍时一定要注意安全。</p>
</blockquote>

<p>  8. 注意：如果看到了GPS signal not found，说明是GPS信息丢失，这是根据GPS定位的游戏，所以这很重要，记得选择美国的VPN代理。</p>
<div align="center">
&lt;img src=http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/pokemongo4.png
width="360" height="640"&gt;
&lt;img src=http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/pokemongo5.png
width="360" height="640"&gt;
&lt;img src=http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/07/pokemongo6.png
width="360" height="640"&gt;
</div>

      
    </div>
    <br/>
    <div>
      <cite>2016-07-24</cite> <i class="icon-tag"></i>
      <a href="/tags.html#iPhone">iPhone</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    

    <!-- Pagination links -->
    <nav>
      <ul class="pagination hidden-xs">
        
        
        <li>
          <a href="/page8">&laquo; Previous</a>
        </li>
        
        

        
        <li>
          <a href="/">1</a>
        </li>
        

        
          
            
            <li>
              <a href="/page2">2</a>
            </li>
            
            <li>
              <a href="/page3">3</a>
            </li>
            
            <li>
              <a href="/page4">4</a>
            </li>
            
            <li>
              <a href="/page5">5</a>
            </li>
            
            <li class="disabled"><span>...</span></li>
            <li class="active"><a>9</a></li>
          
          <li class="disabled"><span>...</span></li>
          <li><a href="/page14">14</a></li>
        

        
        

        
        <li>
          <a href="/page10">Next &raquo;</a>
        </li>
        
      </ul>
    </nav>
  </div>
  <div class="col-xs-12 col-md-4">
		<!-- <div>
			<a class="twitter-timeline" data-width="390" data-height="640" data-theme="light" href="https://twitter.com/samzong_lu?ref_src=twsrc%5Etfw">Tweets by SAMZONG</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		</div> -->
    <div>
      <h2>传送门</h2>
      <ul>
        <li><a href="https://yuque.com/samzong">语雀-花园</a></li>
        <li><a href="https://github.com/samzong">Github</a></li>
      </ul>
    </div>
    <div class="categories">
      <h2>文章分类</h2>
      <ul class="tag_box">
        
        


  
     
    	<li><a href="/categories.html#Linux">
    		Linux <span>21</span>
    	</a></li>
     
    	<li><a href="/categories.html#CentOS">
    		CentOS <span>14</span>
    	</a></li>
     
    	<li><a href="/categories.html#Tools">
    		Tools <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#VPN">
    		VPN <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#HTML">
    		HTML <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#数据库">
    		数据库 <span>19</span>
    	</a></li>
     
    	<li><a href="/categories.html#MySQL">
    		MySQL <span>15</span>
    	</a></li>
     
    	<li><a href="/categories.html#Git">
    		Git <span>5</span>
    	</a></li>
     
    	<li><a href="/categories.html#TortoiseGit">
    		TortoiseGit <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#MongoDB">
    		MongoDB <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#PHP">
    		PHP <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Mac">
    		Mac <span>6</span>
    	</a></li>
     
    	<li><a href="/categories.html#SourceTree">
    		SourceTree <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#OpenSource">
    		OpenSource <span>11</span>
    	</a></li>
     
    	<li><a href="/categories.html#Piwik">
    		Piwik <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Python">
    		Python <span>7</span>
    	</a></li>
     
    	<li><a href="/categories.html#云服务">
    		云服务 <span>6</span>
    	</a></li>
     
    	<li><a href="/categories.html#Azure">
    		Azure <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#虚拟化">
    		虚拟化 <span>7</span>
    	</a></li>
     
    	<li><a href="/categories.html#OpenStack">
    		OpenStack <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#CloudStack">
    		CloudStack <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Zabbix">
    		Zabbix <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Tomcat">
    		Tomcat <span>5</span>
    	</a></li>
     
    	<li><a href="/categories.html#Redis">
    		Redis <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Docker">
    		Docker <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#Shell">
    		Shell <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Blog">
    		Blog <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#Ghost">
    		Ghost <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#PostgreSQL">
    		PostgreSQL <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#AWS">
    		AWS <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Aliyun">
    		Aliyun <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Redmine">
    		Redmine <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Bigdata">
    		Bigdata <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Windows">
    		Windows <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Jmeter">
    		Jmeter <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#随笔">
    		随笔 <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#闲聊">
    		闲聊 <span>3</span>
    	</a></li>
     
    	<li><a href="/categories.html#Hexo">
    		Hexo <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Javascript">
    		Javascript <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Telegram">
    		Telegram <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Metabase">
    		Metabase <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#学习">
    		学习 <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Github">
    		Github <span>1</span>
    	</a></li>
    
  



      </ul>
    </div>
    <div>
      <h2>最近文章</h2>
      <ul>
        
        <li>
          <a href="/post/2022/09/K8s%E7%B3%BB%E5%88%97-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F%E5%92%8C%E4%B8%9C%E8%A5%BF%E6%B5%81%E9%87%8F.html">K8s系列 南北流量和东西流量</a>
          南北流量和东西流量 是什么意思？


        </li>
        
        <li>
          <a href="/post/2022/07/jq-%E5%91%BD%E4%BB%A4%E8%A1%8C-Json-%E5%A4%84%E7%90%86%E7%A5%9E%E5%99%A8.html">jq 命令行 Json 处理神器</a>
          
  https://mozillazg.com/2018/01/jq-use-examples-cookbook.htm-



        </li>
        
        <li>
          <a href="/post/2022/07/%E9%97%AD%E5%85%B3%E5%A4%87%E6%88%98-11%E6%9C%88.html">闭关备战 11月</a>
          目标


        </li>
        
        <li>
          <a href="/post/2022/05/hexo-admonition.html">Hexo 增加admonition样式支持</a>
          背景


        </li>
        
        <li>
          <a href="/post/2022/05/%E5%9B%BD%E5%86%85%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-MacOS-K8s-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html">国内环境搭建 MacOS K8s 开发环境</a>
          Minikube


        </li>
        
      </ul>
    </div>
  </div>
</div>

			</div>

		</div>

    <footer>
      <div class="container">
        <div class="row mobilepadding">
          			<hr>
      &copy; 2022 船长. Powered by <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Theme Creator <a href="https://github.com/einverne" target="_blank" title="Ein Verne's GitHub Repos">Ein Verne</a> . Host on <a href="https://github.com/samzong/samzong.me" target="_blank" title="Samzong's GitHub Repos">Github</a> .
      <br><br>
      </div>
    </div>
    </footer>

    




	<script async type="text/javascript" src="/assets/themes/evjekylltheme/bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script async type="text/javascript" src="/assets/themes/evjekylltheme/webcore.js"></script>

 </body>
</html>

