<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">HowTo Use Docker create a Tomcat Project | samzong</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/2016/08/02/HowTo-Use-Docker-create-a-Tomcat-Project"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="HowTo Use Docker create a Tomcat Project | samzong"><meta data-rh="true" name="description" content="1. å®‰è£… CentOS 7.x"><meta data-rh="true" property="og:description" content="1. å®‰è£… CentOS 7.x"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2016-08-02T15:44:20.000Z"><meta data-rh="true" property="article:tag" content="Docker"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/2016/08/02/HowTo-Use-Docker-create-a-Tomcat-Project"><link data-rh="true" rel="alternate" href="https://samzong.me/2016/08/02/HowTo-Use-Docker-create-a-Tomcat-Project" hreflang="en"><link data-rh="true" rel="alternate" href="https://samzong.me/2016/08/02/HowTo-Use-Docker-create-a-Tomcat-Project" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="samzong RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="samzong Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="samzong JSON Feed"><link rel="stylesheet" href="/assets/css/styles.94db4b8a.css">
<script src="/assets/js/runtime~main.32fc6d5f.js" defer="defer"></script>
<script src="/assets/js/main.5385b353.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ«µğŸ«µğŸ«µ  è­¦é’Ÿé•¿é¸£ï¼å°Šçºªå®ˆæ³•ï¼Œæ‹’ç»ç§‘å­¦ä¸Šç½‘ï¼Œæ‹’ç»ä¼ æ’­è¿æ³•ä¿¡æ¯ï¼›å¦‚æœ‰å‘ç°ï¼Œè¯·ç«‹å³æ‹¨æ‰“ 110 !  ğŸ«µğŸ«µğŸ«µ</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="1. å®‰è£… CentOS 7.x"><header><h1 class="title_f1Hy" itemprop="headline">HowTo Use Docker create a Tomcat Project</h1><div class="container_mt6G margin-vert--md"><time datetime="2016-08-02T15:44:20.000Z" itemprop="datePublished">August 2, 2016</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-å®‰è£…-centos-7x">1. å®‰è£… CentOS 7.x<a href="#1-å®‰è£…-centos-7x" class="hash-link" aria-label="Direct link to 1. å®‰è£… CentOS 7.x" title="Direct link to 1. å®‰è£… CentOS 7.x">â€‹</a></h2>
<p>ç•¥ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-å®‰è£…-docker">2. å®‰è£… docker<a href="#2-å®‰è£…-docker" class="hash-link" aria-label="Direct link to 2. å®‰è£… docker" title="Direct link to 2. å®‰è£… docker">â€‹</a></h2>
<p>è¯¦è§ï¼š <a href="https://samzong.me/2016/07/07/HowTo-Install-Docker-on-CentOS-6-x/" target="_blank" rel="noopener noreferrer">How to Install Docker on CentOS 6.x</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-åŸºç¡€-docker-å‘½ä»¤">3. åŸºç¡€ docker å‘½ä»¤<a href="#3-åŸºç¡€-docker-å‘½ä»¤" class="hash-link" aria-label="Direct link to 3. åŸºç¡€ docker å‘½ä»¤" title="Direct link to 3. åŸºç¡€ docker å‘½ä»¤">â€‹</a></h2>
<p>è·å– centos6 docker é•œåƒ</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@docker ~ </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> pull centos6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Using default tag: latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">latest: Pulling from library/centos:centos6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">43db9dbdcb30: Downloading </span><span class="token number">41.14</span><span class="token plain"> MB/49.33 MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">43db9dbdcb30: Pull complete</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2dc64e8f8d4f: Pull complete</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">670a583e1b50: Pull complete</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">183b0bfcd10e: Pull complete</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Digest: sha256:c6674c44c6439673bf56536c1a15916639c47ea04c3d6296c5df938add67b54b</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Status: Downloaded newer image </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> centso:centos6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æŸ¥çœ‹å½“å‰æœåŠ¡å™¨ä¸Šçš„ docker é•œåƒ</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker images</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos6-visionet    latest              aeed37612ecb        </span><span class="token number">6</span><span class="token plain"> hours ago         </span><span class="token number">1.916</span><span class="token plain"> GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6             a3c09d36ab4a        </span><span class="token number">2</span><span class="token plain"> days ago          </span><span class="token number">194.6</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">registry            latest              c6c14b3960bd        </span><span class="token number">3</span><span class="token plain"> days ago          </span><span class="token number">33.28</span><span class="token plain"> MB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æŸ¥æ‰¾ docker é•œåƒ</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker search centos:centos6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                     DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">imagine10255/centos6-lnmp-php56          centos6-lnmp-php56                              </span><span class="token number">10</span><span class="token plain">                   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">lemonbar/centos6-ssh                     Installed openssh-server on centos6, defau</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.   </span><span class="token number">7</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sergeyzh/centos6-nginx                                                                   </span><span class="token number">2</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">guyton/centos6                           From official centos6 container with full </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.   </span><span class="token number">2</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">paijp/centos6-apache-php-sqlite2         php5.3.3 with sqlite2 and apache on CentOS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.   </span><span class="token number">1</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">edrans/centos6                                                                           </span><span class="token number">1</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mohri1219/centos6.7-ruby2.2.2-mysql5.6   centos6.7-ruby2.2.2-mysql5.6                    </span><span class="token number">1</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>åˆ é™¤ centos6 docker é•œåƒ</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker rmi IMAGES_NAME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker rmi centos:centos6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æŠ¥é”™å¦‚ä¸‹</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Error response from daemon: conflict: unable to remove repository reference </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;centos&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">must force</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> - container 705a30cbc002 is using its referenced image 42118e3df429</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>è¿™æ˜¯å› ä¸ºä¹‹é—´çš„è¿è¡Œçš„è¿›ç¨‹æ²¡æœ‰æ¸…æ¥šå¯¼è‡´è¯¥ images æ­£åœ¨ä½¿ç”¨ä¸­ï¼Œä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹å æœ‰ çš„è¿›ç¨‹</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker ps -a ï¼ƒ æŸ¥çœ‹æ‰€æœ‰çš„dockerè¿›ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CONTAINER ID        IMAGE               COMMAND               CREATED             STATUS                     PORTS               NAMES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">705a30cbc002        centos:centos6              </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/bin/bash&quot;</span><span class="token plain">           </span><span class="token number">6</span><span class="token plain"> minutes ago       Exited </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> minutes ago                       centos6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker rm 705a30cbc002</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">705a30cbc002</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker rmi centos:centos6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Untagged: centos:centos6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted: sha256:42118e3df429f09ca581a9deb3df274601930e428e452f7e4e9f1833c56a100a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted: sha256:d72d0199021776e77ac14a764a3decd156e9f6f18b37e25b867b0f1ca42fb3d9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted: sha256:fb178c6cea1453d089ce033b96eba0efdb42274138e042517ea2d5ea7bb51665</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted: sha256:8945af30572845a904adce2aeaf73402c842d86e99e8f10688b25cb27834110b</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted: sha256:ea9f151abb7e06353e73172dad421235611d4f6d0560ec95db26e0dc240642c1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-è¿è¡Œä¸€ä¸ª-docker-é•œåƒ">4. è¿è¡Œä¸€ä¸ª docker é•œåƒ<a href="#4-è¿è¡Œä¸€ä¸ª-docker-é•œåƒ" class="hash-link" aria-label="Direct link to 4. è¿è¡Œä¸€ä¸ª docker é•œåƒ" title="Direct link to 4. è¿è¡Œä¸€ä¸ª docker é•œåƒ">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¿›å…¥äº¤äº’å¼ç¨‹åº">è¿›å…¥äº¤äº’å¼ç¨‹åº<a href="#è¿›å…¥äº¤äº’å¼ç¨‹åº" class="hash-link" aria-label="Direct link to è¿›å…¥äº¤äº’å¼ç¨‹åº" title="Direct link to è¿›å…¥äº¤äº’å¼ç¨‹åº">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker run  -it centos:centos6 /bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@c1d190f95562 /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cat /etc/redhat-release</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CentOS release </span><span class="token number">6.8</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Final</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Install openssh-server and httpd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@d8c122dbe09d:/</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install -y openssh-sever httpd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@d8c122dbe09d:/</span><span class="token comment" style="color:rgb(98, 114, 164)"># exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># æ³¨æ„å½“ä½ æ‰§è¡Œ exitï¼Œä»å®¹å™¨ä¹‹ä¸­é€€å‡ºæ—¶ï¼Œå®¹å™¨ä¹Ÿä¼šéšç€å…³é—­ï¼Œè¿™æ—¶å¦‚æœè¿˜ç»§ç»­æ‰§è¡Œä¸Šæ¡å‘½ä»¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä½ ä¼šå‘ç°ä¹‹å‰æ‰€æœ‰çš„æ“ä½œéƒ½è¢«è¿˜åŸï¼Œå› ä¸ºç›¸å¯¹äº dockerï¼Œåˆæ˜¯æ–°å¼€äº†ä¸€ä¸ªè¿›ç¨‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># åœ¨ exit é€€å‡ºä¹‹åï¼Œä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸Šæ¬¡æäº¤ï¼Œç„¶å commit ä¿®æ”¹ï¼Œä¾¿å¯ä¿å­˜ä¹‹å‰çš„ä¿®æ”¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker ps -l</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker commit c1d190f95562 centos:centos6-httpd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sha256:77eb12e36c7bbe9ef874555b1873019022b5258740aa731627e2cd6fa749c325</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker images</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6-httpd       77eb12e36c7b        </span><span class="token number">3</span><span class="token plain"> seconds ago       </span><span class="token number">290.3</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos6-visionet    latest              aeed37612ecb        </span><span class="token number">6</span><span class="token plain"> hours ago         </span><span class="token number">1.916</span><span class="token plain"> GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6             a3c09d36ab4a        </span><span class="token number">2</span><span class="token plain"> days ago          </span><span class="token number">194.6</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">registry            latest              c6c14b3960bd        </span><span class="token number">3</span><span class="token plain"> days ago          </span><span class="token number">33.28</span><span class="token plain"> MB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-ç¼–è¾‘-dockerfile">5. ç¼–è¾‘ Dockerfile<a href="#5-ç¼–è¾‘-dockerfile" class="hash-link" aria-label="Direct link to 5. ç¼–è¾‘ Dockerfile" title="Direct link to 5. ç¼–è¾‘ Dockerfile">â€‹</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># dockfile çš„ç¬¬ä¸€è¡Œä¸€å®šæ˜¯ FROMï¼ŒæŒ‡å®šäº†çˆ¶é•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FROM centos:centos6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># RUN æŒ‡çš„æ˜¯è¿è¡Œçš„å‘½ä»¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> epel-release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> bash-completion</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> openssh-server openssh-client </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN </span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/UsePAM yes/UsePAM no/g&#x27;</span><span class="token plain"> /etc/ssh/sshd_config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># å¢åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œå¹¶èµ‹äºˆ sudo æƒé™</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN </span><span class="token function" style="color:rgb(80, 250, 123)">useradd</span><span class="token plain"> visionet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;visionet:visionet&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> chpasswd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;visionet   ALL=(ALL)       ALL&quot;</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> /etc/sudoers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ï¼ƒ æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œä¸€ä¸‹ä¸¤ä¸ªå‘½ä»¤ï¼Œsshd æ˜¯æ— æ³•è¿œç¨‹ç™»é™†çš„</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN ssh-keygen </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-t</span><span class="token plain"> dsa </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token plain"> /etc/ssh/ssh_host_dsa_key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN ssh-keygen </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-t</span><span class="token plain"> rsa </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token plain"> /etc/ssh/ssh_host_rsa_key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ï¼ƒ EXPOSE </span><span class="token number">22</span><span class="token plain">ï¼Œå°† </span><span class="token number">22</span><span class="token plain"> ç«¯å£æš´éœ²å‡ºæ¥ï¼Œæ–¹ä¾¿ </span><span class="token function" style="color:rgb(80, 250, 123)">ssh</span><span class="token plain"> è¿œç¨‹è¿æ¥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RUN </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> /var/run/sshd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">EXPOSE </span><span class="token number">22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ï¼ƒ CMD ä¸ºç³»ç»Ÿå†…éƒ¨æ‰§è¡Œå‘½ä»¤</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CMD </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/usr/sbin/sshd&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-D&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-ç”Ÿæˆè‡ªå®šä¹‰-docker-é•œåƒ">6. ç”Ÿæˆè‡ªå®šä¹‰ docker é•œåƒ<a href="#6-ç”Ÿæˆè‡ªå®šä¹‰-docker-é•œåƒ" class="hash-link" aria-label="Direct link to 6. ç”Ÿæˆè‡ªå®šä¹‰ docker é•œåƒ" title="Direct link to 6. ç”Ÿæˆè‡ªå®šä¹‰ docker é•œåƒ">â€‹</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># build ç¼–è¯‘é•œåƒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker build -f dockerfile3 -t centos:centos6-ssh .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sending build context to Docker daemon </span><span class="token number">44.54</span><span class="token plain"> kB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">1</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> FROM centos:centos6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> a3c09d36ab4a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">2</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> epel-release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 04d81f280a63</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">3</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> bash-completion</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 5ca26894dc9d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">4</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> openssh-server openssh-client </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 42278450311e</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">5</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN </span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-i</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/UsePAM yes/UsePAM no/g&#x27;</span><span class="token plain"> /etc/ssh/sshd_config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> db35bef562a2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">6</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> dc9f2b82e198</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">7</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN </span><span class="token function" style="color:rgb(80, 250, 123)">useradd</span><span class="token plain"> visionet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 06c574a51755</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">8</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;visionet:visionet&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> chpasswd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 03412f053d04</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">9</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;visionet   ALL=(ALL)       ALL&quot;</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> /etc/sudoers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> bf8476812a62</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">10</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN ssh-keygen </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-t</span><span class="token plain"> dsa </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token plain"> /etc/ssh/ssh_host_dsa_key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 2314cce75171</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">11</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN ssh-keygen </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-t</span><span class="token plain"> rsa </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-f</span><span class="token plain"> /etc/ssh/ssh_host_rsa_key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 99304cd9ac15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">12</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> RUN </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> /var/run/sshd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> f87283751553</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">13</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> EXPOSE </span><span class="token number">22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> 56c41202dcb9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Step </span><span class="token number">14</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> CMD /usr/sbin/sshd </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-D</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> Using cache</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ---</span><span class="token operator">&gt;</span><span class="token plain"> d6dccb483fa6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Successfully built d6dccb483fa6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker images</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6-ssh         d6dccb483fa6        </span><span class="token number">2</span><span class="token plain"> minutes ago         </span><span class="token number">363</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6-httpd       77eb12e36c7b        </span><span class="token number">6</span><span class="token plain"> minutes ago       </span><span class="token number">290.3</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos6-visionet    latest              aeed37612ecb        </span><span class="token number">6</span><span class="token plain"> hours ago         </span><span class="token number">1.916</span><span class="token plain"> GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6             a3c09d36ab4a        </span><span class="token number">2</span><span class="token plain"> days ago          </span><span class="token number">194.6</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">registry            latest              c6c14b3960bd        </span><span class="token number">3</span><span class="token plain"> days ago          </span><span class="token number">33.28</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># åå°è¿è¡Œ docker å®¹å™¨ï¼Œå¹¶æŒ‡å®š nat ç«¯å£è½¬å‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker run -d -p 2222:22 -P --name=sshd centos:centos6-ssh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b4211f7a304d9e34b72b510230be2c7a76b276886b488f08f3e12896a4d3c172</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-ssh-ç™»é™†åˆ°-docker-å®¹å™¨å†…éƒ¨ç½²é¡¹ç›®ç¯å¢ƒ">7. ssh ç™»é™†åˆ° docker å®¹å™¨å†…ï¼Œéƒ¨ç½²é¡¹ç›®ç¯å¢ƒ<a href="#7-ssh-ç™»é™†åˆ°-docker-å®¹å™¨å†…éƒ¨ç½²é¡¹ç›®ç¯å¢ƒ" class="hash-link" aria-label="Direct link to 7. ssh ç™»é™†åˆ° docker å®¹å™¨å†…ï¼Œéƒ¨ç½²é¡¹ç›®ç¯å¢ƒ" title="Direct link to 7. ssh ç™»é™†åˆ° docker å®¹å™¨å†…ï¼Œéƒ¨ç½²é¡¹ç›®ç¯å¢ƒ">â€‹</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># inspect æŸ¥çœ‹ docker å®¹å™¨ IP åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker inspect sshd | grep IPAddress</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ssh visionet@172.17.0.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">visionet@172.17.0.2&#x27;s password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">visionet@b4211f7a304d ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Install mysql</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Install tomcat server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">visionet@b4211f7a304d ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker stop sshd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sshd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker ps -l</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CONTAINER ID        IMAGE                COMMAND               CREATED             STATUS                       PORTS               NAMES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b4211f7a304d        centos:centos6-ssh   </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/usr/sbin/sshd -D&quot;</span><span class="token plain">   </span><span class="token number">6</span><span class="token plain"> minutes ago       Exited </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">255</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> seconds ago                       sshd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker commit b4211f7a304d centos:centos6-tomcat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sha256:b4f114d5484822d9a3ddf1100b76b460985ba5e5d31e936570e8d7dbd8df282c</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@docker ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># docker images</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6-tomcat      b4f114d54848        </span><span class="token number">4</span><span class="token plain"> seconds ago       </span><span class="token number">363.1</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6-httpd       77eb12e36c7b        </span><span class="token number">15</span><span class="token plain"> minutes ago      </span><span class="token number">290.3</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos6-visionet    latest              aeed37612ecb        </span><span class="token number">7</span><span class="token plain"> hours ago         </span><span class="token number">1.916</span><span class="token plain"> GB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6-ssh         d6dccb483fa6        </span><span class="token number">9</span><span class="token plain"> hours ago         </span><span class="token number">363</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">centos              centos6             a3c09d36ab4a        </span><span class="token number">2</span><span class="token plain"> days ago          </span><span class="token number">194.6</span><span class="token plain"> MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">registry            latest              c6c14b3960bd        </span><span class="token number">3</span><span class="token plain"> days ago          </span><span class="token number">33.28</span><span class="token plain"> MB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-æ¨é€-centos-åˆ°ç§æœ‰-docker-ä»“åº“">8. æ¨é€ centos<!-- -->:centos6-tomcat<!-- --> åˆ°ç§æœ‰ docker ä»“åº“<a href="#8-æ¨é€-centos-åˆ°ç§æœ‰-docker-ä»“åº“" class="hash-link" aria-label="Direct link to 8-æ¨é€-centos-åˆ°ç§æœ‰-docker-ä»“åº“" title="Direct link to 8-æ¨é€-centos-åˆ°ç§æœ‰-docker-ä»“åº“">â€‹</a></h2>
<blockquote>
<p>docker push</p>
</blockquote></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/docker">Docker</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2016/08/02/HowTo-Install-Openfire-on-CentOS"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">HowTo Install Openfire  on CentOS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2016/08/01/ni-hao-ba-yue"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">ä½ å¥½ï¼Œå…«æœˆ</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-å®‰è£…-centos-7x" class="table-of-contents__link toc-highlight">1. å®‰è£… CentOS 7.x</a></li><li><a href="#2-å®‰è£…-docker" class="table-of-contents__link toc-highlight">2. å®‰è£… docker</a></li><li><a href="#3-åŸºç¡€-docker-å‘½ä»¤" class="table-of-contents__link toc-highlight">3. åŸºç¡€ docker å‘½ä»¤</a></li><li><a href="#4-è¿è¡Œä¸€ä¸ª-docker-é•œåƒ" class="table-of-contents__link toc-highlight">4. è¿è¡Œä¸€ä¸ª docker é•œåƒ</a><ul><li><a href="#è¿›å…¥äº¤äº’å¼ç¨‹åº" class="table-of-contents__link toc-highlight">è¿›å…¥äº¤äº’å¼ç¨‹åº</a></li></ul></li><li><a href="#5-ç¼–è¾‘-dockerfile" class="table-of-contents__link toc-highlight">5. ç¼–è¾‘ Dockerfile</a></li><li><a href="#6-ç”Ÿæˆè‡ªå®šä¹‰-docker-é•œåƒ" class="table-of-contents__link toc-highlight">6. ç”Ÿæˆè‡ªå®šä¹‰ docker é•œåƒ</a></li><li><a href="#7-ssh-ç™»é™†åˆ°-docker-å®¹å™¨å†…éƒ¨ç½²é¡¹ç›®ç¯å¢ƒ" class="table-of-contents__link toc-highlight">7. ssh ç™»é™†åˆ° docker å®¹å™¨å†…ï¼Œéƒ¨ç½²é¡¹  ç›®ç¯å¢ƒ</a></li><li><a href="#8-æ¨é€-centos-åˆ°ç§æœ‰-docker-ä»“åº“" class="table-of-contents__link toc-highlight">8. æ¨é€ centos åˆ°ç§æœ‰ docker ä»“åº“</a></li></ul></div></div></div></div></div></div>
</body>
</html>