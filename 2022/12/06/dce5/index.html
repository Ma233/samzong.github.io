<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">保姆式安装 DCE5.0 | SAMZONG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/2022/12/06/dce5"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="cooking, blog"><meta data-rh="true" property="og:title" content="保姆式安装 DCE5.0 | SAMZONG"><meta data-rh="true" name="description" content="前言"><meta data-rh="true" property="og:description" content="前言"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-12-06T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/2022/12/06/dce5"><link data-rh="true" rel="alternate" href="https://samzong.me/2022/12/06/dce5" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://samzong.me/2022/12/06/dce5" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://QHUDGE595D-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="SAMZONG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="SAMZONG Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="SAMZONG" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.757af0c1.css">
<link rel="preload" href="/assets/js/runtime~main.d1f926e9.js" as="script">
<link rel="preload" href="/assets/js/main.ba5f81a5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you find my articles beneficial, feel free to follow me on <a target="_blank" rel="noopener noreferrer" href="https://github.com/samzong">GitHub</a>! ⭐️</div><button type="button" aria-label="关闭" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://samzong.me" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.png" alt="Samzong" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Samzong" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SAMZONG</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/tags">Tags</a><a class="navbar__item navbar__link" href="/archives">Archives</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为暗黑模式）" aria-label="切换浅色/暗黑模式（当前为暗黑模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/07/13/Google 搜索技巧整理">Google 搜索技巧整理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/02/21/Ketbrains激活服务器">在线服务器激活 Ketbrains</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/12/16/raycast-01">Raycast 你的年度报告已到达</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/12/15/Skoala-Install-Dce5">DCE5-Skoala 安装教程</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/2022/12/06/dce5">保姆式安装 DCE5.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/28/cskefu-opensource-project">开源项目 - 春松客服</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/23/what-is-hukou">What is Hukou</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/20/Copy-To-Markdwon">Copy to Markdown</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/16/Dubbo-基础知识">Dubbo 基础知识梳理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/11/10/Panads fill NaN value to Zero">Panads fill NaN value to Zero</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/10/22/Redash for Docker 部署">Redash for Docker 部署</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/10/18/JWT 内置的方式">JWT 内置的方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/10/06/唧唧复唧唧">唧唧复唧唧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/10/04/自卑与超越">自卑与超越</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/09/28/GitLab Forked 如何跟随upstream主库">GitLab Forked 如何跟随 upstream 主库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/09/27/Kafka 竞品调研及功能设计">Kafka 调研及功能设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/09/22/Poetry 使用笔记">Poetry 使用笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/09/20/Skoala 部署教程">Skoala 部署教程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/09/18/使用 canal 进行数据库增量同步">使用 canal 进行数据库增量同步</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/09/12/K8s系列-南北流量和东西流量">K8s 系列 南北流量和东西流量</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/08/17/Docker for Mac 网络技巧">Docker for Mac 网络技巧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/08/15/瓦尔登湖">瓦尔登湖</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/08/10/Contour 学习笔记">Contour 学习笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/07/24/通过pipreqs获取当前项目的依赖库">通过 pipreqs 获取当前项目的依赖库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/07/22/jq-命令行-Json-处理神器">jq 命令行 Json 处理神器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/7/22/Contour &amp; Envoy 指标">Contour &amp; Envoy 指标</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/07/21/微服务引擎网关能力介绍">微服务引擎网关能力介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/07/18/闭关备战-11月">闭关备战 11 月</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/07/18/i18n 使用构建">i18n 使用构建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/29/Mac上安装软件的方式">Mac 上安装软件的方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/18/HTTPProxy API 创建">HTTPProxy API 创建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/28/hexo-admonition">Hexo 增加 admonition 样式支持</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/18/Gitlab 发送企微机器人消息">Gitlab 发送企微机器人消息</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/17/国内环境搭建-MacOS-K8s-开发环境">国内环境搭建 MacOS K8s 开发环境</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/17/Kubernetes Operator">Kubernetes Operator</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/11/Contour 设计理念">Contour 设计理念</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/07/MacOS隐藏Dock栏中特定应用">MacOS 隐藏 Dock 栏中特定应用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/06/满足预期的文档站-Mkdocs">满足预期的文档站 Mkdocs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/06/腾讯云微服务网关">腾讯云微服务网关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/06/阿里云云原生网关">阿里云云原生网关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/03/Alfred-Workflow-推荐">Alfred Workflow 推荐</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/03/youtube-dl-下载-YouTube-视频">youtube-dl 下载 YouTube 视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/05/03/淘宝Python SDK优化支持Python3">淘宝 Python SDK 优化支持 Python3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/24/kubernetes 学习之路">kubernetes 学习之路</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/22/GitHub-Pages-的妙用">GitHub Pages 的妙用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/21/Kubernetes 部署错误解决汇总">Kubernetes 部署错误解决汇总</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/19/需要了解的竞品">需要了解的 K8s 发行版本</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/18/CKA-考试准备">CKA 考试准备</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/17/Docker-Run-at-Apple-Silicon-M1">Dockerfile Run at M1 processor build failed</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/04/17/python Request install pip error">python Request install pip error</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">保姆式安装 DCE5.0</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-12-06T00:00:00.000Z" itemprop="datePublished">2022年12月6日</time> · <!-- -->阅读需 30 分钟</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前言">前言<a href="#前言" class="hash-link" aria-label="前言的直接链接" title="前言的直接链接">​</a></h2><p>本文完成了从 0 到 1 的完成 DCE5.0 社区版的安装；其中包含社区版需要一个 K8s 集群、与一些安装细节和注意事项。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="集群规划">集群规划<a href="#集群规划" class="hash-link" aria-label="集群规划的直接链接" title="集群规划的直接链接">​</a></h3><p>当前计划使用在 3 台 UCloud 的 VM，配置均为 8 核 16G。</p><table><thead><tr><th>角色</th><th>主机名</th><th>操作系统</th><th>IP</th><th>配置</th></tr></thead><tbody><tr><td>master</td><td>master-k8s-com</td><td>CentOS 7.9</td><td>10.23.245.63</td><td>8 核 16G 300GB</td></tr><tr><td>node01</td><td>node01-k8s-com</td><td>CentOS 7.9</td><td>10.23.104.173</td><td>8 核 16G 300GB</td></tr><tr><td>node02</td><td>node02-k8s-com</td><td>CentOS 7.9</td><td>10.23.112.244</td><td>8 核 16G 300GB</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组件介绍">组件介绍<a href="#组件介绍" class="hash-link" aria-label="组件介绍的直接链接" title="组件介绍的直接链接">​</a></h3><ul><li>Kubernetes  1.24.8</li><li>CRI containerd</li><li>CNI Calico</li><li>StorageClass HwameiStior</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="节点系统优化">节点系统优化<a href="#节点系统优化" class="hash-link" aria-label="节点系统优化的直接链接" title="节点系统优化的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置主机名">配置主机名<a href="#配置主机名" class="hash-link" aria-label="配置主机名的直接链接" title="配置主机名的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hostnamctl set-hostname master-k8s-com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="添加-etchosts-配置">添加 /etc/hosts 配置<a href="#添加-etchosts-配置" class="hash-link" aria-label="添加 /etc/hosts 配置的直接链接" title="添加 /etc/hosts 配置的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/hosts</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">10.23.245.63    master-k8s-com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">10.23.104.173   node01-k8s-com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">10.23.112.244   node02-k8s-com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-swap">禁用 Swap<a href="#禁用-swap" class="hash-link" aria-label="禁用 Swap的直接链接" title="禁用 Swap的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">swapoff -a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/ swap / s/^/#/&#x27;</span><span class="token plain"> /etc/fstab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-selinux">禁用 SElinux<a href="#禁用-selinux" class="hash-link" aria-label="禁用 SElinux的直接链接" title="禁用 SElinux的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">setenforce </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span><span class="token plain"> /etc/selinux/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="关闭防火墙">关闭防火墙<a href="#关闭防火墙" class="hash-link" aria-label="关闭防火墙的直接链接" title="关闭防火墙的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl stop firewalld</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl disable firewalld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="允许-iptables-检查桥接流量">允许 iptables 检查桥接流量<a href="#允许-iptables-检查桥接流量" class="hash-link" aria-label="允许 iptables 检查桥接流量的直接链接" title="允许 iptables 检查桥接流量的直接链接">​</a></h4><p>加载 <code>br_netfilter</code> 模块</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/modules-load.d/kubernetes.conf</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">br_netfilter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 加载模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">modprobe br_netfilter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改 <code>net.bridge.bridge-nf-call-iptables</code> 设置为 1</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/sysctl.d/kubernetes.conf</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 刷新配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sysctl --system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="k8s-环境安装">K8s 环境安装<a href="#k8s-环境安装" class="hash-link" aria-label="K8s 环境安装的直接链接" title="K8s 环境安装的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker">安装 Docker<a href="#安装-docker" class="hash-link" aria-label="安装 Docker的直接链接" title="安装 Docker的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker-的软件源">安装 Docker 的软件源<a href="#安装-docker-的软件源" class="hash-link" aria-label="安装 Docker 的软件源的直接链接" title="安装 Docker 的软件源的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y yum-utils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum-config-manager </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --add-repo </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    https://download.docker.com/linux/centos/docker-ce.repo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker-和-containerdio">安装 Docker 和 Containerd.io<a href="#安装-docker-和-containerdio" class="hash-link" aria-label="安装 Docker 和 Containerd.io的直接链接" title="安装 Docker 和 Containerd.io的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum -y </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> docker-ce docker-ce-cli containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改-docker-的配置">修改 Docker 的配置<a href="#修改-docker-的配置" class="hash-link" aria-label="修改 Docker 的配置的直接链接" title="修改 Docker 的配置的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">touch</span><span class="token plain"> /etc/docker/daemon.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/docker/daemon.json</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改-containerd-的配置">修改 Containerd 的配置<a href="#修改-containerd-的配置" class="hash-link" aria-label="修改 Containerd 的配置的直接链接" title="修改 Containerd 的配置的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 清理配置文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -f /etc/containerd/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 初始化配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> containerd config default </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> /etc/containerd/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 更新配置文件内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/SystemdCgroup\ =\ false/SystemdCgroup\ =\ true/&#x27;</span><span class="token plain"> /etc/containerd/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/k8s.gcr.io\/pause/registry.cn-hangzhou.aliyuncs.com\/google_containers\/pause/g&#x27;</span><span class="token plain"> /etc/containerd/config.toml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动服务配置">启动服务配置<a href="#启动服务配置" class="hash-link" aria-label="启动服务配置的直接链接" title="启动服务配置的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> --now </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> --now containerd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="检查配置成功">检查配置成功<a href="#检查配置成功" class="hash-link" aria-label="检查配置成功的直接链接" title="检查配置成功的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl status </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> containerd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kubernetes-系统组件">安装 Kubernetes 系统组件<a href="#安装-kubernetes-系统组件" class="hash-link" aria-label="安装 Kubernetes 系统组件的直接链接" title="安装 Kubernetes 系统组件的直接链接">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kubernetes-软件源">安装 Kubernetes 软件源<a href="#安装-kubernetes-软件源" class="hash-link" aria-label="安装 Kubernetes 软件源的直接链接" title="安装 Kubernetes 软件源的直接链接">​</a></h4><p>这里采用国内阿里云的源，具有加速效果</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">sudo</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/yum.repos.d/kubernetes.repo</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">[kubernetes]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">name=Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">enabled=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgcheck=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">repo_gpgcheck=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kubernetes-组件">安装 Kubernetes 组件<a href="#安装-kubernetes-组件" class="hash-link" aria-label="安装 Kubernetes 组件的直接链接" title="安装 Kubernetes 组件的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">K8sVersion</span><span class="token operator">=</span><span class="token number">1.24</span><span class="token plain">.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y kubelet-1.24.8-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$K8sVersion</span><span class="token plain"> kubeadm-1.24.8-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$K8sVersion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y kubectl-1.24.8-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$K8sVersion</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 可以仅在 Master 节点安装</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动-kubelet系统服务">启动 <code>kubelet</code>系统服务<a href="#启动-kubelet系统服务" class="hash-link" aria-label="启动-kubelet系统服务的直接链接" title="启动-kubelet系统服务的直接链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> --now kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此时启动后服务状态异常，会检查集群配置，因为没有配置会不断的重启，不影响后续操作</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初始化-master-节点">初始化 Master 节点<a href="#初始化-master-节点" class="hash-link" aria-label="初始化 Master 节点的直接链接" title="初始化 Master 节点的直接链接">​</a></h3><p>注意规划集群主节点配置，初始化主节点时，规划网络配置</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 指定对应的 kubernetes 的版本，注意与上方配置保持一致</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ sudokubeadm init --kubernetes-version</span><span class="token operator">=</span><span class="token plain">v1.24.8 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --image-repository</span><span class="token operator">=</span><span class="token plain">registry.cn-hangzhou.aliyuncs.com/google_containers </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --pod-network-cidr </span><span class="token number">10.11</span><span class="token plain">.0.0/16 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using Kubernetes version: v1.24.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Running pre-flight checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Pulling images required </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> setting up a Kubernetes cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> This might take a minute or two, depending on the speed of your internet connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> You can also perform this action </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> beforehand using </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;kubeadm config images pull&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using certificateDir folder </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/pki&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ca&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver-kubelet-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;front-proxy-ca&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;front-proxy-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/ca&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/server&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/peer&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/healthcheck-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver-etcd-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sa&quot;</span><span class="token plain"> key and public key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using kubeconfig folder </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;admin.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;controller-manager.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;scheduler.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing kubelet environment </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> with flags to </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing kubelet configuration to </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/lib/kubelet/config.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Starting the kubelet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using manifest folder </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/manifests&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-apiserver&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-controller-manager&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-scheduler&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">etcd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> etcd </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/manifests&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">wait-control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Waiting </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the kubelet to boot up the control plane as static Pods from directory </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/manifests&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> This can take up to 4m0s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">apiclient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> All control plane components are healthy after </span><span class="token number">6.503693</span><span class="token plain"> seconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">upload-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Storing the configuration used </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ConfigMap </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubeadm-config&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-system&quot;</span><span class="token plain"> Namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating a ConfigMap </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet-config-1.24.8&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> namespace kube-system with the configuration </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the kubelets </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NOTE: The </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet-config-1.24.8&quot;</span><span class="token plain"> naming of the kubelet ConfigMap is deprecated. Once the UnversionedKubeletConfigMap feature gate graduates to Beta the default name will become just </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet-config&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> Kubeadm upgrade will handle this transition transparently.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">upload-certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Skipping phase. Please see --upload-certs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mark-control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Marking the </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> node1.k8s.com as control-plane by adding the labels: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">node-role.kubernetes.io/master</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">deprecated</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mark-control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Marking the </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> node1.k8s.com as control-plane by adding the taints </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">node-role.kubernetes.io/master:NoSchedule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using token: c0wcm5.0yu9szfktsxvurza</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow Node Bootstrap tokens to get nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow Node Bootstrap tokens to post CSRs </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> order </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> nodes to get long term certificate credentials</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow certificate rotation </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> all </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> client certificates </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating the </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cluster-info&quot;</span><span class="token plain"> ConfigMap </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-public&quot;</span><span class="token plain"> namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-finalize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Updating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/kubelet.conf&quot;</span><span class="token plain"> to point to a rotatable kubelet client certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">addons</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Applied essential addon: CoreDNS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">addons</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Applied essential addon: kube-proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your Kubernetes control-plane has initialized successfully</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To start using your cluster, you need to run the following as a regular user:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> -i /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">chown</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">id</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -u</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">id</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -g</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alternatively, </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> you are the root user, you can run:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">KUBECONFIG</span><span class="token operator">=</span><span class="token plain">/etc/kubernetes/admin.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">You should now deploy a pod network to the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Run </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubectl apply -f [podnetwork].yaml&quot;</span><span class="token plain"> with one of the options listed at:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Then you can </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> any number of worker nodes by running the following on each as root:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> </span><span class="token number">10.23</span><span class="token plain">.245.63:6443 --token djdsj2.sj23js90213j323 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        --discovery-token-ca-cert-hash sha256:ewuosdjk2390rjertw32p32j43p25a70298db818ajsdjk1293jk23k23201934h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="加入工作节点">加入工作节点<a href="#加入工作节点" class="hash-link" aria-label="加入工作节点的直接链接" title="加入工作节点的直接链接">​</a></h3><p>注意需要确保完成了前面的步骤 节点系统优化、安装 Docker、安装 Kubernetes 系统组件，并且成功完成 初始化 Master 节点</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubeadm </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> </span><span class="token number">10.23</span><span class="token plain">.245.63:6443 --token djdsj2.sj23js90213j323 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        --discovery-token-ca-cert-hash sha256:ewuosdjk2390rjertw32p32j43p25a70298db818ajsdjk1293jk23k23201934h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>请分别添加 2 个工作节点：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME               STATUS   ROLES           AGE   VERSION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com   Ready    control-plane   9h    v1.24.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com     Ready    </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">          9h    v1.24.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com     Ready    </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">          9h    v1.24.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-cni-calico">安装 CNI Calico<a href="#安装-cni-calico" class="hash-link" aria-label="安装 CNI Calico的直接链接" title="安装 CNI Calico的直接链接">​</a></h3><p>将下发 <code>yaml</code>保存为 <code>calico.yaml</code>，或者 到我的 Github 去下载。</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Source: calico/templates/calico-config.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># This ConfigMap is used to configure a self-hosted Calico installation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Typha is disabled.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">typha_service_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;none&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Configure the backend to use.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">calico_backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;bird&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Configure the MTU to use for workload interfaces and tunnels.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># By default, MTU is auto-detected, and explicitly setting this field should not be required.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># You can override auto-detection by providing a non-zero value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">veth_mtu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># The CNI network configuration to install on each node. The special</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># values in this config will be automatically populated.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">cni_network_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;k8s-pod-network&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&quot;cniVersion&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0.3.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&quot;plugins&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;calico&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;log_level&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;info&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;log_file_path&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/log/calico/cni/cni.log&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;datastore_type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubernetes&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;nodename&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;__KUBERNETES_NODE_NAME__&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;mtu&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> __CNI_MTU__</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;ipam&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;calico-ipam&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;policy&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;k8s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;kubernetes&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">&quot;kubeconfig&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;__KUBECONFIG_FILEPATH__&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;portmap&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;snat&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;capabilities&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token key atrule">&quot;portMappings&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;bandwidth&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;capabilities&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token key atrule">&quot;bandwidth&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Source: calico/templates/kdd-crds.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgpconfigurations.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfigurationList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgpconfigurations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgpconfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfiguration contains the configuration for any BGP routing.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfigurationSpec contains the values of the BGP configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">asNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ASNumber is the default AS number used by a node. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token number">64512</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">communities</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Communities is a list of BGP community values and their</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  arbitrary names for tagging routes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Community contains standard or large community value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    and its name.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Name given to community value.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Value must be of format `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` or `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm`.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        For standard community use `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa` and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `nn` are 16 bit number. For large community use `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and `mm` are 32 bit number. Where</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `aa` is an AS Number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and `mm` are per</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">AS identifier.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^(\d+)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">(\d+)$</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">^(\d+)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">(\d+)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">(\d+)$</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">listenPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ListenPort is the port where BGP protocol should listen.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Defaults to 179</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">maximum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">65535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">minimum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeverityScreen</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeverityScreen is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the stdout. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">nodeToNodeMeshEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;NodeToNodeMeshEnabled sets whether full node to node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  BGP mesh is enabled. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prefixAdvertisements</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PrefixAdvertisements contains per</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">prefix advertisement</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PrefixAdvertisement configures advertisement properties</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    for the specified CIDR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CIDR for which properties should be advertised.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">communities</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Communities can be list of either community names</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        already defined in `Specs.Communities` or community value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        of format `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` or `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm`. For standard community use</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa` and `nn` are 16 bit number. For</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        large community use `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm` format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `mm` are 32 bit number. Where</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">`aa` is an AS Number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `mm` are per</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">AS identifier.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceClusterIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceClusterIPs are the CIDR blocks from which service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  cluster IPs are allocated. If specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Calico will advertise these</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  blocks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> as well as any cluster IPs within them.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceClusterIPBlock represents a single allowed ClusterIP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    CIDR block.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceExternalIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceExternalIPs are the CIDR blocks for Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Service External IPs. Kubernetes Service ExternalIPs will only be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  advertised if they are within one of these blocks.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceExternalIPBlock represents a single allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    External IP CIDR block.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceLoadBalancerIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceLoadBalancerIPs are the CIDR blocks for Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Service LoadBalancer IPs. Kubernetes Service status.LoadBalancer.Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  IPs will only be advertised if they are within one of these blocks.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceLoadBalancerIPBlock represents a single allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    LoadBalancer IP CIDR block.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgppeers.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPPeer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPPeerList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgppeers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgppeer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPPeerSpec contains the specification for a BGPPeer resource.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">asNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The AS Number of the peer.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">keepOriginalNextHop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Option to keep the original nexthop field when routes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to a BGP Peer. Setting &quot;true&quot; configures the selected BGP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Peers node to use the &quot;next hop keep;&quot; instead of &quot;next hop self;&quot;(default)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in the specific branch of the Node on &quot;bird.cfg&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The node name identifying the Calico node instance that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is targeted by this peer. If this is not set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and no nodeSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then this BGP peer selects all nodes in the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selector for the nodes that should have this peering.  When</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  this is set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the Node field must be empty.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Optional BGP password for the peerings generated by this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  BGPPeer resource.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selects a key of a secret in the node pod&#x27;s namespace.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The key of the secret to select from.  Must be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          a valid secret key.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Name of the referent. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//kubernetes.io/docs/concepts/overview/working</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">objects/names/</span><span class="token comment" style="color:rgb(98, 114, 164)">#names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">TODO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Add other useful fields. apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> uid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">?</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Specify whether the Secret or its key must be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          defined</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">peerIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The IP address of the peer followed by an optional port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  number to peer with. If port number is given</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> format should be `</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">&lt;IPv6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">port`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or `&lt;IPv4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">&lt;port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">` for IPv4. If optional port number is not set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and this peer IP and ASNumber belongs to a calico/node with ListenPort</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  set in BGPConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then we use that port to peer.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">peerSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selector for the remote nodes to peer with.  When this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the PeerIP and ASNumber fields must be empty.  For each</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  peering between the local node and selected remote nodes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> we configure</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  an IPv4 peering if both ends have NodeBGPSpec.IPv4Address specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and an IPv6 peering if both ends have NodeBGPSpec.IPv6Address specified.  The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  remote AS number comes from the remote node&#x27;s NodeBGPSpec.ASNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or the global default if that is not set.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">sourceAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Specifies whether and how to configure a source address</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  for the peerings generated by this BGPPeer resource.  Default value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  &quot;UseNodeIP&quot; means to configure the node IP as the source address.  &quot;None&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  means not to configure a source address.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> blockaffinities.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BlockAffinity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BlockAffinityList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> blockaffinities</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> blockaffinity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BlockAffinitySpec contains the specification for a BlockAffinity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              resource.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">deleted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deleted indicates that this block affinity is being deleted.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  This field is a string for compatibility with older releases that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  mistakenly treat this field as a string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> cidr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> deleted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> state</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clusterinformations.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformationList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clusterinformations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clusterinformation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformation contains the cluster specific information.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformationSpec contains the values of describing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">calicoVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CalicoVersion is the version of Calico that the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">clusterGUID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterGUID is the GUID of the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">clusterType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterType describes the type of the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">datastoreReady</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DatastoreReady is used during significant datastore migrations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to signal to components such as Felix that it should wait before</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accessing the datastore.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">variant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Variant declares which variant of Calico should be active.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> felixconfigurations.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FelixConfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FelixConfigurationList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> felixconfigurations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> felixconfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Felix Configuration contains the configuration for Felix.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FelixConfigurationSpec contains the values of the Felix configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">allowIPIPPacketsFromWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;AllowIPIPPacketsFromWorkloads controls whether Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  will add a rule to drop IPIP encapsulated traffic from workloads</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">allowVXLANPacketsFromWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;AllowVXLANPacketsFromWorkloads controls whether Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  will add a rule to drop VXLAN encapsulated traffic from workloads</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">awsSrcDstCheck</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Set source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">check on AWS EC2 instances. Accepted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  value must be one of &quot;DoNothing&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> &quot;Enabled&quot; or &quot;Disabled&quot;. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  DoNothing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">enum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> DoNothing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Enable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Disable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfConnectTimeLoadBalancingEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFConnectTimeLoadBalancingEnabled when in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  controls whether Felix installs the connection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">time load balancer.  The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  connect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">time load balancer is required for the host to be able to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  reach Kubernetes services and it improves the performance of pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  connections.  The only reason to disable it is for debugging purposes.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfDataIfacePattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BPFDataIfacePattern is a regular expression that controls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  which interfaces Felix should attach BPF programs to in order to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  catch traffic to/from the network.  This needs to match the interfaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that Calico workload traffic flows over as well as any interfaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that handle incoming traffic to nodeports and services from outside</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the cluster.  It should not match the workload interfaces (usually</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  named cali</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfDisableUnprivileged</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFDisableUnprivileged</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Felix sets the kernel.unprivileged_bpf_disabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  sysctl to disable unprivileged use of BPF.  This ensures that unprivileged</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  users cannot access Calico&#x27;&#x27;s BPF maps and cannot insert their own</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  BPF programs to interfere with Calico&#x27;&#x27;s. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if enabled Felix will use the BPF dataplane.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfExtToServiceConnmark</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFExtToServiceConnmark in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> control a 32bit</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  mark that is set on connections from an external client to a local</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  service. This mark allows us to control how packets of that connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are routed within the host and how is routing intepreted by RPF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  check. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfExternalServiceMode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFExternalServiceMode in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> controls how connections</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  from outside the cluster to services (node ports and cluster IPs)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are forwarded to remote workloads.  If set to &quot;Tunnel&quot; then both</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  request and response traffic is tunneled to the remote node.  If</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  set to &quot;DSR&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the request traffic is tunneled but the response traffic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is sent directly from the remote node.  In &quot;DSR&quot; mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the remote</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  node appears to use the IP of the ingress node; this requires a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  permissive L2 network.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Tunnel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfKubeProxyEndpointSlicesEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BPFKubeProxyEndpointSlicesEnabled in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> controls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  whether Felix&#x27;s embedded kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy accepts EndpointSlices or not.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfKubeProxyIptablesCleanupEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFKubeProxyIptablesCleanupEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if enabled in BPF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Felix will proactively clean up the upstream Kubernetes kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy&#x27;&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  iptables chains.  Should only be enabled if kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy is not running.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfKubeProxyMinSyncPeriod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFKubeProxyMinSyncPeriod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> controls the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  minimum time between updates to the dataplane for Felix&#x27;&#x27;s embedded</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy.  Lower values give reduced set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">up latency.  Higher values</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  reduce Felix CPU usage by batching up more work.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfLogLevel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFLogLevel controls the log level of the BPF programs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  when in BPF dataplane mode.  One of &quot;Off&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Info&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> or &quot;Debug&quot;.  The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  logs are emitted to the BPF trace pipe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> accessible with the command</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  `tc exec bpf debug`. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">chainInsertMode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ChainInsertMode controls whether Felix hooks the kernel&#x27;&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  top</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">level iptables chains by inserting a rule at the top of the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  chain or by appending a rule at the bottom. insert is the safe default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  since it prevents Calico&#x27;&#x27;s rules from being bypassed. If you switch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to append mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> be sure that the other rules in the chains signal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  acceptance by falling through to the Calico rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> otherwise the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Calico policy will be bypassed. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> insert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">dataplaneDriver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugDisableLogDropping</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugMemoryProfilePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugSimulateCalcGraphHangAfter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugSimulateDataplaneHangAfter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">defaultEndpointToHostAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;DefaultEndpointToHostAction controls what happens to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  traffic that goes from a workload endpoint to the host itself (after</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the traffic hits the endpoint egress policy). By default Calico</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  blocks traffic from workload endpoints to the host itself with an</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  iptables &quot;DROP&quot; action. If you want to allow some or all traffic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  from endpoint to host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> set this parameter to RETURN or ACCEPT. Use</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  RETURN if you have your own rules in the iptables &quot;INPUT&quot; chain;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Calico will insert its rules at the top of that chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then &quot;RETURN&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  packets to the &quot;INPUT&quot; chain once it has completed processing workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  endpoint egress policy. Use ACCEPT to unconditionally accept packets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  from workloads after processing workload endpoint egress policy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Drop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">deviceRouteProtocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> This defines the route protocol added to programmed device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> by default this will be RTPROT_BOOT when left blank.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">deviceRouteSourceAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> This is the source address to use on programmed device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  routes. By default the source address is left blank</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> leaving the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  kernel to choose the source address used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">disableConntrackInvalidCheck</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">endpointReportingDelay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">endpointReportingEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">externalNodesList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ExternalNodesCIDRList is a list of CIDR&#x27;s of external</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  which may source tunnel traffic and have the tunneled traffic be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accepted at calico nodes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">failsafeInboundHostPorts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;FailsafeInboundHostPorts is a list of UDP/TCP ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and CIDRs that Felix will allow incoming traffic to host endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  on irrespective of the security policy. This is useful to avoid</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accidentally cutting off a host with incorrect configuration. For</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  back</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">compatibility</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if the protocol is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to &quot;tcp&quot;. If a CIDR is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it will allow traffic from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all addresses. To disable all inbound host ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> use the value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  none. The default value allows ssh access and DHCP. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">22</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">68</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">179</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2379</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2380</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6666</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6667</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ProtoPort is combination of protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and CIDR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Protocol and port must be specified.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">net</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> protocol</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">failsafeOutboundHostPorts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;FailsafeOutboundHostPorts is a list of UDP/TCP ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and CIDRs that Felix will allow outgoing traffic from host endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to irrespective of the security policy. This is useful to avoid</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accidentally cutting off a host with incorrect configuration. For</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  back</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">compatibility</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if the protocol is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to &quot;tcp&quot;. If a CIDR is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it will allow traffic from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all addresses. To disable all outbound host ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> use the value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  none. The default value opens etcd&#x27;&#x27;s standard ports to ensure that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix does not get cut off from etcd as well as allowing DHCP and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  DNS. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">179</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2379</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2380</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6666</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6667</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">53</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">67</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ProtoPort is combination of protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and CIDR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Protocol and port must be specified.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">net</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> protocol</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">featureDetectOverride</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FeatureDetectOverride is used to override the feature</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  detection. Values are specified in a comma separated list with no</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  spaces</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> example; &quot;SNATFullyRandom=true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">MASQFullyRandom=false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">RestoreSupportsLock=&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  &quot;true&quot; or &quot;false&quot; will force the feature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> empty or omitted values</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are auto</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">detected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">genericXDPEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;GenericXDPEnabled enables Generic XDP so network cards</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that don&#x27;&#x27;t support XDP offload or driver modes can use XDP. This</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is not recommended since it doesn&#x27;&#x27;t provide better performance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  than iptables. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">healthEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">healthHost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">healthPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">interfaceExclude</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;InterfaceExclude is a comma</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">separated list of interfaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that Felix should exclude when monitoring for host endpoints. The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  default value ensures that Felix ignores Kubernetes&#x27;&#x27; IPVS dummy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  interface</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> which is used internally by kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy. If you want to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  exclude multiple interface names using a single value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  supports regular expressions. For regular expressions you must wrap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the value with &#x27;&#x27;/&#x27;&#x27;. For example having values &#x27;&#x27;/^kube/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">veth1&#x27;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  will exclude all interfaces that begin with &#x27;&#x27;kube&#x27;&#x27; and also the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  interface &#x27;&#x27;veth1&#x27;&#x27;. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ipvs0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">interfacePrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;InterfacePrefix is the interface name prefix that identifies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  workload endpoints and so distinguishes them from host endpoint</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">interfaces. Note</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> in environments other than bare metal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the orchestrators</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  configure this appropriately. For example our Kubernetes and Docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  integrations set the &#x27;&#x27;cali&#x27;&#x27; value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and our OpenStack integration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  sets the &#x27;&#x27;tap&#x27;&#x27; value. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> cali</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">interfaceRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> InterfaceRefreshInterval is the period at which Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  rescans local interfaces to verify their state. The rescan can be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  disabled by setting the interval to 0.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipipEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipipMTU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IPIPMTU is the MTU to set on the tunnel device. See</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Configuring MTU </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1440</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipsetsRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IpsetsRefreshInterval is the period at which Felix re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all iptables state to ensure that no other process has accidentally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  broken Calico&#x27;&#x27;s rules. Set to 0 to disable iptables refresh. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesBackend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> IptablesBackend specifies which backend of iptables will</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  be used. The default is legacy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesFilterAllowAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesLockFilePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesLockFilePath is the location of the iptables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  lock file. You may need to change this if the lock file is not in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  its standard location (for example if you have mapped it into Felix&#x27;&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  container at a different path). </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /run/xtables.lock</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesLockProbeInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesLockProbeInterval is the time that Felix will</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  wait between attempts to acquire the iptables lock if it is not</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  available. Lower values make Felix more responsive when the lock</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is contended</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> but use more CPU. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 50ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesLockTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesLockTimeout is the time that Felix will wait</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  for the iptables lock</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> or 0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> to disable. To use this feature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  must share the iptables lock file with all other processes that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  also take the lock. When running Felix inside a container</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  requires the /run directory of the host to be mounted into the calico/node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or calico/felix container. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 0s disabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesMangleAllowAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesMarkMask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesMarkMask is the mask that Felix selects its</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  IPTables Mark bits from. Should be a 32 bit hexadecimal number with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  at least 8 bits set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> none of which clash with any other mark bits</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in use on the system. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0xff000000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesNATOutgoingInterfaceFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesPostWriteCheckInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesPostWriteCheckInterval is the period after Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  has done a write to the dataplane that it schedules an extra read</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  back in order to check the write was not clobbered by another process.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  This should only occur if another application on the system doesn&#x27;&#x27;t</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  respect the iptables lock. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesRefreshInterval is the period at which Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks the IP sets in the dataplane to ensure that no other process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  has accidentally broken Calico&#x27;&#x27;s rules. Set to 0 to disable IP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">sets refresh. Note</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> the default for this value is lower than the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  other refresh intervals as a workaround for a Linux kernel bug that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  was fixed in kernel version 4.11. If you are using v4.11 or greater</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  you may want to set this to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> a higher value to reduce Felix CPU</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  usage. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 10s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipv6Support</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">kubeNodePortRanges</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;KubeNodePortRanges holds list of port ranges used for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  service node ports. Only used if felix detects kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in ipvs mode. Felix uses these ranges to separate host and workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  traffic. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 30000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">32767</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logFilePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogFilePath is the full path to the Felix log. Set to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  none to disable file logging. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /var/log/calico/felix.log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogPrefix is the log prefix that Felix uses when rendering</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  LOG rules. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">packet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeverityFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeverityFile is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the log file. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeverityScreen</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeverityScreen is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the stdout. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeveritySys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeveritySys is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the syslog. Set to None for no logging to syslog. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">maxIpsetSize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">metadataAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;MetadataAddr is the IP address or domain name of the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  server that can answer VM queries for cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">init metadata. In OpenStack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  this corresponds to the machine running nova</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">api (or in Ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  nova</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">metadata). A value of none (case insensitive) means that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix should not set up any NAT rule for the metadata path. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">metadataPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;MetadataPort is the port of the metadata server. This</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  combined with global.MetadataAddr (if not &#x27;&#x27;None&#x27;&#x27;)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> is used to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  set up a NAT rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> from 169.254.169.254</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">80 to MetadataAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">MetadataPort.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  In most cases this should not need to be changed </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8775</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">mtuIfacePattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> MTUIfacePattern is a regular expression that controls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  which interfaces Felix should scan in order to calculate the host&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  MTU. This should not match workload interfaces (usually named cali</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">natOutgoingAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NATOutgoingAddress specifies an address to use when performing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  source NAT for traffic in a natOutgoing pool that is leaving the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  network. By default the address used is an address on the interface</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the traffic is leaving on (ie it uses the iptables MASQUERADE target)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">natPortRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NATPortRange specifies the range of ports that is used</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  for port mapping when doing outgoing NAT. When unset the default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  behavior of the network stack is used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">netlinkTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">openstackRegion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;OpenstackRegion is the name of the region that a particular</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix belongs to. In a multi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">region Calico/OpenStack deployment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  this must be configured somehow for each Felix (here in the datamodel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or in felix.cfg or the environment on each compute node)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and must</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  match the </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> openstack_region value configured in neutron.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  on each node. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">policySyncPathPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PolicySyncPathPrefix is used to by Felix to communicate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  policy changes to external services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> like Application layer policy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusGoMetricsEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusGoMetricsEnabled disables Go runtime metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  collection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> which the Prometheus client does by default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> when set</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to false. This reduces the number of metrics reported</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reducing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Prometheus load. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusMetricsEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusMetricsEnabled enables the Prometheus metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  server in Felix if set to true. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusMetricsHost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusMetricsHost is the host that the Prometheus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  metrics server should bind to. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> empty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusMetricsPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusMetricsPort is the TCP port that the Prometheus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  metrics server should bind to. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">9091</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusProcessMetricsEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusProcessMetricsEnabled disables process metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  collection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> which the Prometheus client does by default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> when set</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to false. This reduces the number of metrics reported</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reducing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Prometheus load. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">removeExternalRoutes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Whether or not to remove device routes that have not</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  been programmed by Felix. Disabling this will allow external applications</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to also add device routes. This is enabled by default which means</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  we will remove externally added routes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">reportingInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ReportingInterval is the interval at which Felix reports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  its status into the datastore or 0 to disable. Must be non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">zero</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in OpenStack deployments. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 30s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">reportingTTL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ReportingTTL is the time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">live setting for process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">wide</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  status reports. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">routeRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;RouteRefreshInterval is the period at which Felix re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the routes in the dataplane to ensure that no other process has</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accidentally broken Calico&#x27;&#x27;s rules. Set to 0 to disable route refresh.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">routeSource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;RouteSource configures where Felix gets its routing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">information. - WorkloadIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> use workload endpoints to construct</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">routes. - CalicoIPAM</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> the default </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> use IPAM data to construct routes.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">routeTableRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Calico programs additional Linux route tables for various</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  purposes.  RouteTableRange specifies the indices of the route tables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that Calico should use.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">min</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> max</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> min</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceLoopPrevention</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;When service IP advertisement is enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> prevent routing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  loops to service IPs that are not in use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> by dropping or rejecting</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  packets that do not get DNAT&#x27;&#x27;d by kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy. Unless set to &quot;Disabled&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in which case such routing loops continue to be allowed. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Drop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">sidecarAccelerationEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;SidecarAccelerationEnabled enables experimental sidecar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  acceleration </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">usageReportingEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;UsageReportingEnabled reports anonymous Calico version</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  number and cluster size to projectcalico.org. Logs warnings returned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  by the usage server. For example</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if a significant security vulnerability</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  has been discovered in the version of Calico being used. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">usageReportingInitialDelay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;UsageReportingInitialDelay controls the minimum delay</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  before Felix makes a report. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 300s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">usageReportingInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;UsageReportingInterval controls the interval at which</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix makes reports. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 86400s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">useInternalDataplaneDriver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanMTU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;VXLANMTU is the MTU to set on the tunnel device. See</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Configuring MTU </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1440</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanVNI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardEnabled controls whether Wireguard is enabled.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardInterfaceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardInterfaceName specifies the name to use for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the Wireguard interface. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> wg.calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardListeningPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardListeningPort controls the listening port used</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  by Wireguard. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">51820</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardMTU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardMTU controls the MTU on the Wireguard interface.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  See Configuring MTU </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1420</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardRoutingRulePriority</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardRoutingRulePriority controls the priority value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to use for the Wireguard routing rule. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">99</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">xdpEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;XDPEnabled enables XDP acceleration for suitable untracked</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  incoming deny rules. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">xdpRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;XDPRefreshInterval is the period at which Felix re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all XDP state to ensure that no other process has accidentally broken</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Calico&#x27;&#x27;s BPF maps or attached programs. Set to 0 to disable XDP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  refresh. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> globalnetworkpolicies.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GlobalNetworkPolicy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GlobalNetworkPolicyList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> globalnetworkpolicies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> globalnetworkpolicy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">applyOnForward</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ApplyOnForward indicates to apply the rules in this policy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  on forward traffic.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">doNotTrack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DoNotTrack indicates whether packets matched by the rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in this policy should go through the data plane&#x27;s connection tracking</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  such as Linux conntrack.  If True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the rules in this policy are</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  applied before any data plane connection tracking</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and packets allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  by this policy are marked as not to be tracked.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">egress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The ordered set of egress rules.  Each rule contains</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  a set of packet match criteria and a corresponding action to apply.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;A Rule encapsulates a set of match criteria and an</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    action.  Both selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">based security Policy and security Profiles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    reference rules </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> separated out as a list of rules for both ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    and egress packet matching. \n Each positive match criteria has</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    a negated version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> prefixed with \&quot;Not\&quot;. All the match criteria</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    within a rule must be satisfied for a packet to match. A single</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    rule can contain the positive and negative version of a match</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    and both must be satisfied for the rule to match.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Destination contains the match criteria that apply</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        to destination entity.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">namespaceSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;NamespaceSelector is an optional field that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            contains a selector expression. Only traffic that originates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            from (or terminates at) endpoints within the selected</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            namespaces will be matched. When both NamespaceSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            and Selector are defined on the same rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then only workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            endpoints that are matched by both selectors will be selected</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            by the rule. \n For NetworkPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> an empty NamespaceSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            implies that the Selector is limited to selecting only</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            workload endpoints in the same namespace as the NetworkPolicy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            \n For NetworkPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `global()` NamespaceSelector implies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            that the Selector is limited to selecting only GlobalNetworkSet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            or HostEndpoint. \n For GlobalNetworkPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> an empty</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            NamespaceSelector implies the Selector applies to workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            endpoints across all namespaces.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">nets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Nets is an optional field that restricts the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            rule to only apply to traffic that originates from (or</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            terminates at) IP addresses in any of the given subnets.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">notNets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NotNets is the negated version of the Nets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            field.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">notPorts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NotPorts is the negated version of the Ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            field. Since only some protocols have ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if any ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            are specified it requires the Protocol match in the Rule</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            to be set to &quot;TCP&quot; or &quot;UDP&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">notSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NotSelector is the negated version of the Selector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            field.  See Selector field for subtleties with negated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            selectors.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;Ports is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to only apply to traffic that has a source (destination)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            port that matches one of these ranges/values. This value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            is a list of integers or strings that represent ranges</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            of ports. \n Since only some protocols have ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            any ports are specified it requires the Protocol match</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            in the Rule to be set to \&quot;TCP\&quot; or \&quot;UDP\&quot;.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;Selector is an optional field that contains</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            a selector expression (see Policy for sample syntax).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            \ Only traffic that originates from (terminates at) endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">matching the selector will be matched. \n Note that</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            addition to the negated version of the Selector (see NotSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            below)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the selector expression syntax itself supports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            negation.  The two types of negation are subtly different.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            One negates the set of matched endpoints</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the other negates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">the whole match</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> \n \tSelector = \&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)">!has(my_label)</span><span class="token plain">\&quot; matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            packets that are from other Calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controlled \tendpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            that do not have the label \&quot;my_label\&quot;. \n \tNotSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            = \&quot;has(my_label)\&quot; matches packets that are not from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            Calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controlled \tendpoints that do have the label \&quot;my_label\&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            \n The effect is that the latter will accept packets from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">Calico sources whereas the former is limited to packets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            from Calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controlled endpoints.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">serviceAccounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccounts is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to only apply to traffic that originates from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            (or terminates at) a pod running as a matching service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            account.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Names is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                the rule to only apply to traffic that originates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                from (or terminates at) a pod running as a service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                account whose name is in the list.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selector is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                the rule to only apply to traffic that originates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                from (or terminates at) a pod running as a service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                account that matches the given label selector. If</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                both Names and Selector are specified then they are</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                AND&#x27;ed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTP contains match criteria that apply to HTTP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        requests.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">methods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Methods is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to apply only to HTTP requests that use one of</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the listed HTTP Methods (e.g. GET</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> PUT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> etc.) Multiple</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            methods are OR&#x27;d together.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Paths is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to apply to HTTP requests that use one of the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            listed HTTP Paths. Multiple paths are OR&#x27;&#x27;d together.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">e.g</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">exact</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">/foo - prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">/bar NOTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Each entry may</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            ONLY specify either a `exact` or a `prefix` match. The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            validator will check for it.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;HTTPPath specifies an HTTP path to match.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">It may be either of the form</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">exact</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">&lt;path&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> which matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">the path exactly or prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">&lt;path-prefix&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> which matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              the path prefix&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">exact</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">icmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ICMP is an optional field that restricts the rule</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        to apply to a specific type and code of ICMP traffic.  This</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        should only be specified if the Protocol field is set to &quot;ICMP&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        or &quot;ICMPv6&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">code</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Match on a specific ICMP code.  If specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the Type value must also be specified. This is a technical</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            limitation imposed by the kernel&#x27;s iptables firewall</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            which Calico uses to enforce the rule.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Match on a specific ICMP type.  For example</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            a value of 8```</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">执行初始化 `Calico`命令</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">f calico.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-helm-应用">安装 Helm 应用<a href="#安装-helm-应用" class="hash-link" aria-label="安装 Helm 应用的直接链接" title="安装 Helm 应用的直接链接">​</a></h2><p>这里使用 Helm 3，注意安装脚本下载最新版本</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> </span><span class="token number">700</span><span class="token plain"> get_helm.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./get_helm.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-storageclass">安装 StorageClass<a href="#安装-storageclass" class="hash-link" aria-label="安装 StorageClass的直接链接" title="安装 StorageClass的直接链接">​</a></h2><p>默认情况下，可以安装 K8s 默认 localdisk 作为默认存储，这里采用开源项目 Hwameistor 用作本地磁盘管理。</p><blockquote><p>项目介绍： <a href="https://hwameistor.io" target="_blank" rel="noopener noreferrer">https://hwameistor.io</a>
安装指引： <a href="https://hwameistor.io/cn/docs/quick_start/install/deploy" target="_blank" rel="noopener noreferrer">https://hwameistor.io/cn/docs/quick_start/install/deploy</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-helm-仓库">安装 Helm 仓库<a href="#安装-helm-仓库" class="hash-link" aria-label="安装 Helm 仓库的直接链接" title="安装 Helm 仓库的直接链接">​</a></h3><p>Hwameistor 依赖 Helm 进行安装，所以事先 需要完成 Helm 应用的安装</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> hwameistor http://hwameistor.io/hwameistor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo update hwameistor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm pull hwameistor/hwameistor --untar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-hwameistior-应用">安装 HwameiStior 应用<a href="#安装-hwameistior-应用" class="hash-link" aria-label="安装 HwameiStior 应用的直接链接" title="安装 HwameiStior 应用的直接链接">​</a></h3><p>使用镜像仓库安装，要切换镜像仓库的镜像，请使用 --set 更改这两个参数值：<code>global.k8sImageRegistry</code> 和 <code>global.hwameistorImageRegistry</code></p><blockquote><p>注意默认的镜像仓库 quay.io 和 ghcr.io。如果无法访问，可尝试使用 DaoCloud 提供的镜像源 quay.m.daocloud.io 和 ghcr.m.daocloud.io</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ helm </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> hwameistor ./hwameistor </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -n hwameistor --create-namespace </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set global.k8sImageRegistry</span><span class="token operator">=</span><span class="token plain">k8s-gcr.m.daocloud.io </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set global.hwameistorImageRegistry</span><span class="token operator">=</span><span class="token plain">ghcr.m.daocloud.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查 Hwameistor 的全部 Pod 状态</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl -n hwameistor get pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                                       READY   STATUS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-csi-controller-665bb7f47d-6227f      </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-5ph2d                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-jhj59                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-k9cvj                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-kxwww                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-csi-controller-667d949fbb-k488w   </span><span class="token number">3</span><span class="token plain">/3     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-csqqv                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-gcrzm                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-v8g7t                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-zkwmn                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-scheduler-58dfcf79f5-lswkt                      </span><span class="token number">1</span><span class="token plain">/1     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-webhook-986479678-278cr                         </span><span class="token number">1</span><span class="token plain">/1     Running</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>local-disk-manager 和 local-storage 是 DaemonSet。在每个 Kubernetes 节点上都应该有一个 DaemonSet Pod。</p></blockquote><p>等到全部状态正常后，可进行后续操作，检查 <code>StorageClass</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get storageclass hwameistor-storage-lvm-hdd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                   PROVISIONER         RECLAIMPOLICY</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-storage-lvm-hdd </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   lvm.hwameistor.io   Delete</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="检查-lockdisknode和-lockdisk">检查 <code>LockDiskNode</code>和 <code>LockDisk</code><a href="#检查-lockdisknode和-lockdisk" class="hash-link" aria-label="检查-lockdisknode和-lockdisk的直接链接" title="检查-lockdisknode和-lockdisk的直接链接">​</a></h3><p>默认在使用的磁盘状态应该 <code>PHASE</code> 展示位 <code>Bound</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get localdisknodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME               NODEMATCH          PHASE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com   master01-k8s-com   Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com     node01-k8s-com     Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com     node02-k8s-com     Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get localdisks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                   NODEMATCH          CLAIM              PHASE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com-vda   master01-k8s-com                      Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com-vdb   master01-k8s-com   master01-k8s-com   Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com-vda     node01-k8s-com                        Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com-vdb     node01-k8s-com     node01-k8s-com     Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com-vda     node02-k8s-com                        Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com-vdb     node02-k8s-com     node02-k8s-com     Bound</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置默认的-storageclass">设置默认的 <code>StorageClass</code><a href="#设置默认的-storageclass" class="hash-link" aria-label="设置默认的-storageclass的直接链接" title="设置默认的-storageclass的直接链接">​</a></h3><p>这个对应的 <code>storageclasses</code>增加标识为默认的 <code>annotations</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl patch storageclasses.storage.k8s.io hwameistor-storage-lvm-hdd -p </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;metadata&quot;: {&quot;annotations&quot;:{&quot;storageclass.kubernetes.io/is-default-class&quot;:&quot;true&quot;}}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建存储池">创建存储池<a href="#创建存储池" class="hash-link" aria-label="创建存储池的直接链接" title="创建存储池的直接链接">​</a></h3><p>使用下方的命令创建对应的存储池，注意替换对应的 <code>nodeName</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ helm template ./hwameistor </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   -s templates/post-install-claim-disks.yaml </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   --set </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">storageNodes</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{master01-k8s-com,node01-k8s-com,node02-k8s-com}&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> kubectl apply -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>创建成功后，查看本地磁盘的 <code>ldc</code>，应该全部是 <code>Bound</code></p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get ldc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-metrics-server">安装 <code>Metrics server</code><a href="#安装-metrics-server" class="hash-link" aria-label="安装-metrics-server的直接链接" title="安装-metrics-server的直接链接">​</a></h2><p>接下来需要安装的 DCE5.0 需要安装 <code>metrics-server</code>，将下方的文件内容保存为 <code>metrics-server.yaml</code></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-admin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-edit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-view</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">aggregated</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> metrics.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes/metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> RoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">apiserver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">authentication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">delegator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">delegator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rollingUpdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">maxUnavailable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dir=/tmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">port=4443</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">preferred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">types=InternalIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">ExternalIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">Hostname</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">metric</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">resolution=15s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">insecure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> registry.cn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">hangzhou.aliyuncs.com/chenby/metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">v0.6.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">imagePullPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /livez</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTPS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">4443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /readyz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTPS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 200Mi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">allowPrivilegeEscalation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">readOnlyRootFilesystem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">runAsNonRoot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">runAsUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">volumeMounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /tmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">kubernetes.io/os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> linux</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">priorityClassName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">critical</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">serviceAccountName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">emptyDir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiregistration.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> APIService</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1beta1.metrics.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">groupPriorityMinimum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">insecureSkipTLSVerify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versionPriority</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>执行安装命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f  metrics-server.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装成功后，通过下方命令可以成功的看到 node 节点的资源利用情况</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl </span><span class="token function" style="color:rgb(80, 250, 123)">top</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME               CPU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cores</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   CPU%   MEMORY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   MEMORY%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com   218m         </span><span class="token number">5</span><span class="token plain">%     5610Mi          </span><span class="token number">35</span><span class="token plain">%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com     445m         </span><span class="token number">11</span><span class="token plain">%    9279Mi          </span><span class="token number">59</span><span class="token plain">%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com     464m         </span><span class="token number">11</span><span class="token plain">%    9484Mi          </span><span class="token number">60</span><span class="token plain">%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-dce-社区版">安装 DCE 社区版<a href="#安装-dce-社区版" class="hash-link" aria-label="安装 DCE 社区版的直接链接" title="安装 DCE 社区版的直接链接">​</a></h2><p>以下操作步骤将会带着您一步一步完成 DaoCloud Enterprise 5.0 社区版的完整安装，注意安装细节</p><ul><li>官方文档介绍 <a href="https://docs.daocloud.io/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/</a></li><li>安装依赖项 <a href="https://docs.daocloud.io/install/install-tools/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/install-tools/</a></li><li>在线安装标准社区版 <a href="https://docs.daocloud.io/install/community/k8s/online/#_1" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/community/k8s/online/</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装基础依赖">安装基础依赖<a href="#安装基础依赖" class="hash-link" aria-label="安装基础依赖的直接链接" title="安装基础依赖的直接链接">​</a></h3><p>DCE 已经提供了一键安装的离线工具依赖包，经过测试比较稳定的运行在 <code>CentOS 7</code> 和 <code>CentOS 8</code>，如果您也是这样两个系统，可以使用下方脚本。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -LO https://proxy-qiniu-download-public.daocloud.io/DaoCloud_Enterprise/dce5/install_prerequisite.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x install_prerequisite.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"> install_prerequisite.sh online community</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也可以选择手动安装这些：</p><ul><li>podman</li><li>helm ≥ 3.9.4</li><li>skopeo ≥ 1.9.2</li><li>kind</li><li>kubectl ≥ 1.22.0</li><li>yq ≥ 4.27.5</li><li>minio client</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="下载-dce5-installer-安装器">下载 dce5-installer 安装器<a href="#下载-dce5-installer-安装器" class="hash-link" aria-label="下载 dce5-installer 安装器的直接链接" title="下载 dce5-installer 安装器的直接链接">​</a></h3><p>注意，需要在 Master 节点 来进行 dce5-installer 的安装，建议直接下载到当前节点</p><blockquote><p>获取最新版本的查看界面： <a href="https://docs.daocloud.io/download/dce5/#_1" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/download/dce5/#_1</a></p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 假定 VERSION 为 v0.3.28 , 使用上方链接获取最新版本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION</span><span class="token operator">=</span><span class="token plain">v0.3.28</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -Lo ./dce5-installer  https://proxy-qiniu-download-public.daocloud.io/DaoCloud_Enterprise/dce5/dce5-installer-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x dce5-installer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>如果<code>proxy-qiniu-download-public.daocloud.io</code> 链接失效，使用 <code>qiniu-download-public.daocloud.io</code></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装配置文件-可选">安装配置文件 <!-- -->[可选]<a href="#安装配置文件-可选" class="hash-link" aria-label="安装配置文件-可选的直接链接" title="安装配置文件-可选的直接链接">​</a></h3><p>将下方的配置文件内容保存为 <code>clusterconfig.yaml</code>，如果使用 <code>NodePort</code>的方式安装则不需要特定指定配置文件</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> provision.daocloud.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterConfig</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">loadBalancer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metallb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">istioGatewayVip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 10.6.229.10/32  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 这是 Istio gateway 的 VIP，也会是 DCE 5.0 的控制台的浏览器访问 IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">insightVip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 10.6.229.11/32  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 这是 Global 集群的 Insight-Server 采集子集群的监控指标的网络路径用的 VIP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>如果使用配置文件，注意需要 事先安装 <code>MetaLB</code>，这一部分需要自行完成。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="执行安装">执行安装<a href="#执行安装" class="hash-link" aria-label="执行安装的直接链接" title="执行安装的直接链接">​</a></h3><p>根据需求选择下方的安装文件，如果选择指定配置文件内的</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 无配置文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./dce5-installer install-app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 有指定 loadBalancer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./dce5-installer install-app -c clusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装完成">安装完成<a href="#安装完成" class="hash-link" aria-label="安装完成的直接链接" title="安装完成的直接链接">​</a></h3><p>如果看到下方的页面，说明安装成功了；默认账号密码为： <code>admin/changeme</code></p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/J9lNN0.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="重定向登录页-portal-反向代理">重定向登录页 Portal 反向代理<a href="#重定向登录页-portal-反向代理" class="hash-link" aria-label="重定向登录页 Portal 反向代理的直接链接" title="重定向登录页 Portal 反向代理的直接链接">​</a></h3><p>一般情况下，我们安装后的集群访问地址是一个内网地址，当我们需要集群页面开放到公网访问时，会发现登录页会自动重定向内网地址，这是因为 DCE 5.0 反向代理服务器地址默认是安装时的配置；需要作出以下更新：</p><p>设置环境变量，方便在后续中使用</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 您的反向代理地址，例如：`export DCE_PROXY=&quot;https://demo-alpha.daocloud.io&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DCE_PROXY</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://domain:port&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># helm --set 参数备份文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">GHIPPO_VALUES_BAK</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ghippo-values-bak.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 获取当前 ghippo 的版本号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">GHIPPO_HELM_VERSION</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">helm get notes ghippo -n ghippo-system </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">grep</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;Chart Version&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">awk</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -F </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;: &#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;{ print $2 }&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>更新 Helm repo</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo update ghippo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>备份 --set 参数</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm get values ghippo -n ghippo-system -o yaml </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_VALUES_BAK}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 vim 命令编辑并保存</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_VALUES_BAK}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token environment constant" style="color:rgb(189, 147, 249)">USER</span><span class="token plain">-SUPPLIED VALUES:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">global:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  reverseProxy: </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${DCE_PROXY}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># 只需要修改这一行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 heml upgrade 更新配置</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm upgrade ghippo ghippo/ghippo </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -n ghippo-system </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -f </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_VALUES_BAK}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --version </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_HELM_VERSION}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 kubectl 重启全局管理 Pod，使配置生效</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout restart deploy/ghippo-apiserver -n ghippo-system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout restart statefulset/ghippo-keycloak -n ghippo-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="申请社区版免费体验">申请社区版免费体验<a href="#申请社区版免费体验" class="hash-link" aria-label="申请社区版免费体验的直接链接" title="申请社区版免费体验的直接链接">​</a></h3><ul><li>申请页面 <a href="https://qingflow.com/f/58604bf8" target="_blank" rel="noopener noreferrer">https://qingflow.com/f/58604bf8</a></li><li>申请操作教程 <a href="https://docs.daocloud.io/dce/license0/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/dce/license0/</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col margin-top--sm"><a href="https://github.com/samzong/samzong.me/edit/main/blog/2022-12-06-dce5.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/2022/12/15/Skoala-Install-Dce5"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">DCE5-Skoala 安装教程</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/2022/11/28/cskefu-opensource-project"><div class="pagination-nav__sublabel">较旧一篇</div><div class="pagination-nav__label">开源项目 - 春松客服</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#前言" class="table-of-contents__link toc-highlight">前言</a><ul><li><a href="#集群规划" class="table-of-contents__link toc-highlight">集群规划</a></li><li><a href="#组件介绍" class="table-of-contents__link toc-highlight">组件介绍</a></li><li><a href="#节点系统优化" class="table-of-contents__link toc-highlight">节点系统优化</a></li></ul></li><li><a href="#k8s-环境安装" class="table-of-contents__link toc-highlight">K8s 环境安装</a><ul><li><a href="#安装-docker" class="table-of-contents__link toc-highlight">安装 Docker</a></li><li><a href="#安装-kubernetes-系统组件" class="table-of-contents__link toc-highlight">安装 Kubernetes 系统组件</a></li><li><a href="#初始化-master-节点" class="table-of-contents__link toc-highlight">初始化 Master 节点</a></li><li><a href="#加入工作节点" class="table-of-contents__link toc-highlight">加入工作节点</a></li><li><a href="#安装-cni-calico" class="table-of-contents__link toc-highlight">安装 CNI Calico</a></li></ul></li><li><a href="#安装-helm-应用" class="table-of-contents__link toc-highlight">安装 Helm 应用</a></li><li><a href="#安装-storageclass" class="table-of-contents__link toc-highlight">安装 StorageClass</a><ul><li><a href="#安装-helm-仓库" class="table-of-contents__link toc-highlight">安装 Helm 仓库</a></li><li><a href="#安装-hwameistior-应用" class="table-of-contents__link toc-highlight">安装 HwameiStior 应用</a></li><li><a href="#检查-lockdisknode和-lockdisk" class="table-of-contents__link toc-highlight">检查 <code>LockDiskNode</code>和 <code>LockDisk</code></a></li><li><a href="#设置默认的-storageclass" class="table-of-contents__link toc-highlight">设置默认的 <code>StorageClass</code></a></li><li><a href="#创建存储池" class="table-of-contents__link toc-highlight">创建存储池</a></li></ul></li><li><a href="#安装-metrics-server" class="table-of-contents__link toc-highlight">安装 <code>Metrics server</code></a></li><li><a href="#安装-dce-社区版" class="table-of-contents__link toc-highlight">安装 DCE 社区版</a><ul><li><a href="#安装基础依赖" class="table-of-contents__link toc-highlight">安装基础依赖</a></li><li><a href="#下载-dce5-installer-安装器" class="table-of-contents__link toc-highlight">下载 dce5-installer 安装器</a></li><li><a href="#安装配置文件-可选" class="table-of-contents__link toc-highlight">安装配置文件 可选</a></li><li><a href="#执行安装" class="table-of-contents__link toc-highlight">执行安装</a></li><li><a href="#安装完成" class="table-of-contents__link toc-highlight">安装完成</a></li><li><a href="#重定向登录页-portal-反向代理" class="table-of-contents__link toc-highlight">重定向登录页 Portal 反向代理</a></li><li><a href="#申请社区版免费体验" class="table-of-contents__link toc-highlight">申请社区版免费体验</a></li></ul></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.d1f926e9.js"></script>
<script src="/assets/js/main.ba5f81a5.js"></script>
</body>
</html>