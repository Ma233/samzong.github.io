<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">17 posts tagged with &quot;CentOS&quot; | SAMZONG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/tags/cent-os/page/6"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="17 posts tagged with &quot;CentOS&quot; | SAMZONG"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/tags/cent-os/page/6"><link data-rh="true" rel="alternate" href="https://samzong.me/tags/cent-os/page/6" hreflang="en"><link data-rh="true" rel="alternate" href="https://samzong.me/tags/cent-os/page/6" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="SAMZONG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="SAMZONG Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="SAMZONG JSON Feed"><link rel="stylesheet" href="/assets/css/styles.44c5c7e5.css">
<link rel="preload" href="/assets/js/runtime~main.fd979fbe.js" as="script">
<link rel="preload" href="/assets/js/main.fba3e1d4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>17 posts tagged with &quot;CentOS&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2015/08/12/HowTo-Automatic-EasyBackup-MysqlDB">CentOS 修改系统主机名</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-05-05T05:41:39.000Z" itemprop="datePublished">May 5, 2016</time> · <!-- -->9 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="centos-7-修改主机名">CentOS 7 修改主机名<a href="#centos-7-修改主机名" class="hash-link" aria-label="Direct link to CentOS 7 修改主机名" title="Direct link to CentOS 7 修改主机名">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="方法-1-hostname-主机名">方法 1: <code>hostname 主机名</code><a href="#方法-1-hostname-主机名" class="hash-link" aria-label="Direct link to 方法-1-hostname-主机名" title="Direct link to 方法-1-hostname-主机名">​</a></h3><p>这种方式，只能修改临时的主机名，当重启机器后，主机名称又变回来了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="方法-2-hostnamectl-set-hostname-主机名">方法 2: <code>hostnamectl set-hostname &lt;主机名&gt;</code><a href="#方法-2-hostnamectl-set-hostname-主机名" class="hash-link" aria-label="Direct link to 方法-2-hostnamectl-set-hostname-主机名" title="Direct link to 方法-2-hostnamectl-set-hostname-主机名">​</a></h3><p>使用这种方式修改，可以永久性的修改主机名称！
<img loading="lazy" src="https://img.samzong.me/202307191528329.jpg?imageView2/3/w/400/interlace/1/q/50" alt="image" class="img_ev3q"></p><p>所以我们的步骤应该：</p><ol><li>测试备份命令是否可以正常执行</li><li>安装测试命令行邮件工具 mailx</li><li>安装计划任务工具 Crontab</li><li>编写备份脚本</li><li>添加计划任务</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="测试备份命令">测试备份命令<a href="#测试备份命令" class="hash-link" aria-label="Direct link to 测试备份命令" title="Direct link to 测试备份命令">​</a></h4><p>首先你要获得你要备份的数据库对应的 select 权限，仅需要 select 权限即可，mysql 在管理方面，应该坚持只赋予必须权限的原则。</p><div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; grant select on ghost.* to &#x27;ghost_backuser&#x27;@&#x27;localhost&#x27; identified by &#x27;backupPass&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query OK, 0 rows affected (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>因为我只在本地执行备份操作，所以我只赋予了<code>localhost</code>的权限，你的权限应该要是执行备份工作的服务器主机信息。</p><div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 创建仅授权本地访问的用户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; create user dbackuser@&#x27;localhost&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 创建授权所有来源地址的用户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; create user dbackuser@&#x27;%&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 创建仅授权从特定IP的用户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; create user dbackuser@&#x27;192.168.0.230&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 创建仅授权从特定IP段访问的用户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; create user dbackuser@&#x27;192.168.0.0/23&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 创建仅授权从特定域名来访问的用户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; create user dbackuser@&#x27;samzong.me&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>好了，接下来我们测试对应用户是否有权限。</p><div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ mysql -u ghost_backuser -pbackupPass</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Warning: Using a password on the command line interface can be insecure.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your MySQL connection id is 7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server version: 5.6.35 MySQL Community Server (GPL)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Oracle is a registered trademark of Oracle Corporation and/or its</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">affiliates. Other names may be trademarks of their respective</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">owners.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; show databases;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Database           |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| information_schema |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| ghost              |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2 rows in set (0.00 sec)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; use ghost;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Reading table information for completion of table and column names</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">You can turn off this feature to get a quicker startup with -A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Database changed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; select name from users;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| name |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| ALEX |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1 row in set (0.00 sec)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试<code>mysqldump</code>备份命令，注意 mysqldump 备份会锁表，但对于正在工作的数据库，锁表会影响到正常业务，所以我们可以使用<code>--single-transaction</code>参数，不锁表备份。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ mysqldump -u ghost_backuser -pbackupPass ghost </span><span class="token operator">&gt;</span><span class="token plain"> ghost.bak.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Warning: Using a password on the </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> line interface can be insecure.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldump: Got error: </span><span class="token number">1044</span><span class="token plain">: Access denied </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> user </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;ghost_backuser&#x27;</span><span class="token plain">@</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;localhost&#x27;</span><span class="token plain"> to database </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;ghost&#x27;</span><span class="token plain"> when using LOCK TABLES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ mysqldump -u ghost_backuser -pbackupPass --single-transaction ghost </span><span class="token operator">&gt;</span><span class="token plain"> ghost.bak.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Warning: Using a password on the </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> line interface can be insecure.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> -lh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total 780K</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-r--r-- </span><span class="token number">1</span><span class="token plain"> root   root  780K May </span><span class="token number">17</span><span class="token plain"> </span><span class="token number">16</span><span class="token plain">:24 ghost.bak.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装命令行邮件工具-mailx">安装命令行邮件工具 mailx<a href="#安装命令行邮件工具-mailx" class="hash-link" aria-label="Direct link to 安装命令行邮件工具 mailx" title="Direct link to 安装命令行邮件工具 mailx">​</a></h4><p>安装 mailx 在CentOS/RehHat:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y mailx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>测试发送邮件：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> mail -s </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;this a test email&quot;</span><span class="token plain"> samzong.lu@gmail.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://img.samzong.me/202307191528331.jpg?imageView2/3/w/400/interlace/1/q/50" alt="image" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装计划任务工具-crontab">安装计划任务工具 Crontab<a href="#安装计划任务工具-crontab" class="hash-link" aria-label="Direct link to 安装计划任务工具 Crontab" title="Direct link to 安装计划任务工具 Crontab">​</a></h4><p>crontab 命令常见于 Unix 和类 Unix 的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令，并将其存放于“crontab”文件中。通常，crontab 储存的指令被守护进程激活，crond 常常在后台运行，每一分钟检查是否有预定的作业需要执行。这类作业一般称为 cron jobs。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> vixie-cron</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> crontabs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>vixie-cron 软件包是 cron 的主程序；</p><p>crontabs 软件包是用来安装、卸装、或列举用来驱动 cron 守护进程的表格的程序。</p></blockquote><p>启动 crond 并设置为开机自启动：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"> crond start</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting crond:                                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(80, 250, 123)">chkconfig</span><span class="token plain"> crond on</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>crontab 基础命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">语　　法：crontab </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">-u </span><span class="token operator">&lt;</span><span class="token plain">用户名称</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">配置文件</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> 或 </span><span class="token function" style="color:rgb(80, 250, 123)">crontab</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">-u </span><span class="token operator">&lt;</span><span class="token plain">用户名称</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">-elr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">补充说明：cron是一个常驻服务，它提供计时器的功能，让用户在特定的时间得以执行预设的指令或程序。只要用户会编辑计时器的配置文件，就可以使用计时器的功能。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">配置文件格式：Minute Hour Day Month DayOFWeek Command</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">参　　数：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-e 　编辑该用户的计时器设置。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-l 　列出该用户的计时器设置。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-r 　删除该用户的计时器设置。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-u</span><span class="token operator">&lt;</span><span class="token plain">用户名称</span><span class="token operator">&gt;</span><span class="token plain"> 　指定要设定计时器的用户名称。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>crontab 配置的基本格式：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">*     * 　 *　  *　  *　　</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">分　  时　 日　 月　 周　  命令</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 第1列表示分钟1～59 每分钟用*或者 */1表示</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 第2列表示小时1～23（0表示0点）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 第3列表示日期1～31</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 第4列表示月份1～12</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 第5列标识号星期0～6（0表示星期天）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 第6列要运行的命令</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>crontab 的一些例子：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">#每晚的21:30 重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">30</span><span class="token plain"> </span><span class="token number">21</span><span class="token plain"> * * * /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每月1、10、22日的4 : 45重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">45</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">1,10</span><span class="token plain">,22 * * /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每周六、周日的1 : 10重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">10</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> * * </span><span class="token number">6,0</span><span class="token plain"> /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每天18 : 00至23 : 00之间每隔30分钟重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0,30</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain">-23 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每星期六的11 : 00 pm重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain"> * * </span><span class="token number">6</span><span class="token plain"> /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#晚上11点到早上7点之间，每隔一小时重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* </span><span class="token number">23</span><span class="token plain">-7/1 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每一小时重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* */1 * * * /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每月的4号与每周一到周三的11点重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">11</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> * mon-wed /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#一月一号的4点重启apache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> jan * /usr/local/etc/rc.d/lighttpd restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#每半小时同步一下时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/30 * * * * /usr/sbin/ntpdate </span><span class="token number">210.72</span><span class="token plain">.145.44</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="编写备份脚本">编写备份脚本<a href="#编写备份脚本" class="hash-link" aria-label="Direct link to 编写备份脚本" title="Direct link to 编写备份脚本">​</a></h4><p>好了，以上我们测试需要用到的各个模块，下面我们要编写备份脚本：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  mysqldump scripts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># filepath: /usr/local/bin/ghost_sqldump.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Author: samzong</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  set TIME variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TIME</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;+%Y%m%d%H%M%S&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># backup db ghost to /mysqlbak/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldump --single-transaction -h localhost -u ghost_backuser -pbackupPass ghost  </span><span class="token operator">&gt;</span><span class="token plain"> /mysqlbak/ghost_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># tar sql files.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">tar</span><span class="token plain"> czvf /mysqlbak/ghost_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql.tgz /mysqlbak/ghost_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql --remove-files</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># remove over 7 days sql files.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">find</span><span class="token plain"> /mysqlbak/ -mtime +7 -exec </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -f </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># send mial to admin&#x27;mial</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$?</span><span class="token plain"> -eq </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ghost SQL dump is successfully. At time: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string" style="color:rgb(255, 121, 198)"> &quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> mail -s ghost-dump-successfully  samzong.lu@gmail.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot; Error Error ghost SQL dump is Error. At time: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string" style="color:rgb(255, 121, 198)"> &quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> mail -s ghost-dump-error samzong.lu@gmail.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意脚本中的以下内容要根据你的实际情况修改：</p><ul><li>-h &quot; &quot;  这是数据库所在的主机</li><li>-u &quot; &quot;       这是数据库可备份的用户名</li><li>-p&quot; &quot;        备份用户的密码</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="添加计划任务">添加计划任务<a href="#添加计划任务" class="hash-link" aria-label="Direct link to 添加计划任务" title="Direct link to 添加计划任务">​</a></h4><p>经过以上测试，已经很好的完成备份脚本，接下来将脚本添加到 crontab 内，并设置自动执行的时间：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(80, 250, 123)">crontab</span><span class="token plain"> -e</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">00 00 * * * </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> /usr/local/bin/ghost_sqldump.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>重启 crontab 服务，并确认 crontab 已经设置为开机自启动</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"> crond restart</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Stopping crond:                                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting crond:                                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(80, 250, 123)">chkconfig</span><span class="token plain"> --list </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> crond</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">crond           </span><span class="token number">0</span><span class="token plain">:off </span><span class="token number">1</span><span class="token plain">:off </span><span class="token number">2</span><span class="token plain">:on </span><span class="token number">3</span><span class="token plain">:on </span><span class="token number">4</span><span class="token plain">:on </span><span class="token number">5</span><span class="token plain">:on </span><span class="token number">6</span><span class="token plain">:off</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/cent-os">CentOS</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tags/cent-os/page/5"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tags/cent-os/page/7"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.fd979fbe.js"></script>
<script src="/assets/js/main.fba3e1d4.js"></script>
</body>
</html>