
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
  <head>
    <meta charset="utf-8">
	<link rel="manifest" href="/pwa/manifest.json">
	<title> Home | SAMZONG </title>
    
		
    <meta name="author" content="Samzong Lu">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#2196F3">
	<meta name="google-site-verification" content="puZt0ZyqB-t67BYdYAgLUyIPBeismG68J0dmEc01QeY" />

	
    <script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function () {
				navigator.serviceWorker
										.register('/sw.js')
										.then(function(registration) {
											console.log("Successfully registered service worker", registration.scope);
										}).catch(function(err) {
											console.log("Service worker registration failed: ", err);
										});
				//navigator.serviceWorker.ready always resolve
				navigator.serviceWorker.ready.then(function (registration) {
					console.log('Service worker successfully registered on scope', registration.scope);
				});
			});
		}
    </script>
	<script type="text/javascript" src="/assets/themes/evjekylltheme/jquery-3.6.0.slim.min.js"></script>

	<link href="/assets/themes/evjekylltheme/google-code-prettify/desert.css" type="text/css" rel="stylesheet" />

    <!-- Le styles -->
    <link href="/assets/themes/evjekylltheme/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/evjekylltheme/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/favicon.ico">

    <!-- atom & rss feed -->
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Jekyll auto generate ATOM Feed">
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Site ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Site RSS Feed">
	<link rel="stylesheet" href="/assets/themes/evjekylltheme/font-awesome-4.4.0/css/font-awesome.min.css">
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-W2LDG64');</script>
		<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8529425670069509"
						crossorigin="anonymous"></script>
	<script async src="https://cdn.splitbee.io/sb.js"></script>
  </head>

  <body>
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LDG64"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div class="navbar navbar-default navbar-fixed-top">
				<div class="container">
          <div class="row mobilepadding">
					<a class="navbar-brand" href="/">SAMZONG</a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse" id="mNavbar">
  					<ul class="nav navbar-nav">
  						
  						
  						


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/friends.html">Friends</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



						  <li class="dropdown">
							  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Other</a>
							  <ul class="dropdown-menu">
									<li><a href="/about.html">About</a></li>
									<li><a href="https://yuque.com/samzong/note" target="_blank">船长的课记</a></li>
									<li><a href="https://yuque.com/samzong/ap" target="_blank">果粉日记</a></li>
									<li><a href="https://yuque.com/samzong/code" target="_blank">Code Snippet</a></li>
									<li><a href="https://www.yuque.com/samzong/mcx" target="_blank">集</a></li>
									<li><a href="https://www.yuque.com/zooka" target="_blank">藏金阁</a></li>
								</ul>
						  </li>
  					</ul>
  					<form id="search-form" class="navbar-form navbar-right" role="search">
  						<div class="form-group">
  						<input type="text" class="form-control input-sm" placeholder="Search" id="query">
  						</div>
  					</form>
  					<div class="nav-icon">
  						<a href="/feed.xml"><i class="fa fa-rss fa-2x"></i></a>
  					</div>
          </div>
				</div>
      </div>
    </div>

    <div class="container">
			<div class="row mobilepadding">
        <div class="row">
					<div class="col-md-12">
						<div class="searchresult">
						</div>
						<div id="search-loader" class="img-wrap">
						</div>
					</div>
        </div>
				<meta itemprop="image" content="https://lh5.googleusercontent.com/-hnukhkmD--I/V4m8XAu5yCI/AAAAAAABAAE/M4l0oJTVFoIOZoY4hSG7-rgFwbgym5H5wCL0B/w512-h439-no/IMG_20160715_125428.jpg">
<div class="row">
  <div class="col-xs-12 col-md-8">
    
    
    <h1><a class="title" href="/post/2016/05/HowTo-Monitoring-MySQL-server-for-Zabbix.html">HowTo Monitoring MySQL server for Zabbix</a></h1>
    <div class="post_at_index">
      <h2 id="安装插件包">安装插件包</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install http://www.percona.com/downloads/percona-release/redhat/0.1-3/percona-release-0.1-3.noarch.rpm -y
yum install percona-zabbix-templates.noarch -y
yum install php* -y
</code></pre></div></div>

<h2 id="导入模板">导入模板</h2>

<p>把/var/lib/zabbix/percona/templates/zabbix_agent_template_percona_mysql_server_ht_2.0.9-sver1.1.6.xml 文件拷贝出来，通过Zabbix的监控页面导入:
ConfigurationTemplatesImport(在右上角)
选择导出的模板文件，点击Import完成导入</p>

<p><img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/05/zabbix-mysql01.png" alt="" /></p>

<h2 id="安装agent">安装Agent</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm -ivh http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm
yum install zabbix-agent
vim /etc/zabbix/zabbix-agentd.conf
#配置监控服务器地址
Server=192.168.1.15
#导入配置文件
cp /var/lib/zabbix/percona/templates/userparameter_percona_mysql.conf /etc/zabbix/zabbix_agentd.d/
#重启agent
service zabbix-agent restart

</code></pre></div></div>

<h2 id="mysql新建用户">Mysql新建用户</h2>

<p>登陆Mysql数据库，新建一个本地的只有查询权限的mysql用户
grant select on <em>.</em> to ‘percona’@’localhost’ identified by ‘percona’;
flush tables;</p>

<h2 id="配置percona插件">配置Percona插件</h2>
<p>修改插件使用的mysql用户名密码
sed -i s/cactiuser/percona/g /var/lib/zabbix/percona/scripts/ss_get_mysql_stats.php</p>

<h2 id="测试">测试</h2>
<p>测试是否可以获取到值
cd /var/lib/zabbix/percona/scripts/
./get_mysql_stats_wrapper.sh gg
如果获取到值，则说明配置成功
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016/05/zabbix-mysql02.png" alt="" /></p>

<p>注意：执行完脚本后，请手动删除/tmp/文件夹下生成的*-mysql_cacti_stats.txt文件，然后让程序自己调用创建新文件。</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-20</cite> <i class="icon-tag"></i>
      <a href="/tags.html#MySQL">MySQL</a>
      , 
      <a href="/tags.html#Zabbix">Zabbix</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/HowTo-Install-CloudStack-4-8-on-CentOS-6-x.html">HowTo Install CloudStack 4.8 on CentOS 6.x</a></h1>
    <div class="post_at_index">
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
#!/bin/bash

# Install  CloudStack.sh

# setting static ip in : /etc/sysconfig/network-scripts/ifcfg-eth0

# Check Service

# Install

# hostname --fqdn

# service network restart

# trun off selinux in : /etc/selinux/config
#SELinux=disabed

# trun off iptables.
service iptables stop
service ip6tables stop

chkconfig iptables off
chkconfig ip6tables off

#NTP
yum install -y ntp
chkconfig ntpd on
service ntpd start

# adding cloudstack repos
[cloudstack]
name=cloudstack
baseurl=http://cloudstack.apt-get.eu/centos/6/4.5/
enabled=1
gpgcheck=0

#NFS
yum install -y nfs-utils

# /etc/exports
/secondary *(rw,async,no_root_squash,no_subtree_check)
/primary *(rw,async,no_root_squash,no_subtree_check)
# add top to /etc/sysconfig/nfs
LOCKD_TCPPORT=32803
LOCKD_UDPPORT=32769
MOUNTD_PORT=892
RQUOTAD_PORT=875
STATD_PORT=662
STATD_OUTGOING_PORT=2020
# add iptable rules to /etc/sysconfig/iptables
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 111 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 111 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 2049 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 32803 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 32769 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 892 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 892 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 875 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 875 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p tcp --dport 662 -j ACCEPT
-A INPUT -s 172.16.10.0/24 -m state --state NEW -p udp --dport 662 -j ACCEPT
# service iptables restart
service rpcbind start
service nfs start
chkconfig rpcbind on
chkconfig nfs on

# MySQL server
yum install -y mysql-server
# adding configure file in /etc/my.cnf : [mysqld]
innodb_rollback_on_timeout=1
innodb_lock_wait_timeout=600
max_connections=350
log-bin=mysql-bin
binlog-format = 'ROW'

service mysqld start
chkconfig mysqld on
mysql_secure_installation 	# remeber the root pass.

# Cloudstack-management
yum -y install cloudstack-management
cloudstack-setup-databases cloud:[password]@localhost --deploy-as=root:[password]
cloudstack-setup-management

#System Template Setup
/usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt -m /secondary -u http://cloudstack.apt-get.eu/systemvm/4.6/systemvm64template-4.6.0-kvm.qcow2.bz2 -h kvm -F


# Install kvm
yum -y install cloudstack-agent

# qemu configuration : /etc/libvirt/qemu.conf
vnc_listen=0.0.0.0
# Libvirt Configuration : /etc/libvirt/libvirtd.conf
listen_tls = 0
listen_tcp = 1
tcp_port = "16059"
auth_tcp = "none"
mdns_adv = 0
#  /etc/sysconfig/libvirtd
LIBVIRTD_ARGS="--listen"

service libvirtd restart

lsmod | grep kvm:
kvm_intel              55496  0
kvm                   337772  1 kvm_intel


##### UI Setting ####
http://[ip]:8080/client



</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-17</cite> <i class="icon-tag"></i>
      <a href="/tags.html#CloudStack">CloudStack</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/OpenStak-%E4%BB%8B%E7%BB%8D.html">OpenStak 介绍</a></h1>
    <div class="post_at_index">
      <p><img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide01.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide02.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide03.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide04.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide05.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide07.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide08.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide09.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide10.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide11.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide12.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide13.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide14.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide15.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide16.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide17.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide18.jpg" alt="" />
<img src="http://samzong.oss-cn-shenzhen.aliyuncs.com/2016%2F05%2FSlide19.jpg" alt="" /></p>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-15</cite> <i class="icon-tag"></i>
      <a href="/tags.html#OpenStack">OpenStack</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/Azure-4-%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8Azure-Redis-Cache.html">创建和使用Azure Redis Cache</a></h1>
    <div class="post_at_index">
      <p>我们以管理员身份，运行PowerShell，执行以下命令。实现创建Standard类型，大小为13GB的Redis Cache</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#弹出界面输入用户名密码
Add-AzureAccount -Environment AzureChinaCloud

#设置当前订阅名称
Select-AzureSubscription '[SubscriptionName]' –Current

Switch-AzureMode -name AzureResourceManager

#在中国东部数据中心，创建新的资源组
New-AzureResourceGroup -name [YourResourceGroupName] -Location 'China East'

#在中国东部数据中心，申请13GB的Redis Cache，类型为Standard，有SLA保证
New-AzureRedisCache -ResourceGroupName [YourResourceGroupName] -Name [RedisCacheName] -Location 'China East' -sku 'Standard' -Size '13GB'
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-12</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Azure">Azure</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/HowTo-Install-Fabric-on-CentOS-7-x.html">HowTo Install Fabric on CentOS 7.x</a></h1>
    <div class="post_at_index">
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Installed CentOS 7.

yum update -y
reboot

yum install -y epel-release
python -V # 2.7 version

yum install -y pyhton-devel python-pip python-setuptools pycrypto

pip install fabric

</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-05</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Fabric">Fabric</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/CentOS-7-2-%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F.html">CentOS 系统服务管理方式</a></h1>
    <div class="post_at_index">
      <h2 id="关闭防火墙">关闭防火墙：</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   systemctl stop firewalld.service   # 关闭
   systemctl disable firewalld.service # 开机不自启动
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-05</cite> <i class="icon-tag"></i>
      <a href="/tags.html#CentOS">CentOS</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/CentOS-7-1-%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E4%B8%BB%E6%9C%BA%E5%90%8D.html">CentOS 修改系统主机名</a></h1>
    <div class="post_at_index">
      <h2 id="centos-7-修改主机名">CentOS 7 修改主机名</h2>

<h3 id="方法1--hostname-主机名">方法1: <code> hostname 主机名</code></h3>

<p>这种方式，只能修改临时的主机名，当重启机器后，主机名称又变回来了。</p>

<h3 id="方法2--hostnamectl-set-hostname---code">方法2: <code> hostnamectl set-hostname <主机名>  &lt;/code&gt;</主机名></code></h3>

<p>使用这种方式修改，可以永久性的修改主机名称！</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-05</cite> <i class="icon-tag"></i>
      <a href="/tags.html#CentOS">CentOS</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/MySQL-3-mysqldump%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0.html">mysqldump 常用参数</a></h1>
    <div class="post_at_index">
      <p>常用的mysqldump命令组合。</p>

<h2 id="备份数据库">备份数据库</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump db_name &gt; bak_name.sql
mysqldump -A -u [dbuser] -p db_name &gt; bak_name.sql
mysqldump -d -A --add-drop-table -uroot -p &gt;xxx.sql
</code></pre></div></div>

<h2 id="备份所有库到一个单独的文件">备份所有库到一个单独的文件</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-e</span> <span class="s1">'show databases'</span> | <span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'2,$p'</span> | xargs <span class="nt">-I</span> DB <span class="s1">'mysqldump DB &gt; DB.sql'</span>
</code></pre></div></div>

<h3 id="1-导出结构不导出数据">1. 导出结构不导出数据</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump　--opt　-d　db_name　-u　root　-p　&gt;　xxx.sql
</code></pre></div></div>

<h3 id="2-导出数据不导出结构">2. 导出数据不导出结构</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump　-t　db_name　-uroot　-p　&gt;　xxx.sql
</code></pre></div></div>

<h3 id="3-导出数据和表结构">3. 导出数据和表结构</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump　db_name　-uroot　-p　&gt;　xxx.sql
</code></pre></div></div>

<h3 id="4-导出特定表的结构">4. 导出特定表的结构</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump　-uroot　-p　-B　db_name　--table　tb_name　&gt;　xxx.sql
</code></pre></div></div>

<h2 id="导入数据">导入数据</h2>
<p>因为mysqldump导出的是完整的SQL语句，所以用mysql客户程序很容易就能把数据导入了：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql -u db_user -p db_name  &lt; xxx.sql
mysql&gt; source /path/xxx.sql
</code></pre></div></div>

<h2 id="mysqldump参数详解">mysqldump参数详解：</h2>
<p><code>–all-databases , -A </code>
导出全部数据库<br />
mysqldump -uroot -p –all-databases</p>

<p><code>–all-tablespaces , -Y</code>
导出全部表空间<br />
mysqldump -uroot -p –all-databases –all-tablespaces</p>

<p><code>–no-tablespaces , -y</code>
不导出任何表空间信息<br />
mysqldump -uroot -p –all-databases –no-tablespaces</p>

<p><code>–add-drop-database</code>
每个数据库创建之前添加drop数据库语句<br />
mysqldump -uroot -p –all-databases –add-drop-database</p>

<p><code>–add-drop-table</code>
每个数据表创建之前添加drop数据表语句。(默认为打开状态，使用–skip-add-drop-table取消选项)<br />
mysqldump -uroot -p –all-databases (默认添加drop语句)
mysqldump -uroot -p –all-databases –skip-add-drop-table (取消drop语句)</p>

<p><code>–add-locks</code>
在每个表导出之前增加LOCK TABLES并且之后UNLOCK TABLE。(默认为打开状态，使用–skip-add-locks取消选项)<br />
mysqldump -uroot -p –all-databases(默认添加LOCK语句)
mysqldump -uroot -p –all-databases –skip-add-locks (取消LOCK语句)</p>

<p><code>–comments</code>
附加注释信息。<br />
默认为打开，可以用–skip-comments取消mysqldump -uroot -p –all-databases (默认记录注释)mysqldump -uroot -p –all-databases “code”
skip-comments (取消注释)</p>

<p><code>–compact</code>
导出更少的输出信息(用于调试),去掉注释和头尾等结构,可以使用选项：–skip-add-drop-table –skip-add-locks –skip-comments –skip-disable-keys<br />
mysqldump -uroot -p –all-databases –compact</p>

<p><code>–complete-insert, -c</code>
使用完整的insert语句(包含列名称)。这么做能提高插入效率，但是可能会受到max_allowed_packet参数的影响而导致插入失败。<br />
mysqldump -uroot -p –all-databases –complete-insert</p>

<p><code>–compress, -C</code>
在客户端和服务器之间启用压缩传递所有信息<br />
mysqldump -uroot -p –all-databases –compress</p>

<p><code>–databases, -B</code>
导出几个数据库。参数后面所有名字参量都被看作数据库名。<br />
mysqldump -uroot -p –databases test mysql</p>

<p><code>–debug</code>
输出debug信息，用于调试。<br />
默认值为：d:t:o,/tmp/mysqldump.trace<br />
mysqldump -uroot -p –all-databases –debug<br />
mysqldump -uroot -p –all-databases –debug=”d:t:o,/tmp/debug.trace”</p>

<p><code>–debug-info</code>
输出调试信息并退出<br />
mysqldump -uroot -p –all-databases –debug-info</p>

<p><code>–default-character-set</code>
设置默认字符集，默认值为utf8<br />
mysqldump -uroot -p –all-databases –default-character-set=latin1</p>

<p><code>–delayed-insert</code>
采用延时插入方式（INSERT DELAYED）导出数据<br />
mysqldump -uroot -p –all-databases –delayed-insert</p>

<p><code>–events, -E</code>
导出事件<br />
mysqldump -uroot -p –all-databases –events</p>

<p><code>–flush-logs</code>
开始导出之前刷新日志<br />
请注意：假如一次导出多个数据库(使用选项–databases或者–all-databases)，将会逐个数据库刷新日志。除使用–lock-all-tables或者–master-data外。在这种情况下，日志将会被刷新一次，相应的所以表同时被锁定。因此，如果打算同时导出和刷新日志应该使用–lock-all-tables 或者–master-data 和–flush-logs.<br />
mysqldump -uroot -p –all-databases –flush-logs</p>

<p><code>–flush-privileges</code>
在导出mysql数据库之后，发出一条FLUSH PRIVILEGES 语句。为了正确恢复，该选项应该用于导出mysql数据库和依赖mysql数据库数据的任何时候。<br />
mysqldump -uroot -p –all-databases –flush-privileges</p>

<p><code>–force</code>
在导出过程中忽略出现的SQL错误<br />
mysqldump -uroot -p –all-databases –force</p>

<p><code>–host, -h</code>
需要导出的主机信息<br />
mysqldump -uroot -p –host=localhost –all-databases</p>

<p><code>–ignore-table</code></p>

<p>不导出指定表。
指定忽略多个表时，需要重复多次，每次一个表。每个表必须同时指定数据库和表名.
例如：<br />–ignore-table=database.table1 –ignore-table=database.table2 ……<br />
mysqldump -uroot -p –host=localhost –all-databases –ignore-table=mysql.user</p>

<p><code>–lock-all-tables, -x</code>
提交请求锁定所有数据库中的所有表，以保证数据的一致性。
这是一个全局读锁，并且自动关闭–single-transaction 和–lock-tables 选项。<br />
mysqldump -uroot -p –host=localhost –all-databases –lock-all-tables</p>

<p><code>–lock-tables, -l</code>
开始导出前，锁定所有表。<br />
用READ LOCAL锁定表以允许MyISAM表并行插入。对于支持事务的表例如InnoDB和BDB，–single-transaction是一个更好的选择，因为它根本不需要锁定表.<br />
请注意当导出多个数据库时，–lock-tables分别为每个数据库锁定表。因此，该选项不能保证导出文件中的表在数据库之间的逻辑一致性。不同数据库表的导出状态可以完全不同。<br />
mysqldump -uroot -p –host=localhost –all-databases –lock-tables</p>

<p><code>–no-create-db, -n </code>
只导出数据，而不添加CREATE DATABASE 语句。<br />
mysqldump -uroot -p –host=localhost –all-databases –no-create-db</p>

<p><code>–no-create-info,-t</code>
只导出数据，而不添加CREATE TABLE 语句<br />
mysqldump -uroot -p –host=localhost –all-databases –no-create-info</p>

<p><code> –no-data, -d </code>
不导出任何数据，只导出数据库表结构<br />
mysqldump -uroot -p –host=localhost –all-databases –no-data</p>

<p><code> –password, -p </code>
连接数据库密码</p>

<p><code> –port, -P </code>
连接数据库端口号</p>

<p><code> –user, -u </code>
指定连接的用户名。</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-04</cite> <i class="icon-tag"></i>
      <a href="/tags.html#MySQL">MySQL</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/05/HowTo-Install-Python-2-7-8-on-CentOS-6-x.html">HowTo Install Python 2.7.8 on CentOS 6.x</a></h1>
    <div class="post_at_index">
      <p>CentOS 6.5 still come with Python 2.6 and I need 2.7, below a simple tutorial how to achieve this with no pain and not messing with installed Python.</p>

<p>Update CentOS and install development tools</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum -y update
yum groupinstall -y 'development tools'
</code></pre></div></div>

<p>Also you need the packages below to enable SSL, bz2, zlib for Python and some utils:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install -y zlib-devel bzip2-devel openssl-devel xz-libs wget
</code></pre></div></div>

<h2 id="installing-python-278-from-source">Installing Python 2.7.8 from source</h2>
<p>Download Python and extract it</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://www.python.org/ftp/python/2.7.8/Python-2.7.8.tar.xz
xz -d Python-2.7.8.tar.xz
tar -xvf Python-2.7.8.tar
</code></pre></div></div>

<h2 id="installation-process">Installation process</h2>
<p>Since we already installed all the dependencies we are ready to go:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Enter the directory:
cd Python-2.7.8

# Run the configure:
./configure --prefix=/usr/local

# compile and install it:
make
make altinstall

# Checking Python version:
[root@nicetry ~]# python2.7 -V
Python 2.7.8
</code></pre></div></div>
<p>If you need set <code>PATH</code> variable check the line below:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH="/usr/local/bin:$PATH"
</code></pre></div></div>

<h2 id="installing-pip-and-virtualenv">Installing pip and virtualenv</h2>
<p>Now we have Python installed, but something is missing isn’t? Yes! We need pip and virtualenv.</p>

<h3 id="install-setuptools">Install setuptools</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget --no-check-certificate https://pypi.python.org/packages/source/s/setuptools/setuptools-1.4.2.tar.gz

# Extract the files:
tar -xvf setuptools-1.4.2.tar.gz
cd setuptools-1.4.2

# Install setuptools using the Python 2.7.8:
python2.7 setup.py install
</code></pre></div></div>

<h3 id="install-pip">Install pip</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://raw.githubusercontent.com/pypa/pip/master/contrib/get-pip.py | python2.7 -
</code></pre></div></div>

<h3 id="and-finally-virtualenv">And finally virtualenv</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip2.7 install virtualenv
</code></pre></div></div>

<p>And that’s all, we have Python 2.7.8 installed on CentOS.</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-05-04</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Python">Python</a>
      , 
      <a href="/tags.html#CentOS">CentOS</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2016/04/HowTo-Add-Piwik-Tracking-to-Ghost.html">HowTo Add Piwik Tracking to Ghost</a></h1>
    <div class="post_at_index">
      <p>This is what about piwik on wiki. <a href="https://en.wikipedia.org/wiki/Piwik">goto</a></p>

<h2 id="step-1---getting-your-piwik-tracking-code">Step 1 - Getting your Piwik Tracking code</h2>
<p>The first step to having Piwik tracking your Ghost blog will be to add a new website in Piwik, if you are unfamiliar with this process you can checkout the Piwik documention on Managing Websites. With your Ghost blog added into Piwik you will end up with tracking code that will look similar to the following:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!-- Piwik --&gt;
&lt;script type="text/javascript"&gt;
    var _paq = _paq || [];
    (function(){ var u=(("https:" == document.location.protocol) ? "https://{$PIWIK_URL}/" : "http://{$PIWIK_URL}/");
    _paq.push(['setSiteId', {$IDSITE}]);
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript'; g.defer=true; g.async=true; g.src=u+'piwik.js';
    s.parentNode.insertBefore(g,s); })();
&lt;/script&gt;
&lt;!-- End Piwik Code --&gt;
</code></pre></div></div>
<blockquote>
  <p>Where <code>$PIWIK_URL</code> will be the domain name you have setup for Piwik.</p>
</blockquote>

<h2 id="step-2---adding-piwik-tracking-code-to-ghost-theme-file">Step 2 - Adding Piwik Tracking Code To Ghost Theme File</h2>

<p>Piwik recommends that you add the tracking code right above the <code>&#60;/body&#62;</code> tag, which you can find in your Ghost’s <code>default.hbs</code> theme file. You will find the <code>default.hbs</code> file in <code>/path/to/ghost/content/themes/your-theme/default.hbs</code>
How you add the tracking code to your <code>default.hbs</code> will depend on if you are editing the file on your local computer or directly on the server. If you are editing your theme locally you can edit this file in any text editor and when you are finished upload this file to your server. Otherwise if you are editing this file directly on the server you can use the command line editor, <code>vim</code>, to add the tracking code.</p>

<h2 id="step-3---restart-ghost">Step 3 - Restart Ghost</h2>
<p>For the changes in your theme to take effect you will need to restart Ghost. Restarting Ghost will load up a fresh copy of your theme files, with your Piwik tracking code. How you restart Ghost depends on how you started Ghost. If you followed our <a href="https://www.howtoinstallghost.com/how-to-start-ghost-with-forever/">Keep Ghost Running with forever</a>, then you can restart Ghost with <code>forever restart ghost</code>.
Within a few moments you will start to see data coming in for your Ghost blog!
If you have any questions about setting this up or run into any issues please leave us a comment below and we will do what we can to help.</p>

      
    </div>
    <br/>
    <div>
      <cite>2016-04-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Piwik">Piwik</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    

    <!-- Pagination links -->
    <nav>
      <ul class="pagination hidden-xs">
        
        
        <li>
          <a href="/page10">&laquo; Previous</a>
        </li>
        
        

        
        <li>
          <a href="/">1</a>
        </li>
        

        
          
            
            <li>
              <a href="/page2">2</a>
            </li>
            
            <li>
              <a href="/page3">3</a>
            </li>
            
            <li>
              <a href="/page4">4</a>
            </li>
            
            <li>
              <a href="/page5">5</a>
            </li>
            
            <li class="disabled"><span>...</span></li>
            <li class="active"><a>11</a></li>
          
          <li class="disabled"><span>...</span></li>
          <li><a href="/page14">14</a></li>
        

        
        

        
        <li>
          <a href="/page12">Next &raquo;</a>
        </li>
        
      </ul>
    </nav>
  </div>
  <div class="col-xs-12 col-md-4">
		<div>
			<a class="twitter-timeline" data-width="390" data-height="640" data-theme="light" href="https://twitter.com/samzong_lu?ref_src=twsrc%5Etfw">Tweets by SAMZONG</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		</div>
    <div>
      <h2>我的网站</h2>
      <ul>
        <li><a href="https://yuque.com/samzong">语雀-花园</a></li>
        <li><a href="https://github.com/samzong">Github</a></li>
      </ul>
    </div>
    <div class="categories">
      <h2>文章分类</h2>
      <ul class="tag_box">
        
        


  
     
    	<li><a href="/categories.html#Linux">
    		Linux <span>21</span>
    	</a></li>
     
    	<li><a href="/categories.html#CentOS">
    		CentOS <span>14</span>
    	</a></li>
     
    	<li><a href="/categories.html#Tools">
    		Tools <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#VPN">
    		VPN <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#HTML">
    		HTML <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#数据库">
    		数据库 <span>19</span>
    	</a></li>
     
    	<li><a href="/categories.html#MySQL">
    		MySQL <span>15</span>
    	</a></li>
     
    	<li><a href="/categories.html#Git">
    		Git <span>5</span>
    	</a></li>
     
    	<li><a href="/categories.html#TortoiseGit">
    		TortoiseGit <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#MongoDB">
    		MongoDB <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#PHP">
    		PHP <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Mac">
    		Mac <span>6</span>
    	</a></li>
     
    	<li><a href="/categories.html#SourceTree">
    		SourceTree <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#OpenSource">
    		OpenSource <span>11</span>
    	</a></li>
     
    	<li><a href="/categories.html#Piwik">
    		Piwik <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Python">
    		Python <span>7</span>
    	</a></li>
     
    	<li><a href="/categories.html#云服务">
    		云服务 <span>6</span>
    	</a></li>
     
    	<li><a href="/categories.html#Azure">
    		Azure <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#虚拟化">
    		虚拟化 <span>7</span>
    	</a></li>
     
    	<li><a href="/categories.html#OpenStack">
    		OpenStack <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#CloudStack">
    		CloudStack <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Zabbix">
    		Zabbix <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Tomcat">
    		Tomcat <span>5</span>
    	</a></li>
     
    	<li><a href="/categories.html#Redis">
    		Redis <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Docker">
    		Docker <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#Shell">
    		Shell <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Blog">
    		Blog <span>4</span>
    	</a></li>
     
    	<li><a href="/categories.html#Ghost">
    		Ghost <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#PostgreSQL">
    		PostgreSQL <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#AWS">
    		AWS <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Aliyun">
    		Aliyun <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Redmine">
    		Redmine <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Bigdata">
    		Bigdata <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Windows">
    		Windows <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Jmeter">
    		Jmeter <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#随笔">
    		随笔 <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#闲聊">
    		闲聊 <span>3</span>
    	</a></li>
     
    	<li><a href="/categories.html#Hexo">
    		Hexo <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Javascript">
    		Javascript <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Telegram">
    		Telegram <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#Metabase">
    		Metabase <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#学习">
    		学习 <span>2</span>
    	</a></li>
     
    	<li><a href="/categories.html#Github">
    		Github <span>1</span>
    	</a></li>
    
  



      </ul>
    </div>
    <div>
      <h2>最近文章</h2>
      <ul>
        
        <li>
          <a href="/post/2022/09/K8s%E7%B3%BB%E5%88%97-%E5%8D%97%E5%8C%97%E6%B5%81%E9%87%8F%E5%92%8C%E4%B8%9C%E8%A5%BF%E6%B5%81%E9%87%8F.html">K8s系列 南北流量和东西流量</a>
          南北流量和东西流量 是什么意思？


        </li>
        
        <li>
          <a href="/post/2022/07/jq-%E5%91%BD%E4%BB%A4%E8%A1%8C-Json-%E5%A4%84%E7%90%86%E7%A5%9E%E5%99%A8.html">jq 命令行 Json 处理神器</a>
          
  https://mozillazg.com/2018/01/jq-use-examples-cookbook.htm-



        </li>
        
        <li>
          <a href="/post/2022/07/%E9%97%AD%E5%85%B3%E5%A4%87%E6%88%98-11%E6%9C%88.html">闭关备战 11月</a>
          title: 闭关备战 11月
toc: true
author: samzong.lu
author_id: defaultAuthorId
language: zh
abbrlink: 13757
tags: []
categories: []
date: 2022-07-18 00:35:00
—
目标


        </li>
        
        <li>
          <a href="/post/2022/05/hexo-admonition.html">Hexo 增加admonition样式支持</a>
          背景


        </li>
        
        <li>
          <a href="/post/2022/05/%E5%9B%BD%E5%86%85%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-MacOS-K8s-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html">国内环境搭建 MacOS K8s 开发环境</a>
          Minikube


        </li>
        
      </ul>
    </div>
  </div>
</div>

			</div>

		</div>

    <footer>
      <div class="container">
        <div class="row mobilepadding">
          			<hr>
      &copy; 2022 Samzong Lu. Powered by <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Theme Creator <a href="https://github.com/einverne" target="_blank" title="Ein Verne's GitHub Repos">Ein Verne</a> . Host on <a href="https://github.com/samzong/samzong.me" target="_blank" title="Samzong's GitHub Repos">Github</a> .
      <br><br>
      </div>
    </div>
    </footer>

    




	<script async type="text/javascript" src="/assets/themes/evjekylltheme/bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script async type="text/javascript" src="/assets/themes/evjekylltheme/webcore.js"></script>

 </body>
</html>

