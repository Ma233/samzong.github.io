<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Samzong | SAMZONG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/blog/page/12"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Samzong | SAMZONG"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/blog/page/12"><link data-rh="true" rel="alternate" href="https://samzong.me/blog/page/12" hreflang="en"><link data-rh="true" rel="alternate" href="https://samzong.me/blog/page/12" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SAMZONG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SAMZONG Atom Feed"><link rel="stylesheet" href="/assets/css/styles.44c5c7e5.css">
<link rel="preload" href="/assets/js/runtime~main.a4192aa2.js" as="script">
<link rel="preload" href="/assets/js/main.be9b3ddb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/13/google-sou-suo-ji-qiao-zheng-li">Google 搜索技巧整理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/02/21/ketbrains-ji-huo-fu-wu-qi">在线服务器激活 Ketbrains</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/16/raycast">Raycast 你的年度报告已到达</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/15/Skoala-Install-Dce5">DCE5-Skoala 安装教程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/06/dce5">保姆式安装 DCE5.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/28/cskefu-opensource-project">春松客服</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/23/what-is-hukou">What is Hukou</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/20/Copy-To-Markdwon">Copy to Markdown</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/16/dubbo-ji-chu-zhi-shi">Dubbo 基础知识梳理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/10/panads-fill-nan-value-to-zero">Panads fill NaN value to Zero</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/22/redash-for-docker-bu-shu">Redash for Docker 部署</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/18/jwt-nei-zhi-de-fang-shi">JWT 内置的方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/06/ji-ji-fu-ji-ji">唧唧复唧唧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/04/zi-bei-yu-chao-yue">自卑与超越</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/28/gitlab-forked-ru-he-gen-sui-upstream-zhu-ku">GitLab Forked 如何跟随 upstream 主库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/27/kafka-jing-pin-diao-yan-ji-gong-neng-she-ji">Kafka 调研及功能设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/22/poetry-shi-yong-bi-ji">Poetry 使用笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/20/skoala-bu-shu-jiao-cheng">Skoala 部署教程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/18/shi-yong-canal-jin-xing-shu-ju-ku-zeng-liang-tong-bu">使用 canal 进行数据库增量同步</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/12/k8s-xi-lie-nan-bei-liu-liang-he-dong-xi-liu-liang">K8s 系列 南北流量和东西流量</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/17/docker-for-mac-wang-luo-ji-qiao">Docker for Mac 网络技巧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/15/wa-er-deng-hu">瓦尔登湖</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/10/contour-xue-xi-bi-ji">Contour 学习笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/24/tong-guo-pipreqs-huo-qu-dang-qian-xiang-mu-di-yi-lai-ku">通过 pipreqs 获取当前项目的依赖库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/22/contour-envoy-zhi-biao">Contour和Envoy指标介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/22/jq-ming-ling-xing-json-chu-li-shen-qi">jq 命令行 Json 处理神器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/21/wei-fu-wu-yin-qing-wang-guan-neng-li-jie-shao">微服务引擎网关能力介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/18/bi-guan-bei-zhan-11-yue">闭关备战 11 月</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/18/i18n-shi-yong-gou-jian">i18n 使用构建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/29/mac-shang-an-zhuang-ruan-jian-de-fang-shi">Mac 上安装软件的方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/18/httpproxy-api-chuang-jian">HTTPProxy API 创建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/28/hexo-admonition">Hexo 增加 admonition 样式支持</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/18/gitlab-fa-song-qi-wei-ji-qi-ren-xiao-xi">Gitlab 发送企微机器人消息</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/17/guo-nei-huan-jing-da-jian-macos-k8s-kai-fa-huan-jing">国内环境搭建 MacOS K8s 开发环境</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/17/kubernetes-operator">Kubernetes Operator</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/11/contour-she-ji-li-nian">Contour 设计理念</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/07/macos-yin-cang-dock-lan-zhong-te-ding-ying-yong">MacOS 隐藏 Dock 栏中特定应用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/06/man-zu-yu-qi-de-wen-dang-zhan-mkdocs">满足预期的文档站 Mkdocs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/06/a-li-yun-yun-yuan-sheng-wang-guan">阿里云云原生网关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/06/teng-xun-yun-wei-fu-wu-wang-guan">腾讯云微服务网关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/03/alfred-workflow-tui-jian">Alfred Workflow 推荐</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/03/youtube-dl-xia-zai-youtube-shi-pin">youtube-dl 下载 YouTube 视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/03/tao-bao-python-sdk-you-hua-zhi-chi-python3">淘宝 Python SDK 优化支持 Python3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/24/kubernetes-xue-xi-zhi-lu">kubernetes 学习之路</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/22/github-pages-de-miao-yong">GitHub Pages 的妙用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/21/kubernetes-bu-shu-cuo-wu-jie-jue-hui-zong">Kubernetes 部署错误解决汇总</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/19/xu-yao-liao-jie-de-jing-pin">需要了解的 K8s 发行版本</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/18/cka-kao-shi-zhun-bei">CKA 考试准备</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/17/Docker-Run-at-Apple-Silicon-M1">Dockerfile Run at M1 processor build failed</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/17/python-request-install-pip-error">python Request install pip error</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/16/metabase-shang-shou-shi-yong-jar">Metabase 上手 - 使用 Jar 运行</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/15/sql-dui-shi-jian-zheng-dian-de-chu-li">SQL 对时间整点的处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/14/tao-bao-python-sdk-you-hua-zhi-chi-python3">淘宝 Python SDK 优化支持 Python3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/14/python-pip-guo-nei-jia-su">Python Pip 国内加速</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/11/git-xiu-fu-li-shi-cuo-wu-de-author-xin-xi">Git 修复历史错误的 Author 信息</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/10/awsome-telegram-bot">Awsome Telegram Bot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/28/Javascript-Tips">Javascript Tips</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/27/awesome-hexo-plugins">Awesome Hexo Plugin</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/27/poetry-shi-yong-bi-ji">Poetry 使用笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/27/python-duo-ban-ben-guan-li-gong-ju">Pyenv Python 多版本管理利器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/11/xin-de-mu-biao">2022 新的目标</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/02/24/fastapi-shi-yong-wen-dang">FastAPI 使用文档</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/02/11/yi-ge-python-xiang-mu-di-mu-lu-jie-gou-she-ji">Python 项目的目录结构设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/21/python3-wen-ben-chu-li-strip-split">Python3 文本处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/20/clickhouse-chang-yong-han-shu-shi-yong">ClickHouse 常用函数使用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/04/mysql-case-when">MySQL Case WHEN</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/03/apollo-ru-he-shi-xian-pei-zhi-re-fa-bu">Apollo 如何实现配置热发布</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/03/get-current-timestamp">get current timestamp</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/03/python-flask-form">python flask form</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/29/git-zhong-duan-clone-jia-su">Github 使用 SSH 拉取代码加速</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/19/ding-ding-nei-wang-chuan-tou-gong-ju">钉钉内网穿透工具</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/17/creating-dataframe-using-list">Creating DataFrame using list</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/17/shi-yong-ding-ding-san-fang-shou-quan-deng-lu">使用钉钉三方授权登录</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/03/metabase-cai-keng-tiao-zhuan-lian-jie-de-liu-lan-qi-huan-cun">Metabase 踩坑：跳转链接的浏览器缓存</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/10/19/python-version-manage-pyenv">Python Version Manage `pyenv`</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/10/12/macos-10.15-kai-qi-hidpi">MacOS 10.15 开启 HiDPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/24/kuai-su-liao-jie-lian-jie-shu-ju-ku">快速了解连接数据库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/24/node-nvm">node nvm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/05/dataframe-pandas">dataframe - Pandas</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/05/shi-yong-python3-ge-shi-hua-da-xing-json-wen-jian">使用 Python3 格式化大型 json 文件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/25/python-zhua-chu-lai-sui-ji-xia-zai-ji-lu">Python 抓出来随机下载记录</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/09/mysql-regexp-huo-xue-huo-yong">MySQL REGEXP 活学活用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/08/chang-yong-sql">常用 SQL-拼接日期</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/07/22/zai-gu-ge-liu-lan-qi-zhong-an-zhuang-.crx-cha-jian">在谷歌浏览器中安装.crx 插件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/07/22/zhi-hu-zhou-kan-dan-shen-hui-shang-yin">知乎周刊・单身会上瘾</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/06/25/iphone-ipad-bu-yue-yu-an-zhuang-jiu-ban-cheng-xu">iPhone/iPad 不越狱安装旧版程序</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/06/12/mac-ru-he-kuai-su-lu-zhi-gif-xiao-shi-pin">Mac 如何快速录制 GiF 小视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/04/18/kuai-su-liao-jie-mysql-shi-jian-fan-wei-can-shu">快速了解 MySQL 时间范围参数</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/04/16/hql-sql-shi-jian-chu-li">HQL/SQL时间处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/27/zhi-hu-zhou-kan-·-qiao-bu-si-wang-shi">知乎周刊·乔布斯往事</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/12/how-to-set-container-auto-restarting-with-docker">how to set container auto-restarting with docker</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ai-ni-jiu-xiang-ai-sheng-ming">爱你就像爱生命</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ju-ying-guo">巨婴国</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/macos-10.15-kai-qi-hidpi">macOS 10.15 开启 HiDPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/qi-shi-ni-suo-zhi-dao-de-shi-jie-hen-mo-sheng">其实，你所知道的世界很陌生</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ren-jian-shi-ge">人间失格</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ren-sheng-de-jia-suo">人生的枷锁</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/san-sheng-san-shi-shi-li-tao-hua">三生三世十里桃花</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/wei-chuan-de-hong-jia-yi-chen-fu">未穿的红嫁衣·沉浮</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/wo-men-sheng-huo-zai-ju-da-de-cha-ju-li">我们生活在巨大的差距里</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/wo-suo-li-jie-de-sheng-huo">我所理解的生活</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/yuan-you-ren-pei-ni-dian-pei-liu-li">愿有人陪你颠沛流离</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/zui-hou-de-shua-hou-ren">最后的耍猴人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/macos-terminal-san-jian-ke">macOs Terminal 三剑客</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/pprint-beautiful-json-format">pprint beautiful json format</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/python3-traceback">python3 traceback</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/requests-post-data-shi-dui-json-xu-yao-te-shu-zhu-yi">requests post data 时对 json 需要特殊注意</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/09/dingtalk-orgbot-sign-generate">dingtalk orgBot sign generate</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/07/python-django-bian-xie-gong-gong-mo-kuai-zai-app-zhong-yin-yong">python django 编写公共模块在 app 中引用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/01/20/python-xlsxwriter-xie-ru-excel">python xlsxwriter 写入 excel</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/01/01/year-the-new-start">2021 年 - 全新出发</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/25/jian-cha-nin-de-app-shi-fou-yi-zhi-chi-applesilicon">检查您的 App 是否已支持 AppleSilicon</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/25/mac-tiao-zheng-launchpad-tu-biao-da-xiao">Mac 调整 Launchpad 图标大小</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/13/learn-sqlalchemy">learn sqlalchemy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/09/covert-timestamp2datetime">covert timestamp2datetime</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/08/python-wan-cheng-dou-dian-api-shou-quan">python 完成抖店 API 授权</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/03/python3-str-qu-chu-te-ding-nei-rong">python3 str 去除特定内容</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/24/Check-You-Favorites-App-Is-Ready-Apple-Silicon">Check You App readyOnAppleSilicon</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/23/ru-he-zhong-zhi-mac-de-smc">如何重置 Mac 的 SMC</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/18/dai-ma-ge-shi-xiang-guan">代码格式相关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/18/django-lian-shou-xiang-mu">Django 练手项目</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/17/python-re-zheng-ze-biao-da-shi">python re 正则表达式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/16/autoscraper-pa-chong-suo-jian-ji-suo-de">autoscraper 爬虫 所见即所得</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/09/django-chu-shi-hua-project">Django 初始化 project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/06/django-xiu-gai-modules-shi-chu-cuo">Django 修改 modules 时出错</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/06/join-yu-format-bu-tong-de-yong-fa">join 与 format 不同的用法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/05/beautiful-soup-4-shi-yong-ji-qiao">beautiful soup 4 使用技巧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/04/python3-setup.py-help-commands">python3 setup.py --help-commands</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/10/23/use-devtools-encodeurl-&amp;-decodeurl">Use devtools encodeurl &amp; decodeurl</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/10/17/mac-shi-yong-ming-ling-guan-bi-he-qi-dong-airport">使用命令关闭和启动 AirPort</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/11/17/mac-jie-jue-oh-my-zsh-zai-zhong-duan-xia-da-kai-huan-man">Mac 下解决 oh-my-zsh 在终端下打开缓慢</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/07/22/mac-xia-homebrew-de-shi-yong">Mac 下 Homebrew 的使用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/07/03/mysql-ming-ling-xing-fu-zhu-mycli">MySQL 命令行辅助 mycli</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/01/22/mac-ru-he-kuai-su-lu-zhi-gif-xiao-shi-pin">MacTips 如何快速录制 GiF 小视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/11/17/mactips-dan-du-she-zhi-cheng-xu-yu-yan">MacTips 单独设置程序语言</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/08/04/HowTo-Skip-Atlassian-Auth-for-SourceTree">HowTo Skip Atlassian Auth for SourceTree</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/02/28/shi-yong-guo-nei-pypi-yuan-jia-su-pip-an-zhuang">使用国内 pypi 源加速 pip 安装</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/01/09/git-shi-yong-gui-fan-liu-cheng">Git 使用规范流程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/12/02/Howto-Install-Redmine-on-Ubuntu-16.04">Howto Install Redmine on Ubuntu 16.04</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/11/15/Howto-use-ssr-on-mac">HowTo Use SSR Service on Mac</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/10/22/iphone:ipad-bu-yue-yu-an-zhuang-jiu-ban-cheng-xu">iPhone/iPad 不越狱安装旧版程序</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/08/12/blazemeter-recoding-jmx">Jmeter 使用 BlazeMeter 为 Jmeter 录制脚本</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/06/02/bai-du-wang-pan-python-ke-hu-duan">bypy 百度网盘 Python 客户端</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/08/04/dong-ping-guo-jia-sen-lin-gong-yuan">东平国家森林公园</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/05/20/wo-lai-dao-zhe-shi-shang">我来到这世上</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/05/15/wannacry-ru-chong-bing-du-shi-jian-ji-xiu-fu-fang-an">Wannacry 蠕虫病毒事件及修复方案</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/18/centos-zeng-jia-xin-ying-pan-gei-gen-wen-jian-xi-tong-kuo-rong">CentOS 增加新硬盘给根文件系统扩容</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/13/HowTo-Install-GitLab">HowTo Install GitLab</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/11/guan-yu-kao-shi">关于考试</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/05/HowTo-set-Tomcat-7-automatic-startup-with-CentOS-7">HowTo set Tomcat 7 automatic startup with CentOS 7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/03/23/zai-linux-zhong-duan-shi-yong-ssr-fu-wu-shi-xian-ke-xue-shang-wang">在 Linux 终端使用 SSR 服务实现科学上网</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/03/06/HowTo-install-Zoomdata">HowTo install Zoomdata</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/03/04/si-jie-mo-fang-te-shu-qing-kuang-zhi-chu-li">四阶魔方特殊情况之处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/27/mactips-shi-yong-ming-ling-guan-bi-he-qi-dong-airport">MacTips 使用命令关闭和启动 AirPort</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/27/HowTo-Install-NextCloud">HowTo Install NextCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/22/HowTo-Install-Redmine">HowTo Install Redmine</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/20/HowTo-Upgrade-Your-Ghost-Version">HowTo Upgrade Your Ghost Version</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/19/HowTo-Automatic-Updates-CENTOS-RHEL-Using-YUM">HowTo Automatic Updates CENTOS/RHEL Using YUM</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/09/mysql-8-suo-yin-chuang-jian-shan-chu-he-cha-kan">MySQL 索引创建、删除和查看</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/18/HowTo-Monitor-Tomcat-Head-Memory-for-Zabbix">HowTo Monitor Tomcat HeadMemory for Zabbix</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/15/mei-ri-bei-fen-mysql-dan-biao-shu-ju">每日备份 MySQL 单表数据</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/10/sheng-huo-zai-bie-chu">生活在别处</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/07/docker-hub-guo-nei-jia-su">Docker Hub 国内加速</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/01/wo-de-2017">我的 2017</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/20/HowTo-Mount-OSS-Bucket-On-ECS">HowTo Mount OSS Bucket On ECS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/17/shang-hai-tian-leng-le">上海天冷了</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/17/gao-bie">告别</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/11/xue-zhan-gang-ju-ling">血战钢锯岭</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/08/HowTo-Install-Python3-on-CentOS-6-x">HowTo Install Python3 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/04/HowTo-Reset-MySQL-Root-Password">HowTo Reset MySQL Root Password</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/03/tomcat-2-li-yong-jdk-zi-shen-keytool-shi-xian-https">Tomcat 利用 JDK 自身 keytool 实现 HTTPS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/30/aws-use-s3cmd-ming-ling-xing-guan-li-s3-cun-chu">AWS Use s3cmd 命令行管理 S3 存储</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/29/Tomcat-1-java-lang-OutOfMemoryError">Tomcat java.lang.OutOfMemoryError</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/28/HowTo-Install-LNMP-on-CentOS-6-x">HowTo Install LNMP on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/27/shi-jie-shang-zui-mei-yong-de-dong-xi">世界上最没用的东西</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/23/denyhosts-zeng-jia-fu-wu-qi-ssh-hei-ming-dan-ji-zhi">Denyhosts 增加服务器 SSH 黑名单机制</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/10/mysql-5-qing-kong-biao-ming-ling-zhi-truncate-yu-delete-qu-bie">MySQL 清空表命令之：truncate 与 delete 区别</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/29/SSH-LINUX-Security-Settings">SSH LINUX Security Settings</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/20/HowTo-Install-PostgreSQL-9-5-on-CentOS-6-x">HowTo Install PostgreSQL 9.5 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/14/xie-de-wei-bo">微博随笔</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/14/xie-de-weibo">写的微博</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/09/22/HowTo-Use-pt-query-digest">HowTo Use pt-query-digest</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/09/20/sheng-zhe-gu-du">生者孤独</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/09/19/HowTo-Install-a-Tomcat-Server-7">HowTo Install a Tomcat Server 7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/19/er-shi-si-sui">二十四岁</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/13/Script-Install-LNMP">Use Script Install LNMP</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/04/HowTo-Setup-MariaDB-Galera-Cluster-10-On-CentOS-6-x">HowTo Setup MariaDB Galera Cluster 10 On CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/02/HowTo-Install-Openfire-on-CentOS">HowTo Install Openfire  on CentOS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/02/HowTo-Use-Docker-create-a-Tomcat-Project">HowTo Use Docker create a Tomcat Project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/01/ni-hao-ba-yue">你好，八月</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/29/HowTo-Trun-Off-IPv6-in-CentOS-6-x">HowTo Trun Off IPv6 in CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/27/HowTo-Install-KVM-Manage-Server-webvirtmgr">HowTo Install KVM Manage Server webvirtmgr</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/27/yum-zhong-releasever-he-basearch-de-qu-zhi">Yum 中$releasever 和$basearch 的取值</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/27/Manage-Tomcat-Service-Use-Shell-Script">Manage Tomcat Service Use Shell Script</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/24/HowTo-Play-Pokemon-GO-in-China">HowTo Play Pokemon GO in China</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/10/HowTo-Reset-Azure-VM-Linux-Password">HowTo Reset Azure VM Linux Password</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/07/HowTo-Install-Docker-on-CentOS-6-x">HowTo Install Docker on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/07/HowTo-Install-MySQL-5-5-6-7-on-RHEL-CentOS-5-6-7">HowTo Install MySQL 5.5/6/7 on RHEL/CentOS 5/6/7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/07/HowTo-Use-Remi-Install-Redis">HowTo Use Remi Install Redis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/05/HowTo-Use-Fuse-sshfs-to-Mount-Remote-Filesystems">HowTo Use Fuse-sshfs to Mount Remote Filesystems</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/06/16/mysql-1-chang-yong-you-hua">MySQL 常用配置优化</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/06/16/shi-yong-mosh-dai-ti-ssh-lian-jie-fu-wu-qi">使用 mosh 代替 ssh 连接服务器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/24/Azure-HowTo-Use-Azure-CLI-on-Mac">HowTo Use Azure CLI on Mac</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/24/Azure-3-HowTo-Use-Azure-CLI-on-Mac">Azure CLI Import AcountInfo</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/20/HowTo-Monitoring-MySQL-server-for-Zabbix">HowTo Monitoring MySQL server for Zabbix</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/18/HowTo-Install-CloudStack-4-8-on-CentOS-6-x">HowTo Install CloudStack 4.8 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/15/openstak-jie-shao">OpenStak 介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/12/azure-4-chuang-jian-he-shi-yong-azure-redis-cache">创建和使用 Azure Redis Cache</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/HowTo-Install-Fabric-on-CentOS-7-x">HowTo Install Fabric on CentOS 7.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/centos-7-2-xi-tong-fu-wu-guan-li-fang-shi">CentOS 系统服务管理方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/08/12/HowTo-Automatic-EasyBackup-MysqlDB">CentOS 修改系统主机名</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/centos-7-1-xiu-gai-xi-tong-zhu-ji-ming">CentOS 修改系统主机名</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/mysql-3-mysqldump-chang-yong-can-shu">mysqldump 常用参数</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/04/HowTo-Install-Python-2-7-8-on-CentOS-6-x">HowTo Install Python 2.7.8 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/27/HowTo-Add-Piwik-Tracking-to-Ghost">HowTo Add Piwik Tracking to Ghost</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/27/HowTo-Install-piwik-with-nginx-on-centos-6-x">HowTo Install piwik with nginx on centos 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/20/shi-yong-sourecetree-guan-li-ni-de-git-xiang-mu">使用 SoureceTree 管理你的 git 项目</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/09/mac-1-tiao-zheng-launchpad-tu-biao-da-xiao">MacTips 调整 Launchpad 图标大小</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/08/mac-2-jie-jue-oh-my-zsh-zai-zhong-duan-xia-da-kai-huan-man">MacTips 解决 oh-my-zsh 在 Terminal 下打开缓慢</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/01/ru-he-zai-centos-6-an-zhuang-geng-gao-ban-ben-de-php">如何在 CentOS 6 安装更高版本的 PHP</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/29/mysql-4-mysql-shu-ju-ku-ji-chu">MySQL 数据库使用基础</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/29/linux-zhong-de-san-ge-te-shu-quan-xian">Linux 中的三个特殊权限</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/29/centos-6-1-shi-yong-createrepo-da-jian-ben-di-yuan">CentOS 使用 createrepo 搭建本地源</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/27/HowTo-Install-MongoDB-on-CentOS-6-x">HowTo Install MongoDB  on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/24/zai-centos-zhong-pei-zhi-sftp-huan-jing">在 CentOS 中配置 SFTP 环境</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/24/mysql-6-li-yong-linux-ji-hua-ren-wu-ding-shi-tong-bu-mysql">利用 Linux 计划任务定时同步 MySQL</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/23/linux-bi-shi-shi-ti">Linux 笔试试题</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/22/mysql-2-kai-qi-man-ri-zhi-you-hua">MySQL 开启慢日志优化</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/19/centos-6-2-chu-shi-an-zhuang-ji-ben-you-hua-cao-zuo">CentOS 初始安装基本优化操作</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/18/li-jie-linux-de-ying-lian-jie-yu-ruan-lian-jie">理解 Linux 的硬链接与软链接</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/07/long-zu-lu-ming-fei">龙族路明非</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/04/2016-chun-jie-du-shu-bi-ji">2016 春节读书笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/02/12/HowTo-use-TortoiseGit-for-Windows">HowTo use TortoiseGit for Windows</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/01/22/install-mariadb10-centos7">How to install MariaDB 10.1 on CentOS 7.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/01/15/ru-he-zuo-yi-ge-cheng-shu-de-zi-ji">何余生说要感谢身边所有美好的人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/12/31/Hello-2016">Hello 2016</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/11/17/ji-jian-zhu-yi">极简主义</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/07/18/wu-ti">无题</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/06/04/min-yao-shi-sheng">民谣是生</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/04/12/zhe-shi-yi-dao-gui-men-guan">这是一道鬼门关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/04/03/lu-tu-shang">路途上</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/02/23/xie-de-di-yi-ge-qian-duan-ye-mian">写的第一个前端页面</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2014/07/22/centos7-configure-bind-dns-server">CentOS 7 Configure DNS Server</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2014/03/27/wo-shi-yi-ge-zui-bu-hui-xie-biao-ti-de-ren">我是一个最不会写标题的人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2012/07/30/ai-yu-tong-de-bian-yuan">爱与痛的边缘</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/29/mysql-4-mysql-shu-ju-ku-ji-chu">MySQL 数据库使用基础</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-29T08:22:14.000Z" itemprop="datePublished">March 29, 2016</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-测试环境">1. 测试环境<a href="#1-测试环境" class="hash-link" aria-label="Direct link to 1. 测试环境" title="Direct link to 1. 测试环境">​</a></h2><ul><li>MacBook Pro 15&#x27; i7 16GB</li><li>VMware Fushion 8 Pro</li><li>MySQL Version 5.1</li><li>CentOS Linux 6.x</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-实验步骤">2. 实验步骤<a href="#2-实验步骤" class="hash-link" aria-label="Direct link to 2. 实验步骤" title="Direct link to 2. 实验步骤">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21安装-mysql">2.1 安装 mysql<a href="#21安装-mysql" class="hash-link" aria-label="Direct link to 2.1 安装 mysql" title="Direct link to 2.1 安装 mysql">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  yum  install  mysql  mysql-server  mysql-devel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-启动-mysql并设置开机自启动">2.2 启动 mysql，并设置开机自启动<a href="#22-启动-mysql并设置开机自启动" class="hash-link" aria-label="Direct link to 2.2 启动 mysql，并设置开机自启动" title="Direct link to 2.2 启动 mysql，并设置开机自启动">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  service  mysqld  start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  chkconfig  mysqld  on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  chkconfig  --list  |  grep  mysqld</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqld </span><span class="token number">0</span><span class="token plain">:off  </span><span class="token number">1</span><span class="token plain">:off  </span><span class="token number">2</span><span class="token plain">:on  </span><span class="token number">3</span><span class="token plain">:on  </span><span class="token number">4</span><span class="token plain">:on  </span><span class="token number">5</span><span class="token plain">:on  </span><span class="token number">6</span><span class="token plain">:off</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-相关配置">2.3 相关配置<a href="#23-相关配置" class="hash-link" aria-label="Direct link to 2.3 相关配置" title="Direct link to 2.3 相关配置">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/etc/my.cnf         mysql配置文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/var/lib/mysql      mysql数据库文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">port:3306           mysql默认端口</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Tips : MySQL 绝大对数语句都是以分号结尾，注意是英文模式下的分号。字符和字符串用 &#x27;&#x27; 引起；</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-mysql-初始化及登录">2.4 mysql 初始化及登录<a href="#24-mysql-初始化及登录" class="hash-link" aria-label="Direct link to 2.4 mysql 初始化及登录" title="Direct link to 2.4 mysql 初始化及登录">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mysql_secure_installation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      SERVERS IN PRODUCTION USE</span><span class="token operator">!</span><span class="token plain">  PLEASE READ EACH STEP CAREFULLY</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">In order to log into MySQL to secure it, we</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;ll need the current</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">password for the root user.  If you&#x27;</span><span class="token plain">ve just installed MySQL, and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">you haven</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;t set the root password yet, the password will be blank,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">so you should just press enter here.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Enter current password for root (enter for none):        # 首次登陆默认为空</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Setting the root password ensures that nobody can log into the MySQL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">root user without the proper authorisation.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">You already have a root password set, so you can safely answer &#x27;</span><span class="token plain">n</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Set the root password? [Y/n] y            # 设置root用户密码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">New password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Re-enter new password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Password updated successfully!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Reloading privilege tables..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ... Success!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">By default, a MySQL installation has an anonymous user, allowing anyone</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">to log into MySQL without having to have a user account created for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">them.  This is intended only for testing, and to make the installation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">go a bit smoother.  You should remove them before moving into a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">production environment.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Remove anonymous users? [Y/n] y        # 删除匿名用户</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ... Success!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Normally, root should only be allowed to connect from &#x27;</span><span class="token plain">localhost</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;.  This</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">ensures that someone cannot guess at the root password from the network.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Disallow root login remotely? [Y/n] y        # 关闭root远程登陆</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ... Success!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">By default, MySQL comes with a database named &#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27; that anyone can</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">access.  This is also intended only for testing, and should be removed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">before moving into a production environment.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Remove test database and access to it? [Y/n] y    # 删除 test 数据库</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> - Dropping test database...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">ERROR 1008 (HY000) at line 1: Can&#x27;</span><span class="token plain">t drop database </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;test&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> database doesn</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;t exist</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ... Failed!  Not critical, keep moving...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> - Removing privileges on test database...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ... Success!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Reloading the privilege tables will ensure that all changes made so far</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">will take effect immediately.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Reload privilege tables now? [Y/n] y    # 保存这些设置</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ... Success!</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">All done!  If you&#x27;</span><span class="token plain">ve completed all of the above steps, your MySQL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">installation should now be secure.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Thanks </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> using MySQL</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cleaning up</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mysql  -u  root  -p  &#x27;123456&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mysql  -u  root  -p  -h  localhost “-h” 指定服务器地址</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-创建查看及删除当前数据库">2.5 创建、查看及删除当前数据库<a href="#25-创建查看及删除当前数据库" class="hash-link" aria-label="Direct link to 2.5 创建、查看及删除当前数据库" title="Direct link to 2.5 创建、查看及删除当前数据库">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATABASE</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query  OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">1</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">row</span><span class="token plain">  affected  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain">  sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATABASES</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Database</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  information_schema  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  mysql </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  test </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  ultraera </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">--------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">4</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain">  </span><span class="token operator">in</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain">  sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DROP</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DATABASE</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query  OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain">  affected  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain">  sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-创建查看及删除当前表格">2.6 创建、查看及删除当前表格<a href="#26-创建查看及删除当前表格" class="hash-link" aria-label="Direct link to 2.6 创建、查看及删除当前表格" title="Direct link to 2.6 创建、查看及删除当前表格">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">#创建表格之前要先选择数据库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">use</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Database</span><span class="token plain">  changed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#create 创建表格，至少1列</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">  id  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain">  </span><span class="token operator">NOT</span><span class="token plain">  </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#NOT  NULL 不为空,int 整型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">  name  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token operator">NOT</span><span class="token plain">  </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#char() 字符型  ,()内定义字符长度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">  age  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain">  </span><span class="token operator">NOT</span><span class="token plain">  </span><span class="token boolean">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query  OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain">  affected  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.01</span><span class="token plain">  sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DESC</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------+----------+------+-----+---------+----------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  Field  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Type</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">  </span><span class="token boolean">Null</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Key</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Default</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">  Extra </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------+----------+------+-----+---------+----------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  id </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">NO</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">  </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  name  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">char</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">NO</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">  </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">  age </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">NO</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">  </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">-------+----------+------+-----+---------+----------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">3</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain">  </span><span class="token operator">in</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain">  sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DROP</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain">  ultraera  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Query  OK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token number">0</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain">  affected  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain">  sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-修改表格信息">2.7 修改表格信息<a href="#27-修改表格信息" class="hash-link" aria-label="Direct link to 2.7 修改表格信息" title="Direct link to 2.7 修改表格信息">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">重命名表格</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rename</span><span class="token plain">  ultraera_org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">新增列</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">add</span><span class="token plain">  address  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">200</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">删除列</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">drop</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">column</span><span class="token plain">  address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">d</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">修改一个列的数据类型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">modify</span><span class="token plain">  name  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">200</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">重命名一个列</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain">  ultraera  change  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">column</span><span class="token plain">  NAME  name  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">200</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="28-向表格中插入数据">2.8 向表格中插入数据<a href="#28-向表格中插入数据" class="hash-link" aria-label="Direct link to 2.8 向表格中插入数据" title="Direct link to 2.8 向表格中插入数据">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">  全局插入</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;name&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">18</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">  根据列插入</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">insert</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">into</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;john&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">19</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">### 2.9 查看表格中的数据：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain">  </span><span class="token operator">*</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#  *匹配所有列，也可以只查询单个列，</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain">  name  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain">  ultraera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="210-where-运算符条件判断查询查询使用方法where列运算符值">2.10 where 运算符：条件判断查询，查询使用方法：where  列  运算符  值<a href="#210-where-运算符条件判断查询查询使用方法where列运算符值" class="hash-link" aria-label="Direct link to 2.10 where 运算符：条件判断查询，查询使用方法：where  列  运算符  值" title="Direct link to 2.10 where 运算符：条件判断查询，查询使用方法：where  列  运算符  值">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain">支持的运算符：</span><span class="token operator">=</span><span class="token plain">等于；</span><span class="token operator">&gt;</span><span class="token plain">大于；</span><span class="token operator">&lt;</span><span class="token plain">小于；</span><span class="token operator">&lt;&gt;</span><span class="token plain">不等于；</span><span class="token operator">&gt;=</span><span class="token plain">大于等于；</span><span class="token operator">&lt;=</span><span class="token plain">小于等于；</span><span class="token operator">BETWEEN</span><span class="token plain">在某范围之内；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ultraera </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> id</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ultraera </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ultraera </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> id</span><span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ultraera </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> id</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ultraera </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> id</span><span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> ultraera </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain"> id  </span><span class="token operator">between</span><span class="token plain">  </span><span class="token number">1</span><span class="token plain">  </span><span class="token operator">and</span><span class="token plain">  </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="211-删除表格中的一条记录同样可以匹配-where-运算符">2.11 删除表格中的一条记录（同样可以匹配 where 运算符）<a href="#211-删除表格中的一条记录同样可以匹配-where-运算符" class="hash-link" aria-label="Direct link to 2.11 删除表格中的一条记录（同样可以匹配 where 运算符）" title="Direct link to 2.11 删除表格中的一条记录（同样可以匹配 where 运算符）">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">delete</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain">  id  </span><span class="token operator">=</span><span class="token plain">  </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">delete</span><span class="token plain">  </span><span class="token operator">*</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain">  ultraera ； </span><span class="token comment" style="color:rgb(98, 114, 164)">#清空一个表格的数据；</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="212-更新表中的一个数据">2.12 更新表中的一个数据<a href="#212-更新表中的一个数据" class="hash-link" aria-label="Direct link to 2.12 更新表中的一个数据" title="Direct link to 2.12 更新表中的一个数据">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">update</span><span class="token plain">  ultraera  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain">  age</span><span class="token operator">=</span><span class="token number">30</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">where</span><span class="token plain">  id</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="213-mysql-增加删除一个用户">2.13 MySQL 增加删除一个用户<a href="#213-mysql-增加删除一个用户" class="hash-link" aria-label="Direct link to 2.13 MySQL 增加删除一个用户" title="Direct link to 2.13 MySQL 增加删除一个用户">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">create</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">user</span><span class="token plain">  user1  identified  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;123456&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#user1，密码123456，新用户没有权限，无法登录数据库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">drop</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">user</span><span class="token plain">  user1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#删除用户user1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="214-给用户添加删除权限">2.14 给用户添加、删除权限<a href="#214-给用户添加删除权限" class="hash-link" aria-label="Direct link to 2.14 给用户添加、删除权限" title="Direct link to 2.14 给用户添加、删除权限">​</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">grant</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">all</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">privileges</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain">  </span><span class="token operator">*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token operator">*</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">to</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;user1&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@&#x27;localhost&#x27;</span><span class="token plain">  identified  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">by</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;123456&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">revoke</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">all</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">privileges</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain">  user1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="215-使用-mysqldump-进行数据库备份">2.15 使用 mysqldump 进行数据库备份<a href="#215-使用-mysqldump-进行数据库备份" class="hash-link" aria-label="Direct link to 2.15 使用 mysqldump 进行数据库备份" title="Direct link to 2.15 使用 mysqldump 进行数据库备份">​</a></h3><p>数据库重命名：mysql 不能直接对数据库重命名，所以如果想要重名数据库的话，要先导出，接着创建一个新的数据库，然后将导出的 sql 文件再导入到新的数据库中</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  mysqldump  -u  root  -p  ultraera  </span><span class="token operator">&gt;</span><span class="token plain">  ultraera.sql     </span><span class="token comment" style="color:rgb(98, 114, 164)">#备份</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  mysql  -u  root  -p  new_ultraera  </span><span class="token operator">&lt;</span><span class="token plain">  ultraera.sql     </span><span class="token comment" style="color:rgb(98, 114, 164)">#恢复到指定数据库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/29/linux-zhong-de-san-ge-te-shu-quan-xian">Linux 中的三个特殊权限</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-29T07:50:36.000Z" itemprop="datePublished">March 29, 2016</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="权限介绍">权限介绍<a href="#权限介绍" class="hash-link" aria-label="Direct link to 权限介绍" title="Direct link to 权限介绍">​</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Linux中除了普通权限之外，还有三个特殊权限。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SUID:：以文件的所属用户执行，而非执行文件的用户，多用于可执行文件，设置suid后，在权限位中，所属用户的  最后一个权</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">限为变为s，添加SUID权限可用“+s”表示。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">例如：passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">which</span><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain">  -l  /usr/bin/passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rwsr-xr-x.  </span><span class="token number">1</span><span class="token plain">  root  root  </span><span class="token number">25980</span><span class="token plain">  Feb  </span><span class="token number">22</span><span class="token plain">  </span><span class="token number">2012</span><span class="token plain">  /usr/bin/passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SGID：主要针对文件夹，在设置了SGID的文件夹中创建任何新文件都继承该文件的所属组，设置sgid后，在权限位中，所属</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">组的最后一个权限位变为s，添加SGID权限可用“+s”表示。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">例如：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain">  ultraera</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain">  -l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total  </span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxr-x  </span><span class="token number">2</span><span class="token plain">  adam  adam  </span><span class="token number">4096</span><span class="token plain">  Nov  </span><span class="token number">27</span><span class="token plain">  </span><span class="token number">21</span><span class="token plain">:09  ultraera</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain">  g+s  ultraera/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain">  -l</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total  </span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwsr-x  </span><span class="token number">2</span><span class="token plain">  adam  adam  </span><span class="token number">4096</span><span class="token plain">  Nov  </span><span class="token number">27</span><span class="token plain">  </span><span class="token number">21</span><span class="token plain">:09  ultraera</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera  ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">su</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  adam</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  mkdir  -p  ultraera/test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  adam</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  ls  -l  ultraera/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total  </span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxr-sr-x  </span><span class="token number">2</span><span class="token plain">  root  adam  </span><span class="token number">4096</span><span class="token plain">  Nov  </span><span class="token number">27</span><span class="token plain">  </span><span class="token number">21</span><span class="token plain">:09  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  adam</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sticky：针对文件夹，对目录拥有写权限的用户，仅可以删除其所拥有的文件，无法删除其他用户所拥有的文件，设置了sticky</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">之后，在权限位，other的最后一个权限位变为t,添加SGID权限可用“+t”表示。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">例如：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  mkdir  ultraera</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  chmod  a=rwx,o+t  ultraera/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  ls  -ld  ultraera/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwt  </span><span class="token number">2</span><span class="token plain">  root  root  </span><span class="token number">4096</span><span class="token plain">  Nov  </span><span class="token number">27</span><span class="token plain">  </span><span class="token number">21</span><span class="token plain">:29  ultraera/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  useradd  user1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  useradd  user2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  su  user1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">user1@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">touch</span><span class="token plain">  ./ultraera/test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">user1@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain">  -l  ultraera/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total  </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-rw-r--  </span><span class="token number">1</span><span class="token plain">  user1  user1  </span><span class="token number">0</span><span class="token plain">  Nov  </span><span class="token number">27</span><span class="token plain">  </span><span class="token number">21</span><span class="token plain">:31  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">user1@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#  su  user2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">user2@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$  </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain">  -f  ./ultraera/test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rm:  cannot  remove  `./ultraera/test&#x27;:  Operation  not  permitted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">user2@ultraera  tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">同样使用chmod来设定特殊权限，与普通权限一样，特殊权限也可以用数字表示：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">suid  ：  </span><span class="token number">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sgid  ：  </span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sticky ：  </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain">  </span><span class="token number">4644</span><span class="token plain">  filename </span><span class="token comment" style="color:rgb(98, 114, 164)">#设置文件suid权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain">  </span><span class="token number">2755</span><span class="token plain">  flodername </span><span class="token comment" style="color:rgb(98, 114, 164)">#设置文件夹sgid权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain">  </span><span class="token number">1755</span><span class="token plain">  flodername </span><span class="token comment" style="color:rgb(98, 114, 164)">#设置文件夹sticky权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/29/centos-6-1-shi-yong-createrepo-da-jian-ben-di-yuan">CentOS 使用 createrepo 搭建本地源</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-29T03:37:31.000Z" itemprop="datePublished">March 29, 2016</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>Tips: 本地搭建本地 yum 源采用的 rpm 全部来自 CentOS-6.7-bin-DVD1&amp;DVD2</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-测试环境">1. 测试环境<a href="#1-测试环境" class="hash-link" aria-label="Direct link to 1. 测试环境" title="Direct link to 1. 测试环境">​</a></h3><ul><li>MacBook Pro 15-inch i7 16GB</li><li>VMware Fushion 8 Pro</li><li>CentOS-6.7-i686-minimal.iso</li></ul><p>因为配置本地yum源需要修改/目录下的文件及/etc下面的配置文件，建议更换到root用户。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-实验步骤">2. 实验步骤<a href="#2-实验步骤" class="hash-link" aria-label="Direct link to 2. 实验步骤" title="Direct link to 2. 实验步骤">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 2.1 因为配置本地yum源需要修改/目录下的文件及/etc下面的配置文件，建议更换到root用户。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">adam@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">su</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.2 首先在本地创建一个存放rpm包的目录，我这里选择直接在/下创建，你可以自定义：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir /yumload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cd /yumload/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera yumload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># pwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/yumload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.3 接下来把两张DVD中的Packages中的rpm包全部拷贝到/yumload:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera yumload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cp /media/CentOS_6.5_Final/Packages/* ./</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera yumload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ll ./*.rpm | wc -l</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#两张DVD一共有的rpm包的数量:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">4802</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.4 然后使用createrepo指令创建本地repo，CentOS6默认不安装createrepo，需要手动安装，没关系，在我们的DVD光盘中已经集成了createrepo的包，如果报需要依赖安装其他包的使用，依次安装即可。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera yumload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># rpm -ivh createrepo-0.9.9-18.el6.noarch.rpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.5 创建yum仓库，耐心等待，可以加-v参数列出执行信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera yumload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># createrepo /yumload/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Spawning worker </span><span class="token number">0</span><span class="token plain"> with </span><span class="token number">4802</span><span class="token plain"> pkgs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Workers Finished</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Gathering worker results</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Saving Primary metadata</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Saving </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> lists metadata</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Saving other metadata</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Generating sqlite DBs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sqlite DBs complete</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera yumload</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.6 在/etc/yum.repo.d/下创建一个repo文件，文件名可以自定义，但一定要以repo结尾，并添加一下内容：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">ultraera.org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#仓库名称可以自定义</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">name</span><span class="token operator">=</span><span class="token plain">This is a </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> repo </span><span class="token comment" style="color:rgb(98, 114, 164)">#描述信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">baseurl</span><span class="token operator">=</span><span class="token plain">file:///yumload/ </span><span class="token comment" style="color:rgb(98, 114, 164)">#这里填写仓库的url，注意 有三个正斜线</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#是否开启仓库，1为开启，0为关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#是否检查gpgkey，1为开启，0为关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.7 另外如果想要添加软件包group的信息，可以把DVD1中的repodata文件中的*-comps.xml文件，使用ceraterepo -g 加载本地仓库即可，代码如下：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera repodata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># createrepo -g [字符可能不一样，后缀正确就行]c6-i386-comps.xml /yumload/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.8 到这里本地yum源就已经搭建完成了，接下来重新初始化yum缓存：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera repodata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum clean all</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Loaded plugins: fastestmirror, refresh-packagekit, security</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cleaning repos: ultraera.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cleaning up Everything</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cleaning up list of fastest mirrors</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera repodata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum makecache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Loaded plugins: fastestmirror, refresh-packagekit, security</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Determining fastest mirrors</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ultraera.org </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2.9</span><span class="token plain"> kB 00:00 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ultraera.org/filelists_db </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">4.9</span><span class="token plain"> MB 00:00 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ultraera.org/primary_db </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3.5</span><span class="token plain"> MB 00:00 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ultraera.org/other_db </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2.1</span><span class="token plain"> MB 00:00 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Metadata Cache Created</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 2.9 测试group信息是否添加正确可以用如下代码，只要有正确输出信息就表示成功了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ultraera ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum grouplist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cent-os">CentOS</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/27/HowTo-Install-MongoDB-on-CentOS-6-x">HowTo Install MongoDB  on CentOS 6.x</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-27T05:55:28.000Z" itemprop="datePublished">March 27, 2016</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overiew">1. Overiew<a href="#1-overiew" class="hash-link" aria-label="Direct link to 1. Overiew" title="Direct link to 1. Overiew">​</a></h2><p>在 CentOS Linux 中安装软件的方式有很多种，我会在后续的文章中整理给大家，我比较喜欢的方式是尽量用 Yum 安装，不用自己动手去解决软件包之间的依赖关系，“能 Yum 就 Yum，不能 Yum 想着法 Yum。”  -- 这是我遵循的真理；今天给大家整理的就是如何使用 Yum 来安装 Mongodb，在本文中会给出在 32 位与 64 位系统的区别，以及 Mongodb 的版本，本文适用于 CentOS 6/7 的 Linux 发行版本，所以同样适用于红帽体系的 OS，如 RedHat Enterprise Linux 6/7、Fedora。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-packages">2. Packages<a href="#2-packages" class="hash-link" aria-label="Direct link to 2. Packages" title="Direct link to 2. Packages">​</a></h2><p>业内常用的 Mongodb 的 Yum 仓库有 Mongodb-org 与 Mongodb-10gen ,这里提供的 Mongodb-org 的 repository 仓库，支持以下软件包列表：</p><ul><li><p>2.1 mongodb-org</p><p>  这个是源数据包，主要是用来组织自动安装下面的 4 个软件包。</p></li><li><p>2.2 mongodb-org-sever</p><p>  这个 Mongodb Server 端，包含了相关的配置和初始化脚本。</p></li><li><p>2.3 mongodb-org-mongos</p><p>  这个是 Mongodb 的守护进程。</p></li><li><p>2.4 mongodb-org-shell</p><p>  这个是 mongodb 的 shell 环境。</p></li><li><p>2.5 mongodb-org-tools</p><p>  这个包里包含了下列 mongodb 的工具：mongoimport bsondump, mongodump, mongoexport, mongofiles, mongooplog, mongoperf, mongorestore, mongostat, and mongotop。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-添加相对应版本的-mongodb-repo-file">3. 添加相对应版本的 Mongodb repo file<a href="#3-添加相对应版本的-mongodb-repo-file" class="hash-link" aria-label="Direct link to 3. 添加相对应版本的 Mongodb repo file" title="Direct link to 3. 添加相对应版本的 Mongodb repo file">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-mongodb-26--os-x64">3.1 Mongodb 2.6 + OS x64<a href="#31-mongodb-26--os-x64" class="hash-link" aria-label="Direct link to 3.1 Mongodb 2.6 + OS x64" title="Direct link to 3.1 Mongodb 2.6 + OS x64">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/yum.repos.d/mongodb-org-2.6.repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mongodb-org-2.6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">name</span><span class="token operator">=</span><span class="token plain">MongoDB </span><span class="token number">2.6</span><span class="token plain"> Repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">baseurl</span><span class="token operator">=</span><span class="token plain">http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-mongodb-26--os-i686">3.2 Mongodb 2.6 + OS i686<a href="#32-mongodb-26--os-i686" class="hash-link" aria-label="Direct link to 3.2 Mongodb 2.6 + OS i686" title="Direct link to 3.2 Mongodb 2.6 + OS i686">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/yum.repos.d/mongodb-org-2.6.repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mongodb-org-2.6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">name</span><span class="token operator">=</span><span class="token plain">MongoDB </span><span class="token number">2.6</span><span class="token plain"> Repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">baseurl</span><span class="token operator">=</span><span class="token plain">http://downloads-distro.mongodb.org/repo/redhat/os/i686/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-mongodb-32---os-x64">3.3 Mongodb 3.2  + OS x64<a href="#33-mongodb-32---os-x64" class="hash-link" aria-label="Direct link to 3.3 Mongodb 3.2  + OS x64" title="Direct link to 3.3 Mongodb 3.2  + OS x64">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/yum.repos.d/mongodb-org-3.2.repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mongodb-org-3.2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">name</span><span class="token operator">=</span><span class="token plain">MongoDB Repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">baseurl</span><span class="token operator">=</span><span class="token plain">https://repo.mongodb.org/yum/redhat/</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$releasever</span><span class="token plain">/mongodb-org/3.2/x86_64/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-mongodb-32---os-i686">3.4 Mongodb 3.2  + OS i686<a href="#34-mongodb-32---os-i686" class="hash-link" aria-label="Direct link to 3.4 Mongodb 3.2  + OS i686" title="Direct link to 3.4 Mongodb 3.2  + OS i686">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/yum.repos.d/mongodb-org-3.2.repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mongodb-org-3.2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">name</span><span class="token operator">=</span><span class="token plain">MongoDB Repository</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">baseurl</span><span class="token operator">=</span><span class="token plain">https://repo.mongodb.org/yum/redhat/</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$releasever</span><span class="token plain">/mongodb-org/3.2/i686/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-install-mongodb">4. Install MongoDB<a href="#4-install-mongodb" class="hash-link" aria-label="Direct link to 4. Install MongoDB" title="Direct link to 4. Install MongoDB">​</a></h2><p>安装最新版本的 Mongodb，安装都方式一样，请注意安装相对应的源保证正确安装 Mongodb，请使用如下命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum clean all</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum makecache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install mongodb-org</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-run-mongodb">5. Run MongoDB<a href="#5-run-mongodb" class="hash-link" aria-label="Direct link to 5. Run MongoDB" title="Direct link to 5. Run MongoDB">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-配置-selinux">5.1 配置 SELinux<a href="#51-配置-selinux" class="hash-link" aria-label="Direct link to 5.1 配置 SELinux" title="Direct link to 5.1 配置 SELinux">​</a></h3><p>SELinux 默认为开启状态，会导致我们的 Mongodb 无法使用，解决方式有两种：</p><ol><li><a href="http://blog.ultraera.org/centos6-x-base-settings/" target="_blank" rel="noopener noreferrer">关闭 SELinux</a></li><li>添加 Mongodb 通过 SELinux 设定，指令如下：</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">semanage port -a -t mongod_port_t -p tcp </span><span class="token number">27017</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Tips: 在 CentOS 7，SELinux 会限定你去修改 Mongodb 的 data 目录及 lib 目录。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-start-mongodb">5.2 Start MongoDB<a href="#52-start-mongodb" class="hash-link" aria-label="Direct link to 5.2 Start MongoDB" title="Direct link to 5.2 Start MongoDB">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># sudo service mongod start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting mongod:                                           </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-检查-mongodb-日志文件验证服务正常启动-varlogmongodbmongodblog">5.3 检查 MongoDB 日志文件验证服务正常启动， /var/log/mongodb/mongodb.log<a href="#53-检查-mongodb-日志文件验证服务正常启动-varlogmongodbmongodblog" class="hash-link" aria-label="Direct link to 5.3 检查 MongoDB 日志文件验证服务正常启动， /var/log/mongodb/mongodb.log" title="Direct link to 5.3 检查 MongoDB 日志文件验证服务正常启动， /var/log/mongodb/mongodb.log">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cat /var/log/mongodb/mongod.log  # 看到如下内容表示mongodb启动成功了。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.582+0800 I NETWORK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> waiting </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> connections on port </span><span class="token number">27017</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-设置-mongodb-开机自启动">5.4 设置 MongoDB 开机自启动<a href="#54-设置-mongodb-开机自启动" class="hash-link" aria-label="Direct link to 5.4 设置 MongoDB 开机自启动" title="Direct link to 5.4 设置 MongoDB 开机自启动">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chkconfig mongod on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="55-设置-mongodb-允许其他服务器访问">5.5 设置 MongoDB 允许其他服务器访问<a href="#55-设置-mongodb-允许其他服务器访问" class="hash-link" aria-label="Direct link to 5.5 设置 MongoDB 允许其他服务器访问" title="Direct link to 5.5 设置 MongoDB 允许其他服务器访问">​</a></h3><p>默认情况下，mongodb 只监听 127.0.0.1，但是实际生产环境中可能需要其他服务器访问，所以这里添加监听其他网络端口，修改 mongodb 的配置文件：/etc/mongodb.conf</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/mongodb.conf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># line 29 增加一行：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    bindIp: </span><span class="token number">172.16</span><span class="token plain">.102.129</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 注意不要把1270.0.1 去除，这会导致本地无法使用MongoDB .</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-use-mongodb">6. Use MongoDB<a href="#6-use-mongodb" class="hash-link" aria-label="Direct link to 6. Use MongoDB" title="Direct link to 6. Use MongoDB">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="61-检查-mongodb-状态">6.1 检查 mongodb 状态<a href="#61-检查-mongodb-状态" class="hash-link" aria-label="Direct link to 6.1 检查 mongodb 状态" title="Direct link to 6.1 检查 mongodb 状态">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># service mongod status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mongod </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pid </span><span class="token number">6502</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> is running</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="62-mongodb-自带检测工具">6.2 mongodb 自带检测工具<a href="#62-mongodb-自带检测工具" class="hash-link" aria-label="Direct link to 6.2 mongodb 自带检测工具" title="Direct link to 6.2 mongodb 自带检测工具">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mongostat</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert query update delete getmore </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"> % dirty % used flushes  vsize   res qr</span><span class="token operator">|</span><span class="token plain">qw ar</span><span class="token operator">|</span><span class="token plain">aw netIn netOut conn                      </span><span class="token function" style="color:rgb(80, 250, 123)">time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    *0    *0     *0     *0       </span><span class="token number">0</span><span class="token plain">     </span><span class="token number">1</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">     </span><span class="token number">0.0</span><span class="token plain">    </span><span class="token number">0.0</span><span class="token plain">       </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">388</span><span class="token plain">.0M </span><span class="token number">68</span><span class="token plain">.0M   </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">   </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">   79b    18k    </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2016</span><span class="token plain">-03-24T04:25:09+08:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    *0    *0     *0     *0       </span><span class="token number">0</span><span class="token plain">     </span><span class="token number">1</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">     </span><span class="token number">0.0</span><span class="token plain">    </span><span class="token number">0.0</span><span class="token plain">       </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">388</span><span class="token plain">.0M </span><span class="token number">68</span><span class="token plain">.0M   </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">   </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">   79b    18k    </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2016</span><span class="token plain">-03-24T04:25:10+08:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    *0    *0     *0     *0       </span><span class="token number">0</span><span class="token plain">     </span><span class="token number">1</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">     </span><span class="token number">0.0</span><span class="token plain">    </span><span class="token number">0.0</span><span class="token plain">       </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">388</span><span class="token plain">.0M </span><span class="token number">68</span><span class="token plain">.0M   </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">   </span><span class="token number">0</span><span class="token operator">|</span><span class="token number">0</span><span class="token plain">   79b    18k    </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2016</span><span class="token plain">-03-24T04:25:11+08:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="63-进入-mongodb-命令行模式">6.3 进入 mongodb 命令行模式<a href="#63-进入-mongodb-命令行模式" class="hash-link" aria-label="Direct link to 6.3 进入 mongodb 命令行模式" title="Direct link to 6.3 进入 mongodb 命令行模式">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mongo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MongoDB shell version: </span><span class="token number">3.2</span><span class="token plain">.4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">connecting to: </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server has startup warnings:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;always&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> **        We suggest setting it to </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;never&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;always&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> **        We suggest setting it to </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;never&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> ** WARNING: soft rlimits too low. rlimits </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> to </span><span class="token number">1024</span><span class="token plain"> processes, </span><span class="token number">64000</span><span class="token plain"> files. Number of processes should be at least </span><span class="token number">32000</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">0.5</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">times</span><span class="token plain"> number of files.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-24T04:09:28.577+0800 I CONTROL  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">initandlisten</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-uninstall-mongodb">7. Uninstall MongoDB<a href="#7-uninstall-mongodb" class="hash-link" aria-label="Direct link to 7. Uninstall MongoDB" title="Direct link to 7. Uninstall MongoDB">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-关闭-mongodb">7.1 关闭 mongodb<a href="#71-关闭-mongodb" class="hash-link" aria-label="Direct link to 7.1 关闭 mongodb" title="Direct link to 7.1 关闭 mongodb">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># service mongod stop</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-卸载-mongodb-软件包">7.2 卸载 mongodb 软件包<a href="#72-卸载-mongodb-软件包" class="hash-link" aria-label="Direct link to 7.2 卸载 mongodb 软件包" title="Direct link to 7.2 卸载 mongodb 软件包">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum erase $(rpm -qa | grep mongodb-org)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-删除-mongodb-文件数据库文件和日志文件">7.3 删除 mongodb 文件：数据库文件和日志文件<a href="#73-删除-mongodb-文件数据库文件和日志文件" class="hash-link" aria-label="Direct link to 7.3 删除 mongodb 文件：数据库文件和日志文件" title="Direct link to 7.3 删除 mongodb 文件：数据库文件和日志文件">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># rm -rf /var/log/mongodb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># rm -rf /var/lib/mongo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-faq">8. FAQ<a href="#8-faq" class="hash-link" aria-label="Direct link to 8. FAQ" title="Direct link to 8. FAQ">​</a></h2><p>Q : Mongodb 占用 99%CPU 并且查询速度很慢？</p><p>A : 数据库需要首先建立索引，类似图书的目录文件，否则当你在数据库内查找数据的时候，就类似于在整本字典一页页翻查一个字如此。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mongo-db">MongoDB</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/24/zai-centos-zhong-pei-zhi-sftp-huan-jing">在 CentOS 中配置 SFTP 环境</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-24T14:55:03.000Z" itemprop="datePublished">March 24, 2016</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><p>做运维工作的，应该经常会碰到这样的问题，需要新上一个 web 项目，需要上传文件到服务器上，解决方法有很多种，常见的如 sftp 和 ftp，今天讲如何使用 sftp 让系统用户用户上传项目的权限，并且实现 chroot 和无法使用 ssh 登录到系统。</p><p>SFTP 是指 SSH 文件传输协议（SSH File Transfer protocol）或安全文件传输协议（Secure File Transfer Protocol），它提供了可信数据流下的文件访问、文件传输以及文件管理功能。当我们为 SFTP 配置 chroot 环境后，只有被许可的用户可以访问，并被限制到他们的家目录中，换言之：被许可的用户将处于牢笼环境中，在此环境中它们甚至不能切换它们的目录。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-测试环境">1. 测试环境<a href="#1-测试环境" class="hash-link" aria-label="Direct link to 1. 测试环境" title="Direct link to 1. 测试环境">​</a></h2><ul><li>MacBook Pro 15-inch i7 16GB</li><li>VMware Fushion 8 Pro</li><li>Transmit ( SFTP tools for Mac )</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cat /etc/issue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CentOS release </span><span class="token number">6.6</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Final</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Kernel </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">r on an </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># rpm -qa | grep openssh-server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">openssh-server-5.3p1-104.el6.i686</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-实验步骤">2. 实验步骤<a href="#2-实验步骤" class="hash-link" aria-label="Direct link to 2. 实验步骤" title="Direct link to 2. 实验步骤">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-增加一个-sftpusers-用户组">2.1 增加一个 sftpusers 用户组<a href="#21-增加一个-sftpusers-用户组" class="hash-link" aria-label="Direct link to 2.1 增加一个 sftpusers 用户组" title="Direct link to 2.1 增加一个 sftpusers 用户组">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># groupadd sftpusers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-创建一个用户-user01并分配给-sftpusers-用户组">2.2 创建一个用户 user01，并分配给 sftpusers 用户组<a href="#22-创建一个用户-user01并分配给-sftpusers-用户组" class="hash-link" aria-label="Direct link to 2.2 创建一个用户 user01，并分配给 sftpusers 用户组" title="Direct link to 2.2 创建一个用户 user01，并分配给 sftpusers 用户组">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># useradd -g sftpusers user01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-修改用户家目录及指定不能登录-shell">2.3 修改用户家目录及指定不能登录 shell<a href="#23-修改用户家目录及指定不能登录-shell" class="hash-link" aria-label="Direct link to 2.3 修改用户家目录及指定不能登录 shell" title="Direct link to 2.3 修改用户家目录及指定不能登录 shell">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir /sftp/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># usermod -s /sbin/nologin -d /sftp/user01 -m user01</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-给用户创建密码注意密码不明文显示">2.4 给用户创建密码（注意密码不明文显示）<a href="#24-给用户创建密码注意密码不明文显示" class="hash-link" aria-label="Direct link to 2.4 给用户创建密码（注意密码不明文显示）" title="Direct link to 2.4 给用户创建密码（注意密码不明文显示）">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># passwd user01</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Changing password </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> user user01.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">New password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BAD PASSWORD: it is too simplistic/systematic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BAD PASSWORD: is too simple</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Retype new password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">passwd: all authentication tokens updated successfully.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-修改-ssh-的配置文件如下设置">2.5 修改 ssh 的配置文件，如下设置<a href="#25-修改-ssh-的配置文件如下设置" class="hash-link" aria-label="Direct link to 2.5 修改 ssh 的配置文件，如下设置" title="Direct link to 2.5 修改 ssh 的配置文件，如下设置">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ll /etc/ssh/sshd_config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-------. </span><span class="token number">1</span><span class="token plain"> root root </span><span class="token number">3879</span><span class="token plain"> Oct </span><span class="token number">15</span><span class="token plain">  </span><span class="token number">2014</span><span class="token plain"> /etc/ssh/sshd_config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/ssh/sshd_config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># line 132</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#Subsystem      sftp    /usr/libexec/openssh/sftp-server    #注释</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Subsystem       </span><span class="token function" style="color:rgb(80, 250, 123)">sftp</span><span class="token plain">    internal-sftp        </span><span class="token comment" style="color:rgb(98, 114, 164)">#修改为internal-sftp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add this lines at the end of file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Match Group sftpusers        </span><span class="token comment" style="color:rgb(98, 114, 164)">#指定一下参数仅适用的用户组sftpusers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    X11Forwarding no</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    AllowTcpForwarding no</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ChrootDirectory %h       </span><span class="token comment" style="color:rgb(98, 114, 164)">#设置chroot将用户锁在家目录，%h=家目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ForceCommand internal-sftp    </span><span class="token comment" style="color:rgb(98, 114, 164)">#该参数强制执行内部sftp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-重启-ssh-服务">2.6 重启 ssh 服务<a href="#26-重启-ssh-服务" class="hash-link" aria-label="Direct link to 2.6 重启 ssh 服务" title="Direct link to 2.6 重启 ssh 服务">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># /etc/init.d/sshd restart</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Stopping sshd:                                             </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting sshd:                                             </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-设置用户家目录权限注意权限不能大于-0755">2.7 设置用户家目录权限，(注意权限不能大于 0755)<a href="#27-设置用户家目录权限注意权限不能大于-0755" class="hash-link" aria-label="Direct link to 2.7 设置用户家目录权限，(注意权限不能大于 0755)" title="Direct link to 2.7 设置用户家目录权限，(注意权限不能大于 0755)">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chmod 0755 /sftp/user01/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chown root /sftp/user01/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chgrp -R sftpusers /sftp/user01/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="28-关于上传根目录无法上传文件">2.8 关于上传，根目录无法上传文件<a href="#28-关于上传根目录无法上传文件" class="hash-link" aria-label="Direct link to 2.8 关于上传，根目录无法上传文件" title="Direct link to 2.8 关于上传，根目录无法上传文件">​</a></h3><p>因为用户家目录属主是 root，并且权限最大 0755，所以没法写，我的解决方法是在在家目录建立一个文件夹，作为上传目录，并把属主给 user01 即可。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir /sftp/user01/upload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chown user01:sftpusers /sftp/user01/upload/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-测试验证">3. 测试验证<a href="#3-测试验证" class="hash-link" aria-label="Direct link to 3. 测试验证" title="Direct link to 3. 测试验证">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-linux-登录测试">3.1 Linux 登录测试<a href="#31-linux-登录测试" class="hash-link" aria-label="Direct link to 3.1 Linux 登录测试" title="Direct link to 3.1 Linux 登录测试">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># su - user01</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This account is currently not available.    </span><span class="token comment" style="color:rgb(98, 114, 164)">#su - 切换失败</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># cat /etc/passwd | tail -1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user01:x:500:500::/sftp/user01:/sbin/nologin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ssh user01@localhost</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The authenticity of </span><span class="token function" style="color:rgb(80, 250, 123)">host</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;localhost (::1)&#x27;</span><span class="token plain"> can</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;t be established.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">RSA key fingerprint is f3:fc:31:dc:7d:16:d5:ad:8c:bc:eb:69:8f:b2:0b:c9.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Are you sure you want to continue connecting (yes/no)? yes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">Warning: Permanently added &#x27;</span><span class="token plain">localhost</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27; (RSA) to the list of known hosts.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">user01@localhost&#x27;</span><span class="token plain">s password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"> allows </span><span class="token function" style="color:rgb(80, 250, 123)">sftp</span><span class="token plain"> connections only.    </span><span class="token comment" style="color:rgb(98, 114, 164)">#ssh登录也失败，ssh设置成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connection to localhost closed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@test ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># sftp user01@localhost</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to localhost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user01@localhost&#x27;s password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sftp</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">upload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sftp</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">pwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Remote working directory: /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sftp</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-sftp-工具测试">3.2 SFTP 工具测试<a href="#32-sftp-工具测试" class="hash-link" aria-label="Direct link to 3.2 SFTP 工具测试" title="Direct link to 3.2 SFTP 工具测试">​</a></h3><p>我这里使用的是 Mac，但是传统的文件传输工具都差不多，Windows 下有 Winscp、Xftp 等。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/24/mysql-6-li-yong-linux-ji-hua-ren-wu-ding-shi-tong-bu-mysql">利用 Linux 计划任务定时同步 MySQL</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-24T08:03:32.000Z" itemprop="datePublished">March 24, 2016</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><p>说下实际项目场景，公司一个应用已部署主从数据库，业务也正式上线；现在客户公司领导希望可以看到每天的业务数据报表，本设定直接到从库拿数据，然后进行数据处理，生成报表，但是 Java 同事提出需求新增用户和权限表，这样一来，如果直接使用生产库的表会导致后台系统管理人员与领导的账户和权限混淆，经过讨论决定，按照生产库的表结构新增特殊用户表和权限表；这样操作实际是可以在从库上新增表单，且不影响主从库之间的数据同步，但是从安全性的考虑，新增表单设计需要给用户 Insert 权限，为了保证从库只有利用主库同步写入数据，则只能给其他用户 select 权限。</p><p><strong>最终决定，因为报表系统的使用率低，直接在报表系统的服务器安装本地 mysql 数据库，通过计划任务定时到从库上同步数据。</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-测试环境">1. 测试环境<a href="#1-测试环境" class="hash-link" aria-label="Direct link to 1. 测试环境" title="Direct link to 1. 测试环境">​</a></h3><ul><li>MacBook Pro 15&#x27; i7 16GB</li><li>VMware Fushion 8 Pro</li><li>MySQL Version 5.6</li><li>CentOS Linux 6.x</li><li>slave Server : 172.16.102.129</li><li>local Server : 172.167.102.133</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-利用-mysqldump-导出-sql-文件">2. 利用 mysqldump 导出 sql 文件<a href="#2-利用-mysqldump-导出-sql-文件" class="hash-link" aria-label="Direct link to 2. 利用 mysqldump 导出 sql 文件" title="Direct link to 2. 利用 mysqldump 导出 sql 文件">​</a></h3><p>需要注意的是，mysqldump 时会锁表，需要给 mysqldump 传递“--single-transaction”参数，可以使得 mysqldump 时不锁表，如下：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/mysqldump -h </span><span class="token number">172.168</span><span class="token plain">.102.129 -u dbuser -pdbuser --single-transaction slave </span><span class="token operator">&gt;</span><span class="token plain"> slave.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-使用-mysql-恢复-sql-文件到数据库中">3. 使用 mysql 恢复 sql 文件到数据库中<a href="#3-使用-mysql-恢复-sql-文件到数据库中" class="hash-link" aria-label="Direct link to 3. 使用 mysql 恢复 sql 文件到数据库中" title="Direct link to 3. 使用 mysql 恢复 sql 文件到数据库中">​</a></h3><p>需要注意的是，如果该 local server 的 slave 库中有数据表，当表名与 slave server 的表名相同时，数据表内的数据会被覆盖；如果 local server 的表在 slave.sql 中不存在，则不受影响，正是利用这个特性解决用户需求。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/mysql -u dbuser -pdbuser report </span><span class="token operator">&lt;</span><span class="token plain"> /home/.mysql/slave.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-编写脚本">4. 编写脚本<a href="#4-编写脚本" class="hash-link" aria-label="Direct link to 4. 编写脚本" title="Direct link to 4. 编写脚本">​</a></h3><p> 首先在本地某一位置作为临时 sql 存储地址：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir /home/.mysql     # 这个目录可以自定义</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>脚本 1：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TIME</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;+%Y%m%d%H&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -rf /home/.mysql/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/mysqldump -h </span><span class="token number">172.168</span><span class="token plain">.102.129 -u dbuser -pdbuser --single-transaction slave </span><span class="token operator">&gt;</span><span class="token plain"> /home/.mysql/slave_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/mysql -u dbuser -pdbuser report </span><span class="token operator">&lt;</span><span class="token plain"> /home/.mysql/slave_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-增加邮件通知功能">5. 增加邮件通知功能<a href="#5-增加邮件通知功能" class="hash-link" aria-label="Direct link to 5. 增加邮件通知功能" title="Direct link to 5. 增加邮件通知功能">​</a></h3><p> 因为前期同事需要得知备份的执行结果，所以希望数据同步成功后获得邮件提醒，这里使用 sendmail 实现，在 CentOS 里预装是没有安装 sendmail，所以我们需要安装 sendmail 服务，另外一个安装命令行邮件工具 mailx：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install -y sendmail mailx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># service sendmail start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting sendmail:                                         </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting sm-client:                                        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chkconfig sendmail on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  完整脚本：report_sync.sh，如下：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TIME</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;+%Y%m%d%H&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -rf /home/.mysql/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/mysqldump -h </span><span class="token number">172.168</span><span class="token plain">.102.129 -u dbuser -pdbuser --single-transaction slave </span><span class="token operator">&gt;</span><span class="token plain"> /home/.mysql/slave_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/bin/mysql -u dbuser -pdbuser report </span><span class="token operator">&lt;</span><span class="token plain"> /home/.mysql/slave_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TIME</span><span class="token plain">.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># send mail to adminuser</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$?</span><span class="token plain"> -eq </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;report SQL sync is successfully. At time: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string" style="color:rgb(255, 121, 198)"> &quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> mail -s report-sync-successfully  hello@abc.cn</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot; Error Error report SQL sync is Error. At time: </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string variable function" style="color:rgb(80, 250, 123);font-style:italic">date</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token string" style="color:rgb(255, 121, 198)"> &quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> mail -s report-sync-error  hello@abc.cn</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  查看下邮件通知：
<img loading="lazy" src="http://blog.ultraera.org:80/content/images/2016/03/24/p01.jpg" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-计划任务-crontab">6. 计划任务 crontab<a href="#6-计划任务-crontab" class="hash-link" aria-label="Direct link to 6. 计划任务 crontab" title="Direct link to 6. 计划任务 crontab">​</a></h3><p>和同事及客户沟通，确认每天 1、5、9、13、17、21 整时到从库拉去数据，Linux 选择使用 crontab 做计划任务，crontab 命令常见于 Unix 和类 Unix 的操作系统之中，用于设置周期性被执行的指令。该命令从标准输入设备读取指令，并将其存放于“crontab”文件中。通常，crontab 储存的指令被守护进程激活，crond 常常在后台运行，每一分钟检查是否有预定的作业需要执行。这类作业一般称为 cron jobs。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="61-安装-crontab">6.1 安装 crontab<a href="#61-安装-crontab" class="hash-link" aria-label="Direct link to 6.1 安装 crontab" title="Direct link to 6.1 安装 crontab">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install -y vixie-cron</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install -y crontabs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">说明：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vixie-cron软件包是cron的主程序；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">crontabs软件包是用来安装、卸装、或列举用来驱动 crond 守护进程的表格的程序。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cron</span><span class="token plain"> 是linux的内置服务，但它不自动起来，可以用以下的方法启动、关闭这个服务：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/sbin/service crond start </span><span class="token comment" style="color:rgb(98, 114, 164)">#启动服务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/sbin/service crond stop </span><span class="token comment" style="color:rgb(98, 114, 164)">#关闭服务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/sbin/service crond restart </span><span class="token comment" style="color:rgb(98, 114, 164)">#重启服务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/sbin/service crond reload </span><span class="token comment" style="color:rgb(98, 114, 164)">#重新载入配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">设置crond开机自启动</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># chkconfig crond on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-添加计划任务">7. 添加计划任务<a href="#7-添加计划任务" class="hash-link" aria-label="Direct link to 7. 添加计划任务" title="Direct link to 7. 添加计划任务">​</a></h3><p>将脚本 report_sync.sh 保存到/usr/bin下：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mv report_sync.sh /usr/bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>增加计划任务：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@report ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># crontab -e</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add this word.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* </span><span class="token number">1</span><span class="token plain">-21/4  * * * /usr/bin/report_sync.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 表示在每天的1-21时间内，每4小时执行一个脚本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/23/linux-bi-shi-shi-ti">Linux 笔试试题</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-23T12:05:16.000Z" itemprop="datePublished">March 23, 2016</time> · <!-- -->9 min read</div></header><div class="markdown" itemprop="articleBody"><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">一。选择题（1 题 1 分）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 当登录 Linux 时，一个具有唯一进程 ID 号的 shell 将被调用，这个 ID 是什么 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. NID  B. PID  C. UID  D. CID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 用 vi 打开一个文件，如何用字母&quot;new&quot;来代替字母&quot;old&quot; (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. :s/old/new/g　　　B. :s/old/new　　C. :1,$s/old/new/g　　　D. :r/old/new</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 请选择对标准的变量 PS2 正确的描述 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 是一个主 shell 提示符变量    B. 是一个一般的 shell 提示符变量</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. 是第二主 shell 提示符变量     D. 是一个连续提示符变量</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 哪一个命令能用来查找文件 TESTFILE 中只包含四个字符的行？(   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. grep &#x27;^????$&#x27; TESTFILE    B. grep &#x27;????&#x27; TESTFILE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. grep &#x27;^....$&#x27; TESTFILE     D. grep &#x27;....&#x27; TESTFILE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 一个 bash shell 脚本的第一行是什么 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. #!/bin/bash  B. #/bin/bash  C. #/bin/csh   D. /bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 用标准的输出重定向 (&gt;) 像&quot;&gt; file01&quot;能使文件 file01 的数据（   ）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 被移动  B. 被复制  C. 被打印   D. 被覆盖</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 下面哪个命令是用来定义 shell 的全局变量 (    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. exportfs  B. alias  C. exports  D. export</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 如果想加载一个/dev/sdb1的windows95分区到/mnt/win95目录，需要运行哪个命令(   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. mount -t hpfs /dev/sdb1 /mnt/win95</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">B. mount -t hpfs /mnt/win95 /dev/sdb1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. mount -t vfat /dev/sdb1 /mnt/win95</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">D. mount -t vfat /mnt/win95 /dev/sdb1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 哪个文件存放用户密码信息 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /boot/passwd   B. /etc/shadow   C. /var/passwd  D. /dev/passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  假定 kernel 支持 vfat 分区，下面哪一个操作是将/dev/sda1，一个 window98 分区加载到/win 目录 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. mount -s win /dev&#x27;sda1 /win</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">B. mount -fs=msdos /dev/sda1 /win</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. mount -t vfat /dev/sda1 /win</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">D. mount -t windows /win /dev/sda1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  默认情况下管理员创建了一个用户，就会在 (   ) 目录下创建一个用户主目录。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /usr  B. /home   C. /root  D. /etc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  如果要列出一个目录下的所有文件需要使用命令行 (    )。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. ls –l  B. ls   C. ls –a   D. ls -d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  利用哪个工具可以设置用户在文件系统中的空间大小 (   )。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. turboservice  B. turbofscfg  C. turbonetcfg   D. turboxcfg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  哪个命令可以将普通用户转换成超级用户 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. super  B. passwd  C. tar   D. su</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  哪个命令用来显示/home及其子目录下文件名(   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. ls -R /home  B. ls -d /home  C. ls -a /home    D. ls -l /home</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在 vi 模式下，哪个命令用来删除光标处的字符 (    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. xd   B. x   C. dd   D. d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B　　dd删除一行,x删除当前字符</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在一行内运行多个命令需要用什么字符隔开 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. @  B. $   C. ;  D. *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  确定 myfile 的文件类型的命令是 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. whatis myfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">B. file myfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. type myfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">D. type -q myfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  哪些命令组合起来能统计多少用户登录系统 (    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. who | wc –w   B. who | wc –l   C. who | wc –c   D. who | wc</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:BD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  用 &quot;rm -i&quot;,系统会提示什么来让你确认 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 命令行的每个选项  B. 是否真的删除  C. 是否有写的权限   D. 文件的位置</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  Linux 启动的第一个进程 init 启动的第一个脚本程序是 (   )。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /etc/rc.d/init.d   B. /etc/rc.d/rc.sysinit  C. /etc/rc.d/rc5.d  D. /etc/rc.d/rc3.d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  按下 (   ) 键能终止当前运行的命令</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. Ctrl-C   B. Ctrl-F   C. Ctrl-B   D. Ctrl-D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  用来分离目录名和文件名的字符是 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. dash (-)  B. slash (/)  C. period (.)   D. asterisk (*)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  系统的配置文件在 (  ) 目录下</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /home   B. /dev  C. /etc   D. /usr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  显示用户的主目录的命令是什么？(   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. echo $HOME  B. echo $USERDIR   C. echo $ENV  D. echo $ECHO</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在 vi 编辑器里，哪个命令能将光标移到第 200 行 (    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. g200  B. G200  C. :200   D. 200g</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">:200 可以，200G 也可以</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  用&quot;useradd jerry&quot;命令添加一个用户，这个用户的主目录是什么？(   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /etc/jerry   B. /var/jerry  C. /home/jerry   D. /bin/jerry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  哪一个命令能用来删除当前目录及其子目录下名为&#x27;core&#x27;的文件 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. find . -name core -exec rm {} \ ;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">B. find . -name core -exec rm ;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. find . -name core -exec rm {} ;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">D. find . -name core -exec rm {} -;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪条命令在创建一个 xp 用户的时候将用户加入到 root 组中 (  )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. useradd -g xp root  B. useradd -r root xp  C. useradd -g root xp   D. useradd root xp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  不改变运行级别而重新读入 inittab 文件的命令是 (    )。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. init s  B. init q  C. init S   D. init Q</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪个命令可以终止一个用户的所有进程 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. skillall   B. skill  C. kill   D. killall</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  通过修改哪个文件可以在创建用户的时候改变用 户主目录的路径 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /etc/default/passwd   B. /etc/default/useradd  C. /etc/profile  D. /etc/fstab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以只读方式打开一个文件并进入 vi 编辑器的命令是 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. view -r filename   B. view filename   C. vi filename   D. vi -r filename</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪个命令是将缓存中的内容粘贴到光标之前 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. a   B. i   C. P   D. p</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:C</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪条 vi 命令能将文档 5-20 行间出现的 abc 替换成为 cba (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. :1,$s/abc/cba/g　　　B. :5,20/abc/cba/g　　C. :5-20s/abc/cba/g　　　D. :5,20s/abc/cba/g</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:D</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">. 在 vi 中通过哪条命令可以将 ps 命令执行的结果插入到文档中 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. :r!ps   B. :!ps   C. :!rps    D. :w!ps</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪个vi命令可以在当前位置插入/etc/passwd文本文件(   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. :r /etc/passwd   B. :i /etc/passwd  C. :w /etc/passwd   D. :s /etc/passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  vi 中复制整行的命令是 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. y1   B. yy   C. ss   D. dd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪个 vi 命令可以给文档的每行加上一个编号 (    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. :e number   B. :set number  C. :r!date     D. :200g</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪些文件只有根用户才能读写 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. /etc/bashrc   B. /etc/profile   C. /etc/shadow    D. /etc/passwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:BC</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  使用 groupdel 删除一个组的时候，命令执行失败，原因可能是 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 该组是系统组   B. 该组是空的   C. 该组中成员非空   D. 该组不存在</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:CD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  Linux 中文件名构成的规则比较灵活表现在 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 文件名长度多达 256 个字符     B. 可以使用除了/符号外的所有ASCII字符</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. 不区分大小写            D. 无扩展名限制</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ABD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  对用户的口令进行加解锁的命令是 passwd，参数选项是 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. –l  B. –L  C. –u   D. -U</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:AC</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  如果你对文件和目录的权限不确定，则不能用 (   ) 命令来检测权限</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. ps   B. ck    C. ls –l   D. chown</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ABD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  选择对/proc文件系统不正确的描述(    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 通常情况下，不提供中断、IO 端口、CPU 等信息   B. /proc 文件系统可以提供系统核心的许多参数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C. /proc 是一个虚拟的文件系统            D. 可以得到系统中运行的进程的一些信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  以下哪些符号可以用来连接多条命令 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. ||    B. &amp;&amp;   C. ;   D. |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ABCD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在 shell 中，下面哪些字符串当作普通字符串时候需要使用&quot;\&quot;来转义 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 分号 (;)   B. 双引号 (&quot;)  C. 单引号 (&#x27;)   D. 反斜杆 (\)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:BCD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  Linux 中提供了几个重要的工具用来改变服务和进程的运行状态和运行级别以及初始化进程，它们是 (   )。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. chkconfig  B. service  C. turboservice   D. ksysv</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ABCD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在/etc/rc.d/init.d目录下的所有脚本至少支持两个运行参数,它们是(    )。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. start   B. restart    C. stop   D. reload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:AC</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  Linux 一般被称为是稳定的服务器系统，它的安全性表现在 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. 网络防火墙  B. 用户管理策略 C. 系统、目录、文件的权限控制 D. 封闭源码便于及时修正漏洞等</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ABC</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在 vi 中下列哪些命令不能用来在光标前插入文本 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. p [text]　　B. i [text]　　C. o [text]　　　D. a [text]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ACD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.  在本地的文件系统中下列哪些 linux 路径结构是无效的 (   )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">A. \usr/zhang/memo   B. /usr/zhang/memo   C. //usr\zhang/memo   D. \usr\zhang\memo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案:ACD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">二、简答题（1 题 3 分）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1.常见的 Linux 发行版本都有什么？你最擅长哪一个？它的官网网站是什么？说明你擅长哪一块？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2.Linux 开机启动流程详细步骤是什么？系统安装完，忘记密码如何破解？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4.某一天突然发现 Linux 系统文件只读，该怎么办呢？完整操作步骤。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">5.安装一台系统使用 DVD 光盘安装，如何安装 50 台 Linux 系统如何安装呢？思考一下。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">6.用虚拟机安装了一台 Linux 系统，突然想克隆一台服务器，克隆后发现无法上网，如何解决？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">7.Linux 网卡配置文件路径是什么？要使服务器上外网，必须满足的条件有哪些？需要配置什么？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">8.一般可以使用什么软件远程 linux 服务器？通过什么上传文件和下载文件？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">9./mnt 目录主要用于什么？/root 目录跟 root 用户有什么关系？/根目录与/boot 目录有什么联系？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">10.某一天误操作，执行了 rm  -rf  * ，会有哪些情况发生？请举例。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">三、公有云题目（1 题 5 分）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. 请解释上云的好处是什么？传统业务类型与公有云也为类型有什么区别？请举例说明。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. 列出你用过的阿里云\AWS\Azure 服务？并讲述他们的作用？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. 请列出你觉得阿里云\AWS\Azure 目前的特色和不成熟的地方是那些？你觉得应该如何改正。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. 请用阿里云\AWS\Azure 设计一个视频网站的架构图并进行解释说明。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/22/mysql-2-kai-qi-man-ri-zhi-you-hua">MySQL 开启慢日志优化</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-22T15:16:26.000Z" itemprop="datePublished">March 22, 2016</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="工欲善其事必先利其器----mysql-开启慢日志优化">工欲善其事，必先利其器 -- mysql 开启慢日志优化<a href="#工欲善其事必先利其器----mysql-开启慢日志优化" class="hash-link" aria-label="Direct link to 工欲善其事，必先利其器 -- mysql 开启慢日志优化" title="Direct link to 工欲善其事，必先利其器 -- mysql 开启慢日志优化">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="慢查询日志">慢查询日志<a href="#慢查询日志" class="hash-link" aria-label="Direct link to 慢查询日志" title="Direct link to 慢查询日志">​</a></h3><p>顾名思义就是记录查询比较慢得日志。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="测试环境">测试环境<a href="#测试环境" class="hash-link" aria-label="Direct link to 测试环境" title="Direct link to 测试环境">​</a></h3><ul><li>mysql-server 5.6</li><li>CentOS 6.5</li><li>VMware Fushion 8 pro</li></ul><p>首先，第一部查看是否已经开启慢查询日志：</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> variables </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%slow%&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+---------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Variable_name       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Value</span><span class="token plain">                           </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+---------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> log_slow_queries    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">OFF</span><span class="token plain">                             </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_launch_time    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">                               </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_query_log      </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">OFF</span><span class="token plain">                             </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_query_log_file </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">var</span><span class="token operator">/</span><span class="token plain">run</span><span class="token operator">/</span><span class="token plain">mysqld</span><span class="token operator">/</span><span class="token plain">mysqld</span><span class="token operator">-</span><span class="token plain">slow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+---------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">4</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>打开慢查询日志。修改 MySQL 的配置文件 my.cnf 一般是在/etc 目录下面，加上下面三行配置后重启 MySQL。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">slow_query_log </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">slow_launch_time </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">slow_query_log_file </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">usr</span><span class="token operator">/</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token operator">/</span><span class="token plain">mysql</span><span class="token operator">/</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">data</span><span class="token operator">/</span><span class="token plain">slow_query</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>slow_launch_time 只能精确到秒，如果需要更精确可以使用一些第三方的工具比如后面介绍的 pt-query-digest</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> variables </span><span class="token operator">like</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%slow%&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------------+--------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Variable_name             </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Value</span><span class="token plain">                                </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------------+--------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> log_slow_admin_statements </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">OFF</span><span class="token plain">                                  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> log_slow_slave_statements </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">OFF</span><span class="token plain">                                  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_launch_time          </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">                                    </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_query_log            </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain">                                   </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_query_log_file       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">usr</span><span class="token operator">/</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token operator">/</span><span class="token plain">mysql</span><span class="token operator">/</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">data</span><span class="token operator">/</span><span class="token plain">slow_query</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------------+--------------------------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">5</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">rows</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Tips: 我这里用的MySQL版本是5.6，不同版本的MySQL开启慢查询的配置是不同的，比如5.6之前的某些版本是long_query_time, long_query_time和log-slow-queries。可以先在终端执行show variables like &#x27;%slow%&#x27;;查看下当前版本具体配置是什么。</p></blockquote><p>也可以在终端中通过设置全局变量来打开慢查询日志：</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> @</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@global.slow_query_log</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="保持慢查询日志到表中">保持慢查询日志到表中<a href="#保持慢查询日志到表中" class="hash-link" aria-label="Direct link to 保持慢查询日志到表中" title="Direct link to 保持慢查询日志到表中">​</a></h3><p>MySQL 支持将慢查询日志保存到 mysql.slow_log 这张表中。通过@@global.log_output 可以设置默认为 TABLE，FILE 和 TABLE 只能同时使用一个。</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> @</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@global.log_output</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> @</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@global.log_output</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FILE</span><span class="token plain">                </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">row</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> @</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">@global.log_output</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;TABLE&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">show</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">slow_log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Table</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Table</span><span class="token plain">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> slow_log </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">slow_log</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">start_time</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">user_host</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mediumtext</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">query_time</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">time</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">lock_time</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">time</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">rows_sent</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">rows_examined</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">db</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">512</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">last_insert_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">insert_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">server_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">sql_text</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mediumtext</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">thread_id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bigint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">21</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token plain">CSV </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CHARSET</span><span class="token operator">=</span><span class="token plain">utf8 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Slow log&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">row</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.00</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们可以用下列语句用来模仿慢查询；</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">slow_Log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ERROR </span><span class="token number">1146</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">42</span><span class="token plain">S02</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">Table</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;mysql.slow_Log&#x27;</span><span class="token plain"> doesn&#x27;t exist</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">slow_log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+------------------+-----------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> start_time          </span><span class="token operator">|</span><span class="token plain"> user_host                 </span><span class="token operator">|</span><span class="token plain"> query_time </span><span class="token operator">|</span><span class="token plain"> lock_time </span><span class="token operator">|</span><span class="token plain"> rows_sent </span><span class="token operator">|</span><span class="token plain"> rows_examined </span><span class="token operator">|</span><span class="token plain"> db </span><span class="token operator">|</span><span class="token plain"> last_insert_id </span><span class="token operator">|</span><span class="token plain"> insert_id </span><span class="token operator">|</span><span class="token plain"> server_id </span><span class="token operator">|</span><span class="token plain"> sql_text         </span><span class="token operator">|</span><span class="token plain"> thread_id </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+------------------+-----------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2016</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">21</span><span class="token plain"> </span><span class="token number">23</span><span class="token plain">:</span><span class="token number">07</span><span class="token plain">:</span><span class="token number">15</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> @ localhost </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">00</span><span class="token plain">:</span><span class="token number">00</span><span class="token plain">:</span><span class="token number">10</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">00</span><span class="token plain">:</span><span class="token number">00</span><span class="token plain">:</span><span class="token number">00</span><span class="token plain">  </span><span class="token operator">|</span><span class="token plain">         </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">             </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain">              </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">         </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">         </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">         </span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">+</span><span class="token comment" style="color:rgb(98, 114, 164)">---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+------------------+-----------+</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">row</span><span class="token plain"> </span><span class="token operator">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.01</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="慢查询日志分析">慢查询日志分析<a href="#慢查询日志分析" class="hash-link" aria-label="Direct link to 慢查询日志分析" title="Direct link to 慢查询日志分析">​</a></h3><ul><li>可以使用 MySQL 自带的 mysqldumpslow 工具。使用很简单，可以跟-help 来查看具体的用法。</li></ul><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># -s：排序方式。c , t , l , r 表示记录次数、时间、查询时间的多少、返回的记录数排序；</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ac , at , al , ar 表示相应的倒叙； # -t：返回前面多少条的数据；</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># -g：包含什么，大小写不敏感的； mysqldumpslow -s r -t 10 /slowquery.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#slow记录最多的10个语句 mysqldumpslow -s t -t 10 -g &quot;left join&quot; /slowquery.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#按照时间排序前10中含有&quot;left join&quot;的</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>可以导到 mysql.slow_query 表中，然后通过 sql 语句进行分析。</li><li>使用第三方工具，下面会有介绍。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pt-query-digest">pt-query-digest<a href="#pt-query-digest" class="hash-link" aria-label="Direct link to pt-query-digest" title="Direct link to pt-query-digest">​</a></h3><p>pt-query-digest 可以从普通 MySQL 日志，慢查询日志以及二进制日志中分析查询，甚至可以从 SHOW PROCESSLIST 和 MySQL 协议的 tcpdump 中进行分析，如果没有指定文件，它从标准输入流（STDIN）中读取数据。
最简单地用法如下：</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pt</span><span class="token operator">-</span><span class="token plain">query</span><span class="token operator">-</span><span class="token plain">digest slow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/19/centos-6-2-chu-shi-an-zhuang-ji-ben-you-hua-cao-zuo">CentOS 初始安装基本优化操作</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-19T05:54:23.000Z" itemprop="datePublished">March 19, 2016</time> · <!-- -->6 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="centos-6x-初始安装基本优化操作">CentOS 6.x 初始安装基本优化操作<a href="#centos-6x-初始安装基本优化操作" class="hash-link" aria-label="Direct link to CentOS 6.x 初始安装基本优化操作" title="Direct link to CentOS 6.x 初始安装基本优化操作">​</a></h2><p>本文件是采用的模板是 centos 6.x，相较于 centos 5.x 与 centos 7.x 系列有些区别，不能一概而论。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-测试环境">1. 测试环境<a href="#1-测试环境" class="hash-link" aria-label="Direct link to 1. 测试环境" title="Direct link to 1. 测试环境">​</a></h3><ul><li>MacBook Pro 15-inch i7 8GB</li><li>VMware Fushion 8 Pro</li><li>CentOS-6.7-x86_64-minimal.iso</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-默认网卡开机未设定自启动">2. 默认网卡开机未设定自启动<a href="#2-默认网卡开机未设定自启动" class="hash-link" aria-label="Direct link to 2. 默认网卡开机未设定自启动" title="Direct link to 2. 默认网卡开机未设定自启动">​</a></h3><p>很多初学者，在安装系统的时候，碰到的第一个问题就是不能上网，所以有些同学就担心是不是需要去安装网卡驱动，其实这样想就把问题复杂化了，如果你在实体机安装 Linux 的系统时，可能会碰到网卡驱动不上导致无法上网的问题，这个时候是需要自行安装驱动的，但是我们使用的 VMware 的一款虚拟化工具，所以网卡驱动基本就不用考虑，原因是因为我们没有把网卡设置为开机自启动，下面讲如何开启网卡，并设定为开机自启动。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ifup eth0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Determining IP information </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> eth0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ifconfig eth0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">eth0      Link encap:Ethernet  HWaddr 00:0C:29:B9:60:D8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          inet addr:172.16.102.129  Bcast:172.16.102.255  Mask:255.255.255.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          inet6 addr: fe80::20c:29ff:feb9:60d8/64 Scope:Link</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          RX packets:127 errors:0 dropped:0 overruns:0 frame:0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          TX packets:85 errors:0 dropped:0 overruns:0 carrier:0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          collisions:0 txqueuelen:1000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          RX bytes:14010 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">13.6</span><span class="token plain"> KiB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  TX bytes:11410 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">11.1</span><span class="token plain"> KiB</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DEVICE</span><span class="token operator">=</span><span class="token plain">eth0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">HWADDR</span><span class="token operator">=</span><span class="token plain">00:0C:29:B9:60:D8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TYPE</span><span class="token operator">=</span><span class="token plain">Ethernet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">UUID</span><span class="token operator">=</span><span class="token plain">7ad636ff-78d9-4afa-9886-706b1de236a8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">ONBOOT</span><span class="token operator">=</span><span class="token plain">no   // 默认是no，修改为yes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">NM_CONTROLLED</span><span class="token operator">=</span><span class="token plain">yes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">BOOTPROTO</span><span class="token operator">=</span><span class="token plain">dhcp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-增加第三方-yum-源">3. 增加第三方 Yum 源<a href="#3-增加第三方-yum-源" class="hash-link" aria-label="Direct link to 3. 增加第三方 Yum 源" title="Direct link to 3. 增加第三方 Yum 源">​</a></h3><p>CentOS 系统内置的官方源软件更新较慢，而且缺少一些常用软件包，建议安装 epel 源，EPEL 是 Extra Packages for Enterprise Linux 的缩写（EPEL），是用于 Fedora-based Red Hat Enterprise Linux (RHEL) 的一个高质量软件源，所以同时也适用于 CentOS 或者 Scientific Linux 等发行版。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-因为我们使用的是-minimal-版本的-iso-安装所以系统默认没有-wget我们可以直接用-yum-安装wget-是-linux-常用的命令行下载工具">a. 因为我们使用的是 minimal 版本的 ISO 安装，所以系统默认没有 wget，我们可以直接用 yum 安装：<!-- -->[wget 是 Linux 常用的命令行下载工具]<a href="#a-因为我们使用的是-minimal-版本的-iso-安装所以系统默认没有-wget我们可以直接用-yum-安装wget-是-linux-常用的命令行下载工具" class="hash-link" aria-label="Direct link to a-因为我们使用的是-minimal-版本的-iso-安装所以系统默认没有-wget我们可以直接用-yum-安装wget-是-linux-常用的命令行下载工具" title="Direct link to a-因为我们使用的是-minimal-版本的-iso-安装所以系统默认没有-wget我们可以直接用-yum-安装wget-是-linux-常用的命令行下载工具">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install -y wget</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Setting up Install Process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">base                                                     </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3.7</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">base/primary_db                                          </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">4.6</span><span class="token plain"> MB     00:32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">extras                                                   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3.4</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">extras/primary_db                                        </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">34</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">updates                                                  </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">3.4</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">updates/primary_db                                       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">4.0</span><span class="token plain"> MB     01:05</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving Dependencies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package wget.x86_64 </span><span class="token number">0</span><span class="token plain">:1.12-5.el6_6.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Finished Dependency Resolution</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Dependencies Resolved</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Package        Arch             Version                   Repository      Size</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installing:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain">           x86_64           </span><span class="token number">1.12</span><span class="token plain">-5.el6_6.1            base           </span><span class="token number">483</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction Summary</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install       </span><span class="token number">1</span><span class="token plain"> Package</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Total download size: </span><span class="token number">483</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installed size: </span><span class="token number">1.8</span><span class="token plain"> M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Downloading Packages:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wget-1.12-5.el6_6.1.x86_64.rpm                           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">483</span><span class="token plain"> kB     00:01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">warning: rpmts_HdrFromFdno: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Importing GPG key 0xC105B9DE:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Userid </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> CentOS-6 Key </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CentOS </span><span class="token number">6</span><span class="token plain"> Official Signing Key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">centos-6-key@centos.org</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Package: centos-release-6-7.el6.centos.12.3.x86_64 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">@anaconda-CentOS-201508042137.x86_64/6.7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> From   </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Running rpm_check_debug</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Running Transaction Test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction Test Succeeded</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Running Transaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> wget-1.12-5.el6_6.1.x86_64                                   </span><span class="token number">1</span><span class="token plain">/1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> wget-1.12-5.el6_6.1.x86_64                                   </span><span class="token number">1</span><span class="token plain">/1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installed:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  wget.x86_64 </span><span class="token number">0</span><span class="token plain">:1.12-5.el6_6.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Complete</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-下载并安装-epel-源">b. 下载并安装 epel 源<a href="#b-下载并安装-epel-源" class="hash-link" aria-label="Direct link to b. 下载并安装 epel 源" title="Direct link to b. 下载并安装 epel 源">​</a></h4><p>不同 CentOS 版本的 epel 下载地址：</p><ul><li>CentOS 5 : <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm" target="_blank" rel="noopener noreferrer">https://dl.fedoraproject.org/pub/epel/epel-release-latest-5.noarch.rpm</a></li><li>CentOS 6 : <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm" target="_blank" rel="noopener noreferrer">https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm</a></li><li>CentOS 7 : <a href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm" target="_blank" rel="noopener noreferrer">https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</a></li></ul><p>本次试验用到的 CentOS 6 所以我们下载 epel-release-latest-6.noarch.rpm</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--2016-03-18 </span><span class="token number">11</span><span class="token plain">:47:17--  https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving dl.fedoraproject.org</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">209.132</span><span class="token plain">.181.26, </span><span class="token number">209.132</span><span class="token plain">.181.23, </span><span class="token number">209.132</span><span class="token plain">.181.24, </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to dl.fedoraproject.org</span><span class="token operator">|</span><span class="token number">209.132</span><span class="token plain">.181.26</span><span class="token operator">|</span><span class="token plain">:443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. connected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HTTP request sent, awaiting response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">200</span><span class="token plain"> OK</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Length: </span><span class="token number">14540</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">14K</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">application/x-rpm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Saving to: “epel-release-latest-6.noarch.rpm”</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">100</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token number">14,540</span><span class="token plain">      </span><span class="token number">69</span><span class="token plain">.5K/s   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">.2s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2016</span><span class="token plain">-03-18 </span><span class="token number">11</span><span class="token plain">:47:25 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">69.5</span><span class="token plain"> KB/s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> - “epel-release-latest-6.noarch.rpm” saved </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">14540</span><span class="token plain">/14540</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">anaconda-ks.cfg                   install.log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">epel-release-latest-6.noarch.rpm  install.log.syslog</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-安装-vimlinux-使用最广泛的文件编辑工具">4. 安装 vim：Linux 使用最广泛的文件编辑工具<a href="#4-安装-vimlinux-使用最广泛的文件编辑工具" class="hash-link" aria-label="Direct link to 4. 安装 vim：Linux 使用最广泛的文件编辑工具" title="Direct link to 4. 安装 vim：Linux 使用最广泛的文件编辑工具">​</a></h3><p>与我们长久使用 Win 环境不同的是，在 Linux 之中，我们接触最多的是 command line，所以熟练一款命令行下的文本编辑工具是一项必备技能，我这里推荐大家：vim。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum install -y vim</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Loaded plugins: fastestmirror</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Setting up Install Process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Determining fastest mirrors</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * base: mirrors.aliyun.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * extras: mirrors.aliyun.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * updates: mirrors.aliyun.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving Dependencies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package vim-enhanced.x86_64 </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: vim-common </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6 </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">2</span><span class="token plain">:vim-enhanced-7.4.629-5.el6.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: perl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">:MODULE_COMPAT_5.10.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">2</span><span class="token plain">:vim-enhanced-7.4.629-5.el6.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: libperl.so</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">64bit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">2</span><span class="token plain">:vim-enhanced-7.4.629-5.el6.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: libgpm.so.2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">64bit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">2</span><span class="token plain">:vim-enhanced-7.4.629-5.el6.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package gpm-libs.x86_64 </span><span class="token number">0</span><span class="token plain">:1.20.6-12.el6 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package perl.x86_64 </span><span class="token number">4</span><span class="token plain">:5.10.1-141.el6_7.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: perl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">4</span><span class="token plain">:perl-5.10.1-141.el6_7.1.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: perl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Pod::Simple</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">4</span><span class="token plain">:perl-5.10.1-141.el6_7.1.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: perl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Module::Pluggable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">4</span><span class="token plain">:perl-5.10.1-141.el6_7.1.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package perl-libs.x86_64 </span><span class="token number">4</span><span class="token plain">:5.10.1-141.el6_7.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package vim-common.x86_64 </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: vim-filesystem </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">2</span><span class="token plain">:vim-common-7.4.629-5.el6.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package perl-Module-Pluggable.x86_64 </span><span class="token number">1</span><span class="token plain">:3.90-141.el6_7.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package perl-Pod-Simple.x86_64 </span><span class="token number">1</span><span class="token plain">:3.13-141.el6_7.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Processing Dependency: perl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Pod::Escapes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">1.04</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> package: </span><span class="token number">1</span><span class="token plain">:perl-Pod-Simple-3.13-141.el6_7.1.x86_64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package perl-version.x86_64 </span><span class="token number">3</span><span class="token plain">:0.77-141.el6_7.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package vim-filesystem.x86_64 </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Running transaction check</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span><span class="token operator">&gt;</span><span class="token plain"> Package perl-Pod-Escapes.x86_64 </span><span class="token number">1</span><span class="token plain">:1.04-141.el6_7.1 will be installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><span class="token operator">&gt;</span><span class="token plain"> Finished Dependency Resolution</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Dependencies Resolved</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Package                                          Arch                              Version                                         Repository                          Size</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installing:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> vim-enhanced                                     x86_64                            </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6                                 base                               </span><span class="token number">1.0</span><span class="token plain"> M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installing </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> dependencies:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> gpm-libs                                         x86_64                            </span><span class="token number">1.20</span><span class="token plain">.6-12.el6                                   base                                </span><span class="token number">28</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> perl                                             x86_64                            </span><span class="token number">4</span><span class="token plain">:5.10.1-141.el6_7.1                            updates                             </span><span class="token number">10</span><span class="token plain"> M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> perl-Module-Pluggable                            x86_64                            </span><span class="token number">1</span><span class="token plain">:3.90-141.el6_7.1                              updates                             </span><span class="token number">40</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> perl-Pod-Escapes                                 x86_64                            </span><span class="token number">1</span><span class="token plain">:1.04-141.el6_7.1                              updates                             </span><span class="token number">33</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> perl-Pod-Simple                                  x86_64                            </span><span class="token number">1</span><span class="token plain">:3.13-141.el6_7.1                              updates                            </span><span class="token number">213</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> perl-libs                                        x86_64                            </span><span class="token number">4</span><span class="token plain">:5.10.1-141.el6_7.1                            updates                            </span><span class="token number">579</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> perl-version                                     x86_64                            </span><span class="token number">3</span><span class="token plain">:0.77-141.el6_7.1                              updates                             </span><span class="token number">52</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> vim-common                                       x86_64                            </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6                                 base                               </span><span class="token number">6.7</span><span class="token plain"> M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> vim-filesystem                                   x86_64                            </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6                                 base                                </span><span class="token number">15</span><span class="token plain"> k</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction Summary</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install      </span><span class="token number">10</span><span class="token plain"> Package</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Total download size: </span><span class="token number">19</span><span class="token plain"> M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installed size: </span><span class="token number">59</span><span class="token plain"> M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Downloading Packages:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: gpm-libs-1.20.6-12.el6.x86_64.rpm                                                                                                             </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">28</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: perl-5.10.1-141.el6_7.1.x86_64.rpm                                                                                                            </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">10</span><span class="token plain"> MB     00:10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: perl-Module-Pluggable-3.90-141.el6_7.1.x86_64.rpm                                                                                             </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">40</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: perl-Pod-Escapes-1.04-141.el6_7.1.x86_64.rpm                                                                                                  </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">33</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: perl-Pod-Simple-3.13-141.el6_7.1.x86_64.rpm                                                                                                   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">213</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">6</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: perl-libs-5.10.1-141.el6_7.1.x86_64.rpm                                                                                                       </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">579</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">7</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: perl-version-0.77-141.el6_7.1.x86_64.rpm                                                                                                      </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">52</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">8</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: vim-common-7.4.629-5.el6.x86_64.rpm                                                                                                           </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">6.7</span><span class="token plain"> MB     00:07</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">9</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: vim-enhanced-7.4.629-5.el6.x86_64.rpm                                                                                                         </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"> MB     00:01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token plain">/10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: vim-filesystem-7.4.629-5.el6.x86_64.rpm                                                                                                      </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">15</span><span class="token plain"> kB     00:00</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Total                                                                                                                                        </span><span class="token number">980</span><span class="token plain"> kB/s </span><span class="token operator">|</span><span class="token plain">  </span><span class="token number">19</span><span class="token plain"> MB     00:19</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Running rpm_check_debug</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Running Transaction Test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction Test Succeeded</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Running Transaction</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">:perl-Pod-Escapes-1.04-141.el6_7.1.x86_64                                                                                                               </span><span class="token number">1</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">:perl-Module-Pluggable-3.90-141.el6_7.1.x86_64                                                                                                          </span><span class="token number">2</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain">:perl-version-0.77-141.el6_7.1.x86_64                                                                                                                   </span><span class="token number">3</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain">:perl-libs-5.10.1-141.el6_7.1.x86_64                                                                                                                    </span><span class="token number">4</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">:perl-Pod-Simple-3.13-141.el6_7.1.x86_64                                                                                                                </span><span class="token number">5</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain">:perl-5.10.1-141.el6_7.1.x86_64                                                                                                                         </span><span class="token number">6</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:vim-filesystem-7.4.629-5.el6.x86_64                                                                                                                    </span><span class="token number">7</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:vim-common-7.4.629-5.el6.x86_64                                                                                                                        </span><span class="token number">8</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> gpm-libs-1.20.6-12.el6.x86_64                                                                                                                            </span><span class="token number">9</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Installing </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:vim-enhanced-7.4.629-5.el6.x86_64                                                                                                                     </span><span class="token number">10</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">:perl-Pod-Simple-3.13-141.el6_7.1.x86_64                                                                                                                </span><span class="token number">1</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">:perl-Pod-Escapes-1.04-141.el6_7.1.x86_64                                                                                                               </span><span class="token number">2</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> gpm-libs-1.20.6-12.el6.x86_64                                                                                                                            </span><span class="token number">3</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:vim-enhanced-7.4.629-5.el6.x86_64                                                                                                                      </span><span class="token number">4</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:vim-filesystem-7.4.629-5.el6.x86_64                                                                                                                    </span><span class="token number">5</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">:perl-Module-Pluggable-3.90-141.el6_7.1.x86_64                                                                                                          </span><span class="token number">6</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain">:vim-common-7.4.629-5.el6.x86_64                                                                                                                        </span><span class="token number">7</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain">:perl-version-0.77-141.el6_7.1.x86_64                                                                                                                   </span><span class="token number">8</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain">:perl-libs-5.10.1-141.el6_7.1.x86_64                                                                                                                    </span><span class="token number">9</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Verifying  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain">:perl-5.10.1-141.el6_7.1.x86_64                                                                                                                        </span><span class="token number">10</span><span class="token plain">/10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installed:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  vim-enhanced.x86_64 </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Dependency Installed:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  gpm-libs.x86_64 </span><span class="token number">0</span><span class="token plain">:1.20.6-12.el6           perl.x86_64 </span><span class="token number">4</span><span class="token plain">:5.10.1-141.el6_7.1      perl-Module-Pluggable.x86_64 </span><span class="token number">1</span><span class="token plain">:3.90-141.el6_7.1 perl-Pod-Escapes.x86_64 </span><span class="token number">1</span><span class="token plain">:1.04-141.el6_7.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  perl-Pod-Simple.x86_64 </span><span class="token number">1</span><span class="token plain">:3.13-141.el6_7.1 perl-libs.x86_64 </span><span class="token number">4</span><span class="token plain">:5.10.1-141.el6_7.1 perl-version.x86_64 </span><span class="token number">3</span><span class="token plain">:0.77-141.el6_7.1          vim-common.x86_64 </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  vim-filesystem.x86_64 </span><span class="token number">2</span><span class="token plain">:7.4.629-5.el6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Complete</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-关闭-selinux">4. 关闭 SELinux<a href="#4-关闭-selinux" class="hash-link" aria-label="Direct link to 4. 关闭 SELinux" title="Direct link to 4. 关闭 SELinux">​</a></h3><p>SELinux 主要由美国国家安全局开发，并于 2000 年 12 月 22 日发行给开放源代码的开发社区。SELinux 旨在加强访问控制架构以对付入侵的威胁或任何企图略过安全架构的应用程序，并且从 2.6 版的 Linux 核心就开始集成 SELinux；但是 SELinux 严格的权限控制对于初学者来说并不是非常必要，所以我们建议关闭 SELinux，<!-- -->[其实由于 SELinux 的复杂性，很多运维人员都是选择关闭它，熟悉阿里云 ECS 的同学可能知道，它是默认关闭 SELinux 的，但是我们不建议在生产环境关闭 SELinux。]</p><p>SELinux 的配置文件主要由两个：/etc/sysconfig/selinux、 /etc/selinux/config，其实第一个是第二个路径的软链接。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@vm02 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/selinux/config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># This file controls the state of SELinux on the system.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># SELINUX= can take one of these three values:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#     enforcing - SELinux security policy is enforced.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#     permissive - SELinux prints warnings instead of enforcing.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#     disabled - No SELinux policy is loaded.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SELINUX</span><span class="token operator">=</span><span class="token plain">enforcing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># SELINUXTYPE= can take one of these two values:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#     targeted - Targeted processes are protected,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#     mls - Multi Level Security protection.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">SELINUXTYPE</span><span class="token operator">=</span><span class="token plain">targeted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>SELinux 的状态模式：</p><ul><li>enforcing : 强制启用 SELinux</li><li>permissive : 只显示警告讯息以替代强制启用 SELinux</li><li>disabled : 停用 SELinux</li></ul><blockquote><p>Tips: SELinux 的参数只能在重启后生效。</p></blockquote><p>SELinux 常用的两个命令：getenforce setenforce :</p><ul><li>getenforce 获得 SELinux 当前的状态，返回值为如上三种；</li><li>setenforce 临时改变 SELinux 的状态，参数为布尔值，0 是关闭，1 是开启。</li></ul><blockquote><p>Tips: 状态已经为 disabled 时，无法使用 setenforce 1 启用。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5">5<a href="#5" class="hash-link" aria-label="Direct link to 5" title="Direct link to 5">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6">6<a href="#6" class="hash-link" aria-label="Direct link to 6" title="Direct link to 6">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7">7<a href="#7" class="hash-link" aria-label="Direct link to 7" title="Direct link to 7">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8">8<a href="#8" class="hash-link" aria-label="Direct link to 8" title="Direct link to 8">​</a></h3></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cent-os">CentOS</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/18/li-jie-linux-de-ying-lian-jie-yu-ruan-lian-jie">理解 Linux 的硬链接与软链接</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-18T14:52:13.000Z" itemprop="datePublished">March 18, 2016</time> · <!-- -->15 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="从-inode-了解-linux-文件系统">从 inode 了解 Linux 文件系统<a href="#从-inode-了解-linux-文件系统" class="hash-link" aria-label="Direct link to 从 inode 了解 Linux 文件系统" title="Direct link to 从 inode 了解 Linux 文件系统">​</a></h2><p>硬链接与软链接是 Linux 文件系统中的一个重要概念，其涉及文件系统中的索引节点 (index node 又称 inode)，而索引节点对象是 Linux 虚拟文件系统 (VFS) 的四个基本概念之一。通过剖析硬链接与软链接的联系与区别，我们可更好的了解 Linux 中 VFS 这一通用文件模型。并让 Linux 普通用户和系统管理员正确使用硬链接与软链接，帮助文件系统开发者获取 inode 的相关知识。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-的文件系统与目录">Linux 的文件系统与目录<a href="#linux-的文件系统与目录" class="hash-link" aria-label="Direct link to Linux 的文件系统与目录" title="Direct link to Linux 的文件系统与目录">​</a></h3><p>现代操作系统为解决信息能独立于进程之外被长期存储引入了文件，文件作为进程创建信息的逻辑单元可被多个进程并发使用。在 UNIX 系统中，操作系统为磁盘上的文本与图像、鼠标与键盘等输入设备及网络交互等 I/O 操作设计了一组通用 API，使他们被处理时均可统一使用字节流方式。换言之，UNIX 系统中除进程之外的一切皆是文件，而 Linux 保持了这一特性。为了便于文件的管理，Linux 还引入了目录（有时亦被称为文件夹）这一概念。目录使文件可被分类管理，且目录的引入使 Linux 的文件系统形成一个层级结构的目录树。<code>清单 1</code>. 所示的是普通 Linux 系统的顶层目录结构，其中 /dev 是存放了设备相关文件的目录。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-1-linux-系统的顶层目录结构">清单 1. Linux 系统的顶层目录结构<a href="#清单-1-linux-系统的顶层目录结构" class="hash-link" aria-label="Direct link to 清单 1. Linux 系统的顶层目录结构" title="Direct link to 清单 1. Linux 系统的顶层目录结构">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /              根目录</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── bin     存放用户二进制文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── boot    存放内核引导配置文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── dev     存放设备文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── etc     存放系统配置文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── home    用户主目录</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── lib     动态共享库</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── lost+found  文件系统恢复时的恢复文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── media   可卸载存储介质挂载点</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── mnt     文件系统临时挂载点</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── opt     附加的应用程序包</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── proc    系统内存的映射目录，提供内核与进程信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── root    root 用户主目录</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── sbin    存放系统二进制文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── srv     存放服务相关数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── sys     sys 虚拟文件系统挂载点</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── tmp     存放临时文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── usr     存放用户应用程序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── var     存放邮件、系统日志等变化文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Linux 将设备当做文件进行处理，<code>清单 2</code>展示了如何打开设备文件 /dev/input/event5 并读取文件内容。文件 event5 表示一种输入设备，其可能是鼠标或键盘等。查看文件 /proc/bus/input/devices 可知 event5 对应设备的类型。设备文件 /dev/input/event5 使用 read() 以字符流的方式被读取。结构体 input_event 被定义在内核头文件 linux/input.h 中。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-2--打开并读取设备文件">清单 2.  打开并读取设备文件<a href="#清单-2--打开并读取设备文件" class="hash-link" aria-label="Direct link to 清单 2.  打开并读取设备文件" title="Direct link to 清单 2.  打开并读取设备文件">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> int fd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> struct input_event ie</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> fd </span><span class="token operator">=</span><span class="token plain"> open</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/dev/input/event5&quot;</span><span class="token plain">, O_RDONLY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> read</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">fd, </span><span class="token operator">&amp;</span><span class="token plain">ie, sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct input_event</span><span class="token punctuation" style="color:rgb(248, 248, 242)">))</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> printf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;type = %d  code = %d  value = %d</span><span class="token string entity" style="color:rgb(255, 121, 198)">\n</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ie.type, ie.code, ie.value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> close</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="硬链接与软链接的联系与区别">硬链接与软链接的联系与区别<a href="#硬链接与软链接的联系与区别" class="hash-link" aria-label="Direct link to 硬链接与软链接的联系与区别" title="Direct link to 硬链接与软链接的联系与区别">​</a></h3><p>我们知道文件都有文件名与数据，这在 Linux 上被分成两个部分：用户数据 (user data) 与元数据 (metadata)。用户数据，即文件数据块 (data block)，数据块是记录文件真实内容的地方；而元数据则是文件的附加属性，如文件大小、创建时间、所有者等信息。在 Linux 中，元数据中的 inode 号（inode 是文件元数据的一部分但其并不包含文件名，inode 号即索引节点号）才是文件的唯一标识而非文件名。文件名仅是为了方便人们的记忆和使用，系统或程序通过 inode 号寻找正确的文件数据块。<code>图 1.</code>展示了程序通过文件名获取文件内容的过程。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="图-1-通过文件名打开文件">图 1. 通过文件名打开文件<a href="#图-1-通过文件名打开文件" class="hash-link" aria-label="Direct link to 图 1. 通过文件名打开文件" title="Direct link to 图 1. 通过文件名打开文件">​</a></h4><p><img loading="lazy" src="http://120.24.251.209/content/images/2016/03/image001.jpg" alt="image" class="img_ev3q"></p><p>在 Linux 系统中查看 inode 号可使用命令 stat 或 ls -i（若是 AIX 系统，则使用命令 istat）。<code>清单 3.</code>中使用命令 mv 移动并重命名文件 glibc-2.16.0.tar.xz，其结果不影响文件的用户数据及 inode 号，文件移动前后 inode 号均为：2485677。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-3--移动或重命名文件">清单 3.  移动或重命名文件<a href="#清单-3--移动或重命名文件" class="hash-link" aria-label="Direct link to 清单 3.  移动或重命名文件" title="Direct link to 清单 3.  移动或重命名文件">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># stat /home/harris/source/glibc-2.16.0.tar.xz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  File: `/home/harris/source/glibc-2.16.0.tar.xz&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Size: </span><span class="token number">9990512</span><span class="token plain">     Blocks: </span><span class="token number">19520</span><span class="token plain">      IO Block: </span><span class="token number">4096</span><span class="token plain">   regular </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Device: 807h/2055d   Inode: </span><span class="token number">2485677</span><span class="token plain">     Links: </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Access: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">0600/-rw-------</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  Uid: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">1000</span><span class="token plain">/  harris</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   Gid: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token number">1000</span><span class="token plain">/  harris</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 经网友指出，使用mv移动时不跨磁盘inode号不变，如果跨磁盘inode会改变。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># mv /home/harris/source/glibc-2.16.0.tar.xz /home/harris/Desktop/glibc.tar.xz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># ls -i -F /home/harris/Desktop/glibc.tar.xz</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">2485677</span><span class="token plain"> /home/harris/Desktop/glibc.tar.xz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>为解决文件的共享使用，Linux 系统引入了两种链接：硬链接 (hard link) 与软链接（又称符号链接，即 soft link 或 symbolic link）。链接为 Linux 系统解决了文件的共享使用，还带来了隐藏文件路径、增加权限安全及节省存储等好处。若一个 inode 号对应多个文件名，则称这些文件为硬链接。换言之，硬链接就是同一个文件使用了多个别名（见 <code>图 2.</code>hard link 就是 file 的一个别名，他们有共同的 inode）。硬链接可由命令 link 或 ln 创建。如下是对文件 oldfile 创建硬链接。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">link</span><span class="token plain"> oldfile newfile</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ln</span><span class="token plain"> oldfile newfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>由于硬链接是有着相同 inode 号仅文件名不同的文件，因此硬链接存在以下几点特性：</p><ul><li>文件有相同的 inode 及 data block；</li><li>只能对已存在的文件进行创建；</li><li>不能交叉文件系统进行硬链接的创建；</li><li>不能对目录进行创建，只可对文件创建；</li><li>删除一个硬链接文件并不影响其他有相同 inode 号的文件。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-4--硬链接特性展示">清单 4.  硬链接特性展示<a href="#清单-4--硬链接特性展示" class="hash-link" aria-label="Direct link to 清单 4.  硬链接特性展示" title="Direct link to 清单 4.  硬链接特性展示">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ls -li</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> total </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 只能对已存在的文件创建硬连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># link old.file hard.link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> link: cannot create </span><span class="token function" style="color:rgb(80, 250, 123)">link</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">hard.link&#x27; to </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain">old.file</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;: No such file or directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> # echo &quot;This is an original file&quot; &gt; old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> # cat old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> This is an original file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> # stat old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  File: `old.file&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Size: </span><span class="token number">25</span><span class="token plain">          Blocks: </span><span class="token number">8</span><span class="token plain">          IO Block: </span><span class="token number">4096</span><span class="token plain">   regular </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Device: 807h/2055d   Inode: </span><span class="token number">660650</span><span class="token plain">      Links: </span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Access: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">0644/-rw-r--r--</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  Uid: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">    </span><span class="token number">0</span><span class="token plain">/    root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   Gid: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">    </span><span class="token number">0</span><span class="token plain">/    root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 文件有相同的 inode 号以及 data block</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># link old.file hard.link | ls -li</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> total </span><span class="token number">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">660650</span><span class="token plain"> -rw-r--r-- </span><span class="token number">2</span><span class="token plain"> root root </span><span class="token number">25</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">17</span><span class="token plain">:44 hard.link</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">660650</span><span class="token plain"> -rw-r--r-- </span><span class="token number">2</span><span class="token plain"> root root </span><span class="token number">25</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">17</span><span class="token plain">:44 old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 不能交叉文件系统</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># ln /dev/input/event5 /root/bfile.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ln: failed to create hard </span><span class="token function" style="color:rgb(80, 250, 123)">link</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">/root/bfile.txt&#x27; </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">&gt;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain">/dev/input/event5</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> Invalid cross-device link</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="display:inline-block;color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> // 不能对目录进行创建硬连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> # mkdir -p old.dir/test</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> # ln old.dir/ hardlink.dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"> ln: `old.dir/&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> hard </span><span class="token function" style="color:rgb(80, 250, 123)">link</span><span class="token plain"> not allowed </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># ls -iF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">660650</span><span class="token plain"> hard.link  </span><span class="token number">657948</span><span class="token plain"> old.dir/  </span><span class="token number">660650</span><span class="token plain"> old.file</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>文件 old.file 与 hard.link 有着相同的 inode 号：660650 及文件权限，inode 是随着文件的存在而存在，因此只有当文件存在时才可创建硬链接，即当 inode 存在且链接计数器（link count）不为 0 时。inode 号仅在各文件系统下是唯一的，当 Linux 挂载多个文件系统后将出现 inode 号重复的现象（如<code>清单 5.</code>展示了使用命令 df 查看当前系统中挂载的文件系统类型、各文件系统 inode 使用情况及文件系统挂载点。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-5--查找有相同-inode-号的文件">清单 5.  查找有相同 inode 号的文件<a href="#清单-5--查找有相同-inode-号的文件" class="hash-link" aria-label="Direct link to 清单 5.  查找有相同 inode 号的文件" title="Direct link to 清单 5.  查找有相同 inode 号的文件">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># df -i --print-type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Filesystem     Type       Inodes  IUsed    IFree IUse% Mounted on</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /dev/sda7      ext4      </span><span class="token number">3147760</span><span class="token plain"> </span><span class="token number">283483</span><span class="token plain">  </span><span class="token number">2864277</span><span class="token plain">   </span><span class="token number">10</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> udev           devtmpfs   </span><span class="token number">496088</span><span class="token plain">    </span><span class="token number">553</span><span class="token plain">   </span><span class="token number">495535</span><span class="token plain">    </span><span class="token number">1</span><span class="token plain">% /dev</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> tmpfs          tmpfs      </span><span class="token number">499006</span><span class="token plain">    </span><span class="token number">491</span><span class="token plain">   </span><span class="token number">498515</span><span class="token plain">    </span><span class="token number">1</span><span class="token plain">% /run</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> none           tmpfs      </span><span class="token number">499006</span><span class="token plain">      </span><span class="token number">3</span><span class="token plain">   </span><span class="token number">499003</span><span class="token plain">    </span><span class="token number">1</span><span class="token plain">% /run/lock</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> none           tmpfs      </span><span class="token number">499006</span><span class="token plain">     </span><span class="token number">15</span><span class="token plain">   </span><span class="token number">498991</span><span class="token plain">    </span><span class="token number">1</span><span class="token plain">% /run/shm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /dev/sda6      fuseblk  </span><span class="token number">74383900</span><span class="token plain">   </span><span class="token number">4786</span><span class="token plain"> </span><span class="token number">74379114</span><span class="token plain">    </span><span class="token number">1</span><span class="token plain">% /media/DiskE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /dev/sda8      fuseblk  </span><span class="token number">29524592</span><span class="token plain">  </span><span class="token number">19939</span><span class="token plain"> </span><span class="token number">29504653</span><span class="token plain">    </span><span class="token number">1</span><span class="token plain">% /media/DiskF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># find / -inum 1114</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /media/DiskE/Pictures/t3.jpg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /media/DiskF/123.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /bin/sync</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>值得一提的是，Linux 系统存在 inode 号被用完但磁盘空间还有剩余的情况。我们创建一个 5M 大小的 ext4 类型的 mo.img 文件，并将其挂载至目录 /mnt。然后我们使用一个 shell 脚本将挂载在 /mnt 下 ext4 文件系统的 indoe 耗尽（见<code>清单 6.</code>）。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-6--测试文件系统-inode-耗尽但仍有磁盘空间的情景">清单 6.  测试文件系统 inode 耗尽但仍有磁盘空间的情景<a href="#清单-6--测试文件系统-inode-耗尽但仍有磁盘空间的情景" class="hash-link" aria-label="Direct link to 清单 6.  测试文件系统 inode 耗尽但仍有磁盘空间的情景" title="Direct link to 清单 6.  测试文件系统 inode 耗尽但仍有磁盘空间的情景">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># dd if=/dev/zero of=mo.img bs=5120k count=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ls -lh mo.img</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -rw-r--r-- </span><span class="token number">1</span><span class="token plain"> root root </span><span class="token number">5</span><span class="token plain">.0M Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">17</span><span class="token plain">:54 mo.img</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># mkfs -t ext4  -F ./mo.img</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> OS type: Linux</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Block </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">size</span><span class="token operator">=</span><span class="token number">1024</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">log</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Fragment </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">size</span><span class="token operator">=</span><span class="token number">1024</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">log</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">Stride</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> blocks, Stripe </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">width</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"> blocks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">1280</span><span class="token plain"> inodes, </span><span class="token number">5120</span><span class="token plain"> blocks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">256</span><span class="token plain"> blocks </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5.00</span><span class="token plain">%</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> reserved </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the super user</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Writing superblocks and filesystem accounting information: </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># mount -o loop ./mo.img /mnt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cat /mnt/inode_test.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">((</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">i </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">1</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> i</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">++</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$?</span><span class="token plain"> -eq </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is file_</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> file_</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ./inode_test.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ./inode_test.sh: line </span><span class="token number">6</span><span class="token plain">: file_1269: No space left on device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># df -iT /mnt/; du -sh /mnt/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Filesystem     Type Inodes IUsed IFree IUse% Mounted on</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /dev/loop0     ext4   </span><span class="token number">1280</span><span class="token plain">  </span><span class="token number">1280</span><span class="token plain">     </span><span class="token number">0</span><span class="token plain">  </span><span class="token number">100</span><span class="token plain">% /mnt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">1</span><span class="token plain">.3M   /mnt/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>硬链接不能对目录创建是受限于文件系统的设计（见 <code>清单 4.</code>对目录创建硬链接将失败）。现 Linux 文件系统中的目录均隐藏了两个个特殊的目录：当前目录（.）与父目录（..）。查看这两个特殊目录的 inode 号可知其实这两目录就是两个硬链接（注意目录 /mnt/lost+found/ 的 inode 号）。若系统允许对目录创建硬链接，则会产生目录环。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ls -aliF /mnt/lost+found</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> total </span><span class="token number">44</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">11</span><span class="token plain"> drwx------ </span><span class="token number">2</span><span class="token plain"> root root </span><span class="token number">12288</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">17</span><span class="token plain">:54 ./</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> drwxr-xr-x </span><span class="token number">3</span><span class="token plain"> root root </span><span class="token number">31744</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">17</span><span class="token plain">:57 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># stat  /mnt/lost+found/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  File: `/mnt/lost+found/&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Size: </span><span class="token number">12288</span><span class="token plain">       Blocks: </span><span class="token number">24</span><span class="token plain">         IO Block: </span><span class="token number">1024</span><span class="token plain">   directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Device: 700h/1792d   Inode: </span><span class="token number">11</span><span class="token plain">          Links: </span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Access: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">0700/drwx------</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  Uid: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">    </span><span class="token number">0</span><span class="token plain">/    root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   Gid: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">    </span><span class="token number">0</span><span class="token plain">/    root</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Access: </span><span class="token number">2012</span><span class="token plain">-09-01 </span><span class="token number">17</span><span class="token plain">:57:17.000000000 +0800</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Modify: </span><span class="token number">2012</span><span class="token plain">-09-01 </span><span class="token number">17</span><span class="token plain">:54:49.000000000 +0800</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Change: </span><span class="token number">2012</span><span class="token plain">-09-01 </span><span class="token number">17</span><span class="token plain">:54:49.000000000 +0800</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Birth: -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>软链接与硬链接不同，若文件用户数据块中存放的内容是另一文件的路径名的指向，则该文件就是软连接。软链接就是一个普通文件，只是数据块内容有点特殊。软链接有着自己的 inode 号以及用户数据块（见 <code>图 2.</code>）。因此软链接的创建与使用没有类似硬链接的诸多限制：</p><ul><li>软链接有自己的文件属性及权限等；</li><li>可对不存在的文件或目录创建软链接；</li><li>软链接可交叉文件系统；</li><li>软链接可对文件或目录创建；</li><li>创建软链接时，链接计数 i_nlink 不会增加；</li><li>删除软链接并不影响被指向的文件，但若被指向的原文件被删除，则相关软连接被称为死链接（即 dangling link，若被指向路径文件被重新创建，死链接可恢复为正常的软链接）。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="图-2-软链接的访问">图 2. 软链接的访问<a href="#图-2-软链接的访问" class="hash-link" aria-label="Direct link to 图 2. 软链接的访问" title="Direct link to 图 2. 软链接的访问">​</a></h4><p><img loading="lazy" src="http://120.24.251.209/content/images/2016/03/image002.jpg" alt="image" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-7-软链接特性展示">清单 7. 软链接特性展示<a href="#清单-7-软链接特性展示" class="hash-link" aria-label="Direct link to 清单 7. 软链接特性展示" title="Direct link to 清单 7. 软链接特性展示">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ls -li</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> total </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 可对不存在的文件创建软链接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ln -s old.file soft.link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ls -liF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> total </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">789467</span><span class="token plain"> lrwxrwxrwx </span><span class="token number">1</span><span class="token plain"> root root </span><span class="token number">8</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain">:00 soft.link -</span><span class="token operator">&gt;</span><span class="token plain"> old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 由于被指向的文件不存在，此时的软链接 soft.link 就是死链接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cat soft.link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> cat: soft.link: No such </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> or directory</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 创建被指向的文件 old.file，soft.link 恢复成正常的软链接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># echo &quot;This is an original file_A&quot; &gt;&gt; old.file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cat soft.link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> This is an original file_A</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 对不存在的目录创建软链接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ln -s old.dir soft.link.dir</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># mkdir -p old.dir/test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># tree . -F --inodes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token number">789497</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  old.dir/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   └── </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token number">789498</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  test/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token number">789495</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token number">789495</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  soft.link -</span><span class="token operator">&gt;</span><span class="token plain"> old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"> </span><span class="token number">789497</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  soft.link.dir -</span><span class="token operator">&gt;</span><span class="token plain"> old.dir/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当然软链接的用户数据也可以是另一个软链接的路径，其解析过程是递归的。但需注意：软链接创建时原文件的路径指向使用绝对路径较好。使用相对路径创建的软链接被移动后该软链接文件将成为一个死链接（如下所示的软链接 a 使用了相对路径，因此不宜被移动），因为链接数据块中记录的亦是相对路径指向。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> $ </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> -li</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> total </span><span class="token number">2136</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">656627</span><span class="token plain"> lrwxrwxrwx </span><span class="token number">1</span><span class="token plain"> harris harris       </span><span class="token number">8</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:37 a -</span><span class="token operator">&gt;</span><span class="token plain"> data.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">656662</span><span class="token plain"> lrwxrwxrwx </span><span class="token number">1</span><span class="token plain"> harris harris       </span><span class="token number">1</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:37 b -</span><span class="token operator">&gt;</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">656228</span><span class="token plain"> -rw------- </span><span class="token number">1</span><span class="token plain"> harris harris </span><span class="token number">2186738</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:37 data.txt </span><span class="token number">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="链接相关的命令">链接相关的命令<a href="#链接相关的命令" class="hash-link" aria-label="Direct link to 链接相关的命令" title="Direct link to 链接相关的命令">​</a></h3><p>在 Linux 中查看当前系统已挂着的文件系统类型，除上述使用的命令 df，还可使用命令 mount 或查看文件 /proc/mounts。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># mount</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /dev/sda7 on / </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">type</span><span class="token plain"> ext4 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rw,errors</span><span class="token operator">=</span><span class="token plain">remount-ro</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> proc on /proc </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">type</span><span class="token plain"> proc </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rw,noexec,nosuid,nodev</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> sysfs on /sys </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">type</span><span class="token plain"> sysfs </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rw,noexec,nosuid,nodev</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> none on /run/shm </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">type</span><span class="token plain"> tmpfs </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rw,nosuid,nodev</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>命令 ls 或 stat 可帮助我们区分软链接与其他文件并查看文件 inode 号，但较好的方式还是使用 find 命令，其不仅可查找某文件的软链接，还可以用于查找相同 inode 的所有硬链接。（见 <code>清单 8.</code>）</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-8-使用命令-find-查找软链接与硬链接">清单 8. 使用命令 find 查找软链接与硬链接<a href="#清单-8-使用命令-find-查找软链接与硬链接" class="hash-link" aria-label="Direct link to 清单 8. 使用命令 find 查找软链接与硬链接" title="Direct link to 清单 8. 使用命令 find 查找软链接与硬链接">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 查找在路径 /home 下的文件 data.txt 的软链接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># find /home -lname data.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /home/harris/debug/test2/a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 查看路径 /home 有相同 inode 的所有硬链接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># find /home -samefile /home/harris/debug/test3/old.file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /home/harris/debug/test3/hard.link</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /home/harris/debug/test3/old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># find /home -inum 660650</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /home/harris/debug/test3/hard.link</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /home/harris/debug/test3/old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 列出路径 /home/harris/debug/ 下的所有软链接文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># find /home/harris/debug/ -type l -ls</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">656662</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> lrwxrwxrwx </span><span class="token number">1</span><span class="token plain"> harris harris </span><span class="token number">1</span><span class="token plain"> Sep </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:37 /home/harris/debug/test2/b -</span><span class="token operator">&gt;</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">656627</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> lrwxrwxrwx </span><span class="token number">1</span><span class="token plain"> harris harris </span><span class="token number">8</span><span class="token plain"> Sep </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:37 /home/harris/debug/test2/a -</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> data.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">789467</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> lrwxrwxrwx </span><span class="token number">1</span><span class="token plain"> root root </span><span class="token number">8</span><span class="token plain"> Sep </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain">:00 /home/harris/debug/test/soft.link -</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> old.file</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token number">789496</span><span class="token plain">    </span><span class="token number">0</span><span class="token plain"> lrwxrwxrwx   </span><span class="token number">1</span><span class="token plain"> root     root            </span><span class="token number">7</span><span class="token plain"> Sep  </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain">:01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /home/harris/debug/test/soft.link.dir -</span><span class="token operator">&gt;</span><span class="token plain"> old.dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>系统根据磁盘的大小默认设定了 inode 的值（见<code>清单 9.</code>），如若必要，可在格式文件系统前对该值进行修改。如键入命令 mkfs -t ext4 -I 512/dev/sda4，将使磁盘设备 /dev/sda4 格式成 inode 大小是 512 字节的 ext4 文件系统。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-9-查看系统的-inode-值">清单 9. 查看系统的 inode 值<a href="#清单-9-查看系统的-inode-值" class="hash-link" aria-label="Direct link to 清单 9. 查看系统的 inode 值" title="Direct link to 清单 9. 查看系统的 inode 值">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 查看磁盘分区 /dev/sda7 上的 inode 值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># dumpe2fs -h /dev/sda7 | grep &quot;Inode size&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> dumpe2fs </span><span class="token number">1.42</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">29</span><span class="token plain">-Nov-2011</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Inode size:            </span><span class="token number">256</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># tune2fs -l /dev/sda7 | grep &quot;Inode size&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> Inode size:            </span><span class="token number">256</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-vfs">Linux VFS<a href="#linux-vfs" class="hash-link" aria-label="Direct link to Linux VFS" title="Direct link to Linux VFS">​</a></h3><p>Linux 有着极其丰富的文件系统，大体上可分如下几类：</p><ol><li>网络文件系统，如 nfs、cifs 等；</li><li>磁盘文件系统，如 ext4、ext3 等；</li><li>特殊文件系统，如 proc、sysfs、ramfs、tmpfs 等。</li></ol><p>实现以上这些文件系统并在 Linux 下共存的基础就是 Linux VFS（Virtual File System 又称 Virtual Filesystem Switch），即虚拟文件系统。VFS 作为一个通用的文件系统，抽象了文件系统的四个基本概念：文件、目录项 (dentry)、索引节点 (inode) 及挂载点，其在内核中为用户空间层的文件系统提供了相关的接口（见 <code>图 3.</code>所示 VFS 在 Linux 系统的架构）。VFS 实现了 open()、read() 等系统调并使得 cp 等用户空间程序可跨文件系统。VFS 真正实现了上述内容中：在 Linux 中除进程之外一切皆是文件。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="图-3-vfs-在系统中的架构">图 3. VFS 在系统中的架构<a href="#图-3-vfs-在系统中的架构" class="hash-link" aria-label="Direct link to 图 3. VFS 在系统中的架构" title="Direct link to 图 3. VFS 在系统中的架构">​</a></h4><p><img loading="lazy" src="http://120.24.251.209/content/images/2016/03/image003.jpg" alt="image" class="img_ev3q"></p><p>Linux VFS 存在四个基本对象：超级块对象 (superblock object)、索引节点对象 (inode object)、目录项对象 (dentry object) 及文件对象 (file object)。超级块对象代表一个已安装的文件系统；索引节点对象代表一个文件；目录项对象代表一个目录项，如设备文件 event5 在路径 /dev/input/event5 中，其存在四个目录项对象：/ 、dev/ 、input/ 及 event5。文件对象代表由进程打开的文件。这四个对象与进程及磁盘文件间的关系如<code>图 4.</code> 所示，其中 d_inode 即为硬链接。为文件路径的快速解析，Linux VFS 设计了目录项缓存（Directory Entry Cache，即 dcache）。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="图-4-vfs-的对象之间的处理">图 4. VFS 的对象之间的处理<a href="#图-4-vfs-的对象之间的处理" class="hash-link" aria-label="Direct link to 图 4. VFS 的对象之间的处理" title="Direct link to 图 4. VFS 的对象之间的处理">​</a></h4><p><img loading="lazy" src="http://120.24.251.209/content/images/2016/03/image004.jpg" alt="image" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-文件系统中的-inode">Linux 文件系统中的 inode<a href="#linux-文件系统中的-inode" class="hash-link" aria-label="Direct link to Linux 文件系统中的 inode" title="Direct link to Linux 文件系统中的 inode">​</a></h3><p>在 Linux 中，索引节点结构存在于系统内存及磁盘，其可区分成 VFS inode 与实际文件系统的 inode。VFS inode 作为实际文件系统中 inode 的抽象，定义了结构体 inode 与其相关的操作 inode_operations（见内核源码 include/linux/fs.h）。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-10-vfs-中的-inode-与-inode_operations-结构体">清单 10. VFS 中的 inode 与 inode_operations 结构体<a href="#清单-10-vfs-中的-inode-与-inode_operations-结构体" class="hash-link" aria-label="Direct link to 清单 10. VFS 中的 inode 与 inode_operations 结构体" title="Direct link to 清单 10. VFS 中的 inode 与 inode_operations 结构体">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">struct inode </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const struct inode_operations   *i_op</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> // 索引节点操作</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    unsigned long           i_ino</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">      // 索引节点号</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    atomic_t                i_count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">    // 引用计数器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    unsigned int            i_nlink</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">    // 硬链接数目</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> struct inode_operations </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">*create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct inode*,struct dentry *,int, struct nameidata*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">*link</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct dentry*,struct inode *,struct dentry*</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">*unlink</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct inode*,struct dentry *</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">*symlink</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct inode *,struct dentry*,const char *</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">*mkdir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct inode *,struct dentry*,int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">*rmdir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">struct inode*,struct dentry *</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如<code>清单 10.</code> 所见，每个文件存在两个计数器：i_count 与 i_nlink，即引用计数与硬链接计数。结构体 inode 中的 i_count 用于跟踪文件被访问的数量，而 i_nlink 则是上述使用 ls -l 等命令查看到的文件硬链接数。或者说 i_count 跟踪文件在内存中的情况，而 i_nlink 则是磁盘计数器。当文件被删除时，则 i_nlink 先被设置成 0。文件的这两个计数器使得 Linux 系统升级或程序更新变的容易。系统或程序可在不关闭的情况下（即文件 i_count 不为 0），将新文件以同样的文件名进行替换，新文件有自己的 inode 及 data block，旧文件会在相关进程关闭后被完整的删除。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-11-文件系统-ext4-中的-inode">清单 11. 文件系统 ext4 中的 inode<a href="#清单-11-文件系统-ext4-中的-inode" class="hash-link" aria-label="Direct link to 清单 11. 文件系统 ext4 中的 inode" title="Direct link to 清单 11. 文件系统 ext4 中的 inode">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">struct ext4_inode </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    __le32  i_atime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">        // 文件内容最后一次访问时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    __le32  i_ctime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">        // inode 修改时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    __le32  i_mtime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">        // 文件内容最后一次修改时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    __le16  i_links_count</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  // 硬链接计数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    __le32  i_blocks_lo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">    // Block 计数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    __le32  i_block</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">EXT4_N_BLOCKS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">  // 指向具体的 block</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>清单 12.</code>的错误信息。因此实际文件系统的 inode 之间及与 VFS inode 相较是有差异的。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="清单-12-文件系统-ext3-中-i_links_count-的限制">清单 12. 文件系统 ext3 中 i_links_count 的限制<a href="#清单-12-文件系统-ext3-中-i_links_count-的限制" class="hash-link" aria-label="Direct link to 清单 12. 文件系统 ext3 中 i_links_count 的限制" title="Direct link to 清单 12. 文件系统 ext3 中 i_links_count 的限制">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ./dirtest.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> mkdir: cannot create directory </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">dir_31999&#x27;: Too many links</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token variable" style="display:inline-block;color:rgb(189, 147, 249);font-style:italic"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"></span><span class="token variable comment" style="color:rgb(98, 114, 164);font-style:italic"># ./linkcount.sh</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token variable" style="display:inline-block;color:rgb(189, 147, 249);font-style:italic"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> ln: failed to create hard </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">link</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> to </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token plain">old.file&#x27;: Too many links</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="结束语">结束语<a href="#结束语" class="hash-link" aria-label="Direct link to 结束语" title="Direct link to 结束语">​</a></h3><p>本文最初描述了 Linux 系统中文件与目录被引入的原因及 Linux 处理文件的方式，然后我们通过区分硬链接与软链接的不同，了解 Linux 中的索引节点的相关知识，并以此引出了 inode 的结构体。索引节点结构体存在在于 Linux VFS 以及实际文件系统中，VFS 作为通用文件模型是 Linux 中“一切皆是文件”实现的基础。文章并未深入 Linux VFS，也没涉及实际文件系统的实现，文章只是从 inode 了解 Linux 的文件系统的相关内容。若想深入文件系统的内容，查看内核文档 Documentation/filesystems/ 是一个不错的方式。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/07/long-zu-lu-ming-fei">龙族路明非</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-07T00:34:54.000Z" itemprop="datePublished">March 7, 2016</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><p>大概是多久了，没有在看完一本书之后写写读后感了；看书就行吃面包，饿的时候觉得特别美味，吃饱了也就炮诸脑后。</p><p>今年一直都挺忙碌地，正好伴着腿伤在家里休息半个月，于是，一股脑地把《龙族》三部曲看完了，这是一部很好的书，我喜欢，很多人可能会觉得这是一个讲神秘、冒险、还有魔幻的小说，这里面有很多牛逼的任务，牛逼到打个喷嚏就能在太平洋引起一场海啸；可是，在我看来，这是一个看起来有点悲伤的故事。</p><p>有个叫路明非的 Loser 主角，他身边有很多牛逼的朋友，可是这些都和他没有关系，没有理想，没有原则，没有底线，好像这个世界硬一点，他就缩一点，懦弱、犹豫、像个傻逼，虽然整本书的人都在帮他，可是这不是他想要的，刚开始看的时候，一直想主角什么时候牛逼起来啊，作者怎么不按套路出牌啊，后来，我开始不想让他牛逼，他要是一直懦弱下去该多好啊，这样，看着像真实地我们，这样，至少可以好好活下去；是啊，作为一个力挽狂澜的弑龙者多牛逼啊，像所有牛逼的角色，可这都是拿命换来的啊，“人是自私的生物，但是却愿意有那么一瞬间为了很少的人放弃一切甚至生命。”说的多好，听的人是那么的心疼；人的一生中总归有几个人是我们的逆鳞，我们希望她好胜过自己好，我们希望把所有一切都给她甚至生命，可是，那又怎样，那又怎样呢？</p><p>另一个我很喜欢的人物，上杉越，一个隐世的牛逼老头子，在龙王复苏，整个东京城都要毁灭的时候，他选择了怯懦的逃离，很没骨气啊，可谁明白他呢，他是一个没有逆鳞的人了，活着只有自己，的确，我们都喜欢孤胆英雄式的角色，我们也渴望能够扮演这个角色，但是拯救世界这个事儿对我们来说太他妈难了，所以我们只能自私地保护自己重要的人；可是，最后一刻，老头留下来了，因为这里有他的逆鳞了，这很好，符合我们的价值观。</p><p>最终，这一切都是一个梦，最起码是在路明非的世界，甚至路明非本身就是一个梦，一个提线木偶，一个，孤独又带点悲伤的角色，让人心疼。虽然这个小说也有瑕疵，就好像我不太喜欢第二部，但是不会妨碍我对这个小说的赞赏。</p><p>所以，江南，我喜欢这个作者。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/03/04/2016-chun-jie-du-shu-bi-ji">2016 春节读书笔记</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-03-05T00:34:54.000Z" itemprop="datePublished">March 5, 2016</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>《西部招妻》--马宏杰。</p></blockquote><p>这部作品从中华几千年的娶妻生子传宗接代的观念介入，描述了为了娶妻一家人付出了难以想象的艰辛和退让，让人毛骨悚然。最近接连看了三部纪实文学，其实很久就放在书单里了，春节有空，一口气看完，这里是这个社会最底层的人民，是高速发展的经济和传统文化的碰撞，有很多负能量，有很多你觉得不可思议的观念，但是这才是我们中国最真实现状的一角，无论多么光鲜亮丽的外表都藏满了满目疮痍的现实，或我们，或我们的祖辈，或另一个族群的人，我们固守着传承几千年的风俗文明，却又不得不妥协于这瞬息万变的今天，所谓的中国梦中国强，看来仍旧有非常多的路要走，一个民族国家的强盛应该是取决于最底层的人民，而如何改变则是取决于每个人自身，这个社会的确有万般问题，但是只要人在进步，社会纵究也会进步。</p><blockquote><p>《最后的耍猴人》--马宏杰</p></blockquote><p>初读此书时，便十分敬佩作者几十年跟拍耍猴人的故事，进而了解到耍猴人这一个族群沉默而伟大令人震撼的精神，与猴相伴，猴子支撑起了这一辈辈人的艰辛命运，有很多感动的瞬间，读至猴案时，十分忿恨执法者当权者滥用职权，曲解法律赋予人民的权利成为自己徇私舞弊的利器，喜欢这几句话：法律要是缺失了良知作为基础，那么可怕的冷漠就会占据上风，取而代之的就是权力的滥用，人处在世俗之中，不可避免有高低贵贱之分，对于那些善良弱势的人，我们只有通过宽容、理解、帮扶，才能给他们带来改变的希望，推荐大家看看这本书。关注这个传承上千年的群族，河南新野耍猴人的故乡，如果你还能碰到耍猴人，请帮我问问他们是否来自河南新野县。</p><blockquote><p>《打工女孩》--张彤禾</p></blockquote><p>一个个真是的故事，细思每座城市其实都很像东莞，读完这本书发现自己游荡在大街上，凌晨四点钟走在城市的街头，回头看着曾经走过的路，我也是那千千万万中走出来的一员，极力摆脱身上的印记，却又对前路踌躇不安，空前发展的工业经济，改变着每一个人的思想、价值观，却同时没有与之匹配的精神文明教育发展，畸形的思潮影响了一代又一代人，这本书写的很真实，还原了改革开放之初对农村和城市社会的影响，时代发展透露出来的悲情，令人毛骨悚然，推荐大家去读，去了解这个群体。</p><blockquote><p>《其实，你所知道的世界很陌生》--王路</p></blockquote><p>了解王先生就在最近半年左右，偶然在知乎看到王先生的答文，颇感有趣，于是关注了王先生的公众号，看了一些推送的文章，偶然间在亚马逊发现署名王路的书，且看书名却有些诧异，这种名字一般多是某某之流用的鸡汤文专属称号才对（这里某某之流包含张嘉佳），抱着好奇心态买了这本书，已看过大半，行文与书名给人感觉截然不同，推荐给大家，文字潇洒跳跃，十分钦佩王先生的文采，又甚是喜爱。昨日又已入手王先生新书《唧唧复唧唧》。</p><blockquote><p>《德川家康》--山冈庄八</p></blockquote><p>首先述说 kindle 是一个好的读书工具，《德川家康》也是用它读完的第一本长篇。巧合之下得知这本书，抱着且观一观的态度去看的，因为对日本文学了解的很少，全书共 13 册，约 550 万字，要知道《红楼梦》尚只有 70 万字左右，之前看完的路遥先生所著《平凡的世界》也不过百余万字，除了网文，这算是为看过的数不多的几部长篇了，因每日都是地铁上读读书，预估怎么着也要半年读完，不想三个月就读完了，通读之后，深深被德川家康所折服，更被山冈庄八先生的文学功底所折服，陪我走过人生最艰难的那段时间，读至一半便感叹：这是人生之书啊，凭我的年纪能懂十之一二便已满足，待合适之时，重读此书。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/02/12/HowTo-use-TortoiseGit-for-Windows">HowTo use TortoiseGit for Windows</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-02-12T00:00:00.000Z" itemprop="datePublished">February 12, 2016</time> · <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><p>Git 是目前最先进的版本控制系统，越来越多的业务场景都在使用 Git，风靡全球的 Github 更是让 Git 版本控制系统名声大震，但是 GitHub 旨在建立一个开源的生态环境，所以不适合企业内部的管理系统，在之前的文章中，我也讲到了如何搭建 GitLab，可以在企业内部自建一套功能完善的 Git 版本控制系统。</p><p>GitLab 是一个非常成熟的服务端应用，但是作为一名开发人员，我们在使用 GitLab 与其他人员协同版本时，需要有一个工作对我们的每次修改更新以及推送，这也是版本控制工具的真正精髓；在不同的平台有着很多丰富的应用软件，所以挑选一款适合自己的 Git GUI 工具很重要。</p><p>目前在众多 Git Client 之中做的比较好的是 SourceTree，并且同时支持 Mac 和 Windows 双平台，但是有一个问题，当我们在初次安装时需要验证 Atlassian 账号，但是 Atlassian 的注册页面用了 requirejs，而且是用了 Google 的 CDN 服务，所以必须翻墙，这对很多中国用户的使用造成了不变；所以，今天我在这里推荐一个在 Windows 平台下同样可以作为 Git 图形化客户端工具的：<a href="https://tortoisegit.org/" target="_blank" rel="noopener noreferrer">TortoiseGit</a></p><p>TortoiseGit 是 TortoiseSVN 的 Git 版本，TortoiseGit 用于迁移 TortoiseSVN 到 TortoiseGit，解决了在 Windows 平台之上没有合适 Git 图形化客户端的问题，TortoiseGit 不仅免费，而且同样支持丰富的语言包，但是需要独立下载语言包安装，默认只有英文，注意语言包与程序版本一定要匹配。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="下载">下载<a href="#下载" class="hash-link" aria-label="Direct link to 下载" title="Direct link to 下载">​</a></h4><p>TortoiseGit 的官方下载地址是这里：<a href="https://tortoisegit.org/download/" target="_blank" rel="noopener noreferrer">https://tortoisegit.org/download/</a> ，下载时请注意与你系统的兼容性。</p><blockquote><p>注意 TortoiseGit 1.8.16 之后的版本不在支持 Windows XP 和 Server 2003</p></blockquote><p>因为 TortoiseGit 官网不在国内，所以在访问下载时速度非常的慢，我将目前的稳定版本 2.4 上传到我的百度云盘，但是以后我可能不能及时更新，所以如果你对版本要求不是很高，可以点击下面链接下载。</p><p>链接：<a href="https://pan.baidu.com/s/1eScNjA6" target="_blank" rel="noopener noreferrer">https://pan.baidu.com/s/1eScNjA6</a> 密码：31hu</p><blockquote><p>如链接失效，您可以通过本页面右下角展开通过邮箱，与我取得联系。</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装">安装<a href="#安装" class="hash-link" aria-label="Direct link to 安装" title="Direct link to 安装">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="git-for-windows">Git for Windows<a href="#git-for-windows" class="hash-link" aria-label="Direct link to Git for Windows" title="Direct link to Git for Windows">​</a></h5><p>首先，我们需要安装 Git 在你的电脑上，这保证你的 TortoiseGit 运行时所需要的依赖环境。</p><p>下载地址：<a href="https://git-for-windows.github.io/" target="_blank" rel="noopener noreferrer">https://git-for-windows.github.io/</a></p><p>同样，因为某些网络的原因，导致我们在下载时也会很慢，所以我也将目前最新 2.13 版本上传到了我的百度云盘：</p><p>链接：<a href="https://pan.baidu.com/s/1c12ZvRq" target="_blank" rel="noopener noreferrer">https://pan.baidu.com/s/1c12ZvRq</a> 密码：43yt</p><p>安装过程，这里不在展示，通常情况下，你只需要一路点击 Next 即可，但是如果你想要修改一些设置，例如默认的安装位置，那么你需要注意下，在 TortoiseGit 初次启动时，你需要手动设置 Git.exe 的位置。</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="tortoisegit">TortoiseGit<a href="#tortoisegit" class="hash-link" aria-label="Direct link to TortoiseGit" title="Direct link to TortoiseGit">​</a></h5><p>我的测试系统是 Windows 7 旗舰版 64 位，并且支持 TortoiseGit 最新的版本。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/q39b4.jpg" alt="image" class="img_ev3q"></p><p>请依次安装上图中两个软件，注意 LanguagePack 应该在主程序之后安装，同样，你也只需要一路点击 Next 即可。</p><p>在你安装完成之后，在该目录的空白区域，单击鼠标右键，你应该会看到新增了 TortoiseGit 的选项，我们选择&quot;TortoiseGit&quot;<!-- -->&gt;<!-- -->&quot;Settings&quot;来初始化我们设置。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/educ5.jpg" alt="image" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="修改程序语言为中文">修改程序语言为中文<a href="#修改程序语言为中文" class="hash-link" aria-label="Direct link to 修改程序语言为中文" title="Direct link to 修改程序语言为中文">​</a></h5><p>如果英文你的使用不会有影响，你可以略过这一步骤，同样你也不需要下载上面的 LanguagePack 包。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/afmvd.jpg" alt="image" class="img_ev3q"></p><p>好了，按照如上图中操作，你应该已经修改了程序语言为中文，再次到空白区域单击测试就可以看到了。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-tortoisegit-克隆你的项目">使用 TortoiseGit 克隆你的项目<a href="#使用-tortoisegit-克隆你的项目" class="hash-link" aria-label="Direct link to 使用 TortoiseGit 克隆你的项目" title="Direct link to 使用 TortoiseGit 克隆你的项目">​</a></h4><p>在我们安装了好 TortoiseGit 和 Git 的基本基础环境之后，我们需要使用 TortoiseGit 克隆项目，这里我们是在 GitHub 创建了一个测试项目，你可以直接使用你的项目地址即可。</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="测试项目">测试项目<a href="#测试项目" class="hash-link" aria-label="Direct link to 测试项目" title="Direct link to 测试项目">​</a></h5><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/ot84j.jpg" alt="image" class="img_ev3q"></p><p>GitHub 和 GitLab 都提供了通过使用 HTTPS 和 SSH 的方式，这两种方式有些不同，我会在下面分开讲述如何使用。</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-验证方式">SSH 验证方式<a href="#ssh-验证方式" class="hash-link" aria-label="Direct link to SSH 验证方式" title="Direct link to SSH 验证方式">​</a></h5><p>如果采用 SSH 验证方式，那么你需要生成一对公钥和私钥，并且将公钥上传到你的 GitLab 或 GitHub 上，然后在克隆你的项目时，使用匹配的私钥即可。</p><p>那在 Windows 如何上生成私钥呢？其实我们在安装 TortoiseGit 时已经默认安装 PuTTYgen 工具，我们可以利用它来创建秘钥。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/dh1fb.jpg" alt="image" class="img_ev3q"></p><p>打开 PuTTYgen，点击 generate 即可创建密钥，PuTTYgen 其实是按照鼠标运行的轨迹来计算的，所以在点击后，我们不停的使用鼠标移动，等待进度条完成就可以了。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/2uyf3.jpg" alt="image" class="img_ev3q"></p><p>当创建完成之后，你可以看到以下以下内容，注意不要关闭，我们要点击<code>Save public key</code>和<code>Save private key</code>，并将上 public key 传到你的 GitHub 或 GitLab 账户之中。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/stgw9.jpg" alt="image" class="img_ev3q"></p><blockquote><p>注意，我在图中隐去了其他 SSH keys 信息，我建议你在做类似分享时也注意隐去你的重要信息</p></blockquote><p>好了，接下来，我们就要开克隆我们的项目了，在你想要存放项目的目录内，鼠标右键选择”Git 克隆“，然后输入你的项目 URL，并且加载我们刚刚生产私钥文件。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/y7dsh.jpg" alt="image" class="img_ev3q"></p><p>注意，在你确认都没问题的情况下，点击确认，然后你就会看到如下页面，如果这个过程中出现问题，请注意检查项目 URL 和私钥文件是否正确。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/bltrs.jpg" alt="image" class="img_ev3q"></p><p>到这里，我们 SSH 验证仓库的方式就全好，接下来我们就可以使用开始进行我们的工作，但在首次提交我们的项目时，需要设置用户名和密码，这是为了方便验证我们的身份。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/07sxd.jpg" alt="image" class="img_ev3q"></p><p>点击”是“，在弹出的窗口中设定用户名和邮箱，保存即可。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/wid9v.jpg" alt="image" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="https-or-http">HTTPS or HTTP<a href="#https-or-http" class="hash-link" aria-label="Direct link to HTTPS or HTTP" title="Direct link to HTTPS or HTTP">​</a></h5><p>在使用 GitLab 为公司内部仓库时，可以不开通 HTTPS 验证，HTTP 也不会影响我们的验证方式，但是从安全的角度上来说，强烈建议启用 HTTPS，HTTPS 加密传输可以给我们的代码和用户信息的安全提供更好的保护。</p><p>如果使用 HTTPS or HTTP 的方式，我们不需要增加任何密钥文件或怎样，只需要使用我们现有的 GitHub 或 GitLab 账号即可；在你想要存放项目的目录内，鼠标右键选择”Git 克隆“，在弹出的窗口中，注意项目 URL 要是用 HTTPS，并且去掉勾选加载密钥选项。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/givvr.jpg" alt="image" class="img_ev3q"></p><p><strong>如果你的项目在 GitLab 上</strong>，并且这个项目是一个私有项目，那么这里就会要求你输入你的 GitLab 用户名和密码，输入正确的用户和密码就可以成功克隆了。</p><p>但是，由于我的测试项目在 GitHub 上，GitHub 上的项目默认都是公开项目，所以在这一步骤不会询问我的用户名和密码，只有在我需要将本地更新推送到 GitHub 时才会验证；所以接下来我在项目目录下新增文件 newfile2.txt，</p><blockquote><p>注意，Git 不同 SVN，Git 的提交不会将更新推送到远端服务器，所以我们在提交成功之后，再去手动推送</p></blockquote><p>右键选择 Git 提交，会弹出提交页面，我们需要这里，输入提交说明信息，和需要提交的文件。</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/ata4r.jpg" alt="image" class="img_ev3q"></p><p>点击”提交之后“，我们会看成功提交的窗口，然后在窗口选择点击推送；</p><p><img loading="lazy" src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/q4cq7.jpg" alt="image" class="img_ev3q"></p><p>当我们点击推送之后，会要求输入对应的 GitHub 用户名和密码：</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/git">Git</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/01/22/install-mariadb10-centos7">How to install MariaDB 10.1 on CentOS 7.x</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-01-22T00:00:00.000Z" itemprop="datePublished">January 22, 2016</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><p>CentOS 7.x 默认的 MariaDB 版本是 5.5，但是在有些情况我们需要用到 10 版本，注意 MariaDB 与 MySQL 版本是不一样的，下面简单降下如何快速安装 MariaDB10.1 到 CentOS 7.x.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建-mariadb-101-的-yum-源">创建 MariaDB 10.1 的 Yum 源<a href="#创建-mariadb-101-的-yum-源" class="hash-link" aria-label="Direct link to 创建 MariaDB 10.1 的 Yum 源" title="Direct link to 创建 MariaDB 10.1 的 Yum 源">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">sudo</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> -a /etc/yum.repos.d/MariaDB.repo</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># MariaDB 10.1 CentOS repository list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)"># http://downloads.mariadb.org/mariadb/repositories/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">[mariadb]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">name = MariaDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">baseurl = http://yum.mariadb.org/10.1/centos7-amd64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgcheck=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>注意 MariaDB 会随着时间的推移版本不断更新，你可以到<a href="http://downloads.mariadb.org/mariadb" target="_blank" rel="noopener noreferrer">repo 仓库</a>获取对应版本链接</p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用-yum-安装-mariadb-101-即可">使用 Yum 安装 MariaDB 10.1 即可<a href="#使用-yum-安装-mariadb-101-即可" class="hash-link" aria-label="Direct link to 使用 Yum 安装 MariaDB 10.1 即可" title="Direct link to 使用 Yum 安装 MariaDB 10.1 即可">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> MariaDB-server MariaDB-client -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动-mariadb-并设置为开机自启动">启动 MariaDB 并设置为开机自启动<a href="#启动-mariadb-并设置为开机自启动" class="hash-link" aria-label="Direct link to 启动 MariaDB 并设置为开机自启动" title="Direct link to 启动 MariaDB 并设置为开机自启动">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl start mariadb.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> mariadb.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="初始化-mariadb-设置">初始化 MariaDB 设置<a href="#初始化-mariadb-设置" class="hash-link" aria-label="Direct link to 初始化 MariaDB 设置" title="Direct link to 初始化 MariaDB 设置">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> /usr/bin/mysql_secure_installation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 回答以下问题，请记住你的数据库root用户密码:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enter current password </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> root </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">enter </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> none</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">:  回车</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set root password? </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Y/n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">: Y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">New password: 你要设置的数据库root密码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Re-enter new password: 你要设置的数据库root密码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Remove anonymous users? </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Y/n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">: Y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Disallow root login remotely? </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Y/n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">: Y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Remove </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"> database and access to it? </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Y/n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">: Y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Reload privilege tables now? </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">Y/n</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">: Y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2016/01/15/ru-he-zuo-yi-ge-cheng-shu-de-zi-ji">何余生说要感谢身边所有美好的人</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-01-15T00:34:54.000Z" itemprop="datePublished">January 15, 2016</time> · <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><p>在<a href="https://www.zhihu.com/question/59607102/answer/168598394" target="_blank" rel="noopener noreferrer">@知乎</a>上看到一段话：</p><p>我感觉到 25 岁过后，大多数人都不会纠结于，没有跟喜欢的人过一生，人长大了就会体谅命运的多种可能性，你喜欢她，她不一定喜欢你，你们互相喜欢，不一定合适，你们情投意合有匹配度满分，也可能因为随机产生的变数失散。</p><blockquote><p><strong>到了一个应该“醒过来”的岁数，还能执着于“我那么喜欢 ta 为什么不是 ta 陪着我过下辈子”的，估计都是人生赢家们，没怎么吃过闷亏，还妄想跟命运说道理。</strong></p></blockquote><p>大多数人都是可以认的，但“认了”的同时，我们还会心存一点侥幸，张敬轩唱过的，“祈求旧人万岁，旧情万岁，别随便老去”。</p><p>我今天要讲的不是一个爱情的故事。</p><p>我今年 25 岁，褪去青涩的旧衣，却又茫然被生活拉扯不知所措，我最近看了很多关于 25 岁该做什么？如何做 5 年规划？如何改变不甘于现状却又不思进取的状态？人这一辈子，到底是想方设法用尽一切精力赚钱，还是一切随缘安稳度日？好像我的 25 岁突然来了，所以昨日看来的未来事都硬生生地堆在眼前，你没准备好，我也没有，所以我们疲于奔波像条狗，所以我他妈好累。</p><p>25 岁好像是人生状态最多的时候，有仍在读书，有刚开始工作，有已工作多年的，有已婚，有未婚，有孩子成群，有好多好多的角色，不同于你的角色；身边总有人在催你做很多事，要赶紧谈恋爱，要赶紧结婚，要赶紧事业有成，要赶紧挣钱，很多很多的钱，可是很多人甚至包括你自己都忘记了自己想要做什么，被迫机械庸碌生存，然后消失茫茫人海不见回首，我想说的我们都知道自己该做什么，尽管很多时间我们被前路妖魔鬼怪打的遍体鳞伤昏天暗地奄奄一息，我们忘了自己是谁，想往后退，不停的后退，蜷缩在昏暗地角落，不想被别人任何人打搅，我们受够足够多的伤害，爱情生活或其他，我们认识的生活的种种不美好，我们躺在昨日伤痕中自哀自怜，开始向生活做出妥协，但是前路上所有的荆棘不会少，只会随着时间的推移更加茂盛，扎人更疼，这些我们都知道，但我有能怎样，懦弱又怎样，我他妈就是个废材。</p><p>可是少年啊，昔日你们可是屠龙的勇者啊，千军万马一只独木桥，每个人都是剑指群雄，屹立华山之巅，眼神清亮无暇，棱角分明，一身热血滚滚发烫的少年啊，每个人都是不爱荣华爱红颜，纵是红颜易老，伊人已逝，亦要战苍穹下幽冥，心中有火，头顶有光，杀尽天下，寻伊归来。</p><p>是啊，我们都喜欢齐天大圣，成为向他一样的英雄，想成为大话西游中那个身披金甲圣衣，脚踏五彩祥云的猴子，逆转时空五百年寻得我们的紫霞仙子，我们喜欢的热血沸腾，却又目光温柔如水，心里隐隐想起曾经的紫霞仙子，暗暗叹息，呢喃着我猜到了开始，却没猜到结局。大话西游再映时，去影院看到这段时，在暗影搓搓里多少少年儿女唏嘘不已泪眼婆娑，不为别的，只为我们的青春和早已寻不到的那个不可能的那个人。</p><p>所以，矫情个什么鬼啊，神经病啊，你他妈已经是一个大人了，别再为了一点感情问题就跟丢了魂而似的，你可以有一段糟糕的爱情和随之一段放纵自己自怜自哀的时期，但是你不能放纵自己过一个烂透的人生；如果，她不是对的人，我不是你想要的那个人，就赶紧麻利地让丫从你脑子里滚蛋，太累，感动不了自己，还想去感动谁。</p><p>数数年头，我已经工作 5 年时间了，工作都换了 3 个，5 年前我没想过现在的自己会是怎么样，也预料不到自己会在哪里，如果重新选择，我应该还是会选择成为现在的自己；的确很多时候，我们都会迷茫，大多数人都是这样，你跟我说，不知道我是不是适合做现在的工作，如果转行，却又不知道想要做什么什么。其实人这一生啊，多数自己想要的和自己想做的不是一件事，就好像你很难碰到你爱 ta2 也爱你的人，说出来的确会很难受。王小波在《黄金时代》曾写到：“那一天我二十一岁，在我一生的黄金时代。我有好多奢望。我想爱，想吃，还想在一瞬间变成天上半明半暗的云。后来我才知道，生活就是个缓慢受锤的过程，人一天天老下去，奢望也一天天消失，最后变得像挨了锤的牛一样”。少年们总是幻想有一天仗剑走天涯，看一看世界的繁华，可总有一天，他起床发现手里没有剑，哪里也去不了，生活就像一个泥坑，想拔出脚，却动弹不得。那时有的人索性坐下痛哭，有的人抬头看到了星辰。你我都在泥坑，只是有人看到了星辰。</p><p>无论怎样，血不能凉。</p><p>所以，努力和生活更好的相处，不需要纠结如何去规划，就努力地去生活，如果感受到生命中特别重要的东西，要拼尽所有力气去抓住，不要怀疑自己现在做的对不对，我也不知道如何告诉你该怎样处理这样的状态，我所能告诉你的就是爱自己，遵从内心的选择，然后努力去做，一直努力下去。在我们的人生肯定会遇到迷雾沼泽和望不到顶的大山，可是我们穷尽一生也无法穿越翻越，无法看到峰顶景色以及山的那边的一切，这的确是一件想想就很难过的事情，并且这一切无法逃避，听起来是那么地令人绝望，但是，亲爱的，我们总要去面对，或是大步向前，冲向那未知地泥泞沼泽或满是荆棘望不到顶的大山，要打败可以吃掉我们的大老虎或不知道是什么的怪物，一次又一次，我们会经常失败，摔倒，伤痕累累，可是我们总要爬起来啊，一次又一次，每次都像是用尽整个生命的力量，就算最后我们真的跌倒爬不起来了，也许我们最后真的无法凝聚一丝力量，那至少，我们明白我是真的做不到，而不是不去选择，而不是说从一开始就放弃，至少我们努力让自己变更好，这不是为了哪个人或谁而是为了你自己。</p><p>最后，希望你抬起头，看到星辰，</p><p>和我。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2015/12/31/Hello-2016">Hello 2016</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-01-01T00:34:54.000Z" itemprop="datePublished">January 1, 2016</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><p>我今年 24 岁了，没什么特别的，就是人生一步一步走来，到了现在，其实我真是有点急躁了；做 IT 的时间不短了，但是直到如今也并没有一个好的发展，前途并不明朗，我曾经一度怀疑自己的坚持是否正确，像很多人一样，从充满了理想抱负和耀眼的光芒，而随着时间的推移一步一步走向平淡，我相信绝大多数的生命轨迹都是如此，无可避免地成为一个平庸的人，这世界上最后牛逼的人总是很少一部分，他们是我们孩童时期的标杆，要迎头赶上或是超越，我们要做的就是快点长大，等待着接替他们掌管整个世界；可是随着时间的推移，我们逐渐发现了现实与乌托邦的差距，没法让别人觉得你很牛逼，我们只能在父母面前牛逼，开始收起所有的棱角锋芒，如履薄冰的在社会行走，或许大多数人忘记了当时的梦想，或许开始希望日子过的慢一点，不为新年的到来而欢呼雀跃，或许，我到了这样的年纪。</p><p>很多人也包括我都觉得 24 岁来讲理想是很不现实的事情，身边的朋友有些已经组建家庭承担起一个大家长的责任，有些则事业有成，还有一些如我一般碌碌无为者居多；我相信有一部分人像我一样羡慕婚姻带来的幸福而又惶恐承担相应的责任，嫉妒他人事业有成而又不肯努力，到了这个光景，接受自己是一个普通人 Loser 是一个挺不好受的事情，意味着有大把的事情让我们感到苍白无力，像离你而去的人，达不成的事，这足以令我们感到无比可怖，而其实我们所恐惧的就是恐惧本身，接受现实，毕竟都那么大了。</p><p>愈近岁末愈是多思考，渐渐少了许多玩耍的心思，历年也都会写点这样的文字，总结过去的经历，也对新的一年，有些期许；比之往年，多了些成熟稳重，也摆脱了上半年初糟糕的心思，经历了一段不好的时期，努力调整，随后也进入一个平稳的发展状态，规划自己的职业发展，耐心努力地去做，效果不错，给 2015 年一个总结：目标完成。有个很不错的公司和可爱的同事，做着自己喜欢的事，也有了方向和目标，虽然经常懒癌发作导致不能按计划达成，总体上来说对自己现状还是比较满意，可能唯一不满意的就是自己的不够努力了啊。</p><p>2016 年，新的一年，总归要有些心得期许，希望家人身体健康，自己保持心态的稳定，工作上能有平稳发展，达成自己定下的目标，总之许下天马行空的愿望，不如自己努力来的好。</p><p>我怀念逝去的亲人，即便是过去两年了，我仍然无法释怀，这个是我生命中最重要的人，也给予了我难能可贵的品质，是她的陪伴让我勇敢的面对生活，时至今日，我也时常会思念她，继而让我审视自身的作为，也正是如此不断鞭策我前进，不敢有丝毫怠慢自己的人生，我相信有天国的存在，也希望她感受到我的思念和努力，能为我的努力而欣慰。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2015/11/17/ji-jian-zhu-yi">极简主义</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2015-11-17T00:34:54.000Z" itemprop="datePublished">November 17, 2015</time> · <!-- -->8 min read</div></header><div class="markdown" itemprop="articleBody"><p>在我的理解和认知能力范围内，极简不仅仅是从生活物品上，更重要的思想和情感上做，人才不会那么累，而我自以为，人生在世这一路上，莫不是在追寻心灵的满足，但是，不如意者常七八，可与言者无二三；所以人生绝大多数时间是孤独的，是时间不充足的，所以尽可能做让自己开心的事情，去喜欢让你怦然心动的姑娘；听一个朋友说：一定是特别的缘分，才可以一路走来变成一家人。香香公主变回了原来的名字，难过么？当然难过，但是这没必要去纠结谁，也没什么好纠结的了啊，放弃了么，当然不会啊！毕竟暗暗喜欢那么久的人，如果可以轻易放弃，当初的意义在哪里呢，其实还是喜欢啊，尽管姑娘不喜欢你，但是那又怎样呢？为热爱的人或是事物洒下热血和热泪，最坏的结果无非就是对方一句“你想怎样”。所以啊，又是新的一天，阳光明媚的，嗯，那就好好工作咯。嘿嘿，我这个心机 boy！</p><p>写作的理由有很多种，牛逼的人为了挣钱养家，有追求的人为了曾经的梦想理想，我也有自己的理由：写给自己看，因为我如果靠这个挣钱养家早就饿死了，并且至到如今也没有对写作有追求；为了自己的喜欢而写。初三以前，上海读书，班干部，整日间器宇轩昂，更是无暇去写这些东西；初三转学回老家，我总是在转学，初恋小姑娘仍然留在上海读书，那时没有手机，联系就这么断了；大概是小狗的爱情发作了，突然想写东西，写文章写诗，上课写，上什么课都写，下课写；也疯狂的读书，省下一顿中饭便可以在街心公园的书店买上一本书，所以身份证上的我最帅了，真的是饿瘦了啊；所以看了很多书，韩寒郭敬明沧月饶雪漫等等等整个 80 后作家青春文学群体基本全扫了一遍，当然还有杂七杂八的杂志传记，我喜欢翻犄角旮旯，甚至翻出老板深藏的“时尚杂志”，付钱时老板一脸行家啊的神色此生难忘，果不其然当晚就破了修炼多年的童子功；初中毕业，大多数同学收获了一本本几同学纪念册，我收获了别人眼中怪癖的性格和满满写着中饭的几摞书。中考结束，回校，压抑一年的同学们得到释放近乎癫狂，六层教学楼里撒满了支离破碎的真题教材之类；后来有人在教室烧试卷，我的同桌，也算是上海回来唯一的朋友说：把你的试卷拿来烧了，可是我试卷都扔完了，没东西烧，鬼使神差的就把写的几本诗和文章拿出来烧，完事儿就后悔了，但是烧了又能怎样呢，这大概是我为极简主义做出来的第一个贡献吧，也养成了我删文章的习惯。时间辗转，玩 QQ 的时候用空间写，玩微博的时候写微博，写了删删了写，以至于现在什么都不剩下，但是也算可以吧，回首往事时啥也没有就懒得回首了，人还是要向前看的好，所以在羡慕那些拥有很多回忆的人时，也享受自己潇洒的状态；曾经一个朋友带我参观她的储藏，如数家珍的列出每一件物品和专属的人和故事，羡慕的眼泪都要掉下来了，回想这么多年，我剩下的也只羊一摞摞书了，但是看过的书大多都忘了，所以我什么都不剩下来；有时候觉得自己特别像故事里的小猴子，捡起一个丢下一个，最后什么都没有，小猴子每一个都非常喜欢啊，但最后的舍弃了，我好像懂了什么道理，但又像什么都没懂，这个故事现在看不懂。最后，我想说的是：关于情感的极简我不赞同，我们要做的是内心情感奔涌如潮的人，好的坏的，这些都是你的，做个有故事的人，才会有人给你故事。</p><p>关于。我写过很多“关于”的故事，关于工作、关于理想、关于吃饭穿衣、关于我爱的姑娘不爱我啊，关于... ，但是，多数最后都是说先搁着，以后再慢慢写，其实我自己也不知道什么时候会拿出来写，或者根本就忘记了；兴之所至，自然就喷薄着写的欲望。人懒了，不去写也正常。</p><p>关于读书。读书，写书评，之前经常做这种事情，读书的时候可谓博览青春文学丛书，不知多少个日日夜夜沉溺其中而感伤感动不已，进而期待自己的爱情；工作几年至今，更多是偏爱纪实历史类的书籍还有不少作者的随笔散文，我是看书特投入的人，经常被感动流泪，如今亦是，早些年间看明晓溪《泡沫之夏》哭了，看饶雪漫《离开》哭了，看读者小文哭了，后来看余华《活着》哭了，看路遥《平凡的世界》和《人生》更是哭的稀里糊涂，当然也会笑；人只要能被伤害或感动就是好的。我看的很感动，但是书评就是写不好，分享给朋友的时候多数都看不上眼，所以后来自己写了也不敢给别人看。</p><p>关于听歌，我是一个挺臭屁的人，曾经说过：不要问我为什么这么会装 B，因为我听歌只听宋冬野；后来当我喜欢上逼哥，好妹妹，赵雷，我再也不敢这么说话了。当然我听歌喜欢听民谣，朋友说你不懂民谣，民谣一定要到小地方听到得才算好的，我这只能算城市民谣，所以，我听歌喜欢听城市民谣，生活在水泥钢筋的城市里有着一颗不安定的心；另一个朋友说，他不喜欢民谣，因为民谣里的爱情做爱都买不起避孕套，容易出事儿，我觉得他说的很对，总结的很地道，但是我没有女朋友，随着时间的推移，人在变老变丑，有女朋友的几率会更小，用不到避孕套；所以，我听歌喜欢听做爱买不起避孕套的城市民谣。</p><p>关于鬼畜，这个是我的最爱毋庸置疑，三个时间段会一直爱下去，就像爱姑娘一样，我爱她们青葱的小手和大白的奶子，我也爱鬼畜的污污污，爱丞相和王朗，爱天朝第一歌姬，爱天朝第一英文歌姬，爱女孩为什么穿短裙。世间恐怕没多少比这个更好地事情了，因为真的很开心，没心没肺的开心，我喜欢听，哎呦，不错哦，好像周杰伦翻唱过这首龙卷基。<a href="http://www.bilibili.com/video/av4172954/" target="_blank" rel="noopener noreferrer">Link</a></p><p>关于我，我是一个小人物，有着平凡的喜怒哀乐，出身平凡之家没什么好谈的，家人身体安康、和睦相处已是万分幸福了。我不喜欢有些人把自己的惰性归咎于出身，诚然，你没法让自己做到最好，但是最起码你要努力让自己变得更好；我永远相信，当面包掉在地上奶酪一定是朝上的。莱蒙托夫有首诗《一只船》这样写：一只船孤独地航行在海上，它既不寻求幸福，也不逃避幸福，它只是向前航行，底下是沉静碧蓝的大海，而头顶是金色的太阳。我努力工作，努力过好自己的人生，不盲目自大，不自暴自弃，我可能究其一生也不达到我想要的生活，甚至绝大情况会比我想象的要糟糕，但是我会努力去做好自己的，做自己想做的在每一天，挥洒青春，尽量犯错。关于爱情和姑娘话题，永远都说不完啊，我喜欢美好的姑娘，但是我不是见一个喜欢一个，我会在很长的一段时间里喜欢一个人，尽管多数是不会有结果。我喜欢的姑娘，我希望我可以像太阳一样，给你温暖，橡树一样成为你的依靠，你应该怀疑，你也可以拒绝，但是我也会像太阳一样周而复始，像树一样扎根于此，你要知道树一旦落地生根，再拔起来可是要命的事情了。</p><p>晚安，这个世界和我和你和他们。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2015/07/18/wu-ti">无题</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2015-07-18T00:34:54.000Z" itemprop="datePublished">July 18, 2015</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><p>自家酿造的葡萄酒味道真的不错，喝过一大杯的我这样说的，你们应该去试试。是的我试图这样可以让自己早点睡下，我是这样做的，效果还是有点，至少，伴着微醺的思维，情感在释放；酒是一个令人着迷的味道，就好喝醉之后，所有的胡言乱语都会被原谅，谁会跟一个喝醉的人较劲，谁会在意一个喝醉的人说的话，who care。</p><p>是夜，当你的周遭变得安静，内心的你便开始躁动不安，妄图支配你的灵魂，黑夜中另一个目光灼灼生辉，是的，沉默的夜色，让人的思维感性满负荷，到夜晚，每个人都是满腹豪情的大诗人，博古通今的大学者，柔肠寸断的伤心人，在天桥，在屋顶，在夜排档，在酒吧，在灯光闪耀你却尽量走在黑暗的马路上，不尽相同的人却都在夜里，这些情绪才会如月降临到每个人的心里，眼里，只被你看到。</p><p>我一直想办法克制自己的负面情绪，每个人心中都会有一道疤，生长在内心深处，在任何黑暗之处浮现，奶奶的离去，那是我人生之中最大的灾难，她是我的信仰啊，我始终无法忘却那慈祥的目光；我不信鬼神，但是那一刻我匍匐在地向上苍期待，止不住的泪水在流淌，世上若有鬼魂，能否再让我看她一眼；我一直坚信着心朝阳光，要无比勇敢，是啊，怎可以怯懦，让生命如此不被珍惜，我真的好想你，现在我想奶奶从未离去，她将永远活在我的心里，我将永远缅怀哪些美好时光。</p><p>生活是不易的，生命亦是无常，每当我想放弃的时候，就会想是不是再坚持一会，或许就能成功。</p><p>晚安，奶奶，晚安，我沉痛的思念；</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2015/06/04/min-yao-shi-sheng">民谣是生</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2015-06-04T00:34:54.000Z" itemprop="datePublished">June 4, 2015</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><p>民谣是生，摇滚是死，而我在其中穿梭，生不如死。</p><p>我来到这个世界 23 年，吃过屎，也吃过佳肴，我吹的牛像我，我装的 b 也像我，但是都不成功遭了雷劈，恍惚觉得，我不应该来到这个世界，这个世界也不是我以为的世界。</p><p>我喜欢写诗，就像嗜酒者渴望所有醇香的美酒和女人的奶，我喝过，有酒味；我说：这个是社会会写诗的人不多了，会写诗的又写的比我好的又少了，写的比我好还比我会装逼的那就更少了；我又说：这世界上诗比我写的好比我会装逼，还让我敬佩的人，顾城算一个，海子也算一个，但是他们都死了，所以，我很寂寞。</p><p>我喜欢女人，喜欢她们的青葱小手和大白奶子，但是，我更喜欢她们的回眸一笑，沧海沉浮而芳亭傲立，我想我要左手提剑，右手抱着我的女人，对她说：等我前去披荆斩棘，杀得前路朗朗清清，脚踏七彩祥云，带着一身荣光，我就回来娶你，等我。</p><p>于是，我心中有火，头上有光，杀佛杀魔，傲立在华山绝巅。我从不把仇人放在眼里，因为，我说我的眼里只有你。但是，这次我的敌人耍懒，他们不用剑用刀，三个人来向我寻仇，我费尽力气杀胜了他们，却跌落山谷。被一个少年救起，我说：少年，给我口水喝吧，少年递过水囊，却把剑插进了我的胸膛，我说为什么？少年说：你是坏人，那为什么救我？我母亲让我来救你，说完，拔出剑，眼神冷漠，像极少年的我。</p><p>然后，我死了，我的女人等不了我，我死在无名的臭水沟，身体和灵魂一起腐烂。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2015/04/12/zhe-shi-yi-dao-gui-men-guan">这是一道鬼门关</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2015-04-12T00:34:54.000Z" itemprop="datePublished">April 12, 2015</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><p>生活的节奏在慢慢恢复正常，像是经历了一道鬼门关，感谢将我带出来的人。</p><p>湄公河行动，最近很火的一部电影，前两天，我也去看了；关于炫技，关于剧情，关于赞扬，已经有很多人在说了，所以我想谈的是“你的归属感来自于哪里”以及“方新武杀人事件”。</p><p>湄公河行动，我更愿称之为“湄公河事件”，这是一个真实的事件，所以踏入影院的我是带着复杂情绪的，我不喜欢谈政治，熟悉我的朋友应该会有所了解，因为我不懂政治，我不研究这些，我不能仅凭自己的感觉来判断当权者执政者的好坏，这个社会的稳定需要有太多因素；我所要做的是自己想要做的事，但是，不谈政治，我想说说关于“你的归属感来自于哪里”，这是一个很简单的问题，你有一所房子，房子里有你的父母、爱人和子女，无论你在外多少艰苦劳累，到了家看着你爱的人，你所有的苦累都消失殆尽，燃烧熊熊热火，为了他们去奋斗，这就是你的归属感，对于一个人、一个家庭是这样，对于一个国家，要让自己的国民有归属感，像我这样的市井小民，当“湄公河事件”发生，所有人的焦点都在这件事，正如电影中说到：“要给死去的 13 位船员一个公道，要给全国人民一个公道”；电影就像一个情绪放大器，艺术的手段让每一个情绪都被放大，开心会更开心，伤心会更伤心，愤怒也能更愤怒，所以我喜欢看电影和看书听音乐，写书音乐也是艺术的形式，鲍勃迪伦都拿了诺贝尔文学奖；所以在电影情节上国家的态度如此坚决，果敢，令我几度热泪盈眶，燃起对这个国家的希望和热爱，就如某个姑娘说的“我爱中华”，这就是归属感，让我觉得作为一个中国人而无比自豪，无论我将来漂泊何方，那个地方始终如灯塔照亮我的生命，前进和归途的路，所以，我爱你，中国。</p><p>方新武杀人事件，相对于高刚，方新武更像是一个孤胆英雄是的人物，这个人物角色也应该是电影中才有的人物，女友因吸毒自杀，凶手潜逃，带着满身的伤远走他乡，伪装不同的角色，逃避着内心的伤痕和过去，将一生献给缉毒事业，他是一个抱着必死之志的人，这样的人最可怕也最可怜，所以当再次遇到占蓬的时候，方新武一直就决定杀他了，其实他在十年前就已经做了这个决定，所以最后在方新武追占蓬时，他把手枪换成了真枪，他一定是要杀了占蓬的了，这是一个复仇式的结尾，他已经无所畏惧了，所以啊，这样的人最可怕也最可怜，可怕是他不怕生死，可怜的是他的人生已经被毁了，除了复仇别无他事，可是我喜欢这样的人物，我不是伪君子，我是真小人，所有时间可以让人放心的话都是屁话，无论时间走过多久，伤害你的人和事永远存在，这就像一个鬼门关啊，现在的结局就是方新武最好的解决了，导演已经给了我们了；如果他没死，那么今后就是另外一个故事了。</p><p>我们都喜欢英雄式的人物，因为英雄是有仇必报，不论错与对，这符合我们的价值观。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/page/11"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/13"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.a4192aa2.js"></script>
<script src="/assets/js/main.be9b3ddb.js"></script>
</body>
</html>