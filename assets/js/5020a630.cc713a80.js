"use strict";(self.webpackChunksamzong_me=self.webpackChunksamzong_me||[]).push([[77448],{24300:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var a=n(17624),t=n(4552);const s={title:"Yum \u4e2d$releasever \u548c$basearch \u7684\u53d6\u503c",tags:["CentOS"],date:new Date("2016-07-27T10:27:54.000Z")},o=void 0,i={permalink:"/2016/07/27/yum-zhong-releasever-he-basearch-de-qu-zhi",source:"@site/blog/2016-07-27-yum-zhong-releasever-he-basearch-de-qu-zhi.md",title:"Yum \u4e2d$releasever \u548c$basearch \u7684\u53d6\u503c",description:"\u67e5\u770b/etc/yum.repos.d/CentOS-Base.repo",date:"2016-07-27T10:27:54.000Z",formattedDate:"2016\u5e747\u670827\u65e5",tags:[{label:"CentOS",permalink:"/tags/cent-os"}],hasTruncateMarker:!1,authors:[],frontMatter:{title:"Yum \u4e2d$releasever \u548c$basearch \u7684\u53d6\u503c",tags:["CentOS"],date:"2016-07-27T10:27:54.000Z"},unlisted:!1,prevItem:{title:"HowTo Install KVM Manage Server webvirtmgr",permalink:"/2016/07/27/HowTo-Install-KVM-Manage-Server-webvirtmgr"},nextItem:{title:"Manage Tomcat Service Use Shell Script",permalink:"/2016/07/27/Manage-Tomcat-Service-Use-Shell-Script"}},l={authorsImageUrls:[]},c=[{value:"\u67e5\u770b/etc/yum.repos.d/CentOS-Base.repo",id:"\u67e5\u770betcyumreposdcentos-baserepo",level:4},{value:"\u5c0f\u7ed3",id:"\u5c0f\u7ed3",level:5}];function h(e){const r={code:"code",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.M)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h4,{id:"\u67e5\u770betcyumreposdcentos-baserepo",children:"\u67e5\u770b/etc/yum.repos.d/CentOS-Base.repo"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"[base]\nname=CentOS-$releasever - Base\nmirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os&infra=$infra\n#baseurl=http://mirror.centos.org/centos/$releasever/os/$basearch/\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\n"})}),"\n",(0,a.jsxs)(r.p,{children:["\u5176\u5b9e\u5728\u65e5\u5e38\u4f7f\u7528\u4e4b\u4e2d\uff0c\u6211\u4eec\u5728\u5f88\u591a\u5730\u65b9\uff0c\u7279\u522b\u662f\u811a\u672c\u5185\u770b\u5230\u4e86\u8c03\u7528",(0,a.jsx)(r.code,{children:"$releasever"}),"\u548c",(0,a.jsx)(r.code,{children:"$basearch"})]}),"\n",(0,a.jsxs)(r.ol,{children:["\n",(0,a.jsx)(r.li,{children:"$releasever \u7684\u503c\uff0c\u8fd9\u4e2a\u8868\u793a\u5f53\u524d\u7cfb\u7edf\u7684\u53d1\u884c\u7248\u672c"}),"\n"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"[root@ultraera /]# rpm -qi centos-release\nName        : centos-release               Relocations: (not relocatable)\nVersion     : 6                                 Vendor: CentOS\nRelease     : 7.el6.centos.12.3             Build Date: Tue 04 Aug 2015 12:13:46 AM CST\nInstall Date: Sat 21 May 2016 03:31:27 AM CST      Build Host: c6b9.bsys.dev.centos.org\nGroup       : System Environment/Base       Source RPM: centos-release-6-7.el6.centos.12.3.src.rpm\nSize        : 35634                            License: GPLv2\nSignature   : RSA/SHA1, Tue 04 Aug 2015 12:15:08 AM CST, Key ID 0946fca2c105b9de\nPackager    : CentOS BuildSystem [http://bugs.centos.org](http://bugs.centos.org)\nSummary     : CentOS release file\nDescription :\nCentOS release files\n\n# \u5176\u4e2dVersion 6 \u5c31\u662f\u6211\u4eec\u7684\u7248\u672c\u53f7\n"})}),"\n",(0,a.jsx)(r.p,{children:"$basearch \u662f\u6211\u4eec\u7684\u7cfb\u7edf\u786c\u4ef6\u67b6\u6784 (CPU \u6307\u4ee4\u96c6),\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684 i386\\i486\\i586\\i686\\"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"[root@ultraera /]# arch\ni386\n"})}),"\n",(0,a.jsxs)(r.p,{children:["\u4f46\u662f\uff0c\u5f53\u6211\u5728\u547d\u4ee4\u884c\u67e5\u770b\u662f\u5374\u53d1\u73b0",(0,a.jsx)(r.code,{children:"$releasever"}),"\u548c",(0,a.jsx)(r.code,{children:"$basearch"}),"\u662f\u7a7a\u7684\u3002"]}),"\n",(0,a.jsx)(r.p,{children:"Google \u4e00\u4e0b\u4e4b\u540e\uff0c\u8bf4\u660e Yum \u53d8\u91cf\u7684\u8bf4\u660e\u53ef\u4ee5\u5728\u8fd9\u91cc\uff085.3.3. Using Yum Variables\uff09\u627e\u5230\uff0c\u8bf4\u660e\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-text",children:'> 5.3.3. Using Yum Variables\n\nYou can use and reference the following built-in variables in yum commands and in all Yum configuration files (that is, /etc/yum.conf and all .repo files in the /etc/yum.repos.d/ directory):\n\n$releasever\nYou can use this variable to reference the release version of Red Hat Enterprise Linux. Yum obtains the value of $releasever from the distroverpkg=value line in the /etc/yum.conf configuration file. If there is no such line in /etc/yum.conf, then yum infers the correct value by deriving the version number from the redhat-release package.\n\n$arch\nYou can use this variable to refer to the system\u2019s CPU architecture as returned when calling Python\u2019s os.uname() function. Valid values for $arch include: i586, i686 and x86_64.\n\n$basearch\nYou can use $basearch to reference the base architecture of the system. For example, i686 and i586 machines both have a base architecture of i386, and AMD64 and Intel64 machines have a base architecture of x86_64.\n\n$YUM0-9\nThese ten variables are each replaced with the value of any shell environment variables with the same name. If one of these variables is referenced (in /etc/yum.conf for example) and a shell environment variable with the same name does not exist, then the configuration file variable is not replaced.\n\nTo define a custom variable or to override the value of an existing one, create a file with the same name as the variable (without the "$" sign) in the /etc/yum/vars/ directory, and add the desired value on its first line.\n\nFor example, repository descriptions often include the operating system name. To define a new variable called $osname, create a new file with "Red Hat Enterprise Linux" on the first line and save it as /etc/yum/vars/osname:\n\n`echo "Red Hat Enterprise Linux" > /etc/yum/vars/osname`\n\nInstead of "Red Hat Enterprise Linux 6", you can now use the following in the .repo files: name=$osname $releasever\n'})}),"\n",(0,a.jsx)(r.p,{children:"\u6587\u4e2d\u8bf4\u5230$releasever \u7684\u5b9a\u4e49\u53ef\u4ee5\u67e5\u770b /etc/yum.conf \u6587\u4ef6\u7684\u4e8b distroverpkg=value \u884c\uff0c\u6253\u5f00 /etc/yum.conf \u770b\u4e00\u4e0b\uff0c\u9ed8\u8ba4\u6587\u4ef6\uff08\u6211\u7684\u662f CentOS 6\uff09\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"[main]\ncachedir=/var/cache/yum/$basearch/$releasever\nkeepcache=0\ndebuglevel=2\nlogfile=/var/log/yum.log\nexactarch=1\nobsoletes=1\ngpgcheck=1\nplugins=1\ninstallonly_limit=5\nbugtracker_url=http://bugs.centos.org/set_project.php?project_id=16&ref=http://bugs.centos.org/bug_report_page.php?category=yum\ndistroverpkg=centos-release\n"})}),"\n",(0,a.jsx)(r.p,{children:"distroverpkg=centos-release \u4ee3\u8868\u4ec0\u4e48\uff1f\u53bb\u54ea\u627e centos-release\u3002\u627e\u5230\u8fd9\u91cc\u6211\u518d\u4e00\u6b21\u8868\u793a\u56f0\u60d1\u3002\n\u4e0d\u8fc7\u53e6\u4e00\u7bc7\u6587\u7ae0\u8fdb\u884c\u4e86\u6211\u7684\u89c6\u91ce\uff1ayum \u7684$releasever \u771f\u662f\u592a\u53cd\u52a8\u4e86\uff0c\u5173\u952e\u5185\u7a7a\u5982\u4e0b\uff1a\n\u5728 /etc/yum.repos.d/ \u76ee\u5f55\u4e0b\u7684\u8f6f\u4ef6\u5e93\u5b9a\u4e49\u6587\u4ef6\u4e2d\uff0c\u5e38\u5e38\u4f1a\u5728 baseurl \u7684\u8def\u5f84\u4e2d\u63d0\u5230 $releasever \u8fd9\u4e2a\u53d8\u91cf\uff0c\u8868\u793a\u5f53\u524d\u53d1\u884c\u7248\u7684\u5927\u7248\u672c\u53f7\uff0c\u4f46\u5927\u5bb6\u77e5\u9053\u8fd9\u4e2a\u53d8\u91cf\u662f\u5728\u54ea\u8bbe\u7f6e\u7684\u5417\uff1f\u6211 grep \u4e86\u6574\u4e2a etc \u76ee\u5f55\u90fd\u6ca1\u627e\u5230\uff0c\u8fd8\u662f\u770b\u4e86 yum.conf \u624d\u77e5\u9053\u7684\uff0c\u662f\u5728 yum.conf \u6587\u4ef6\u91cc distroverpkg \u9009\u9879\u5b9a\u4e49\u7684\u3002\u4f46\u8fd9\u4e2a\u9009\u9879\u5c31\u5f88\u6709\u95ee\u9898\uff1a\ndistroverpkg \u548c releasever \u540d\u5b57\u4e0d\u540c\uff0c\u4e14\u770b\u4e0d\u51fa\u4ec0\u4e48\u8054\u7cfb\ndistroverpkg \u7684\u503c\uff0c\u5e76\u4e0d\u662f\u660e\u6587\uff0c\u800c\u662f\u201credhat-release\u201d\u3002\u4e0d\u77e5\u9053\u5927\u5bb6\u770b\u5230\u8fd9\u4e2a\u4f1a\u6709\u4ec0\u4e48\u60f3\u6cd5\uff0c\u53cd\u6b63\u6211\u662f\u9996\u5148\u60f3\u5230\u4e86 /etc/redhat-release \u6587\u4ef6\uff0c\u4f46\u6211\u9519\u4e86\u3002\u5b9e\u9645\u4e0a\u6307\u7684\u662f redhat-release \u8fd9\u4e2a RPM \u5305\u3002\u6240\u8c13\u201cdistroverpkg=redhat-release\u201d\u7684\u610f\u601d\uff0c\u5176\u5b9e\u662f\u5c06 $releasever \u8bbe\u7f6e\u4e3a redhat-release \u8fd9\u4e2a RPM \u5305\u7684\u7248\u672c\u53f7\u3002"}),"\n",(0,a.jsx)(r.h5,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3"}),"\n",(0,a.jsx)(r.p,{children:"yum \u4e2d\u7684$releasever \u53d8\u91cf\u662f\u53d6 redhat-release-server rpm \u5305\u7684\u5c5e\u6027\u503c ( $version)\u3002\n[root@ldap01 ~]# rpm -q --qf $version redhat-release-server;echo\n6Server"})]})}function u(e={}){const{wrapper:r}={...(0,t.M)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},4552:(e,r,n)=>{n.d(r,{I:()=>i,M:()=>o});var a=n(11504);const t={},s=a.createContext(t);function o(e){const r=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(s.Provider,{value:r},e.children)}}}]);