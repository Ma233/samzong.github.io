<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.2">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2022-11-23T01:09:44-06:00</updated><id>/feed.xml</id><title type="html">船长的课记</title><author><name>船长</name><email>samzong.lu@gmail.com</email></author><entry><title type="html">What is Hukou</title><link href="/post/2022/11/what-is-hukou.html" rel="alternate" type="text/html" title="What is Hukou" /><published>2022-11-23T00:00:00-06:00</published><updated>2022-11-23T00:00:00-06:00</updated><id>/post/2022/11/what-is-hukou</id><content type="html" xml:base="/post/2022/11/what-is-hukou.html">&lt;h2 id=&quot;背景&quot;&gt;背景&lt;/h2&gt;

&lt;p&gt;对于一个大型企业，内部有几十个业务系统是非常正常的一件事情。&lt;/p&gt;

&lt;p&gt;在这个背景下，有一个具体的服务可以很干净的只做一件事情是非常棒的：把人管好。&lt;/p&gt;

&lt;h2 id=&quot;功能接入&quot;&gt;功能接入&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;支持接收其他业务系统的注册
    &lt;ul&gt;
      &lt;li&gt;支持配置 system_key&lt;/li&gt;
      &lt;li&gt;支持自定义回调地址&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;通用的身份认证接入方式
    &lt;ul&gt;
      &lt;li&gt;接入方系统只需要简单的集成即可完成用户身份的登录支持&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;支持一键禁用账号登录
    &lt;ul&gt;
      &lt;li&gt;增强版能力，支持广播账号身份信息发生变化，实时触发账号验证
        &lt;ul&gt;
          &lt;li&gt;可选项，由接入方系统根据需求决定是否接入&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;支持与三方业务系统集成
    &lt;ul&gt;
      &lt;li&gt;钉钉&lt;/li&gt;
      &lt;li&gt;飞书&lt;/li&gt;
      &lt;li&gt;etc.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;功能逻辑说明&quot;&gt;功能逻辑说明&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20221123145010.png?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;resize,w_960,m_lfit&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;验证流程图&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/VIzBnN.jpg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;resize,w_960,m_lfit&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;相关技术和开源实现&quot;&gt;相关技术和开源实现&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;开源项目
    &lt;ul&gt;
      &lt;li&gt;Keyclock&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;相关技术
    &lt;ul&gt;
      &lt;li&gt;Microsoft AD&lt;/li&gt;
      &lt;li&gt;LDAP&lt;/li&gt;
      &lt;li&gt;OIDC&lt;/li&gt;
      &lt;li&gt;OAtuh&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;SaaS 产品
    &lt;ul&gt;
      &lt;li&gt;飞书 &lt;门神&gt;&lt;/门神&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://auth0.com&quot;&gt;auth0.com&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://fusionauth.io/&quot;&gt;fusionauth&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="安全" /><category term="OAuth" /><summary type="html">背景</summary></entry><entry><title type="html">Copy to Markdown</title><link href="/post/2022/11/Copy-To-Markdwon.html" rel="alternate" type="text/html" title="Copy to Markdown" /><published>2022-11-20T00:00:00-06:00</published><updated>2022-11-20T00:00:00-06:00</updated><id>/post/2022/11/Copy-To-Markdwon</id><content type="html" xml:base="/post/2022/11/Copy-To-Markdwon.html">&lt;h2 id=&quot;背景&quot;&gt;背景&lt;/h2&gt;

&lt;p&gt;梳理笔记工具，最近把语雀都迁移到了 Github，找个时间可以 讨论下中间的过程。&lt;/p&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="Blog" /><category term="Markdown" /><summary type="html">背景</summary></entry><entry><title type="html">Dubbo 基础知识梳理</title><link href="/post/2022/11/Dubbo-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" rel="alternate" type="text/html" title="Dubbo 基础知识梳理" /><published>2022-11-16T00:00:00-06:00</published><updated>2022-11-16T00:00:00-06:00</updated><id>/post/2022/11/Dubbo-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86</id><content type="html" xml:base="/post/2022/11/Dubbo-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html">&lt;blockquote&gt;
  &lt;p&gt;参考资料：&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://juejin.cn/post/7128953614403371015#heading-5&quot;&gt;https://juejin.cn/post/7128953614403371015#heading-5&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dubbo.apache.org/zh/docs/&quot;&gt;https://dubbo.apache.org/zh/docs/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;简介&quot;&gt;简介&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Apache Dubbo 一款基于 RPC 服务开发的云原生微服务框架，与 SpringCloud 类似&lt;/li&gt;
  &lt;li&gt;使用 Dubbo 开发的微服务原生具备相互之间远程地址发现 (注册中心) 和通信的能力&lt;/li&gt;
  &lt;li&gt;Dubbo 支持丰富的服务治理特性，包含 服务发现、负载均衡、流量调度 等，高度可扩展&lt;/li&gt;
  &lt;li&gt;Dubbo 由 阿里巴巴 开发，并贡献给 Apache&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;发展历程&quot;&gt;发展历程&lt;/h2&gt;

&lt;h3 id=&quot;版本迭代&quot;&gt;版本迭代&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20221117023215.png?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;resize,w_960,m_lfit&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;软件生态的活跃度&quot;&gt;软件生态的活跃度&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/8G8hZG.jpg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;resize,w_960,m_lfit&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;与-springcloud-相比的优势&quot;&gt;与 SpringCloud 相比的优势&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;功能丰富，基于原生库即可完成大部分的微服务治理能力&lt;/li&gt;
  &lt;li&gt;支持超大规模的微服务机器设计，高性能 RPC 通信协议实现&lt;/li&gt;
  &lt;li&gt;高度可扩展性，支持在调用过程中对流量及协议进行拦截扩展，如 Filter、Router、LB 等&lt;/li&gt;
  &lt;li&gt;支持微服务治理的扩展组件
    &lt;ul&gt;
      &lt;li&gt;Registry 注册中心：Zookeeper、Nacos&lt;/li&gt;
      &lt;li&gt;Config Center 配置中心：Zookeeper、Nacos&lt;/li&gt;
      &lt;li&gt;Metadata Center 元数据中心 (Dubbo3 支持)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;dubbo-的基础概念介绍&quot;&gt;Dubbo 的基础概念介绍&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;RPC 通信&lt;/li&gt;
  &lt;li&gt;服务发现&lt;/li&gt;
  &lt;li&gt;流量治理&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;rpc-通信&quot;&gt;RPC 通信&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Dubbo3 之中，RPC 通信主要使用 Triple 协议，构建在 HTTP/2 协议之上，兼容 gRPC&lt;/li&gt;
  &lt;li&gt;提供 Request Response、Request Streaming、Response Streaming、Bi-directional Streaming 通信模型&lt;/li&gt;
  &lt;li&gt;支持 IDL，基于 Triple 协议&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;服务发现&quot;&gt;服务发现&lt;/h3&gt;

&lt;p&gt;服务发现，是消费端自动发现服务地址列表的能力，是微服务框架需要具备的关键能力，借助于自动化的服务发现，微服务之间在无需感知对端部署位置与 IP 地址的情况下实现通信。&lt;/p&gt;

&lt;p&gt;Dubbo 提供的 Client-Based 服务发现机制，同时也需要第三方注册中心来协调服务发现过程，比如 Nacos/Zookeeper 等。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/oaqyGX.jpg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;resize,w_960,m_lfit&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;流量治理&quot;&gt;流量治理&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Dubbo2 开始，Dubbo 就提供了丰富的服务治理规则，包括路由规则/动态配置等&lt;/li&gt;
  &lt;li&gt;Dubbo3 之中的实现
    &lt;ul&gt;
      &lt;li&gt;Dubbo Mesh : 通过对接 xDS 对接到时下流行的 Mesh 产品如 Istio 中所使用的以 VirtualService、DestinationRule 为代表的治理规则&lt;/li&gt;
      &lt;li&gt;另一方面 Dubbo 正寻求设计一套自有规则以实现在不通部署场景下的流量治理，以及灵活的治理能力。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;dubbo-mesh&quot;&gt;Dubbo Mesh&lt;/h2&gt;

&lt;p&gt;Dubbo Mesh 的目标是提供适应 Dubbo 体系的完整 Mesh 解决方案，包含定制化控制面（Control Plane）、定制化数据面解决方案。Dubbo 控制面基于业界主流 Istio 扩展，支持更丰富的流量治理规则、Dubbo 应用级服务发现模型等，Dubbo 数据面可以采用 Envoy Sidecar，即实现 Dubbo SDK + Envoy 的部署方案，也可以采用 Dubbo Proxyless 模式，直接实现 Dubbo 与控制面的通信。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/vMniiR.jpg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;resize,w_960,m_lfit&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;dubbo3&quot;&gt;Dubbo3&lt;/h2&gt;

&lt;p&gt;Dubbo 3.0 提供的新特性包括：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;新的地址发现模型（应用级服务发现）&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;查看&lt;a href=&quot;https://dubbo.apache.org/zh/docs/migration/migration-service-discovery&quot;&gt;应用级服务发现的迁移步骤&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;查看应用级服务发现的使用方式&lt;/li&gt;
      &lt;li&gt;查看应用级服务发现设计与实现&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;下一代基于 HTTP/2 的 Triple 协议&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;查看&lt;a href=&quot;https://dubbo.apache.org/zh/docs/migration/migration-triple&quot;&gt;Triple 协议迁移步骤&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;查看 &lt;a href=&quot;https://dubbo.apache.org/zh/docs/references/protocols/tri&quot;&gt;Triple 协议使用方式&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;查看 Triple 协议设计与实现&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;统一的路由规则。&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;查看&lt;a href=&quot;https://dubbo.apache.org/zh/docs/migration/migration-routingrule/&quot;&gt;统一路由规则的迁移步骤&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;查看&lt;a href=&quot;https://dubbo.apache.org/zh/docs/references/routers/&quot;&gt;统一路由规则使用方式&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;查看统一路由规则设计与实现&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="微服务" /><category term="Dubbo" /><summary type="html">参考资料：</summary></entry><entry><title type="html">Panads fill NaN value to Zero</title><link href="/post/2022/11/Panads-fill-NaN-value-to-Zero.html" rel="alternate" type="text/html" title="Panads fill NaN value to Zero" /><published>2022-11-10T00:00:00-06:00</published><updated>2022-11-10T00:00:00-06:00</updated><id>/post/2022/11/Panads%20fill%20NaN%20value%20to%20Zero</id><content type="html" xml:base="/post/2022/11/Panads-fill-NaN-value-to-Zero.html">&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pandas&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'somefile.txt'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fillna&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="Python" /><category term="Pandas" /><summary type="html">```python df = pandas.read_csv(‘somefile.txt’)</summary></entry><entry><title type="html">Redash for Docker 部署</title><link href="/post/2022/10/Redash-for-Docker-%E9%83%A8%E7%BD%B2.html" rel="alternate" type="text/html" title="Redash for Docker 部署" /><published>2022-10-22T00:00:00-05:00</published><updated>2022-10-22T00:00:00-05:00</updated><id>/post/2022/10/Redash%20for%20Docker%20%E9%83%A8%E7%BD%B2</id><content type="html" xml:base="/post/2022/10/Redash-for-Docker-%E9%83%A8%E7%BD%B2.html">&lt;blockquote&gt;
  &lt;p&gt;暗坑很多&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;部署过程&quot;&gt;部署过程&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;需要自行维护一个 env 作为配置文件&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;REDASH_COOKIE_SECRET=a07cca441ab9f28b66c589f3118e0de48469b1bc6a5036eade7badbed305d96e
POSTGRES_HOST_AUTH_METHOD=trust
REDASH_REDIS_URL=redis://redis:6379/0
REDASH_DATABASE_URL=postgresql://postgres
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;需要创建一个 postgres-data 并配置 docker-compose.yml 的路径，数据库持久化&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;需要给 postgres 容器增加 sudo 命令
    &lt;ul&gt;
      &lt;li&gt;apk add sudo&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;需要手工进入到 postgresql 容器内创建 role 和 database
    &lt;ul&gt;
      &lt;li&gt;createuser -U postgres redash&lt;/li&gt;
      &lt;li&gt;createdb -U postgres redash&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;执行数据库初始化动作&lt;/li&gt;
  &lt;li&gt;docker-compose run –rm server create_db&lt;/li&gt;
  &lt;li&gt;然后重启 redash 全部服务即可 docker-compose down 后重启&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;postgresql 在执行 psql 命令时，默认会读取当前系统用户作为执行 role；但 psql 默认用户是 postgres&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://redash.io/help/open-source/setup&quot;&gt;https://redash.io/help/open-source/setup&lt;/a&gt;
&lt;a href=&quot;https://redash.io/help/open-source/dev-guide/docker&quot;&gt;https://redash.io/help/open-source/dev-guide/docker&lt;/a&gt;
&lt;a href=&quot;https://docs.victoriametrics.com/url-examples.html#apiv1exportcsv&quot;&gt;https://docs.victoriametrics.com/url-examples.html#apiv1exportcsv&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?src=11\&amp;amp;timestamp=1660629444\&amp;amp;ver=3985\&amp;amp;signature=verv70veamW*Ez2Sgc8e89yMJGwANIOzz4lfwbezyVV3wpWNT2d9SnGrDecUOwrbTJBR2o-Ax6ZS4Fpu2UxfX7Sy9xsk1LCXfY1wNr42ucl3tFePfJ7c536c8z*L-HOy\&amp;amp;new=1&quot;&gt;https://mp.weixin.qq.com/s?src=11\&amp;amp;timestamp=1660629444\&amp;amp;ver=3985\&amp;amp;signature=verv70veamW&lt;em&gt;Ez2Sgc8e89yMJGwANIOzz4lfwbezyVV3wpWNT2d9SnGrDecUOwrbTJBR2o-Ax6ZS4Fpu2UxfX7Sy9xsk1LCXfY1wNr42ucl3tFePfJ7c536c8z&lt;/em&gt;L-HOy\&amp;amp;new=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?src=11&amp;amp;timestamp=1660682601&amp;amp;ver=3986&amp;amp;signature=h8m0RzEX3qWsKcUo6Ee3azdsnzLQqUf3N8FdLhyWNa52U4vAvlbEaBFUCrTZnh54tT-YS2mODfkp-6Hemmzt3n*hzGHlEmXP-HO5830W0Fzmn4MMfnsOPBKLrcjaiU0h&amp;amp;new=1&quot;&gt;https://mp.weixin.qq.com/s?src=11&amp;amp;timestamp=1660682601&amp;amp;ver=3986&amp;amp;signature=h8m0RzEX3qWsKcUo6Ee3azdsnzLQqUf3N8FdLhyWNa52U4vAvlbEaBFUCrTZnh54tT-YS2mODfkp-6Hemmzt3n*hzGHlEmXP-HO5830W0Fzmn4MMfnsOPBKLrcjaiU0h&amp;amp;new=1&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;redash env 配置：&lt;a href=&quot;https://redash.io/help/open-source/admin-guide/env-vars-settings&quot;&gt;https://redash.io/help/open-source/admin-guide/env-vars-settings&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;postgres 权限问题 &lt;a href=&quot;https://stackoverflow.com/a/25051632/5067657&quot;&gt;https://stackoverflow.com/a/25051632/5067657&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://techoverflow.net/2021/05/07/how-to-fix-alpine-linux-ash-sudo-not-found/&quot;&gt;https://techoverflow.net/2021/05/07/how-to-fix-alpine-linux-ash-sudo-not-found/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://discuss.redash.io/t/error-99-connecting-to-localhost-6379-cannot-assign-requested-address/9716/7&quot;&gt;https://discuss.redash.io/t/error-99-connecting-to-localhost-6379-cannot-assign-requested-address/9716/7&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;启动的服务介绍&quot;&gt;启动的服务介绍&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;v10-redashio_adhoc_worker_1     # 执行查询任务的 worker&lt;/li&gt;
  &lt;li&gt;v10-redashio_postgres_1       # 数据库&lt;/li&gt;
  &lt;li&gt;v10-redashio_redis_1        # 缓存&lt;/li&gt;
  &lt;li&gt;v10-redashio_scheduled_worker_1   # 执行计划任务的 worker&lt;/li&gt;
  &lt;li&gt;v10-redashio_scheduler_1      # 计划任务管理 server&lt;/li&gt;
  &lt;li&gt;v10-redashio_server_1        # 主体 server&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以上主要会设计到 3 个镜像，redis、pgsql、redash，其中核心是 redash，所以关注镜像版本也是这个&lt;/p&gt;

&lt;h2 id=&quot;版本升级&quot;&gt;版本升级&lt;/h2&gt;

&lt;p&gt;redash 的版本升级较为方便，更换 server 的镜像；然后升级数据库即可。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;测试过从 v8 升级到 v10 , 和 v9 升级到 v10，都是 ok 的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;关闭 Redash 服务
    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker-compose stop server scheduler scheduled_worker adhoc_worker&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;更新 docker-compose.yml
    &lt;ol&gt;
      &lt;li&gt;基本上这一步，只需要更新 redash 的镜像版本即可&lt;/li&gt;
      &lt;li&gt;然后执行 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker-compose pull&lt;/code&gt; 拉取新镜像版本&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;执行数据库升级
    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker-compose run --rm server manage db upgrade&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;启动全部服务即可
    &lt;ol&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;docker-compse up -d&lt;/code&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;解决-es-的-https-问题&quot;&gt;解决 ES 的 HTTPS 问题&lt;/h2&gt;

&lt;p&gt;由于我们的 es 地址访问地址采用 https，但为自签证书，所以在 request 之中会有些问题，所以我在这里更新了 elasticsearch 的插件，然后将其上传到我个人的 docker hub.
&lt;a href=&quot;https://hub.docker.com/r/samzong/redash&quot;&gt;https://hub.docker.com/r/samzong/redash&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;带来的问题，页面上无法选择到 Elasticsearch 作为数据源，没时间去研究了&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;看了下还是可以使用 redash 的 API 去创建的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/api/data_sources&lt;/code&gt;:&lt;/p&gt;

&lt;h2 id=&quot;配置&quot;&gt;配置&lt;/h2&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;options&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;basic_auth_password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-----&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;basic_auth_user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;elastic&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;server&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://10.6.51.101:31001/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;skip_tls_verification&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;elasticsearch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;test-es&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;创建完成后，就可以在页面上更新了。&lt;/p&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="数据库" /><category term="Redash" /><summary type="html">暗坑很多</summary></entry><entry><title type="html">JWT 内置的方式</title><link href="/post/2022/10/JWT-%E5%86%85%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F.html" rel="alternate" type="text/html" title="JWT 内置的方式" /><published>2022-10-18T00:00:00-05:00</published><updated>2022-10-18T00:00:00-05:00</updated><id>/post/2022/10/JWT%20%E5%86%85%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F</id><content type="html" xml:base="/post/2022/10/JWT-%E5%86%85%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F.html">&lt;ul&gt;
  &lt;li&gt;支持为 API 启用 jwt token 解码的能力 ,  读取网关的 jwt key
    &lt;ul&gt;
      &lt;li&gt;读取请求 Header 中的 Authorization&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;需要支持为网关配置多 jwt key , and 加密长度 ?
    &lt;ul&gt;
      &lt;li&gt;解密的性能问题&lt;/li&gt;
      &lt;li&gt;expire_time 过期时间的配置&lt;/li&gt;
      &lt;li&gt;解密后的参数传递&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1666060887030-ff0a6f09-9bf0-44d5-a92b-dc36fc9b7d47.png?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;image.png&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;迭代的方向&quot;&gt;迭代的方向&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;采用外置的 Jwt server 认证服务
    &lt;ol&gt;
      &lt;li&gt;配置 jwt server url&lt;/li&gt;
      &lt;li&gt;respone 解密后的  json 内容；进行参数传递&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;采用托管的 Jwt server 来进行托管
    &lt;ol&gt;
      &lt;li&gt;配置 jwt key (支持自动生成)&lt;/li&gt;
      &lt;li&gt;expire_time&lt;/li&gt;
      &lt;li&gt;加密长度&lt;/li&gt;
      &lt;li&gt;自动配置参数传递
        &lt;ol&gt;
          &lt;li&gt;全部传递&lt;/li&gt;
          &lt;li&gt;全部传递 (not token)&lt;/li&gt;
          &lt;li&gt;白名单传递&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="Kubernetes" /><category term="Contour" /><summary type="html">支持为 API 启用 jwt token 解码的能力 , 读取网关的 jwt key 读取请求 Header 中的 Authorization 需要支持为网关配置多 jwt key , and 加密长度 ? 解密的性能问题 expire_time 过期时间的配置 解密后的参数传递</summary></entry><entry><title type="html">唧唧复唧唧</title><link href="/post/2022/10/%E5%94%A7%E5%94%A7%E5%A4%8D%E5%94%A7%E5%94%A7.html" rel="alternate" type="text/html" title="唧唧复唧唧" /><published>2022-10-06T00:00:00-05:00</published><updated>2022-10-06T00:00:00-05:00</updated><id>/post/2022/10/%E5%94%A7%E5%94%A7%E5%A4%8D%E5%94%A7%E5%94%A7</id><content type="html" xml:base="/post/2022/10/%E5%94%A7%E5%94%A7%E5%A4%8D%E5%94%A7%E5%94%A7.html">&lt;p&gt;&lt;a href=&quot;https://www.amazon.cn/gp/product/B01951CHO6/ref=as_li_qf_sp_asin_tl?ie=UTF8\&amp;amp;camp=536\&amp;amp;creative=3200\&amp;amp;creativeASIN=B01951CHO6\&amp;amp;linkCode=as2\&amp;amp;tag=llll1-23&quot;&gt;王路&lt;/a&gt;
12 highlights&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;同样一潭池水，天人视之为清波，饿鬼视之为阳焰。所有的看法，无非是一个人的世界观投在故事上的倒影，它&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;就常有这样的经验。比如碰见好久不见的老友，事前特别期待，想到有很多话可以聊，等坐到桌上，却发现只剩下老生常谈。这怪不得谁，每个人的生活都不一样，各自感兴趣的事儿都不同。不像以往，大家都在同一个班里，每天的生活都是类似的，所思所想也都差不了太远。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;要想在一个圈子里得到认同，需要遵照这个圈子的价值标准和话语体系。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;很久之后，我才慢慢明白自己当初的做法多么愚蠢。想要一个人改变习惯，很难。而尤其不应该的是，总把自己以为便利的东西强加给别人。年龄和岁月足以让一个人的学习能力慢慢退化，并最终丧失对新事物的好奇。从头掌握最基本的技能，对不年轻的人来说，成本太高昂。他们需要为养家糊口奔波，为时不多的暇余，并不足以支撑他们疲惫的身心去探究世界的种种新奇。于是，他们就远远被时代抛下了。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;圣诞老人的意思就是：在你爱的人不知道的时候，把礼物放到他的身边。因为收到礼物的人不知道，所以这个夜晚是寂静的。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;许多东西，只在此时、此地、此景有。没办法绸缪，也没办法复盘。可贵的事物之所以可贵，正在其转瞬即逝，不可复得。在一刹那灭去，并成为永恒。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;屏蔽掉一个人，看不到他的样子，听不到他的声音，却抑制不了不去想他。世间的痛苦和烦恼，不在于不能得到，而在于不能割舍。不在于不想屏蔽的东西被屏蔽，而在于想屏蔽的东西无法屏蔽&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;对于贪著心，真正可怕的不是一件事情上的得失，而是串习的力量对一个人行为举止的巨大影响。这种影响是潜在的，却是深刻而难以磨灭的。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;三涂之苦&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;编程谓之 Class，《&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;钱穆先生曾在《宋明理学概述》序言里说：““虽居乡僻，未尝敢一日废学。虽经乱离困厄，未尝敢一日颓其志。虽或名利当前，未尝敢动其心。虽或毁誉横生，未尝敢馁其气。虽学不足以自成立，未尝或忘先儒之榘矱，时切其向慕。虽垂老无以自靖献，未尝不于国家民族世道人心，自任以匹夫之有其责。””&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;佛家说烦恼即是般若，那些让你斩不断的愁丝才是真正度你到彼岸的船筏。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="读书笔记" /><category term="旧书摘" /><summary type="html">王路 12 highlights</summary></entry><entry><title type="html">自卑与超越</title><link href="/post/2022/10/%E8%87%AA%E5%8D%91%E4%B8%8E%E8%B6%85%E8%B6%8A.html" rel="alternate" type="text/html" title="自卑与超越" /><published>2022-10-04T00:00:00-05:00</published><updated>2022-10-04T00:00:00-05:00</updated><id>/post/2022/10/%E8%87%AA%E5%8D%91%E4%B8%8E%E8%B6%85%E8%B6%8A</id><content type="html" xml:base="/post/2022/10/%E8%87%AA%E5%8D%91%E4%B8%8E%E8%B6%85%E8%B6%8A.html">&lt;p&gt;&lt;a href=&quot;https://www.amazon.cn/gp/product/B013GD8VEY/ref=as_li_qf_sp_asin_tl?ie=UTF8\&amp;amp;camp=536\&amp;amp;creative=3200\&amp;amp;creativeASIN=B013GD8VEY\&amp;amp;linkCode=as2\&amp;amp;tag=llll1-23&quot;&gt;【奥】阿尔弗雷德··阿德勒&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;前言 阿德勒：超越自卑，找到生命的真正意义 阿德勒是个体心理学的先驱和代表。个体心理学与其他心理学流派相比，最突出显要的一点在于，它对人的研究是以个体为始，即首先关注个体本身的成长发展和人生历程。有趣的是，如果你对阿德勒本人的人生经历及其学说有所了解的话，你会发现其人的发展轨迹恰好印证了他所秉持的观点和理论。阿德勒认为，每个人都有不同程度的自卑感，而优越感则是自卑感的补偿。但自卑感的存在并不是一件坏事，因为它激励了人不断追求卓越，克服自身的障碍，在有限的生命空间内发挥出最大的价值。可以说，正是由于人类会有自卑感，才会有不断取得发展和进步的不竭动力。与此相印证的是，阿德勒本人就是一个““先天发展不足””、一开始就存在着极为强烈自卑感的人。阿德勒是一个直到 4 岁才会走路的体弱多病的儿童。他患有佝偻病，无法进行激烈的体育活动。但他并没有让身体上的缺陷压倒自己，相反，这刺激了他的上进心。&lt;/p&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="读书笔记" /><category term="旧书摘" /><summary type="html">【奥】阿尔弗雷德··阿德勒</summary></entry><entry><title type="html">GitLab Forked 如何跟随 upstream 主库</title><link href="/post/2022/09/GitLab-Forked-%E5%A6%82%E4%BD%95%E8%B7%9F%E9%9A%8Fupstream%E4%B8%BB%E5%BA%93.html" rel="alternate" type="text/html" title="GitLab Forked 如何跟随 upstream 主库" /><published>2022-09-28T00:00:00-05:00</published><updated>2022-09-28T00:00:00-05:00</updated><id>/post/2022/09/GitLab%20Forked%20%E5%A6%82%E4%BD%95%E8%B7%9F%E9%9A%8Fupstream%E4%B8%BB%E5%BA%93</id><content type="html" xml:base="/post/2022/09/GitLab-Forked-%E5%A6%82%E4%BD%95%E8%B7%9F%E9%9A%8Fupstream%E4%B8%BB%E5%BA%93.html">&lt;p&gt;:::info
通过 PR 的方式共同对主仓库进行贡献的方式，是开源项目协作的非常有效的方法；通常我们不会直接对主仓库直接提交代码。
:::&lt;/p&gt;

&lt;p&gt;一般情况下，我们的操作是，在需要贡献时，Fork 一份项目，然后自己修改以 PR 的方式提交贡献请求。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664330743895-9b2e0dc6-527e-4bcd-8b63-c223aa634b8f.png?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;image.png&quot; title=&quot;一份完整的 Github贡献指南&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;github-的实现方式&quot;&gt;Github 的实现方式&lt;/h2&gt;

&lt;p&gt;熟悉 Github 的同学会发现，在 Github 上最近更新了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Sync fork&lt;/code&gt;的功能，通过简单的点击操作，即可完成对源库 (upstream) 的更新同步。
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664330528512-563a5536-1734-4fd0-b41c-9c5d121327e0.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-09-28 at 10.01.33.jpg&quot; title=&quot;当 upstream 超前时，提示 update branch&quot; /&gt;
通过以上方式，我们可以方便在跟随主库的更新&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tips Github 的方式，仅在 Web 端 和 Github CLI 官方提供的 GH 才可以使用这样的功能&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;no-github-when-gitlab-&quot;&gt;No Github, When Gitlab ?&lt;/h2&gt;

&lt;p&gt;Github 更多在开源项目时贡献，实际上，在我们日常的工作当中，更多会有自建的 Gitlab 或者其他的代码 Hub，这里以 Gitlab 为例&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664331575915-853554f5-c047-4f14-8e79-67e2214429bc.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-09-28 at 10.19.20.jpg&quot; title=&quot;gitlab 默认项目首页&quot; /&gt;
Gitlab 并未提供 Sync fork 的功能，所以我们需要自行解决同步的需求&lt;/p&gt;

&lt;h2 id=&quot;为仓库添加-upstream-源仓库&quot;&gt;为仓库添加 upstream 源仓库&lt;/h2&gt;

&lt;p&gt;:::success
以下方式会在终端或本地使用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Sourcetree&lt;/code&gt;更加自由，仅使用 Git 的方式协作，自由度很大
:::
基于这个方式我们可以实现，有关联的 主库到从库的同步；也可以完成跨 Hub 的同步，比如：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Github -&amp;gt;  Gitlab&lt;/li&gt;
  &lt;li&gt;Github -&amp;gt; Github&lt;/li&gt;
  &lt;li&gt;Gitlab  -&amp;gt; Gitlab&lt;/li&gt;
  &lt;li&gt;Gitlab  -&amp;gt;  Github&lt;/li&gt;
  &lt;li&gt;Gitee  -&amp;gt;  Gitlab&lt;/li&gt;
  &lt;li&gt;Gitee -&amp;gt; Github&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;samzonglu at samzongs-MacBook-Pro &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; ~/Git/daocloud/DaoCloud-docs&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;main✔&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
± git remote add upstream https://github.com/DaoCloud/DaoCloud-docs.git
Alias tip: gra upstream https://github.com/DaoCloud/DaoCloud-docs.git

samzonglu at samzongs-MacBook-Pro &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; ~/Git/daocloud/DaoCloud-docs&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;main✔&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
± git remote
Alias tip: gr
origin
upstream

samzonglu at samzongs-MacBook-Pro &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; ~/Git/daocloud/DaoCloud-docs&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;main✔&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
± git fetch upstream
Alias tip: gf upstream
remote: Enumerating objects: 1268, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Counting objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;182/182&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Compressing objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;5/5&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
remote: Total 1268 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 177&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, reused 182 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;delta 177&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, pack-reused 1086
Receiving objects: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1268/1268&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, 1.87 MiB | 2.74 MiB/s, &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
Resolving deltas: 100% &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;637/637&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;, completed with 119 &lt;span class=&quot;nb&quot;&gt;local &lt;/span&gt;objects.
From https://github.com/DaoCloud/DaoCloud-docs
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      feature/theme                            -&amp;gt; upstream/feature/theme
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      fix-typo                                 -&amp;gt; upstream/fix-typo
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      gh-pages                                 -&amp;gt; upstream/gh-pages
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      main                                     -&amp;gt; upstream/main
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      patch-new-gh-pages-01                    -&amp;gt; upstream/patch-new-gh-pages-01
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;new branch]      stash/bug-codes                          -&amp;gt; upstream/stash/bug-codes

samzonglu at samzongs-MacBook-Pro &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; ~/Git/daocloud/DaoCloud-docs&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;main✔&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
± git pull upstream main
Alias tip: gl upstream main
From https://github.com/DaoCloud/DaoCloud-docs
 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; branch            main       -&amp;gt; FETCH_HEAD
Already up to date.

samzonglu at samzongs-MacBook-Pro &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; ~/Git/daocloud/DaoCloud-docs&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;main✔&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
± git push origin main
Alias tip: gp origin main
Everything up-to-date
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="Git" /><category term="GitLab" /><summary type="html">:::info 通过 PR 的方式共同对主仓库进行贡献的方式，是开源项目协作的非常有效的方法；通常我们不会直接对主仓库直接提交代码。 :::</summary></entry><entry><title type="html">Kafka 调研及功能设计</title><link href="/post/2022/09/Kafka-%E7%AB%9E%E5%93%81%E8%B0%83%E7%A0%94%E5%8F%8A%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1.html" rel="alternate" type="text/html" title="Kafka 调研及功能设计" /><published>2022-09-27T00:00:00-05:00</published><updated>2022-09-27T00:00:00-05:00</updated><id>/post/2022/09/Kafka%20%E7%AB%9E%E5%93%81%E8%B0%83%E7%A0%94%E5%8F%8A%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1</id><content type="html" xml:base="/post/2022/09/Kafka-%E7%AB%9E%E5%93%81%E8%B0%83%E7%A0%94%E5%8F%8A%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1.html">&lt;h2 id=&quot;调研对象&quot;&gt;调研对象&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;厂家&lt;/th&gt;
      &lt;th&gt;产品控制台主页&lt;/th&gt;
      &lt;th&gt;应用模式&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;阿里云&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://kafka.console.aliyun.com/&quot;&gt;https://kafka.console.aliyun.com/&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;中间件 PaaS 模块之一&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;腾讯云&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://console.cloud.tencent.com/ckafka/overview&quot;&gt;https://console.cloud.tencent.com/ckafka/overview&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;中间件 PaaS 模块之一&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;华为云&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://console.huaweicloud.com/dms/?region=cn-east-3&amp;amp;engine=kafka&quot;&gt;https://console.huaweicloud.com/dms/?region=cn-east-3&amp;amp;engine=kafka&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;中间件 PaaS 模块之一&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;QingCloud&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://console.qingcloud.com/pek3/app/app-n9ro0xcp/&quot;&gt;https://console.qingcloud.com/pek3/app/app-n9ro0xcp/&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;中间件 AppCenter 模块之一&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;UCloud&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://console.ucloud.cn/ukafka/ukafka&quot;&gt;https://console.ucloud.cn/ukafka/ukafka&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;中间件 PaaS 模块之一&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;时速云&lt;/td&gt;
      &lt;td&gt;&lt;a href=&quot;https://console.tenxcloud.com/middleware_center/app&quot;&gt;https://console.tenxcloud.com/middleware_center/app&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;中间件 应用之一&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;operator-选型&quot;&gt;operator 选型&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/strimzi/strimzi-kafka-operator&quot;&gt;https://github.com/strimzi/strimzi-kafka-operator&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/banzaicloud/koperator&quot;&gt;https://github.com/banzaicloud/koperator&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;功能横向对比&quot;&gt;功能横向对比&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;功能点&lt;/th&gt;
      &lt;th&gt;阿里云&lt;/th&gt;
      &lt;th&gt;腾讯云&lt;/th&gt;
      &lt;th&gt;华为云&lt;/th&gt;
      &lt;th&gt;QingCloud&lt;/th&gt;
      &lt;th&gt;UCloud&lt;/th&gt;
      &lt;th&gt;时速云&lt;/th&gt;
      &lt;th&gt;strimzi-kafka-operator&lt;/th&gt;
      &lt;th&gt;koperator&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 实例的生命周期管理&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 多版本支持&lt;/td&gt;
      &lt;td&gt;√ 默认固定，工单调整&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√(仅 1 个)&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 节点列表&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;跳转 Pod&lt;/td&gt;
      &lt;td&gt;√ (能创建 pod)&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 原生参数管理&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 常用参数抽象&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 模块自带 Zookeeper&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;消息查询功能&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;消息下载功能&lt;/td&gt;
      &lt;td&gt;√(高级版）&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Topic 管理列表&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Topic 增删改查&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Topic 高级参数支持&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Topic 详情&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Consumer Group 列表&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Consumer Group 增删改查&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ 原生&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;资源监控看板&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√ grafana dashboard&lt;/td&gt;
      &lt;td&gt;√ grafana dashboard&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 业务数据监控 (消息量/积压/消费情况)&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√Grafana&lt;/td&gt;
      &lt;td&gt;√ exporter+grafana&lt;/td&gt;
      &lt;td&gt;√  exporter+grafana&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;示例接入代码&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;消息发送测试窗口&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kafka 服务日志查看&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;操作审计日志查看&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;提供 Kafka Manager UI&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;提供 kafka export 备份功能&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;友好性帮助文档&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;提供帮助用户迁入上云&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt;√&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;kafka-创建过程及开放参数&quot;&gt;Kafka 创建过程及开放参数&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;厂家&lt;/th&gt;
      &lt;th&gt;字段&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;阿里云&lt;/td&gt;
      &lt;td&gt;名称流量规格集群流量 = 业务流量 + 集群内副本复制流量，该规格实际业务读流量处理峰值为 50 MB/s，业务写流量处理峰值为 10 MB/s。磁盘容量数据默认 3 副本存储。实例规格为标准版时，如购买 300G 磁盘，实际存储业务的磁盘大小为 100G，其余 200G 为备份容量。实例规格为专业版时，如购买 300G 磁盘，实际存储业务的磁盘大小为 300G，额外赠送 600G 备份容量。消息保留最长时间是指在磁盘容量充足的情况下，消息的最长保留时间；在磁盘容量不足（即磁盘水位达到 85%）时，将提前删除旧的消息，以确保服务可用性；默认 72 小时，可选 24 小时 ～ 168 小时。最大消息大小，默认 1MB 边界值？标准版实例单条消息最大为 256KB，专业版实例单条消息最大为 10MB 且支持&lt;strong&gt;下载&lt;/strong&gt;Topic 数量&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;腾讯云&lt;/td&gt;
      &lt;td&gt;名称 Kafka 版本实例规格配置存储容量消息保留时长&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;华为云&lt;/td&gt;
      &lt;td&gt;名称 Kafka 版本实例规格配置存储容量&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;QingCloud&lt;/td&gt;
      &lt;td&gt;名称 Kafka 版本 Kafka 节点配置：CPU / 内存  / 节点数（规格）客户端节点配置：CPU / 内存  / 节点数（规格）Kafka-Manager / CLI）Zookeeper 实例存储容量自定义参数配置内部 Topic offset replicasKafka manager 认证 zabbix.agentkafka scale version&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;UCloud&lt;/td&gt;
      &lt;td&gt;名称 Kafka 版本实例规格配置 + 存储容量实例数 3&amp;lt;设定值&amp;lt;100 消息保留时长&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;基础设计问题&quot;&gt;基础设计问题&lt;/h2&gt;

&lt;h3 id=&quot;部署方式&quot;&gt;部署方式？&lt;/h3&gt;

&lt;p&gt;DCE5 支持多集群，Kafka 采用 operator 的方式部署，则需要先安装 Operator 模板到集群内&lt;/p&gt;

&lt;h3 id=&quot;什么时间安装---kafka-operator&quot;&gt;什么时间安装   Kafka-operator？&lt;/h3&gt;

&lt;p&gt;在用户创建 kafka 实例时，检测是否目标集群是否存在 kafka-operator，如果不存在则同步安装&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;什么时间移除 kafka-operator，默认情况下安装后不移除；交由 Kpanda 对集群释放时处理&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;如果支持-kafka-多版本&quot;&gt;如果支持 Kafka 多版本？&lt;/h3&gt;

&lt;p&gt;通过多版本 对应 多 Kafka-opeator 的方式，让用户进行多版本选择&lt;/p&gt;

&lt;h3 id=&quot;operator-更新后存量-kafka-怎么办&quot;&gt;Operator 更新后，存量 Kafka 怎么办？&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;非必要需求，短期不支持&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;默认情况下更新了 operator 之后，不对存量做处理；后续可以做友好提示用户升级即可&lt;/p&gt;

&lt;h2 id=&quot;调研对象主要功能截图&quot;&gt;调研对象主要功能截图&lt;/h2&gt;

&lt;h3 id=&quot;阿里云&quot;&gt;阿里云&lt;/h3&gt;

&lt;h4 id=&quot;实例生命周期管理&quot;&gt;实例生命周期管理&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;实例创建&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307586169-51f50e53-916d-4c22-b365-94403478b2cd.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 10.19.23.jpg&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;实例详情&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307617207-228cff9e-97a2-45df-a072-de9161d99594.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 10.20.05.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-topic-管理&quot;&gt;Kafka Topic 管理&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307510049-397d57bc-29e5-4795-83f0-f08a0d91606b.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 10.18.17.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-消息查询&quot;&gt;Kafka 消息查询&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307481227-28a5f677-942f-4bee-8a40-f211a0699427.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 10.16.43.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;监控告警页面&quot;&gt;监控告警页面&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307674273-cd48a1dc-2d56-4ac6-85ba-f7a15e9c977b.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 10.20.49.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;topic-详情&quot;&gt;Topic 详情&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661315257657-3dd43b19-5c83-44a5-8dcf-3a7b00fdde2d.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 12.27.10@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325524370-2d137783-d065-40cf-b0e1-f758ec574a06.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.18.33@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325542835-025378a0-2813-4d38-a0ad-506012d0b7ec.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.18.54@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325553902-8071ff2d-e5ce-4328-bf30-33be12a1aec0.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.19.07@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;group-管理&quot;&gt;Group 管理&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325583058-974985e4-822b-4229-bf20-7c78e07a5ac7.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.19.37.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325590879-42d393a0-93de-44fe-b71b-de31ce075c09.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.19.45@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325603155-d688fe65-6f4c-4324-9244-854b7a818154.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.19.54@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;prom-监控&quot;&gt;Prom 监控&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661323003273-fe3de5cc-28d0-48ab-8ead-38d8ba7b52b1.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 14.28.53.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;腾讯云&quot;&gt;腾讯云&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325816247-f34749aa-9d99-4a79-9295-108e9f97cbed.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.23.24@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-实例生命周期管理&quot;&gt;Kafka 实例生命周期管理&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325788285-5a658ef6-092c-40b2-88b8-1317e29b71b4.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.22.56@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;消息查询功能&quot;&gt;消息查询功能&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325835047-bc37c5a0-919b-422a-8706-bcb444171aef.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.23.44@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;数据同步任务&quot;&gt;数据同步任务&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325851682-523521fc-491d-431d-a255-efdaa2c1fa2d.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.24.04@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;迁移上云功能&quot;&gt;迁移上云功能&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325869643-c2bc8a18-17be-406d-891f-fac1348d8072.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.24.21@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;topic-管理&quot;&gt;Topic 管理&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332709528-c073dd8e-8637-4620-831b-59b714fd31ec.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.18.06@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332721004-1c4aae0a-424a-4a40-89de-904f2cc9e021.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.18.35@2x.jpg&quot; /&gt;
&lt;a href=&quot;https://cloud.tencent.com/document/product/597/73566&quot;&gt;https://cloud.tencent.com/document/product/597/73566&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;查看-topic-详情&quot;&gt;查看 Topic 详情&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332758035-b38e4bf8-e5e5-4fc6-82ad-72d27a995c05.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.19.00@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;查看-topic-生产端连接&quot;&gt;查看 Topic 生产端连接&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332800322-193f8f5e-b5cf-49d1-830c-a35496a34737.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.19.30@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;发送测试消息&quot;&gt;发送测试消息&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332849948-44c9aa3b-6fcb-42e8-8d07-91ad7dc1108b.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.20.13@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;group-管理-1&quot;&gt;Group 管理&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332888749-197b7cd0-4db2-4324-a8be-523f6230e1d8.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.21.06@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332903130-4aa1572a-2191-4b9a-a7d8-da430d5b664a.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.21.36@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;华为云&quot;&gt;华为云&lt;/h3&gt;

&lt;h4 id=&quot;实例的创建&quot;&gt;实例的创建&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326023773-8c1cfb61-6d36-451a-9ae8-e23253d0630a.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.26.48@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326059316-df094fe7-237e-4aa3-b94c-be9015099325.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.27.28@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;实例基本信息&quot;&gt;实例基本信息&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327087509-8db8e907-fc63-46b0-8df3-de9c03f05ec1.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.44.29@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;实例配置修改&quot;&gt;实例配置修改&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326942939-93255eb4-0f4f-4d09-b4f7-c824fe2cdb7d.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.42.03@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;创建-topic&quot;&gt;创建 Topic&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326884381-03f190c8-7371-4ee3-8222-39cf0c78bb17.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.41.07@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;监控&quot;&gt;监控&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326916095-08d2ad76-421b-481c-a81e-8bd6b402fea3.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.41.43@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326990347-ab2413fc-d1c5-4875-8026-408ba05c19e0.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.43.01@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327009996-7525be7c-31e7-4c94-9b88-9a9d6c06f6bb.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.43.16@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327029319-18496da6-1f6c-458e-9cc2-2841da4ae21b.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.43.40@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327041939-b6642928-ddb3-4f6d-9cf6-f900ff0ba7ee.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.43.56@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;示例代码&quot;&gt;示例代码&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327057619-5dbb3d4b-d6b8-40ec-a528-8b87e6253d62.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.44.07@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;qingcloud&quot;&gt;QingCloud&lt;/h3&gt;

&lt;h4 id=&quot;kafka-实例的创建&quot;&gt;Kafka 实例的创建&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327953531-4347c195-85b1-4284-90c9-71b2f658d20a.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.59.07@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327970196-df7533af-51b5-44c1-a3e6-dc53dd345165.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.59.23@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327978746-cde36af3-af9d-4818-a225-0435be7d8c70.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.59.33@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327989141-65ba9381-c39d-4df4-b35f-eb30c2c0f117.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.59.43@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;创建时，需要关联依赖服务 zookeeper&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327998858-3c6af065-aac1-4351-8e7a-3a72c803ee36.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 15.59.51@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;实例详情&quot;&gt;实例详情&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661328648427-68359d73-3397-4f51-a41e-72ff088aa1da.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.10.36@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;topic-管理-1&quot;&gt;Topic 管理&lt;/h4&gt;

&lt;p&gt;提供了原生的 Kafka-manager 管理 UI
&lt;a href=&quot;https://docsv3.qingcloud.com/middware/kafka/manual/kafka_manager/kafka_manager_topic/&quot;&gt;https://docsv3.qingcloud.com/middware/kafka/manual/kafka_manager/kafka_manager_topic/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;访问方式，以 openvpn 的方式接入到 VPC(需绑定入口公网 IP) 后，通过 client 内网地址访问
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661335030256-d6d8f4ce-5450-4675-9887-d91bfc43261e.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.57.01@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ucloud&quot;&gt;UCloud&lt;/h3&gt;

&lt;h4 id=&quot;创建实例&quot;&gt;创建实例&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661329936765-dc801f1f-b820-4346-8cd5-bd16f22c933b.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.32.07@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-实例详情&quot;&gt;Kafka 实例详情&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330180680-64f2f85d-65b1-429b-a9c2-0d4a3b7e7057.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.36.01@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330194590-e638d644-6d73-4008-9e73-fbd9386a739c.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.36.29@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330211435-8ac8d8e4-fa63-4151-a3c4-6cd85c346c2c.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.36.41@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330224056-a5b18cfb-21d8-44ab-aa10-2ec8b3225ad8.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.36.55@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-节点的详情页面&quot;&gt;Kafka 节点的详情页面&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331042096-143c7a92-3189-4413-b0f8-59c2e6480eb4.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.50.34@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330392867-c7609d4a-72bd-45e6-b741-943c2c7711fd.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.39.28@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-自定义配置&quot;&gt;kafka 自定义配置&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331022340-2de4f944-dd32-42ea-a0ab-538044f96ab7.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.50.13@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-连接器&quot;&gt;Kafka 连接器&lt;/h4&gt;

&lt;p&gt;将上游 Kafka 数据传输到 HDFS 或者 es
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331196868-8af6eb6f-7690-49f8-83fa-f39297820c5f.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.53.11@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331184528-87b97468-042b-479b-9051-6a49838280a2.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.52.58@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331174214-c2788e65-e3a2-4080-b275-73b30ac6ed3c.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.52.43@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;监控看板&quot;&gt;监控看板&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330312396-375635d6-015b-447a-88c2-e5c2ad51de23.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.38.11@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;创建-topic-1&quot;&gt;创建 Topic&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331056766-ea9a2a74-12bd-482a-b77c-e375e9e0bb45.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.50.50@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330340573-54024fe3-75fe-4dfb-b322-a0f157e369bf.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.38.45@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331099713-b943c976-ca08-4769-a4dc-710c92d899a2.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.51.29@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331073008-7df8b7f5-b92b-41a2-8c7f-74cc29071bc8.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.51.05@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;时速云&quot;&gt;时速云&lt;/h3&gt;

&lt;h4 id=&quot;实例生命周期管理-1&quot;&gt;实例生命周期管理&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331586127-3cd1e00a-fbed-4454-aea2-14e3bf95c393.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 16.59.24@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;需要提前安装 zookeeper&lt;/li&gt;
  &lt;li&gt;需要联系时速云管理员安装 kafka-cluster-operator
    &lt;ul&gt;
      &lt;li&gt;到交付中心，找到 Operator Hub，选择 Kafka-cluster-operator 安装&lt;/li&gt;
      &lt;li&gt;安装完成后，可通过 Yaml + 表单形式 创建 Kafka&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;提供 Kafka manger 原生 UI 控制台&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;kafka-实例详情-1&quot;&gt;Kafka 实例详情&lt;/h4&gt;

&lt;p&gt;提供原生的实例管理界面，进行配置更新等
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334983034-f068a1ae-ccda-40b7-9b12-40e64bde24cc.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.56.16@2x.jpg&quot; /&gt;
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334441012-bb78b74e-4c95-4679-a25b-52ace6645dd0.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.47.02@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-实例下节点信息&quot;&gt;Kafka 实例下节点信息&lt;/h4&gt;

&lt;p&gt;直接跳转到 K8s 容器组界面查看
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334844501-fd53ecb8-9194-477e-ba99-690950d32ac2.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.53.57@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;topic-管理-2&quot;&gt;Topic 管理&lt;/h4&gt;

&lt;p&gt;在 Kafka manger 原生 UI 控制台内管理，默认启用了控制台公网访问能力
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661335035163-a487b30d-6938-4cfb-88a7-5ebbf08a4d02.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.57.01@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;实例资源监控&quot;&gt;实例资源监控&lt;/h4&gt;

&lt;p&gt;基础 CPU、内存、网络、存储监控
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334944904-59442083-e24e-4776-8e4b-3683c27e279e.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.55.38@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;kafka-性能监控&quot;&gt;Kafka 性能监控&lt;/h4&gt;

&lt;p&gt;接入 Grafana 提供一个 Dashboard 的，可以查看 Topics 的消息数，消费量，积压数
&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334965612-08293584-95c6-4220-b4e5-dcdfe2db44e1.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 17.55.57@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;调研对象操作视频录制&quot;&gt;调研对象操作视频录制&lt;/h2&gt;

&lt;p&gt;操作视频已上传到 OneDrive 共享空间&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661337926424-23d5d513-4080-4f36-af59-2bda413eb905.jpeg?x-oss-process=image/resize,w_960,m_lfit&quot; alt=&quot;CleanShot 2022-08-24 at 18.45.08@2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://yongyu2000hotmailcom.sharepoint.cn/:f:/s/ndx/EuCYqMaXhdlPh411YVnihRQBmCbGLQ4BvU1QW_2DX7_uUQ?e=18NyTR&quot;&gt;https://yongyu2000hotmailcom.sharepoint.cn/:f:/s/ndx/EuCYqMaXhdlPh411YVnihRQBmCbGLQ4BvU1QW_2DX7_uUQ?e=18NyTR&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;腾讯云只可以按月份订购，所以没有录制视频。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;选型确认&quot;&gt;选型确认&lt;/h2&gt;

&lt;p&gt;方案一：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;中间件实例 LCM + 三方 UI 管理工具&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;实现：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Kafka 实例 LCM&lt;/li&gt;
  &lt;li&gt;Kafka Manage UI (三方)&lt;/li&gt;
  &lt;li&gt;监控三件套 (Insight) [只需要做实例级别]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;方案比对：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;现有 Opeator 不带 Kafka Manger，需要自行处理&lt;/li&gt;
  &lt;li&gt;不需要关心 Topic LCM&lt;/li&gt;
  &lt;li&gt;不需要做业务监控&lt;/li&gt;
  &lt;li&gt;沿用现有的 DCE 中间件的设计思路&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;方案二：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;不增加三方 Kafka Manage UI&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;实现：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Kafka 实例 LCM&lt;/li&gt;
  &lt;li&gt;Topic LCM&lt;/li&gt;
  &lt;li&gt;监控三件套 (Insight) [需要做实例 + 业务监控]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;方案对比：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;现有 Operator 带有 Topic CR，可以用&lt;/li&gt;
  &lt;li&gt;需要做业务监控&lt;/li&gt;
  &lt;li&gt;需要做 Topic LCM&lt;/li&gt;
  &lt;li&gt;与其他中间件模块定义不一致（当前阶段）&lt;/li&gt;
&lt;/ul&gt;</content><author><name>船长</name><email>samzong.lu@gmail.com</email></author><category term="数据库" /><category term="Kafka" /><summary type="html">调研对象</summary></entry></feed>