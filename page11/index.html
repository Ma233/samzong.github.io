
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
  <head>
    <meta charset="utf-8">
	<link rel="manifest" href="/static/pwa/manifest.json">
	<title> Home | 船长的课记 </title>
    
		
    <meta name="author" content="船长">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#2196F3">
	<meta name="google-site-verification" content="puZt0ZyqB-t67BYdYAgLUyIPBeismG68J0dmEc01QeY" />

	
    <script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function () {
				navigator.serviceWorker
										.register('/sw.js')
										.then(function(registration) {
											console.log("Successfully registered service worker", registration.scope);
										}).catch(function(err) {
											console.log("Service worker registration failed: ", err);
										});
				//navigator.serviceWorker.ready always resolve
				navigator.serviceWorker.ready.then(function (registration) {
					console.log('Service worker successfully registered on scope', registration.scope);
				});
			});
		}
    </script>
	<script type="text/javascript" src="/assets/themes/evjekylltheme/jquery-3.6.0.slim.min.js"></script>

	<link href="/assets/themes/evjekylltheme/google-code-prettify/desert.css" type="text/css" rel="stylesheet" />

    <!-- Le styles -->
    <link href="/assets/themes/evjekylltheme/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/evjekylltheme/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">

    <!-- atom & rss feed -->
    <link href="" type="application/atom+xml" rel="alternate" title="Jekyll auto generate ATOM Feed">
    <link href="" type="application/atom+xml" rel="alternate" title="Site ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Site RSS Feed">
	<link rel="stylesheet" href="/assets/themes/evjekylltheme/font-awesome-4.4.0/css/font-awesome.min.css">
	<!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-W2LDG64');</script> -->
		<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8529425670069509"
						crossorigin="anonymous"></script> -->
	<!-- <script async src="https://cdn.splitbee.io/sb.js"></script> -->
  </head>

  <body>
	<!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LDG64"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    <div class="navbar navbar-default navbar-fixed-top">
				<div class="container">
          <div class="row mobilepadding">
					<!-- <a class="navbar-brand" href="/">船长的课记</a> -->
					<a class="navbar-brand" href="/">SAMZONG</a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse" id="mNavbar">
  					<ul class="nav navbar-nav">
  						
  						
  						


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/friends.html">Friends</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



						  <li class="dropdown">
							  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Other</a>
							  <ul class="dropdown-menu">
									<li><a href="/about.html">About</a></li>
									<li><a href="https://yuque.com/samzong/note" target="_blank">船长的课记</a></li>
									<li><a href="https://yuque.com/samzong/ap" target="_blank">果粉日记</a></li>
									<li><a href="https://yuque.com/samzong/code" target="_blank">Code Snippet</a></li>
									<li><a href="https://www.yuque.com/samzong/mcx" target="_blank">集</a></li>
									<li><a href="https://www.yuque.com/zooka" target="_blank">藏金阁</a></li>
								</ul>
						  </li>
  					</ul>
  					<form id="search-form" class="navbar-form navbar-right" role="search">
  						<div class="form-group">
  						<input type="text" class="form-control input-sm" placeholder="Search's Bad" id="query">
  						</div>
  					</form>
  					<div class="nav-icon">
  						<a href="/feed.xml"><i class="fa fa-rss fa-2x"></i></a>
  					</div>
          </div>
				</div>
      </div>
    </div>

    <div class="container">
			<div class="row mobilepadding">
        <div class="row">
					<div class="col-md-12">
						<div class="searchresult">
						</div>
						<div id="search-loader" class="img-wrap">
						</div>
					</div>
        </div>
				<meta itemprop="image" content="https://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com/uPic/telegram-cloud-photo-size-4-5971176114485308439-x.jpg">
<div class="row">
  <div class="col-xs-12 col-md-8">
    
    
    <h1><a class="title" href="/post/2017/03/HowTo-install-Zoomdata.html">HowTo install Zoomdata</a></h1>
    <div class="post_at_index">
      <p>Zoomdata是一个大数据可视化展示的工具，由ZoomData企业创建，是为数不多的同时支持移动端的数据分析公司，Zoomdata的可视化可将大数据流转化为触屏友好的，艺术感十足的三维形态，Zoomdata的定位是非ETL(传统的提取、转换和加载的数据处理过程)工具，Zoomdata支持多种数据源，包括社交媒体等，其中应用最主流是大数据平台的展示工具，并且Zoomdata对Cloudera Impala做了很好的支持，所以我们做了Zoomdata+Cloudera技术实施。[^1]</p>

<h4 id="系统要求"><strong>系统要求</strong></h4>
<p>Zoomdata最新版是v2.4，支持常见主流的操作系统，并且有非常友好的安装帮助，但是Zoomdata不支持安装在32位的操作系统之上
<br />
|biaoti|biaoti|baiiti|
|——|——|——|
|list|file|china|
|letian|zhong|hongkong|</p>

<p><br />
[^1]: 这是一个示意的文档</p>

      
    </div>
    <br/>
    <div>
      <cite>2017-03-06</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Zoomdata">Zoomdata</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/03/%E5%9B%9B%E9%98%B6%E9%AD%94%E6%96%B9%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E4%B9%8B%E5%A4%84%E7%90%86.html">四阶魔方特殊情况之处理</a></h1>
    <div class="post_at_index">
      <p>在还原高阶魔方(四阶及以上)时，采用的处理方法是，将魔方降级为三阶魔方，然后按照三阶魔方的技巧进行还原即可，但是在还原四阶魔方时会遇到2个不可能出现在三阶魔方的特殊情况，下面是针对这两个特殊情况的公式。</p>

<blockquote>
  <p>注意，本文不是四阶魔方的还原教程。</p>
</blockquote>

<h4 id="特殊情况顶层黄色无法形成十或l">特殊情况：顶层黄色无法形成“十”或“L”</h4>

<p>1.手势：黄色面朝上
2.右边两层旋转180’（这时应该黄色面有右面两层为白色）
3.后面一层旋转180’
4.上面一层旋转180’
5.左边两层靠近你身体旋转90’
6.上面一层旋转180’
7.右面两层靠近你身体旋转90’
8.上面一层旋转180’
9.右面两层远离你身体旋转90’
10.上面一层旋转180’
11.前面一层旋转180’
12.右面两层远离你身体旋转90’
13.前面一层旋转180’
14.左边两层远离你身体旋转90’
15.后面一层旋转180’
16.右边两层旋转180’</p>

<h4 id="特殊情况最后四对棱角只有两对还原">特殊情况：最后四对棱角只有两对还原</h4>

<p>1.黄色面已经还原的情况下，黄色面朝上
2.右面夹层旋转180’
3.上面一层旋转180‘
4.右面夹层旋转180’
5.上面两层旋转180’
6.右面夹层旋转180’
7.上面两层旋转180’</p>

      
    </div>
    <br/>
    <div>
      <cite>2017-03-04</cite> <i class="icon-tag"></i>
      <a href="/tags.html#随笔">随笔</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/02/MacTips-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E5%85%B3%E9%97%AD%E5%92%8C%E5%90%AF%E5%8A%A8AirPort.html">MacTips 使用命令关闭和启动AirPort</a></h1>
    <div class="post_at_index">
      <p>今天在给妹妹调试新的MacBookAir 13’时遇到一个问题，无法检测到她家的WiFi，一开始怀疑是不是无线路由器长时间未重启导致，所以重启了路由器，但是问题依然没有解决，于是我们将问题转向排查设备，因我们基本正好有iPad，iPhone，MacBook这些设备，发现唯独他的这个Macbook无法识别WiFi，后来在Google的帮助下，发现多个版本的Mac OS X都出现了类似的问题，可以通过重启AirPort解决问题，但是AirPort在System Preferences找不到选项，所以需要使用命令行来重启。</p>

<h5 id="查看网络接口"><strong>查看网络接口</strong></h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ifconfig
en0: flags=8863&lt;UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST&gt; mtu 1500
	ether 60:f8:1d:ad:85:76
	inet6 fe80::18a9:fa23:b02f:5d8a%en0 prefixlen 64 secured scopeid 0x4
	inet 192.168.199.200 netmask 0xffffff00 broadcast 192.168.199.255
	nd6 options=201&lt;PERFORMNUD,DAD&gt;
	media: autoselect
	status: active
</code></pre></div></div>
<h5 id="关闭airport"><strong>关闭AirPort</strong></h5>
<p>有时候设备的名称是en0、en1这样，所以，可以用过设备名称来重启airport，例如en0</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>networksetup -setairportpower en0 off
</code></pre></div></div>

<h5 id="查看状态"><strong>查看状态</strong></h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>networksetup -getairportpower en0
</code></pre></div></div>

<h5 id="关闭airport-1"><strong>关闭AirPort</strong></h5>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>networksetup -setairportpower en0 on
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2017-02-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Mac">Mac</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/02/HowTo-Install-NextCloud.html">HowTo Install NextCloud</a></h1>
    <div class="post_at_index">
      <p>随着最近一个云盘厂家不再提供个人服务，或者开始各种收费限速，自己存放在第三方云盘厂商的数据被盗取，数据的安全性和数据的稳定性都得不到保证，而且随着智能终端的普及，我也有一些更加高质量的图片文件需要大量储存，所以我想到了自建存储服务的方式，在甄别了OwnCloud，Seafiles和NextCloud，最后选择了NextCloud作为自己今后数据存储节点，NextCloud源自OwnCloud，但是近些年来OwnCloud的发展进度几乎停滞，多数开发者也转战NextCloud，当然NextCloud也继承了搭建简单，依赖于PHP环境的特性。</p>

<h4 id="运行环境"><strong>运行环境</strong></h4>

<ul>
  <li>阿里云ECS CentOS 6.x</li>
  <li>免费SSL证书(腾讯云申请)</li>
</ul>

<h4 id="搭建lnmp环境"><strong>搭建LNMP环境</strong></h4>

<h5 id="软件版本">软件版本</h5>

<ul>
  <li>PHP 5.6.30   <a href="https://samzong.me/php54-centos6/">安装教程</a></li>
  <li>MySQL 5.6.35  <a href="https://samzong.me/how-to-install-mysql-5-6-on-centos/">安装教程</a></li>
  <li>Nginx 1.10.2</li>
</ul>

<h5 id="基础环境安装">基础环境安装</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# yum update -y
[root@ultraera ~]# yum groupinstall -y "Base"
[root@ultraera ~]# yum groupinstall -y "Development tools"

# Install epel
[root@ultraera ~]# yum install -y epel-release

# Install remi
[root@ultraera ~]# yum install http://rpms.famillecollet.com/enterprise/remi-release-6.rpm

# Install mysql-community
[root@ultraera ~]# yum install http://repo.mysql.com/yum/mysql-5.6-community/el/6/x86_64/mysql-community-release-el6-7.noarch.rpm
</code></pre></div></div>

<h5 id="install-lnmp">Install LNMP</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Install MySQL
[root@ultraera ~]# yum --enablerepo=mysql-community install -y mysql-server mysql-libs mysql-devel
[root@ultraera ~]# service mysqld start
[root@ultraera ~]# mysql_secure_installation
[root@ultraera ~]# chkconfig mysqld on

# Install Nginx
[root@ultraera ~]# yum --enablerepo=epel install -y nginx
[root@ultraera ~]# service nginx start
[root@ultraera ~]# chkconfig nginx on

# Install PHP and php-fpm
[root@ultraera ~]# yum --enablerepo=remi-php56 install php php-fpm php-mysql php-gd php-xml php-redis php-libs php-devel php-zlib
[root@ultraera ~]# service php-fpm start
[root@ultraera ~]# chkconfig php-fpm on
[root@ultraera ~]# service nginx restart
</code></pre></div></div>

<h5 id="下载nextcloud">下载NextCloud</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# wget https://download.nextcloud.com/server/releases/nextcloud-11.0.1.tar.bz2
[root@ultraera ~]# tar xf nextcloud-11.0.1.tar.bz2
[root@ultraera ~]# mv nextcloud-11.0.1 /opt/nextcloud
</code></pre></div></div>

<h5 id="配置nginx和php-fpm">配置Nginx和php-fpm</h5>

<p>因为php-fpm默认运行的用户身份是apache，我们这里使用的环境是nginx，所有要修改php-fpm配置文件的用户和组，注意不要为了省事直接改为root，这在php-fpm中是不允许的</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# vim /etc/php-fpm.d/www.conf
user=nginx
group=nginx
[root@ultraera ~]# service php-fpm restart
</code></pre></div></div>

<p>因为NextCloud默认是以Apache的身份运行的，所以我们需要单独配置NextCloud的Nginx配置文件，以下配置文件，你可以直接拿去用，注意在文件中说明了，需要修改的地方：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# vim /etc/nginx/conf.d/nextcloud.conf
 upstream php-handler {
  	# 这里是你php-fpm的服务端口，默认是9000
    server 127.0.0.1:9000;
    #server unix:/var/run/php5-fpm.sock;
}

server {
  	# 你的域名
    listen pan.ultraera.org:80;
    server_name pan.ultraera.org;
    # enforce https
    return 301 https://$server_name$request_uri;
}

server {
    # 你的域名
    listen pan.ultraera.org:443 ssl;
    server_name pan.ultraera.org;

  	# 以下是你的ssl证书文件存放路径
    ssl_certificate /etc/nginx/ssl/1_pan.ultraera.org_bundle.crt;
    ssl_certificate_key /etc/nginx/ssl/2_pan.ultraera.org.key;

    # Add headers to serve security related headers
    # Before enabling Strict-Transport-Security headers please read into this
    # topic first.
    # add_header Strict-Transport-Security "max-age=15768000;
    # includeSubDomains; preload;";
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options "SAMEORIGIN";
    add_header X-XSS-Protection "1; mode=block";
    add_header X-Robots-Tag none;
    add_header X-Download-Options noopen;
    add_header X-Permitted-Cross-Domain-Policies none;
	add_header Strict-Transport-Security "max-age=15552000; includeSubdomains; ";

    # 设定你的NextCloud的根目录，请根据实际修改
    root /opt/nextcloud/;

    location = /robots.txt {
        allow all;
        log_not_found off;
        access_log off;
    }

    # The following 2 rules are only needed for the user_webfinger app.
    # Uncomment it if you're planning to use this app.
    #rewrite ^/.well-known/host-meta /public.php?service=host-meta last;
    #rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json
    # last;

    location = /.well-known/carddav {
      return 301 $scheme://$host/remote.php/dav;
    }
    location = /.well-known/caldav {
      return 301 $scheme://$host/remote.php/dav;
    }

    # set max upload size
    client_max_body_size 512M;
    fastcgi_buffers 64 4K;

    # Disable gzip to avoid the removal of the ETag header
    gzip off;

    # Uncomment if your server is build with the ngx_pagespeed module
    # This module is currently not supported.
    #pagespeed off;

    error_page 403 /core/templates/403.php;
    error_page 404 /core/templates/404.php;

    location / {
        rewrite ^ /index.php$uri;
   }

    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ {
        deny all;
    }
    location ~ ^/(?:\.|autotest|occ|issue|indie|db_|console) {
        deny all;
    }

    location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\.php(?:$|/) {
        include fastcgi_params;
        fastcgi_split_path_info ^(.+\.php)(/.*)$;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
        fastcgi_param HTTPS on;
        #Avoid sending the security headers twice
        fastcgi_param modHeadersAvailable true;
        fastcgi_param front_controller_active true;
        fastcgi_pass php-handler;
        fastcgi_intercept_errors on;
        fastcgi_request_buffering off;
    }

    location ~ ^/(?:updater|ocs-provider)(?:$|/) {
        try_files $uri/ =404;
        index index.php;
    }

    # Adding the cache control header for js and css files
    # Make sure it is BELOW the PHP block
    location ~* \.(?:css|js|woff|svg|gif)$ {
        try_files $uri /index.php$uri$is_args$args;
        add_header Cache-Control "public, max-age=7200";
        # Add headers to serve security related headers (It is intended to
        # have those duplicated to the ones above)
        # Before enabling Strict-Transport-Security headers please read into
        # this topic first.
        # add_header Strict-Transport-Security "max-age=15768000;
        #  includeSubDomains; preload;";
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options "SAMEORIGIN";
        add_header X-XSS-Protection "1; mode=block";
        add_header X-Robots-Tag none;
        add_header X-Download-Options noopen;
        add_header X-Permitted-Cross-Domain-Policies none;
        # Optional: Don't log access to assets
        access_log off;
    }

    location ~* \.(?:png|html|ttf|ico|jpg|jpeg)$ {
        try_files $uri /index.php$uri$is_args$args;
        # Optional: Don't log access to other assets
        access_log off;
    }
}
[root@ultraera ~]# service nginx restart
</code></pre></div></div>

<h5 id="文件权限调整">文件权限调整</h5>

<p>因为NextCloud运行是以nginx程序，注意修改目录所属用户和组为nginx</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# chown -R nginx:nginx /opt/nextcloud
</code></pre></div></div>

<h5 id="创建mysql数据库">创建MySQL数据库</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; CREATE DATABASE nextcloud CHARACTER SET UTF-8;
mysql&gt; GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'localhost' IDENTIFIED BY 'your_password';
mysql&gt; FLUSH PRIVILEGES;
</code></pre></div></div>

<h4 id="初始化nextcloud">初始化NextCloud</h4>

<p>在浏览器打开你在nginx中配置的域名，NextCloud初始化非常简单，设定一个管理员账户和密码，然后设定数据库即可，按照我们上一步针对MySQL的设定，你会非常清楚地知道你的数据库信息：</p>

<p><img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/jjkqh.png" alt="" /></p>

<p>登录之后的界面是这样：</p>

<p><img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/7n28v.png" alt="" /></p>

<p>你可以在登录之后，在你的右上角点击头像选择Admin进入管理界面查看和修改你的服务器设置，你还可以在浏览器上方看到你的服务器现有哪些问题，会有对应文档提醒你如何解决这些问题。</p>

<p><img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/blog/yx34e.png" alt="" /></p>

<h4 id="other"><strong>Other</strong></h4>

<h5 id="修改默认data目录">修改默认data目录</h5>

<p>在我们首次打开NextCloud网页时，需要我们设定datadir目录，这里有个默认目录在nextcloud项目包，这其实是不安全的，我们最后将目录路径修改为其他位置:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# mkdir /nextcloud_files/
[root@ultraera ~]# chown -R nginx:nginx /nextcloud_files/

# 修改datadirectory的路径
[root@ultraera ~]# vim /opt/nextcloud/config/config.php
datadirectory' =&gt; '/nextcloud/data
</code></pre></div></div>

<h5 id="无法登陆到个人用户界面">无法登陆到个人用户界面</h5>

<p>我在安装时碰到这个问题，折腾了很久才解决，因为我们是使用nginx程序，但是php-fpm默认用户身份为apache，所以<code>/var/lib/php/session</code>目录的所属用户和组都是apache，导致我们没有权限去写入session，所以无法登入系统，报错信息可以在NextCloud的log文件下看到：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# tail -n 1 /usr/nextcloud/data/nextcloud.log
{"reqId":"NNnIwMCCPDMQtzZW5Ndc","remoteAddr":"180.166.66.226","app":"PHP","message":"session_write_close(): Failed to write session data (files). Please verify that the current setting of session.save_path is correct (\/var\/lib\/php\/session) at \/usr\/nextcloud\/lib\/private\/Session\/Internal.php#104","level":3,"time":"2017-02-24T10:46:13+00:00","method":"POST","url":"\/index.php","user":"samzong","version":"11.0.0.10"}

# 修改/var/lib/php/的属组为nginx即可
[root@ultraera ~]# chgrp -R nginx /var/lib/php
</code></pre></div></div>

<h5 id="增加redis组件提高性能">增加redis组件，提高性能</h5>

<p>关于如何安装redis我在之前的文章中也有讲到，大家可以去看下 <a href="https://samzong.me/redis01/">安装教程</a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@ultraera ~]# yum --enablerepo=remi install -y redis

# 增加php的redis插件
[root@ultraera ~]# yum --enablerepo=remi-php56 install php-redis

# 配置文件增加redis
  'memcache.local' =&gt; '\\OC\\Memcache\\Redis',
  'memcache.locking' =&gt; '\\OC\\Memcache\\Redis',
  'redis' =&gt;
   array (
    'host' =&gt; 'localhost',
    'port' =&gt; 6379,
   )

# 重启令服务生效
[root@ultraera ~]# service php-fpm restart
[root@ultraera ~]# service nginx restart
</code></pre></div></div>

<p>我的NextCloud配置如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;?php
$CONFIG = array (
  'memcache.local' =&gt; '\\OC\\Memcache\\Redis',
  'memcache.locking' =&gt; '\\OC\\Memcache\\Redis',
  'redis' =&gt;
  array (
    'host' =&gt; 'localhost',
    'port' =&gt; 6379,
  ),
  'enable_previews' =&gt; false,
  'instanceid' =&gt; 'ockhup01dxbf',
  'passwordsalt' =&gt; 'TlJgWGrE0N7vOrRfZkOojwdYh/BixL',
  'secret' =&gt; '/IQh0LioZp5eYFQJhicY7n324Q80WQUYOzWL+8OcxcXVw3Ef',
  'trusted_domains' =&gt;
  array (
    0 =&gt; 'pan.ultraera.org',
  ),
  'datadirectory' =&gt; '/nextcloud',
  'overwrite.cli.url' =&gt; 'https://pan.ultraera.org',
  'dbtype' =&gt; 'mysql',
  'version' =&gt; '11.0.0.10',
  'dbname' =&gt; 'nextcloud',
  'dbhost' =&gt; 'localhost',
  'dbport' =&gt; '',
  'dbtableprefix' =&gt; 'oc_',
  'dbuser' =&gt; 'nextcloud',
  'dbpassword' =&gt; 'nextcloud',
  'logtimezone' =&gt; 'CST',
  'installed' =&gt; true,
  'mail_from_address' =&gt; 'luchuanjia',
  'mail_smtpmode' =&gt; 'php',
  'mail_domain' =&gt; 'msn.com',
);
</code></pre></div></div>

<h5 id="ssl证书">SSL证书</h5>

<p>现国内提供免费的SSL证书的服务商很多，作为个人站点，免费SSL证书是个挺不错的选择，我在之前nginx配置时将ssl的配置方式写在了配置文件中了，注意如果不启用ssl时，不要启用https的虚拟主机，当然你可以自己生成一个ssl证书来提供服务，但这样在别人访问你的网站时，会不提示不受信任的证书，具体如何获取的证书的方式，因各个厂家方式有些区别，这里就不赘述，可以联系对应的厂商的技术人员咨询。</p>

<h4 id="使用现状"><strong>使用现状</strong></h4>

<p>在将服务搭建完成之后，对于存储的文件加密，现在通过jobs，每日凌晨将文件推送到oss内，保存2天的数据，避免因为服务器宕机导致文件丢失；使用端，自己的电脑和手机，还有家人的手机，都安装了应用，后台自动将拍照图片等自动上传到云盘，使用起来目前很稳定，只是iOS应用是收费的，因为NextCloud源于OwnCloud，如果你之前购买了OwnCloud的App也可以直接使用，当然NextCloud也有很多其他功能，可以根据你的实际需求发掘。</p>

      
    </div>
    <br/>
    <div>
      <cite>2017-02-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#NextCloud">NextCloud</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/02/HowTo-Install-Redmine.html">HowTo Install Redmine</a></h1>
    <div class="post_at_index">
      <h4 id="runtime-environment">Runtime environment</h4>

<ul>
  <li>CentOS 6.x</li>
  <li>Redmine 3.3.2</li>
  <li>Ruby 2.2.6</li>
  <li>rails 4.2</li>
  <li>MySQL 5.1</li>
  <li>Nginx 1.10</li>
</ul>

<h4 id="安装rvm">安装rvm</h4>

<h5 id="导入公钥">导入公钥</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# curl -sSL https://rvm.io/mpapis.asc | gpg --import
</code></pre></div></div>

<h5 id="安装">安装</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# curl -L https://get.rvm.io | bash -s stable
</code></pre></div></div>

<h5 id="加载rvm环境并安装基础依赖包">加载rvm环境并安装基础依赖包</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# source /etc/profile.d/rvm.sh
[root@localhost ~]# rvm requirements
</code></pre></div></div>

<h4 id="安装ruby">安装ruby</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# rvm install 2.2.6
...
[root@localhost ~]# rvm use 2.2.6 --default
</code></pre></div></div>

<h4 id="安装rails">安装rails</h4>

<h5 id="更换gem源">更换gem源</h5>

<p>默认gem的源站点是https://rubygems.org 由于国内的网络原因导致无法连接，所以导致无法使用gem安装，这里换成国内淘宝的gem镜像站点</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# gem sources -l
*** CURRENT SOURCES ***

https://rubygems.org/
[root@localhost ~]# gem sources --remove https://rubygems.org/
[root@localhost ~]# gem sources -a https://ruby.taobao.org/
[root@localhost ~]# gem sources -l
*** CURRENT SOURCES ***

https://ruby.taobao.org/
</code></pre></div></div>

<h5 id="安装-1">安装</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# gem install rails -v=4.2
</code></pre></div></div>

<h4 id="安装mysql">安装MySQL</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# yum install -y mysql-server mysql-libs mysql-devel mysql
[root@localhost ~]# service mysqld start
[root@localhost ~]# mysql_secure_installation
</code></pre></div></div>

<h4 id="安装redmine">安装redmine</h4>

<h5 id="下载redmine-332">下载Redmine 3.3.2</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# wget http://www.redmine.org/releases/redmine-3.3.2.tar.gz
[root@localhost ~]# tar xf redmine-3.3.2.tar.gz
[root@localhost ~]# mv redmine-3.3.2 /opt
</code></pre></div></div>

<h5 id="安装管理ruby的包管理工具bundler">安装管理ruby的包管理工具bundler</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 注意，一定要在redmine目录下操作
[root@localhost ~]# cd /opt/redmine-3.3.2
[root@localhost redmine-3.3.2]# gem install bundler
</code></pre></div></div>

<h5 id="安装redmine运行所需要的依赖包">安装redmine运行所需要的依赖包</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# bundle install --without development test rmagick
</code></pre></div></div>

<h5 id="为rails生产cookies秘钥">为rails生产cookies秘钥</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# rake generate_secret_token
</code></pre></div></div>

<h5 id="创建redmine的数据库">创建redmine的数据库</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; create database redmine character set utf8;
mysql&gt; grant all privileges on redmine.* to 'redmine'@'localhost' identified by 'redmine_pass';
</code></pre></div></div>

<h5 id="修改redmine的databaseyml">修改redmine的database.yml</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# cp config/database.yml.example config/database.yml
[root@localhost redmine-3.3.2]# vim config/database.yml
production:
  adapter: mysql2
  database: redmine
  host: localhost
  username: redmine
  password: "redmine_pass"
  encoding: utf8
</code></pre></div></div>

<h5 id="创建数据库结构">创建数据库结构</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# RAILS_ENV=production bundle exec rake db:migrate
</code></pre></div></div>

<h5 id="生产缺省数据">生产缺省数据</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# RAILS_ENV=production bundle exec rake redmine:load_default_data
# 选择默认语言，之后可更改，初始为en
</code></pre></div></div>

<h5 id="测试是否安装成功">测试是否安装成功</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# bundle exec rails server webrick -e production -b 0.0.0.0
</code></pre></div></div>

<blockquote>
  <p>默认运行3000端口，默认管理员admin/admin</p>
</blockquote>

<h4 id="配置redmine在nginx上运行">配置Redmine在Nginx上运行</h4>

<p>Redmine常用的解决办法是使用passenger+nginx，但是Nginx不支持装载模块，所以需要重新编译安装Nginx，安装Nginx的Passenger有两种方式</p>

<ul>
  <li>采用Passenger提供的脚本进行安装，适合新环境</li>
  <li>手动编译安装Nginx增加Passenger模块，适合已存在Nginx环境</li>
</ul>

<h5 id="采用passenger提供脚本安装">采用Passenger提供脚本安装</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# gem install passenger
[root@localhost redmine-3.3.2]# passenger-install-nginx-module --auto --prefix=/opt/nginx
</code></pre></div></div>

<h5 id="采用重新编译nginx增加passenger模块">采用重新编译Nginx增加Passenger模块</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 获取passenger的安装路径
[root@localhost ~]# passenger-config --root
/usr/local/rvm/gems/ruby-2.2.6/gems/passenger-5.1.2

# 重新编译Nginx并添加模块
[root@localhost ~]# wget http://nginx.org/download/nginx-1.10.3.tar.gz
[root@localhost ~]# tar xf nginx-1.10.3.tar.gz
[root@localhost ~]# cd nginx-1.10.3
[root@localhost nginx-1.10.3]# ./configure ... -add-module=/usr/local/rvm/gems/ruby-2.2.6/gems/passenger-5.1.2
</code></pre></div></div>

<h5 id="增加http模块内以下配置">增加HTTP模块内以下配置</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passenger_root /usr/local/rvm/gems/ruby-2.2.6/gems/passenger-5.1.2
</code></pre></div></div>

<h5 id="配置nginxconf-修改server模块中location的配置">配置nginx.conf 修改server模块中location的配置</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ...
server	{
  # ...
  passenger_enabled on;
  location / {
    root /opt/redmine-3.3.2/public;
    index index.html index.htm;
  }
}
# ...
</code></pre></div></div>

<h5 id="启动nginx">启动Nginx</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost ~]# /root/nginx-1.10.3/sbin/nginx -c /root/nginx-1.10.3/conf/nginx.conf
</code></pre></div></div>

<h4 id="其他">其他</h4>

<p>到这里，所有的安装都完成了，过程中我遇到这些问题，你也注意下：</p>

<h5 id="71-could-not-find-gem-mysql2--0311-in-any-of-the-gem-sources-listed-in-your-gemfile">7.1 Could not find gem ‘mysql2 (~&gt; 0.3.11)’ in any of the gem sources listed in your Gemfile.</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@localhost redmine-3.3.2]# rm -f Gemfile.lock
[root@localhost redmine-3.3.2]# bundle install
</code></pre></div></div>

<h5 id="72-curl-tools">7.2 curl-tools</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum install libcurl-devel
</code></pre></div></div>


      
    </div>
    <br/>
    <div>
      <cite>2017-02-22</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Redmine">Redmine</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/02/HowTo-Upgrade-Your-Ghost-Version.html">HowTo Upgrade Your Ghost Version</a></h1>
    <div class="post_at_index">
      <p><br /></p>
<h4 id="1-下载最新版的ghost">1. 下载最新版的Ghost</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -LOk https://ghost.org/zip/ghost-latest.zip
</code></pre></div></div>

<h4 id="2-创建临时目录并解压ghost-latestzip到此">2. 创建临时目录，并解压ghost-latest.zip到此</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /usr/ghost-tmp
unzip ghost-latest.zip -d /usr/ghost-tmp
</code></pre></div></div>

<h4 id="3-进入到原ghost目录删除core">3. 进入到原ghost目录，删除core</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd  /usr/ghost
rm -rf core
</code></pre></div></div>

<h4 id="4进入到新版本的ghost临时目录">4.进入到新版本的ghost临时目录</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /usr/ghost-tmp
</code></pre></div></div>

<h4 id="5-拷贝所需文件到ghost升级目录">5. 拷贝所需文件到ghost升级目录</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp -R core /usr/ghost
cp index.js *.json /usr/ghost
</code></pre></div></div>

<h4 id="6-可选升级casperghost默认主题">6. (可选)升级casper，ghost默认主题</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cp -R content/themes/casper /usr/ghost/content/themes/
</code></pre></div></div>

<h4 id="7-切换回到ghost安装目录">7. 切换回到ghost安装目录</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /usr/ghost
</code></pre></div></div>

<h4 id="8-修改文件目录所有者和所属组为ghost">8. 修改文件目录所有者和所属组为ghost</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chown -R ghost:ghost ./*
</code></pre></div></div>

<h4 id="9-重新安装环境">9. 重新安装环境</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --production
</code></pre></div></div>

<h4 id="10-重启ghost">10. 重启Ghost</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pm2 restart ghost
</code></pre></div></div>


      
    </div>
    <br/>
    <div>
      <cite>2017-02-20</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Ghost">Ghost</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/02/HowTo-Automatic-Updates-CENTOS-RHEL-Using-YUM.html">HowTo Automatic Updates CENTOS/RHEL Using YUM</a></h1>
    <div class="post_at_index">
      <p>大家若工作遇到需要管理的Linux集群机器较多时，同时我们知道系统的安全更新补丁维护这些非常重要，无论你在安装时优化维护做的再好，随着时间的推移，如果不去更新的话，系统早晚都会不安全，所以定期更新我们的系统补丁是一个运维人员的基本工作内容</p>

<h3 id="install-yum-cron">Install yum-cron</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo yum install -y yum-cron
</code></pre></div></div>

<p>因为我的服务器系统多为CentOS 6，6的配置文件在<code>/etc/sysconfig/yum-cron</code>，你可以用以下命令查看配置文件位置：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rpm -ql yum-cron
/etc/cron.daily/0yum.cron
/etc/rc.d/init.d/yum-cron
/etc/sysconfig/yum-cron
/etc/yum/yum-daily.yum
/etc/yum/yum-weekly.yum
/usr/share/doc/yum-cron-3.2.29
/usr/share/doc/yum-cron-3.2.29/COPYING
/usr/share/man/man8/yum-cron.8.gz
</code></pre></div></div>

<h3 id="configure-etcsysconfigyum-cron">Configure “/etc/sysconfig/yum-cron”</h3>

<p>yum-cron的默认设置是会在每天自动检查和安装系统更新包，在安装完成后有些配置需要注意下：</p>

<h5 id="1-对于不需要更新的可以忽略掉">1. 对于不需要更新的可以忽略掉</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>YUM_PARAMETER="--exclude='kernel*' --exclude='php*'"
</code></pre></div></div>

<h5 id="2-设置管理员邮箱">2. 设置管理员邮箱</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAILTO="luchuanjia@msn.com"
</code></pre></div></div>

<h5 id="3-不自动安装仅检查通知管理邮箱">3. 不自动安装，仅检查，通知管理邮箱</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CHECK_ONLY=yes
</code></pre></div></div>

<h5 id="4-不自动安装仅下载">4. 不自动安装，仅下载</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DOWNLOAD_ONLY=yes
</code></pre></div></div>

<h3 id="automatic-starting-yum-cron">Automatic Starting yum-cron</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chkconfig yum-cron on
</code></pre></div></div>


      
    </div>
    <br/>
    <div>
      <cite>2017-02-19</cite> <i class="icon-tag"></i>
      <a href="/tags.html#CentOS">CentOS</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/02/MySQL-8-%E7%B4%A2%E5%BC%95%E5%88%9B%E5%BB%BA-%E5%88%A0%E9%99%A4%E5%92%8C%E6%9F%A5%E7%9C%8B.html">MySQL 索引创建、删除和查看</a></h1>
    <div class="post_at_index">
      <h4 id="1-索引的作用"><strong>1. 索引的作用</strong></h4>

<p>在索引列上，数据库利用各种各样的快速定位技术，能够大大的提高查询效率，特别是当数据量非常大和查询设计到多个表时，索引的利用能够将效率提高成千上万倍，当然要合理的利用索引。</p>

<h4 id="2-创建索引"><strong>2. 创建索引</strong></h4>

<p>​	在执行CREATE TABLE时可以创建索引，也可以在之后单独使用CREATE INDEX或ALTER TABLE来为表增加索引。</p>

<h6 id="21-alter-table">2.1 ALTER TABLE</h6>

<p>​	ALTER TABLE用来创建普通索引、UNIQUE索引或PRIMARY KEY索引。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ALTER TABLE tb_name ADD INDEX index_Name (column_list);
ALTER TABLE tb_name ADD UNIQUE (column_list);
ALTER TABLE tb_name ADD PRIMARY KEY (column_list);
</code></pre></div></div>

<p>​	tb_name 是要增加索引的表名，column_list 是要增加索引的列，多列用逗号隔开，index_Name 是可选，缺省为第一个索引列赋名称，ALTER TABLE允许在单个语句中更改多个表，因此可以也可以同时创建多个索引。</p>

<h6 id="22-create-index">2.2 CREATE INDEX</h6>

<p>​	CREATE INDEX 可对表增加普通索引或者UNIQUE索引。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE INDEX index_Name ON tb_name(column_list);
CREATE UNIQUE INDEX index_Name ON tb_name(column_list);
</code></pre></div></div>

<p>​	tb_name、index_Name和column_list具有ALTER TABLE语句中相同的含义，索引名称不可自定义，也不能创建PRIMARY KEY。</p>

<h4 id="3-索引类型"><strong>3. 索引类型</strong></h4>

<p>​	在创建索引时，可以规定索引能否包含重复的值，如果不包含，则索引应该为PRIMARY KEY或UNIQUE索引，对于单列唯一索引，这能保证单列不包含重复的值，对于多列唯一索引，保证多值的组合不重复。</p>

<p>​	PRIMAY KEY索引与UNIQUE索引非常类似，实际上PRIMAY KEY索引仅是一个具有名称PRIMAY的UNIQUE索引，这表示一个表只能包含一个PRIMAY KEY索引，因为一个表中不可能具有两个同名的索引。</p>

<h4 id="4-删除索引"><strong>4. 删除索引</strong></h4>

<p>​	可以使用ALTER TABLE或DROP INDEX语句来删除索引：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DROP INDEX index_Name On tb_name;
ALTER TABLE tb_Name DROP TABLE index_Name;
ALTER TABLE tb_Name DROP PRIMAY KEY;
</code></pre></div></div>

<p>​	第一条和第二条作用是一样的，删除tb_Name中index_Name索引；第三条仅适用于删除PRIMAY KEY时，因为一个只可能有一个PRIMAY KEY索引。</p>

<p>​	另外，如果在表中删除了某列，则索引会受到影响，对于多列组合的索引，如果删除其中某列，则该列也会在索引中删除，如果删除所有列，则该索引也会被删除。</p>

<h4 id="5-查看索引"><strong>5. 查看索引</strong></h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; show index from tb_name;
mysql&gt; show keys from tb_name;
</code></pre></div></div>

<ul>
  <li>Table : 表名</li>
  <li>Non_unique： 如果索引不能包含重复值为0，如果可以为1</li>
  <li>Key_name： 索引的名称</li>
  <li>Seq_in_index：索引中列的序号，从1开始</li>
  <li>Column_name： 列的名称</li>
  <li>Collation：列以什么方式存储在索引中，在MySQL中有值‘A’(升序)和NULL(无分类)</li>
  <li>Cardinality： 索引中唯一值的数量估计值，通过运行ANALYZE TABLE或者 myisamchk -a 可以更新，基数根据被存储的整数的统计数据来计数，所以，即使对于小型表，该值也没有必要是精确的，基数越大，当进行联合时，MySQL使用该索引的机会就越大。</li>
  <li>Sub_part： 如果列只是被部分编入，则为编入索引的字符数目，如果整列被编入索引，则为NULL</li>
  <li>Packed：关键字如何被压缩，没有压缩为NULL</li>
  <li>Null： 如果列含有NULL为YES，如果没有则为NO</li>
  <li>Index_type： 用过的索引方法，BTREE，FULLTEXT，HASH，RTREE</li>
  <li>Comment： 备注</li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2017-02-09</cite> <i class="icon-tag"></i>
      <a href="/tags.html#MySQL">MySQL</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/01/HowTo-Monitor-Tomcat-Head-Memory-for-Zabbix.html">HowTo Monitor Tomcat HeadMemory for Zabbix</a></h1>
    <div class="post_at_index">
      <p>最近项目上由于BUG问题导致Tomcat程序在运行过程中经常内存泄漏,而本身监控系统之中没有更好的检测到Tomcat堆空间(Head Memory)的使用情况导致报警频发，这篇文章主要讲述，如何在Zabbix之中调用jmx监控服务器上Tomcat堆空间的使用情况并增加对应报警功能。</p>

<blockquote>
  <p>测试环境: <br />
CentOS 6.8 <br />
Zabbix 2.4 <br />
Tomcat 7.0 <br /></p>
</blockquote>

<p>实验前提默认是各位已经安装Zabbix Server服务器，并且至少有一台Zabbix agent服务器正常监控。关于如何搭建Zabbix监控集群，会有专门文章描述。</p>

<h4 id="zabbix-java-gateway的工作机制">zabbix-java-gateway的工作机制</h4>
<ul>
  <li>首先我们需要配置我们的Tomcat服务启用监控服务，这个是默认不启用的</li>
  <li>之后需要在Zabbix的管理页面添加对应Tomcat服务器的jmx监控接口</li>
  <li>最后zabbix端会自动获取zabbix-java-gateway的数据并根据相应模板进行展
示</li>
  <li>工作流: [Zabbix-Server]–&gt;(port:10053 on zabbix server)–&gt; [zabbix-java-gateway] –(port:12345 on tomcatserver)–&gt; [JMX enabled]</li>
</ul>

<h4 id="1-install-zabbix-java-gateway-on-zabbix-server">1. Install zabbix-java-gateway on Zabbix Server</h4>
<p>因为我的zabbix是使用zabbix 2.4官方源安装，所以只需要用yum在安装即可:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@6 ~]# sudo  yum install -y zabbix-java-gateway
</code></pre></div></div>
<p>如果你没有官方源可能先安装该源，注意我的服务器zabbix版本是2.4 如果你是不同的版本，请到[<a href="http://repo.zabbix.com/zabbix/">这里</a>]查找对应版本。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 查看zabbix server版本
[root@6 ~]# zabbix_server --version
Zabbix server v2.4.8 (revision 59539) (20 April 2016)
Compilation time: May  4 2016 01:32:12
</code></pre></div></div>

<p>在使用yum安装zabbix-java-gateway源时,会自动关联安装openjdk，尽管这段程序没多大影响，如果你想保证系统JAVA环境不受到改变的话，可以在/etc/profile文件最后，增加如下内容:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># add follows to the end
export JAVA_HOME=/usr/java/default
export PATH=$PATH:$JAVA_HOME/bin
export CLASSPATH=.:$JAVA_HOME/jre/lib:$JAVA_HOME/lib:$JAVA_HOME/lib/tools.jar
</code></pre></div></div>

<h4 id="2-confiure-tomcat-host-with-enable-jmx">2. Confiure Tomcat host with enable jmx</h4>
<p>首先在$tomcatdir/bin/catalina.sh文件开头处增加如下：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/bin/sh

CATALINA_OPTS="-Dcom.sun.management.jmxremote \
-Dcom.sun.management.jmxremote.authenticate=false \
-Dcom.sun.management.jmxremote.ssl=false \
-Dcom.sun.management.jmxremote.port=12345"
</code></pre></div></div>
<p>然后,启动Tomcat，你会发现多了一个12345端口，这就是jmx的监听端口，请保证zabbix-java-gateway可以访问到这台服务器。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@6 ~]# /tomcat7/bin/startup.sh
Starting Tomcat7:
Using CATALINA_BASE:   /tomcat7
Using CATALINA_HOME:   /tomcat7
Using CATALINA_TMPDIR: /tomcat7/temp
Using JRE_HOME:        /usr
Using CLASSPATH:       /tomcat7/bin/bootstrap.jar:/tomcat7/bin/tomcat-juli.jar
Tomcat started.

[root@6 ~]# netstat -ntlp | grep 12345
tcp  0      0 :::12345   :::*     LISTEN      8793/java
[root@6 ~]#
</code></pre></div></div>
<hr />

<h4 id="fix-1---zabbix-agent与server存在复杂网络环境">==<em>fix 1</em> == : zabbix agent与server存在复杂网络环境</h4>

<p>这里疏忽了1个问题，如果您的zabbix server与agent端之间有防火墙规则，而按照我上面的所述只是增加了12345这个端口，那么很可能，您在/var/log/zabbix/zabbix_java_gateway.log 中会看到“No route to host”的报错，这是因为JMX不光开启了12345端口，还开启了另外两个随机端口，而在获取监控数据时会使用到其中一个，这就导致了无法通过固定的防火墙规则来开放该端口。其实有另外一个替代方式来使该监听端口固定下来——使用Tomcat提供的额外组件 catalina-jmx-remote.jar，这个组件是需要另外下载的：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 查看当前Tomcat版本.
[root@6 bin]# ./catalina.sh version
Using CATALINA_BASE:   /tomcat7
Using CATALINA_HOME:   /tomcat7
Using CATALINA_TMPDIR: /tomcat7/temp
Using JRE_HOME:        /usr
Using CLASSPATH:       /tomcat7/bin/bootstrap.jar:/tomcat7/bin/tomcat-juli.jar
Server version: Apache Tomcat/7.0.64
Server built:   Aug 19 2015 17:18:06 UTC
Server number:  7.0.64.0
OS Name:        Linux
OS Version:     2.6.32-642.11.1.el6.x86_64
Architecture:   amd64
JVM Version:    1.8.0_111-b15
JVM Vendor:     Oracle Corporation

# 下载 catalina-jmx-remote.jar # 请注意下载版本不要高于当前tomcat版本.
wget http://mirror.bit.edu.cn/apache/tomcat/tomcat-7/v7.0.57/bin/extras/catalina-jmx-remote.jar -O lib/catalina-jmx-remote.jar
</code></pre></div></div>

<p>增加如下内容，在conf/server.xml中：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Listener className="org.apache.catalina.mbeans.JmxRemoteLifecycleListener"
          rmiRegistryPortPlatform="12345" rmiServerPortPlatform="12346" /&gt;
</code></pre></div></div>

<p>因为我们已经在conf/server.xml定义了rmiRegistryPortPlatform，所以要将bin/catalina.sh中CATALINA_OPTS的com.sun.management.jmxremote.port去掉，否则会因为jmxremote.port配置有优先级更高而导致配置失效。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CATALINA_OPTS="-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false"
</code></pre></div></div>

<p>完成之后，重启tomcat这时会发现jmx默认端口已经固定为12345何12346，而server依然可以正常获取监控数据.</p>

<hr />

<h4 id="3-configure-zabbix-server">3. Configure Zabbix Server</h4>
<p>首先需要修改zabbix_server.conf启用zabbix-java-gateway，让zabbix可以检测到服务,修改如下:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>### Option: JavaGateway
 #       IP address (or hostname) of Zabbix Java gateway.
 #       Only required if Java pollers are started.
 #
 # Mandatory: no
 # Default:
JavaGateway=10.211.55.4 # 设置为你的zabbixsever IP

 ### Option: JavaGatewayPort
 #       Port that Zabbix Java gateway listens on.
 #
 # Mandatory: no
 # Range: 1024-32767
 # Default:
 JavaGatewayPort=10053 # 设置服务端监听接口

 ### Option: StartJavaPollers
 #       Number of pre-forked instances of Java pollers.
 #
 # Mandatory: no
 # Range: 0-1000
 # Default:
 StartJavaPollers=5 # 设置多线程启动
</code></pre></div></div>
<p>然后修改zabbix_java_gateway.conf 配置如下:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ### Option: zabbix.listenIP
 #       IP address to listen on.
 #
 # Mandatory: no
 # Default:
 LISTEN_IP="10.211.55.4" # 配置监听IP

 ### Option: zabbix.listenPort
 #       Port to listen on.
 #
 # Mandatory: no
 # Range: 1024-32767
 # Default:
 LISTEN_PORT=10053 # 配置监听端口

 ### Option: zabbix.pidFile
 #       Name of PID file.
 #       If omitted, Zabbix Java Gateway is started as a console application.
 #
 # Mandatory: no
 # Default:
 # PID_FILE=

 PID_FILE="/var/run/zabbix/zabbix_java.pid"

 ### Option: zabbix.startPollers
 #       Number of worker threads to start.
 #
 # Mandatory: no
 # Range: 1-1000
 # Default:
# 不能大于zabbix_server.conf的值，否则可能导致当连接Java gateway时没有多余的线程进行处理
 START_POLLERS=5
</code></pre></div></div>

<p>最后启动启动zabbix-java-gateway，并重启zabbix-server</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@6 ~]# service zabbix-java-gateway start
Starting zabbix java gateway:              [  OK  ]
[root@6 ~]# service zabbix-server restart
Stopping zabbix server:              [  OK  ]
Starting zabbix server:              [  OK  ]
</code></pre></div></div>

<p>我在尝试重启发现一问题，zabbix-java-gateway通过service命令管理stop不能删除pid文件导致服务无法启动，如果你也碰到，解决办法如下:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@6 zabbix]# vim /etc/rc.d/init.d/zabbix-java-gateway
# line 97, 注释修改为如下：
#       kill `cat $PID_FILE` &amp;&amp; rm $PID_FILE
        rm -f $PID_FILE
</code></pre></div></div>

<h4 id="4-adding-jmx-host-on-zabbix-web-consloe">4. Adding jmx host on Zabbix Web consloe</h4>
<p>首先，上传Template Tomcat Head Memory模板，这个我做了一个简单的模板，只针对了堆内存空间的监控，并针对使用率超过60%以及80%，不同的警报。需要的同学可以直接从我这里下载，然后在Configuration-Templates导入到zabbix模板库内。<br />
下载请点击:<a href="https://samzong.oss-cn-shenzhen.aliyuncs.com/2016/12/zbx_template_app_tomcat_head_memory.xml">Template App Tomcat Head Memory</a></p>

<p>然后，增加服务器的jmx监控<br />
<img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/2016/12/zabbix-jmx-settings.png" alt="" />
<br />
关联模板<br />
<img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/2016/12/zabbix-host-select-template.png" alt="" /></p>

<h4 id="5-view-the-head-memory-monitoring">5. View the Head Memory Monitoring.</h4>
<p><img src="https://samzong.oss-cn-shenzhen.aliyuncs.com/2016/12/zabbix-view-monitor.png" alt="" /></p>


      
    </div>
    <br/>
    <div>
      <cite>2017-01-18</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Zabbix">Zabbix</a>
      , 
      <a href="/tags.html#Tomcat">Tomcat</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2017/01/%E6%AF%8F%E6%97%A5%E5%A4%87%E4%BB%BDMySQL%E5%8D%95%E8%A1%A8%E6%95%B0%E6%8D%AE.html">每日备份MySQL单表数据</a></h1>
    <div class="post_at_index">
      <p>最近愈近年底，客户业务涉及对账操作，所以同事提出需求需要单独备份某张表数据，并且每日备份；思考之后解决办法如下：</p>

<ol>
  <li>mysqldump导出单张表的表结构及数据</li>
  <li>新增数据库，专做临时每日数据备份库</li>
  <li>导入该表数据到新增数据库内</li>
  <li>重命名导入的表名（预防计划任务下次导入时数据覆盖）</li>
  <li>编写脚本，添加Linux计划任务</li>
</ol>

<h4 id="1-mysqldump导出但张表的表结构及数据">1. mysqldump导出但张表的表结构及数据</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump -h dbServer -PdbServerPort -u db_user -p -d dbName tbName &gt; tbName.sql
</code></pre></div></div>

<h4 id="2-新增数据库专做临时每日数据备份库">2. 新增数据库，专做临时每日数据备份库</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># loginTo your DBserver
mysql&gt; create database bakdbName character set utf8;
</code></pre></div></div>

<h4 id="3-导入该表数据到新增数据库内">3. 导入该表数据到新增数据库内</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql -h dbServer -P dbServerPort -u db_user -p bakdbName &lt; tbName.sql
</code></pre></div></div>

<h4 id="4--重命名导入的表名">4 . 重命名导入的表名</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql -u db_user -p -e "rename table bakdbName.tbName to bakdbName.tbName_$DATE"
</code></pre></div></div>

<h4 id="5-编写脚本">5. 编写脚本</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@testServer01 ~]# cat /usr/local/bin/bakTable.sh
#!/bin/bash

#Create by SAMZONG

DATE=`date +%Y%m%d`
TMPDIR=/tmp/baksql

# modify your DB configure
DBSERVER1=localhost
DBSERVER1_PORT=3306
DBSERVER1_USER=root
DBSERVER1_PASSWORD=password
MASTER_DBNAME=zabbix
MASTER_TBNAME=users

DBSERVER2=localhost
DBSERVER2_PORT=3306
DBSERVER2_USER=root
DBSERVER2_PASSWORD=password
BAKDBNAME=z3

# creat tmp folder
if [ ! -d $TMPDIR ]; then
	mkdir $TMPDIR
fi

# dump tbName
mysqldump -h $DBSERVER1 -P $DBSERVER1_PORT -u $DBSERVER1_USER -p"$DBSERVER1_PASSWORD" -d $MASTER_DBNAME  $MASTER_TBNAME &gt; $TMPDIR/$MASTER_TBNAME.sql


# insert tbNAME to bakdbName
if [ $? -eq 0  ]; then
	mysql -h $DBSERVER2 -P $DBSERVER2_PORT -u $DBSERVER2_USER -p"$DBSERVER2_PASSWORD" $BAKDBNAME &lt; $TMPDIR/$MASTER_TBNAME.sql

	if [ $? -eq 0 ]; then
		# rename tbName
		mysql -h $DBSERVER2 -P $DBSERVER2_PORT -u $DBSERVER2_USER -p"$DBSERVER2_PASSWORD" -e "rename table "$BAKDBNAME"."$MASTER_TBNAME" to "$BAKDBNAME"."$MASTER_TBNAME"_"$DATE";"
	fi

fi
</code></pre></div></div>

<h4 id="6-添加到linux计划任务">6. 添加到Linux计划任务</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>00 00 * * * /usr/local/bin/bakTable.sh
</code></pre></div></div>


      
    </div>
    <br/>
    <div>
      <cite>2017-01-15</cite> <i class="icon-tag"></i>
      <a href="/tags.html#MySQL">MySQL</a>
      , 
      <a href="/tags.html#Shell">Shell</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    

    <!-- Pagination links -->
    <nav>
      <ul class="pagination hidden-xs">
        
        
        <li>
          <a href="/page10">&laquo; Previous</a>
        </li>
        
        

        
        <li>
          <a href="/">1</a>
        </li>
        

        
          
            
            <li>
              <a href="/page2">2</a>
            </li>
            
            <li>
              <a href="/page3">3</a>
            </li>
            
            <li>
              <a href="/page4">4</a>
            </li>
            
            <li>
              <a href="/page5">5</a>
            </li>
            
            <li class="disabled"><span>...</span></li>
            <li class="active"><a>11</a></li>
          
          <li class="disabled"><span>...</span></li>
          <li><a href="/page20">20</a></li>
        

        
        

        
        <li>
          <a href="/page12">Next &raquo;</a>
        </li>
        
      </ul>
    </nav>
  </div>
  <div class="col-xs-12 col-md-4">
		<!-- <div>
			<a class="twitter-timeline" data-width="390" data-height="640" data-theme="light" href="https://twitter.com/samzong_lu?ref_src=twsrc%5Etfw">Tweets by SAMZONG</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		</div> -->
    <div>
      <h2>传送门</h2>
      <ul>
        <li><a href="https://yuque.com/samzong">语雀-花园</a></li>
        <li><a href="https://github.com/samzong">Github</a></li>
      </ul>
    </div>
    <div class="categories">
      <h2>文章分类</h2>
      <ul class="tag_box">
        
        


  
     
    	
      <li><a href="/categories.html#Linux">
    		Linux <span>21</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#CentOS">
    		CentOS <span>14</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Tools">
    		Tools <span>4</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#VPN">
    		VPN <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#HTML">
    		HTML <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#数据库">
    		数据库 <span>19</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#MySQL">
    		MySQL <span>15</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Git">
    		Git <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#TortoiseGit">
    		TortoiseGit <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#MongoDB">
    		MongoDB <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#PHP">
    		PHP <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Mac">
    		Mac <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#SourceTree">
    		SourceTree <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#OpenSource">
    		OpenSource <span>11</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Piwik">
    		Piwik <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Python">
    		Python <span>45</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#云服务">
    		云服务 <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Azure">
    		Azure <span>4</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#虚拟化">
    		虚拟化 <span>7</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#OpenStack">
    		OpenStack <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#CloudStack">
    		CloudStack <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Zabbix">
    		Zabbix <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Tomcat">
    		Tomcat <span>5</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Redis">
    		Redis <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Docker">
    		Docker <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Shell">
    		Shell <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Blog">
    		Blog <span>4</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Ghost">
    		Ghost <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#PostgreSQL">
    		PostgreSQL <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#AWS">
    		AWS <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Aliyun">
    		Aliyun <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Redmine">
    		Redmine <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Bigdata">
    		Bigdata <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Windows">
    		Windows <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Jmeter">
    		Jmeter <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#随笔">
    		随笔 <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#SQL">
    		SQL <span>5</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Node">
    		Node <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#BI">
    		BI <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#NaN">
    		NaN <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#微服务">
    		微服务 <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#ClickHouse">
    		ClickHouse <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#闲聊">
    		闲聊 <span>3</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Hexo">
    		Hexo <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Javascript">
    		Javascript <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Telegram">
    		Telegram <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Metabase">
    		Metabase <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#学习">
    		学习 <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Github">
    		Github <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Gitlab">
    		Gitlab <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#云原生">
    		云原生 <span>1</span>
    	</a></li>
    
  



      </ul>
    </div>
    <div>
      <h2>最近文章</h2>
      <ul>
        
        <li>
          <a href="/post/2022/11/%E9%80%9A%E8%BF%87pipreqs%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BE%9D%E8%B5%96%E5%BA%93.html">通过pipreqs获取当前项目的依赖库</a>
          如果在开始开发一个项目时，未注意项目的依赖库隔离；可能会导致后续给项目打包时：


        </li>
        
        <li>
          <a href="/post/2022/11/python3-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86-strip()-split().html">python3 文本处理 strip() split()</a>
          
  strip() 删除字符串中的内容，删除后仍旧是str
  split() 分割字符串，根据特定的标识，分割后=list



        </li>
        
        <li>
          <a href="/post/2022/11/python3-str-%E5%8E%BB%E9%99%A4%E7%89%B9%E5%AE%9A%E5%86%85%E5%AE%B9.html">python3 str 去除特定内容</a>
          ```python
import string


        </li>
        
        <li>
          <a href="/post/2022/11/python3-setup.py-help-commands.html">python3 setup.py --help-commands</a>
          ```python
→ python3 setup.py –help-commands


        </li>
        
        <li>
          <a href="/post/2022/11/python-xlsxwriter-%E5%86%99%E5%85%A5excel.html">python xlsxwriter 写入excel</a>
          以下是使用的方法：


        </li>
        
      </ul>
    </div>
  </div>
</div>

			</div>

		</div>

    <footer>
      <div class="container">
        <div class="row mobilepadding">
          			<hr>
      &copy; 2022 船长. Powered by <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Theme Creator <a href="https://github.com/einverne" target="_blank" title="Ein Verne's GitHub Repos">Ein Verne</a> . Host on <a href="https://github.com/samzong/samzong.me" target="_blank" title="Samzong's GitHub Repos">Github</a> .
      <br><br>
      </div>
    </div>
    </footer>

    




	<script async type="text/javascript" src="/assets/themes/evjekylltheme/bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script async type="text/javascript" src="/assets/themes/evjekylltheme/webcore.js"></script>

 </body>
</html>

