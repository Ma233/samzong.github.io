<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">16 posts tagged with &quot;Tools&quot; | SAMZONG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/tags/tools/page/15"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="16 posts tagged with &quot;Tools&quot; | SAMZONG"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/tags/tools/page/15"><link data-rh="true" rel="alternate" href="https://samzong.me/tags/tools/page/15" hreflang="en"><link data-rh="true" rel="alternate" href="https://samzong.me/tags/tools/page/15" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="SAMZONG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="SAMZONG Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="SAMZONG JSON Feed"><link rel="stylesheet" href="/assets/css/styles.44c5c7e5.css">
<link rel="preload" href="/assets/js/runtime~main.fd979fbe.js" as="script">
<link rel="preload" href="/assets/js/main.fba3e1d4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>16 posts tagged with &quot;Tools&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022/09/18/shi-yong-canal-jin-xing-shu-ju-ku-zeng-liang-tong-bu">使用 canal 进行数据库增量同步</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-18T00:00:00.000Z" itemprop="datePublished">September 18, 2022</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1662586780206-7328e88e-c0e3-4e2f-ac6d-e072747efc4a.png?x-oss-process=image/resize,w_960,m_lfit" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h2><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20191104101735947.png?x-oss-process=image/resize,w_960,m_lfit" alt="image" class="img_ev3q"></p><p><strong>canal <!-- -->[<!-- -->kə&#x27;næl]</strong>，译意为水道/管道/沟渠，主要用途是基于 MySQL 数据库增量日志解析，提供增量数据订阅和消费</p><p>早期阿里巴巴因为杭州和美国双机房部署，存在跨机房同步的业务需求，实现方式主要是基于业务 trigger 获取增量变更。从 2010 年开始，业务逐步尝试数据库日志解析获取增量变更进行同步，由此衍生出了大量的数据库增量订阅和消费业务。</p><p>基于日志增量订阅和消费的业务包括</p><ul><li>数据库镜像</li><li>数据库实时备份</li><li>索引构建和实时维护 (拆分异构索引、倒排索引等)</li><li>业务 cache 刷新</li><li>带业务逻辑的增量数据处理</li></ul><p>当前的 canal 支持源端 MySQL 版本包括 5.1.x , 5.5.x , 5.6.x , 5.7.x , 8.0.x</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="工作原理">工作原理<a href="#工作原理" class="hash-link" aria-label="Direct link to 工作原理" title="Direct link to 工作原理">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-主备复制原理">MySQL 主备复制原理<a href="#mysql-主备复制原理" class="hash-link" aria-label="Direct link to MySQL 主备复制原理" title="Direct link to MySQL 主备复制原理">​</a></h3><ul><li>MySQL master 将数据变更写入二进制日志 ( binary log, 其中记录叫做二进制日志事件 binary log events，可以通过 show binlog events 进行查看)</li><li>MySQL slave 将 master 的 binary log events 拷贝到它的中继日志 (relay log)</li><li>MySQL slave 重放 relay log 中事件，将数据变更反映它自己的数据</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="canal-工作原理">canal 工作原理<a href="#canal-工作原理" class="hash-link" aria-label="Direct link to canal 工作原理" title="Direct link to canal 工作原理">​</a></h3><ul><li>canal 模拟 MySQL slave 的交互协议，伪装自己为 MySQL slave，向 MySQL master 发送 dump 协议</li><li>MySQL master 收到 dump 请求，开始推送 binary log 给 slave (即 canal )</li><li>canal 解析 binary log 对象 (原始为 byte 流)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="文档支持">文档支持<a href="#文档支持" class="hash-link" aria-label="Direct link to 文档支持" title="Direct link to 文档支持">​</a></h2><ul><li><a href="https://github.com/alibaba/canal/wiki/Home" target="_blank" rel="noopener noreferrer">Home</a></li><li><a href="https://github.com/alibaba/canal/wiki/Introduction" target="_blank" rel="noopener noreferrer">Introduction</a></li><li><a href="https://github.com/alibaba/canal/wiki/QuickStart" target="_blank" rel="noopener noreferrer">QuickStart</a><ul><li><a href="https://github.com/alibaba/canal/wiki/Docker-QuickStart" target="_blank" rel="noopener noreferrer">Docker QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Kafka-RocketMQ-QuickStart%22" target="_blank" rel="noopener noreferrer">Canal Kafka/RocketMQ QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/aliyun-RDS-QuickStart" target="_blank" rel="noopener noreferrer">Aliyun RDS for MySQL QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/Prometheus-QuickStart" target="_blank" rel="noopener noreferrer">Prometheus QuickStart</a></li></ul></li><li>Canal Admin<ul><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-QuickStart" target="_blank" rel="noopener noreferrer">Canal Admin QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-Guide" target="_blank" rel="noopener noreferrer">Canal Admin Guide</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-ServerGuide" target="_blank" rel="noopener noreferrer">Canal Admin ServerGuide</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-Docker" target="_blank" rel="noopener noreferrer">Canal Admin Docker</a></li></ul></li><li><a href="https://github.com/alibaba/canal/wiki/AdminGuide" target="_blank" rel="noopener noreferrer">AdminGuide</a></li><li><a href="https://github.com/alibaba/canal/wiki/ClientExample" target="_blank" rel="noopener noreferrer">ClientExample</a></li><li><a href="https://github.com/alibaba/canal/wiki/ClientAPI" target="_blank" rel="noopener noreferrer">ClientAPI</a></li><li><a href="https://github.com/alibaba/canal/wiki/Performance" target="_blank" rel="noopener noreferrer">Performance</a></li><li><a href="https://github.com/alibaba/canal/wiki/DevGuide" target="_blank" rel="noopener noreferrer">DevGuide</a></li><li><a href="https://github.com/alibaba/canal/wiki/BinlogChange%28mysql5.6%29" target="_blank" rel="noopener noreferrer">BinlogChange(MySQL 5.6)</a></li><li><a href="https://github.com/alibaba/canal/wiki/BinlogChange%28MariaDB%29" target="_blank" rel="noopener noreferrer">BinlogChange(MariaDB)</a></li><li><a href="https://github.com/alibaba/canal/wiki/TableMetaTSDB" target="_blank" rel="noopener noreferrer">TableMetaTSDB</a></li><li><a href="http://alibaba.github.com/canal/release.html" target="_blank" rel="noopener noreferrer">ReleaseNotes</a></li><li><a href="https://github.com/alibaba/canal/releases" target="_blank" rel="noopener noreferrer">Download</a></li><li><a href="https://github.com/alibaba/canal/wiki/FAQ" target="_blank" rel="noopener noreferrer">FAQ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="多语言">多语言<a href="#多语言" class="hash-link" aria-label="Direct link to 多语言" title="Direct link to 多语言">​</a></h2><p>canal 特别设计了 client-server 模式，交互协议使用 protobuf 3.0 , client 端可采用不同语言实现不同的消费逻辑，欢迎大家提交 pull request</p><ul><li>canal java 客户端：<a href="https://github.com/alibaba/canal/wiki/ClientExample" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/canal/wiki/ClientExample</a></li><li>canal c# 客户端：<a href="https://github.com/dotnetcore/CanalSharp" target="_blank" rel="noopener noreferrer">https://github.com/dotnetcore/CanalSharp</a></li><li>canal go 客户端：<a href="https://github.com/CanalClient/canal-go" target="_blank" rel="noopener noreferrer">https://github.com/CanalClient/canal-go</a></li><li>canal php 客户端：<a href="https://github.com/xingwenge/canal-php" target="_blank" rel="noopener noreferrer">https://github.com/xingwenge/canal-php</a></li><li>canal Python 客户端：<a href="https://github.com/haozi3156666/canal-python" target="_blank" rel="noopener noreferrer">https://github.com/haozi3156666/canal-python</a></li><li>canal Rust 客户端：<a href="https://github.com/laohanlinux/canal-rs" target="_blank" rel="noopener noreferrer">https://github.com/laohanlinux/canal-rs</a></li><li>canal Nodejs 客户端：<a href="https://github.com/marmot-z/canal-nodejs" target="_blank" rel="noopener noreferrer">https://github.com/marmot-z/canal-nodejs</a></li></ul><p>canal 作为 MySQL binlog 增量获取和解析工具，可将变更记录投递到 MQ 系统中，比如 Kafka/RocketMQ，可以借助于 MQ 的多语言能力</p><ul><li>参考文档：<a href="https://github.com/alibaba/canal/wiki/Canal-Kafka-RocketMQ-QuickStart" target="_blank" rel="noopener noreferrer">Canal Kafka/RocketMQ QuickStart</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="资料整理">资料整理<a href="#资料整理" class="hash-link" aria-label="Direct link to 资料整理" title="Direct link to 资料整理">​</a></h2><p>canal 的策略是模拟了 MySQL Slave 的行为，因此需要有 SELECT, REPLICATION SLAVE, REPLICATION CLIENT 的权限</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/tools">Tools</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/my-sql">MySQL</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tags/tools/page/14"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tags/tools/page/16"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.fd979fbe.js"></script>
<script src="/assets/js/main.fba3e1d4.js"></script>
</body>
</html>