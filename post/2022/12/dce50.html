
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
  <head>
    <meta charset="utf-8">
	<link rel="manifest" href="/static/pwa/manifest.json">
	<title> 保姆式安装 DCE5.0 | 船长的课记 </title>
    <meta name="description" content="">
    <meta itemprop="description" content="">
		
    <meta name="author" content="船长">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#2196F3">
	<meta name="google-site-verification" content="puZt0ZyqB-t67BYdYAgLUyIPBeismG68J0dmEc01QeY" />

	
    <script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function () {
				navigator.serviceWorker
										.register('/sw.js')
										.then(function(registration) {
											console.log("Successfully registered service worker", registration.scope);
										}).catch(function(err) {
											console.log("Service worker registration failed: ", err);
										});
				//navigator.serviceWorker.ready always resolve
				navigator.serviceWorker.ready.then(function (registration) {
					console.log('Service worker successfully registered on scope', registration.scope);
				});
			});
		}
    </script>
	<script type="text/javascript" src="/assets/themes/evjekylltheme/jquery-3.6.0.slim.min.js"></script>

	<link href="/assets/themes/evjekylltheme/google-code-prettify/desert.css" type="text/css" rel="stylesheet" />

    <!-- Le styles -->
    <link href="/assets/themes/evjekylltheme/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/evjekylltheme/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">

    <!-- atom & rss feed -->
    <link href="" type="application/atom+xml" rel="alternate" title="Jekyll auto generate ATOM Feed">
    <link href="" type="application/atom+xml" rel="alternate" title="Site ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Site RSS Feed">
	<link rel="stylesheet" href="/assets/themes/evjekylltheme/font-awesome-4.4.0/css/font-awesome.min.css">
	<!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-W2LDG64');</script> -->
		<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8529425670069509"
						crossorigin="anonymous"></script> -->
	<!-- <script async src="https://cdn.splitbee.io/sb.js"></script> -->
  </head>

  <body>
	<!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LDG64"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    <div class="navbar navbar-default navbar-fixed-top">
				<div class="container">
          <div class="row mobilepadding">
					<!-- <a class="navbar-brand" href="/">船长的课记</a> -->
					<a class="navbar-brand" href="/">SAMZONG</a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse" id="mNavbar">
  					<ul class="nav navbar-nav">
  						
  						
  						


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/friends.html">Friends</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



						  <li class="dropdown">
							  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Other</a>
							  <ul class="dropdown-menu">
									<li><a href="/about.html">About</a></li>
									<li><a href="https://yuque.com/samzong/note" target="_blank">船长的课记</a></li>
									<li><a href="https://yuque.com/samzong/ap" target="_blank">果粉日记</a></li>
									<li><a href="https://yuque.com/samzong/code" target="_blank">Code Snippet</a></li>
									<li><a href="https://www.yuque.com/samzong/mcx" target="_blank">集</a></li>
									<li><a href="https://www.yuque.com/zooka" target="_blank">藏金阁</a></li>
								</ul>
						  </li>
  					</ul>
  					<form id="search-form" class="navbar-form navbar-right" role="search">
  						<div class="form-group">
  						<input type="text" class="form-control input-sm" placeholder="Search's Bad" id="query">
  						</div>
  					</form>
  					<div class="nav-icon">
  						<a href="/feed.xml"><i class="fa fa-rss fa-2x"></i></a>
  					</div>
          </div>
				</div>
      </div>
    </div>

    <div class="container">
			<div class="row mobilepadding">
        <div class="row">
					<div class="col-md-12">
						<div class="searchresult">
						</div>
						<div id="search-loader" class="img-wrap">
						</div>
					</div>
        </div>
				
<div class="row" itemscope itemtype="http://schema.org/Article">
    <div class="col-xs-12 col-md-8">
        <div class="page-header" itemprop="name">
            <h1>保姆式安装 DCE5.0 
                <small></small>
                
            </h1>
        </div>
        <div class="post-meta">
            
            <span class="entry-date" itemprop="datePublished">Posted on 12/06/2022</span>
            
            
            <span class="entry-author" itemprop="author">by 船长</span>
            | <a class="revision-histroy" href="https://github.com/samzong/samzong.me/commits/main/_posts/2022-12-06-dce50.md"
                 target="_blank">View revision history</a>
        </div>
        <div class="post-content" itemprop="articleBody">
            <h2 id="前言">前言</h2>

<p>本文完成了从 0 到 1 的完成 DCE5.0 社区版的安装；其中包含社区版需要一个 K8s 集群、与一些安装细节和注意事项。</p>

<h3 id="集群规划">集群规划</h3>

<p>当前计划使用在 3 台 UCloud 的 VM，配置均为 8 核 16G。</p>

<table>
  <thead>
    <tr>
      <th>角色</th>
      <th>主机名</th>
      <th>操作系统</th>
      <th>IP</th>
      <th>配置</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>master</td>
      <td>master-k8s-com</td>
      <td>CentOS 7.9</td>
      <td>10.23.245.63</td>
      <td>8 核 16G 300GB</td>
    </tr>
    <tr>
      <td>node01</td>
      <td>node01-k8s-com</td>
      <td>CentOS 7.9</td>
      <td>10.23.104.173</td>
      <td>8 核 16G 300GB</td>
    </tr>
    <tr>
      <td>node02</td>
      <td>node02-k8s-com</td>
      <td>CentOS 7.9</td>
      <td>10.23.112.244</td>
      <td>8 核 16G 300GB</td>
    </tr>
  </tbody>
</table>

<h3 id="组件介绍">组件介绍</h3>

<ul>
  <li>Kubernetes  1.24.8</li>
  <li>CRI containerd</li>
  <li>CNI Calico</li>
  <li>StorageClass HwameiStior</li>
</ul>

<h3 id="节点系统优化">节点系统优化</h3>

<h4 id="配置主机名">配置主机名</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hostnamctl set-hostname master-k8s-com
</code></pre></div></div>

<h4 id="添加-etchosts-配置">添加 /etc/hosts 配置</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | tee /etc/hosts
10.23.245.63    master-k8s-com
10.23.104.173   node01-k8s-com
10.23.112.244   node02-k8s-com
</span><span class="no">EOF
</span></code></pre></div></div>

<h4 id="禁用-swap">禁用 Swap</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>swapoff <span class="nt">-a</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/ swap / s/^/#/'</span> /etc/fstab
</code></pre></div></div>

<h4 id="禁用-selinux">禁用 SElinux</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setenforce 0
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/^SELINUX=enforcing$/SELINUX=permissive/'</span> /etc/selinux/config
</code></pre></div></div>

<h4 id="关闭防火墙">关闭防火墙</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl stop firewalld
systemctl disable firewalld
</code></pre></div></div>

<h4 id="允许-iptables-检查桥接流量">允许 iptables 检查桥接流量</h4>

<p>加载 <code class="language-plaintext highlighter-rouge">br_netfilter</code> 模块</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | tee /etc/modules-load.d/kubernetes.conf
br_netfilter
</span><span class="no">EOF

</span><span class="c"># 加载模块</span>
modprobe br_netfilter
</code></pre></div></div>

<p>修改 <code class="language-plaintext highlighter-rouge">net.bridge.bridge-nf-call-iptables</code> 设置为 1</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | tee /etc/sysctl.d/kubernetes.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
</span><span class="no">EOF

</span><span class="c"># 刷新配置</span>
sysctl <span class="nt">--system</span>
</code></pre></div></div>

<h2 id="k8s-环境安装">K8s 环境安装</h2>

<h3 id="安装-docker">安装 Docker</h3>

<h4 id="安装-docker-的软件源">安装 Docker 的软件源</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> yum-utils
<span class="nb">sudo </span>yum-config-manager <span class="se">\</span>
    <span class="nt">--add-repo</span> <span class="se">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
</code></pre></div></div>

<h4 id="安装-docker-和-containerdio">安装 Docker 和 Containerd.io</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nt">-y</span> <span class="nb">install </span>docker-ce docker-ce-cli containerd.io
</code></pre></div></div>

<h4 id="修改-docker-的配置">修改 Docker 的配置</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo touch</span> /etc/docker/daemon.json

<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | tee /etc/docker/daemon.json
{
  "exec-opts": ["native.cgroupdriver=systemd"]
}
</span><span class="no">EOF
</span></code></pre></div></div>

<h4 id="修改-containerd-的配置">修改 Containerd 的配置</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 清理配置文件</span>
<span class="nb">sudo rm</span> <span class="nt">-f</span> /etc/containerd/config.toml

<span class="c"># 初始化配置</span>
<span class="nb">sudo </span>containerd config default | <span class="nb">sudo tee</span> /etc/containerd/config.toml

<span class="c"># 更新配置文件内容</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/SystemdCgroup\ =\ false/SystemdCgroup\ =\ true/'</span> /etc/containerd/config.toml
<span class="nb">sed</span> <span class="s1">'s/k8s.gcr.io\/pause/registry.cn-hangzhou.aliyuncs.com\/google_containers\/pause/g'</span> /etc/containerd/config.toml
</code></pre></div></div>

<h4 id="启动服务配置">启动服务配置</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl daemon-reload
<span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> docker
<span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> containerd
</code></pre></div></div>

<h4 id="检查配置成功">检查配置成功</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status docker containerd
<span class="nb">sudo </span>docker info
</code></pre></div></div>

<h3 id="安装-kubernetes-系统组件">安装 Kubernetes 系统组件</h3>

<h4 id="安装-kubernetes-软件源">安装 Kubernetes 软件源</h4>

<p>这里采用国内阿里云的源，具有加速效果</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | sudo tee /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
</span><span class="no">EOF
</span></code></pre></div></div>

<h4 id="安装-kubernetes-组件">安装 Kubernetes 组件</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span><span class="nv">K8sVersion</span><span class="o">=</span>1.24.8
<span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> kubelet-1.24.8-<span class="nv">$K8sVersion</span> kubeadm-1.24.8-<span class="nv">$K8sVersion</span>
<span class="nb">sudo </span>yum <span class="nb">install</span> <span class="nt">-y</span> kubectl-1.24.8-<span class="nv">$K8sVersion</span>  <span class="c"># 可以仅在 Master 节点安装</span>
</code></pre></div></div>

<h4 id="启动-kubelet系统服务">启动 <code class="language-plaintext highlighter-rouge">kubelet</code>系统服务</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl <span class="nb">enable</span> <span class="nt">--now</span> kubelet
</code></pre></div></div>

<p>此时启动后服务状态异常，会检查集群配置，因为没有配置会不断的重启，不影响后续操作</p>

<h3 id="初始化-master-节点">初始化 Master 节点</h3>

<p>注意规划集群主节点配置，初始化主节点时，规划网络配置</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 指定对应的 kubernetes 的版本，注意与上方配置保持一致</span>
<span class="nv">$ </span>sudokubeadm init <span class="nt">--kubernetes-version</span><span class="o">=</span>v1.24.8 <span class="se">\</span>
 <span class="nt">--image-repository</span><span class="o">=</span>registry.cn-hangzhou.aliyuncs.com/google_containers <span class="se">\</span>
 <span class="nt">--pod-network-cidr</span> 10.11.0.0/16 <span class="se">\</span>

<span class="o">[</span>init] Using Kubernetes version: v1.24.8
<span class="o">[</span>preflight] Running pre-flight checks
<span class="o">[</span>preflight] Pulling images required <span class="k">for </span>setting up a Kubernetes cluster
<span class="o">[</span>preflight] This might take a minute or two, depending on the speed of your internet connection
<span class="o">[</span>preflight] You can also perform this action <span class="k">in </span>beforehand using <span class="s1">'kubeadm config images pull'</span>
<span class="o">[</span>certs] Using certificateDir folder <span class="s2">"/etc/kubernetes/pki"</span>
<span class="o">[</span>certs] Generating <span class="s2">"ca"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"apiserver"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"apiserver-kubelet-client"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"front-proxy-ca"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"front-proxy-client"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"etcd/ca"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"etcd/server"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"etcd/peer"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"etcd/healthcheck-client"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"apiserver-etcd-client"</span> certificate and key
<span class="o">[</span>certs] Generating <span class="s2">"sa"</span> key and public key
<span class="o">[</span>kubeconfig] Using kubeconfig folder <span class="s2">"/etc/kubernetes"</span>
<span class="o">[</span>kubeconfig] Writing <span class="s2">"admin.conf"</span> kubeconfig file
<span class="o">[</span>kubeconfig] Writing <span class="s2">"kubelet.conf"</span> kubeconfig file
<span class="o">[</span>kubeconfig] Writing <span class="s2">"controller-manager.conf"</span> kubeconfig file
<span class="o">[</span>kubeconfig] Writing <span class="s2">"scheduler.conf"</span> kubeconfig file
<span class="o">[</span>kubelet-start] Writing kubelet environment file with flags to file <span class="s2">"/var/lib/kubelet/kubeadm-flags.env"</span>
<span class="o">[</span>kubelet-start] Writing kubelet configuration to file <span class="s2">"/var/lib/kubelet/config.yaml"</span>
<span class="o">[</span>kubelet-start] Starting the kubelet
<span class="o">[</span>control-plane] Using manifest folder <span class="s2">"/etc/kubernetes/manifests"</span>
<span class="o">[</span>control-plane] Creating static Pod manifest <span class="k">for</span> <span class="s2">"kube-apiserver"</span>
<span class="o">[</span>control-plane] Creating static Pod manifest <span class="k">for</span> <span class="s2">"kube-controller-manager"</span>
<span class="o">[</span>control-plane] Creating static Pod manifest <span class="k">for</span> <span class="s2">"kube-scheduler"</span>
<span class="o">[</span>etcd] Creating static Pod manifest <span class="k">for </span><span class="nb">local </span>etcd <span class="k">in</span> <span class="s2">"/etc/kubernetes/manifests"</span>
<span class="o">[</span>wait-control-plane] Waiting <span class="k">for </span>the kubelet to boot up the control plane as static Pods from directory <span class="s2">"/etc/kubernetes/manifests"</span><span class="nb">.</span> This can take up to 4m0s
<span class="o">[</span>apiclient] All control plane components are healthy after 6.503693 seconds
<span class="o">[</span>upload-config] Storing the configuration used <span class="k">in </span>ConfigMap <span class="s2">"kubeadm-config"</span> <span class="k">in </span>the <span class="s2">"kube-system"</span> Namespace
<span class="o">[</span>kubelet] Creating a ConfigMap <span class="s2">"kubelet-config-1.24.8"</span> <span class="k">in </span>namespace kube-system with the configuration <span class="k">for </span>the kubelets <span class="k">in </span>the cluster
NOTE: The <span class="s2">"kubelet-config-1.24.8"</span> naming of the kubelet ConfigMap is deprecated. Once the UnversionedKubeletConfigMap feature gate graduates to Beta the default name will become just <span class="s2">"kubelet-config"</span><span class="nb">.</span> Kubeadm upgrade will handle this transition transparently.
<span class="o">[</span>upload-certs] Skipping phase. Please see <span class="nt">--upload-certs</span>
<span class="o">[</span>mark-control-plane] Marking the node node1.k8s.com as control-plane by adding the labels: <span class="o">[</span>node-role.kubernetes.io/master<span class="o">(</span>deprecated<span class="o">)</span> node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers]
<span class="o">[</span>mark-control-plane] Marking the node node1.k8s.com as control-plane by adding the taints <span class="o">[</span>node-role.kubernetes.io/master:NoSchedule]
<span class="o">[</span>bootstrap-token] Using token: c0wcm5.0yu9szfktsxvurza
<span class="o">[</span>bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
<span class="o">[</span>bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes
<span class="o">[</span>bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs <span class="k">in </span>order <span class="k">for </span>nodes to get long term certificate credentials
<span class="o">[</span>bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
<span class="o">[</span>bootstrap-token] configured RBAC rules to allow certificate rotation <span class="k">for </span>all node client certificates <span class="k">in </span>the cluster
<span class="o">[</span>bootstrap-token] Creating the <span class="s2">"cluster-info"</span> ConfigMap <span class="k">in </span>the <span class="s2">"kube-public"</span> namespace
<span class="o">[</span>kubelet-finalize] Updating <span class="s2">"/etc/kubernetes/kubelet.conf"</span> to point to a rotatable kubelet client certificate and key
<span class="o">[</span>addons] Applied essential addon: CoreDNS
<span class="o">[</span>addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/.kube
  <span class="nb">sudo cp</span> <span class="nt">-i</span> /etc/kubernetes/admin.conf <span class="nv">$HOME</span>/.kube/config
  <span class="nb">sudo chown</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span>:<span class="si">$(</span><span class="nb">id</span> <span class="nt">-g</span><span class="si">)</span> <span class="nv">$HOME</span>/.kube/config

Alternatively, <span class="k">if </span>you are the root user, you can run:

  <span class="nb">export </span><span class="nv">KUBECONFIG</span><span class="o">=</span>/etc/kubernetes/admin.conf

You should now deploy a pod network to the cluster.
Run <span class="s2">"kubectl apply -f [podnetwork].yaml"</span> with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can <span class="nb">join </span>any number of worker nodes by running the following on each as root:

kubeadm <span class="nb">join </span>10.23.245.63:6443 <span class="nt">--token</span> djdsj2.sj23js90213j323 <span class="se">\</span>
        <span class="nt">--discovery-token-ca-cert-hash</span> sha256:ewuosdjk2390rjertw32p32j43p25a70298db818ajsdjk1293jk23k23201934h
</code></pre></div></div>

<h3 id="加入工作节点">加入工作节点</h3>

<p>注意需要确保完成了前面的步骤 节点系统优化、安装 Docker、安装 Kubernetes 系统组件，并且成功完成 初始化 Master 节点</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubeadm <span class="nb">join </span>10.23.245.63:6443 <span class="nt">--token</span> djdsj2.sj23js90213j323 <span class="se">\</span>
        <span class="nt">--discovery-token-ca-cert-hash</span> sha256:ewuosdjk2390rjertw32p32j43p25a70298db818ajsdjk1293jk23k23201934h
</code></pre></div></div>

<p>请分别添加 2 个工作节点：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get nodes
NAME               STATUS   ROLES           AGE   VERSION
master01-k8s-com   Ready    control-plane   9h    v1.24.8
node01-k8s-com     Ready    &lt;none&gt;          9h    v1.24.8
node02-k8s-com     Ready    &lt;none&gt;          9h    v1.24.8
</code></pre></div></div>

<h3 id="安装-cni-calico">安装 CNI Calico</h3>

<p>将下发 <code class="language-plaintext highlighter-rouge">yaml</code>保存为 <code class="language-plaintext highlighter-rouge">calico.yaml</code>，或者 到我的 Github 去下载。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="c1"># Source: calico/templates/calico-config.yaml</span>
<span class="c1"># This ConfigMap is used to configure a self-hosted Calico installation.</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">calico-config</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="c1"># Typha is disabled.</span>
  <span class="na">typha_service_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">none"</span>
  <span class="c1"># Configure the backend to use.</span>
  <span class="na">calico_backend</span><span class="pi">:</span> <span class="s2">"</span><span class="s">bird"</span>

  <span class="c1"># Configure the MTU to use for workload interfaces and tunnels.</span>
  <span class="c1"># By default, MTU is auto-detected, and explicitly setting this field should not be required.</span>
  <span class="c1"># You can override auto-detection by providing a non-zero value.</span>
  <span class="na">veth_mtu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0"</span>

  <span class="c1"># The CNI network configuration to install on each node. The special</span>
  <span class="c1"># values in this config will be automatically populated.</span>
  <span class="na">cni_network_config</span><span class="pi">:</span> <span class="pi">|-</span>
    <span class="s">{</span>
      <span class="s">"name": "k8s-pod-network",</span>
      <span class="s">"cniVersion": "0.3.1",</span>
      <span class="s">"plugins": [</span>
        <span class="s">{</span>
          <span class="s">"type": "calico",</span>
          <span class="s">"log_level": "info",</span>
          <span class="s">"log_file_path": "/var/log/calico/cni/cni.log",</span>
          <span class="s">"datastore_type": "kubernetes",</span>
          <span class="s">"nodename": "__KUBERNETES_NODE_NAME__",</span>
          <span class="s">"mtu": __CNI_MTU__,</span>
          <span class="s">"ipam": {</span>
              <span class="s">"type": "calico-ipam"</span>
          <span class="s">},</span>
          <span class="s">"policy": {</span>
              <span class="s">"type": "k8s"</span>
          <span class="s">},</span>
          <span class="s">"kubernetes": {</span>
              <span class="s">"kubeconfig": "__KUBECONFIG_FILEPATH__"</span>
          <span class="s">}</span>
        <span class="s">},</span>
        <span class="s">{</span>
          <span class="s">"type": "portmap",</span>
          <span class="s">"snat": true,</span>
          <span class="s">"capabilities": {"portMappings": true}</span>
        <span class="s">},</span>
        <span class="s">{</span>
          <span class="s">"type": "bandwidth",</span>
          <span class="s">"capabilities": {"bandwidth": true}</span>
        <span class="s">}</span>
      <span class="s">]</span>
    <span class="s">}</span>

<span class="s">---</span>
<span class="c1"># Source: calico/templates/kdd-crds.yaml</span>

<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiextensions.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CustomResourceDefinition</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">bgpconfigurations.crd.projectcalico.org</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">crd.projectcalico.org</span>
  <span class="na">names</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">BGPConfiguration</span>
    <span class="na">listKind</span><span class="pi">:</span> <span class="s">BGPConfigurationList</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s">bgpconfigurations</span>
    <span class="na">singular</span><span class="pi">:</span> <span class="s">bgpconfiguration</span>
  <span class="na">scope</span><span class="pi">:</span> <span class="s">Cluster</span>
  <span class="na">versions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">v1</span>
    <span class="na">schema</span><span class="pi">:</span>
      <span class="na">openAPIV3Schema</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">BGPConfiguration contains the configuration for any BGP routing.</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">apiVersion</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">APIVersion</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">versioned</span><span class="nv"> </span><span class="s">schema</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">representation</span>
              <span class="s">of</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">object.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">convert</span><span class="nv"> </span><span class="s">recognized</span><span class="nv"> </span><span class="s">schemas</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latest</span>
              <span class="s">internal</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">reject</span><span class="nv"> </span><span class="s">unrecognized</span><span class="nv"> </span><span class="s">values.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">kind</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Kind</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">representing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">REST</span><span class="nv"> </span><span class="s">resource</span><span class="nv"> </span><span class="s">this</span>
              <span class="s">object</span><span class="nv"> </span><span class="s">represents.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">infer</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">client</span>
              <span class="s">submits</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">Cannot</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">updated.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">CamelCase.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
          <span class="na">spec</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">BGPConfigurationSpec contains the values of the BGP configuration.</span>
            <span class="na">properties</span><span class="pi">:</span>
              <span class="na">asNumber</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ASNumber</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">AS</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">node.</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">64512]'</span>
                <span class="na">format</span><span class="pi">:</span> <span class="s">int32</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">communities</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Communities is a list of BGP community values and their</span>
                  <span class="s">arbitrary names for tagging routes.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">Community contains standard or large community value</span>
                    <span class="s">and its name.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">name</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">Name given to community value.</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">value</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">Value must be of format `aa:nn` or `aa:nn:mm`.</span>
                        <span class="s">For standard community use `aa:nn` format, where `aa` and</span>
                        <span class="s">`nn` are 16 bit number. For large community use `aa:nn:mm`</span>
                        <span class="s">format, where `aa`, `nn` and `mm` are 32 bit number. Where,</span>
                        <span class="s">`aa` is an AS Number, `nn` and `mm` are per-AS identifier.</span>
                      <span class="na">pattern</span><span class="pi">:</span> <span class="s">^(\d+):(\d+)$|^(\d+):(\d+):(\d+)$</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">listenPort</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ListenPort is the port where BGP protocol should listen.</span>
                  <span class="s">Defaults to </span><span class="m">179</span>
                <span class="na">maximum</span><span class="pi">:</span> <span class="m">65535</span>
                <span class="na">minimum</span><span class="pi">:</span> <span class="m">1</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">logSeverityScreen</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">LogSeverityScreen</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">severity</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">logs</span>
                  <span class="s">are</span><span class="nv"> </span><span class="s">sent</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">stdout.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">INFO]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">nodeToNodeMeshEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">NodeToNodeMeshEnabled</span><span class="nv"> </span><span class="s">sets</span><span class="nv"> </span><span class="s">whether</span><span class="nv"> </span><span class="s">full</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">node</span>
                  <span class="s">BGP</span><span class="nv"> </span><span class="s">mesh</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">enabled.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">prefixAdvertisements</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">PrefixAdvertisements contains per-prefix advertisement</span>
                  <span class="s">configuration.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">PrefixAdvertisement configures advertisement properties</span>
                    <span class="s">for the specified CIDR.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">cidr</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">CIDR for which properties should be advertised.</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">communities</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">Communities can be list of either community names</span>
                        <span class="s">already defined in `Specs.Communities` or community value</span>
                        <span class="s">of format `aa:nn` or `aa:nn:mm`. For standard community use</span>
                        <span class="s">`aa:nn` format, where `aa` and `nn` are 16 bit number. For</span>
                        <span class="s">large community use `aa:nn:mm` format, where `aa`, `nn` and</span>
                        <span class="s">`mm` are 32 bit number. Where,`aa` is an AS Number, `nn` and</span>
                        <span class="s">`mm` are per-AS identifier.</span>
                      <span class="na">items</span><span class="pi">:</span>
                        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">serviceClusterIPs</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceClusterIPs are the CIDR blocks from which service</span>
                  <span class="s">cluster IPs are allocated. If specified, Calico will advertise these</span>
                  <span class="s">blocks, as well as any cluster IPs within them.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceClusterIPBlock represents a single allowed ClusterIP</span>
                    <span class="s">CIDR block.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">cidr</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">serviceExternalIPs</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceExternalIPs are the CIDR blocks for Kubernetes</span>
                  <span class="s">Service External IPs. Kubernetes Service ExternalIPs will only be</span>
                  <span class="s">advertised if they are within one of these blocks.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceExternalIPBlock represents a single allowed</span>
                    <span class="s">External IP CIDR block.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">cidr</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">serviceLoadBalancerIPs</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceLoadBalancerIPs are the CIDR blocks for Kubernetes</span>
                  <span class="s">Service LoadBalancer IPs. Kubernetes Service status.LoadBalancer.Ingress</span>
                  <span class="s">IPs will only be advertised if they are within one of these blocks.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceLoadBalancerIPBlock represents a single allowed</span>
                    <span class="s">LoadBalancer IP CIDR block.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">cidr</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">served</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">acceptedNames</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">conditions</span><span class="pi">:</span> <span class="pi">[]</span>
  <span class="na">storedVersions</span><span class="pi">:</span> <span class="pi">[]</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiextensions.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CustomResourceDefinition</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">bgppeers.crd.projectcalico.org</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">crd.projectcalico.org</span>
  <span class="na">names</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">BGPPeer</span>
    <span class="na">listKind</span><span class="pi">:</span> <span class="s">BGPPeerList</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s">bgppeers</span>
    <span class="na">singular</span><span class="pi">:</span> <span class="s">bgppeer</span>
  <span class="na">scope</span><span class="pi">:</span> <span class="s">Cluster</span>
  <span class="na">versions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">v1</span>
    <span class="na">schema</span><span class="pi">:</span>
      <span class="na">openAPIV3Schema</span><span class="pi">:</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">apiVersion</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">APIVersion</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">versioned</span><span class="nv"> </span><span class="s">schema</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">representation</span>
              <span class="s">of</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">object.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">convert</span><span class="nv"> </span><span class="s">recognized</span><span class="nv"> </span><span class="s">schemas</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latest</span>
              <span class="s">internal</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">reject</span><span class="nv"> </span><span class="s">unrecognized</span><span class="nv"> </span><span class="s">values.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">kind</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Kind</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">representing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">REST</span><span class="nv"> </span><span class="s">resource</span><span class="nv"> </span><span class="s">this</span>
              <span class="s">object</span><span class="nv"> </span><span class="s">represents.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">infer</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">client</span>
              <span class="s">submits</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">Cannot</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">updated.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">CamelCase.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
          <span class="na">spec</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">BGPPeerSpec contains the specification for a BGPPeer resource.</span>
            <span class="na">properties</span><span class="pi">:</span>
              <span class="na">asNumber</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">The AS Number of the peer.</span>
                <span class="na">format</span><span class="pi">:</span> <span class="s">int32</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">keepOriginalNextHop</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Option to keep the original nexthop field when routes</span>
                  <span class="s">are sent to a BGP Peer. Setting "true" configures the selected BGP</span>
                  <span class="s">Peers node to use the "next hop keep;" instead of "next hop self;"(default)</span>
                  <span class="s">in the specific branch of the Node on "bird.cfg".</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">node</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">The node name identifying the Calico node instance that</span>
                  <span class="s">is targeted by this peer. If this is not set, and no nodeSelector</span>
                  <span class="s">is specified, then this BGP peer selects all nodes in the cluster.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">nodeSelector</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Selector for the nodes that should have this peering.  When</span>
                  <span class="s">this is set, the Node field must be empty.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">password</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Optional BGP password for the peerings generated by this</span>
                  <span class="s">BGPPeer resource.</span>
                <span class="na">properties</span><span class="pi">:</span>
                  <span class="na">secretKeyRef</span><span class="pi">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Selects a key of a secret in the node pod's namespace.</span>
                    <span class="na">properties</span><span class="pi">:</span>
                      <span class="na">key</span><span class="pi">:</span>
                        <span class="na">description</span><span class="pi">:</span> <span class="s">The key of the secret to select from.  Must be</span>
                          <span class="s">a valid secret key.</span>
                        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                      <span class="na">name</span><span class="pi">:</span>
                        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">referent.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names</span>
                          <span class="s">TODO:</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">useful</span><span class="nv"> </span><span class="s">fields.</span><span class="nv"> </span><span class="s">apiVersion,</span><span class="nv"> </span><span class="s">kind,</span><span class="nv"> </span><span class="s">uid?'</span>
                        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                      <span class="na">optional</span><span class="pi">:</span>
                        <span class="na">description</span><span class="pi">:</span> <span class="s">Specify whether the Secret or its key must be</span>
                          <span class="s">defined</span>
                        <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
                    <span class="na">required</span><span class="pi">:</span>
                    <span class="pi">-</span> <span class="s">key</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
              <span class="na">peerIP</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">The IP address of the peer followed by an optional port</span>
                  <span class="s">number to peer with. If port number is given, format should be `[&lt;IPv6&gt;]:port`</span>
                  <span class="s">or `&lt;IPv4&gt;:&lt;port&gt;` for IPv4. If optional port number is not set,</span>
                  <span class="s">and this peer IP and ASNumber belongs to a calico/node with ListenPort</span>
                  <span class="s">set in BGPConfiguration, then we use that port to peer.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">peerSelector</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Selector for the remote nodes to peer with.  When this</span>
                  <span class="s">is set, the PeerIP and ASNumber fields must be empty.  For each</span>
                  <span class="s">peering between the local node and selected remote nodes, we configure</span>
                  <span class="s">an IPv4 peering if both ends have NodeBGPSpec.IPv4Address specified,</span>
                  <span class="s">and an IPv6 peering if both ends have NodeBGPSpec.IPv6Address specified.  The</span>
                  <span class="s">remote AS number comes from the remote node's NodeBGPSpec.ASNumber,</span>
                  <span class="s">or the global default if that is not set.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">sourceAddress</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Specifies whether and how to configure a source address</span>
                  <span class="s">for the peerings generated by this BGPPeer resource.  Default value</span>
                  <span class="s">"UseNodeIP" means to configure the node IP as the source address.  "None"</span>
                  <span class="s">means not to configure a source address.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">served</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">acceptedNames</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">conditions</span><span class="pi">:</span> <span class="pi">[]</span>
  <span class="na">storedVersions</span><span class="pi">:</span> <span class="pi">[]</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiextensions.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CustomResourceDefinition</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">blockaffinities.crd.projectcalico.org</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">crd.projectcalico.org</span>
  <span class="na">names</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">BlockAffinity</span>
    <span class="na">listKind</span><span class="pi">:</span> <span class="s">BlockAffinityList</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s">blockaffinities</span>
    <span class="na">singular</span><span class="pi">:</span> <span class="s">blockaffinity</span>
  <span class="na">scope</span><span class="pi">:</span> <span class="s">Cluster</span>
  <span class="na">versions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">v1</span>
    <span class="na">schema</span><span class="pi">:</span>
      <span class="na">openAPIV3Schema</span><span class="pi">:</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">apiVersion</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">APIVersion</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">versioned</span><span class="nv"> </span><span class="s">schema</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">representation</span>
              <span class="s">of</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">object.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">convert</span><span class="nv"> </span><span class="s">recognized</span><span class="nv"> </span><span class="s">schemas</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latest</span>
              <span class="s">internal</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">reject</span><span class="nv"> </span><span class="s">unrecognized</span><span class="nv"> </span><span class="s">values.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">kind</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Kind</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">representing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">REST</span><span class="nv"> </span><span class="s">resource</span><span class="nv"> </span><span class="s">this</span>
              <span class="s">object</span><span class="nv"> </span><span class="s">represents.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">infer</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">client</span>
              <span class="s">submits</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">Cannot</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">updated.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">CamelCase.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
          <span class="na">spec</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">BlockAffinitySpec contains the specification for a BlockAffinity</span>
              <span class="s">resource.</span>
            <span class="na">properties</span><span class="pi">:</span>
              <span class="na">cidr</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">deleted</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Deleted indicates that this block affinity is being deleted.</span>
                  <span class="s">This field is a string for compatibility with older releases that</span>
                  <span class="s">mistakenly treat this field as a string.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">node</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">state</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
            <span class="na">required</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">cidr</span>
            <span class="pi">-</span> <span class="s">deleted</span>
            <span class="pi">-</span> <span class="s">node</span>
            <span class="pi">-</span> <span class="s">state</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">served</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">acceptedNames</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">conditions</span><span class="pi">:</span> <span class="pi">[]</span>
  <span class="na">storedVersions</span><span class="pi">:</span> <span class="pi">[]</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiextensions.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CustomResourceDefinition</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">clusterinformations.crd.projectcalico.org</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">crd.projectcalico.org</span>
  <span class="na">names</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterInformation</span>
    <span class="na">listKind</span><span class="pi">:</span> <span class="s">ClusterInformationList</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s">clusterinformations</span>
    <span class="na">singular</span><span class="pi">:</span> <span class="s">clusterinformation</span>
  <span class="na">scope</span><span class="pi">:</span> <span class="s">Cluster</span>
  <span class="na">versions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">v1</span>
    <span class="na">schema</span><span class="pi">:</span>
      <span class="na">openAPIV3Schema</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">ClusterInformation contains the cluster specific information.</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">apiVersion</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">APIVersion</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">versioned</span><span class="nv"> </span><span class="s">schema</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">representation</span>
              <span class="s">of</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">object.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">convert</span><span class="nv"> </span><span class="s">recognized</span><span class="nv"> </span><span class="s">schemas</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latest</span>
              <span class="s">internal</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">reject</span><span class="nv"> </span><span class="s">unrecognized</span><span class="nv"> </span><span class="s">values.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">kind</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Kind</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">representing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">REST</span><span class="nv"> </span><span class="s">resource</span><span class="nv"> </span><span class="s">this</span>
              <span class="s">object</span><span class="nv"> </span><span class="s">represents.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">infer</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">client</span>
              <span class="s">submits</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">Cannot</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">updated.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">CamelCase.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
          <span class="na">spec</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">ClusterInformationSpec contains the values of describing</span>
              <span class="s">the cluster.</span>
            <span class="na">properties</span><span class="pi">:</span>
              <span class="na">calicoVersion</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">CalicoVersion is the version of Calico that the cluster</span>
                  <span class="s">is running</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">clusterGUID</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ClusterGUID is the GUID of the cluster</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">clusterType</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ClusterType describes the type of the cluster</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">datastoreReady</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">DatastoreReady is used during significant datastore migrations</span>
                  <span class="s">to signal to components such as Felix that it should wait before</span>
                  <span class="s">accessing the datastore.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">variant</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Variant declares which variant of Calico should be active.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">served</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">acceptedNames</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">conditions</span><span class="pi">:</span> <span class="pi">[]</span>
  <span class="na">storedVersions</span><span class="pi">:</span> <span class="pi">[]</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiextensions.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CustomResourceDefinition</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">felixconfigurations.crd.projectcalico.org</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">crd.projectcalico.org</span>
  <span class="na">names</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">FelixConfiguration</span>
    <span class="na">listKind</span><span class="pi">:</span> <span class="s">FelixConfigurationList</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s">felixconfigurations</span>
    <span class="na">singular</span><span class="pi">:</span> <span class="s">felixconfiguration</span>
  <span class="na">scope</span><span class="pi">:</span> <span class="s">Cluster</span>
  <span class="na">versions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">v1</span>
    <span class="na">schema</span><span class="pi">:</span>
      <span class="na">openAPIV3Schema</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Felix Configuration contains the configuration for Felix.</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">apiVersion</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">APIVersion</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">versioned</span><span class="nv"> </span><span class="s">schema</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">representation</span>
              <span class="s">of</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">object.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">convert</span><span class="nv"> </span><span class="s">recognized</span><span class="nv"> </span><span class="s">schemas</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latest</span>
              <span class="s">internal</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">reject</span><span class="nv"> </span><span class="s">unrecognized</span><span class="nv"> </span><span class="s">values.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">kind</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Kind</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">representing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">REST</span><span class="nv"> </span><span class="s">resource</span><span class="nv"> </span><span class="s">this</span>
              <span class="s">object</span><span class="nv"> </span><span class="s">represents.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">infer</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">client</span>
              <span class="s">submits</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">Cannot</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">updated.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">CamelCase.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
          <span class="na">spec</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">FelixConfigurationSpec contains the values of the Felix configuration.</span>
            <span class="na">properties</span><span class="pi">:</span>
              <span class="na">allowIPIPPacketsFromWorkloads</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AllowIPIPPacketsFromWorkloads</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">whether</span><span class="nv"> </span><span class="s">Felix</span>
                  <span class="s">will</span><span class="nv"> </span><span class="s">add</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">drop</span><span class="nv"> </span><span class="s">IPIP</span><span class="nv"> </span><span class="s">encapsulated</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">workloads</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">allowVXLANPacketsFromWorkloads</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">AllowVXLANPacketsFromWorkloads</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">whether</span><span class="nv"> </span><span class="s">Felix</span>
                  <span class="s">will</span><span class="nv"> </span><span class="s">add</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">drop</span><span class="nv"> </span><span class="s">VXLAN</span><span class="nv"> </span><span class="s">encapsulated</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">workloads</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">awsSrcDstCheck</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Set</span><span class="nv"> </span><span class="s">source-destination-check</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">AWS</span><span class="nv"> </span><span class="s">EC2</span><span class="nv"> </span><span class="s">instances.</span><span class="nv"> </span><span class="s">Accepted</span>
                  <span class="s">value</span><span class="nv"> </span><span class="s">must</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">one</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">"DoNothing",</span><span class="nv"> </span><span class="s">"Enabled"</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">"Disabled".</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">DoNothing]'</span>
                <span class="na">enum</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">DoNothing</span>
                <span class="pi">-</span> <span class="s">Enable</span>
                <span class="pi">-</span> <span class="s">Disable</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">bpfConnectTimeLoadBalancingEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFConnectTimeLoadBalancingEnabled</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">mode,</span>
                  <span class="s">controls</span><span class="nv"> </span><span class="s">whether</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">installs</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">connection-time</span><span class="nv"> </span><span class="s">load</span><span class="nv"> </span><span class="s">balancer.</span><span class="nv">  </span><span class="s">The</span>
                  <span class="s">connect-time</span><span class="nv"> </span><span class="s">load</span><span class="nv"> </span><span class="s">balancer</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">required</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">able</span><span class="nv"> </span><span class="s">to</span>
                  <span class="s">reach</span><span class="nv"> </span><span class="s">Kubernetes</span><span class="nv"> </span><span class="s">services</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">improves</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">performance</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">pod-to-service</span>
                  <span class="s">connections.</span><span class="nv">  </span><span class="s">The</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">reason</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">debugging</span><span class="nv"> </span><span class="s">purposes.</span><span class="nv">  </span><span class="s">[Default:</span>
                  <span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">bpfDataIfacePattern</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">BPFDataIfacePattern is a regular expression that controls</span>
                  <span class="s">which interfaces Felix should attach BPF programs to in order to</span>
                  <span class="s">catch traffic to/from the network.  This needs to match the interfaces</span>
                  <span class="s">that Calico workload traffic flows over as well as any interfaces</span>
                  <span class="s">that handle incoming traffic to nodeports and services from outside</span>
                  <span class="s">the cluster.  It should not match the workload interfaces (usually</span>
                  <span class="s">named cali...).</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">bpfDisableUnprivileged</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFDisableUnprivileged,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">enabled,</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">sets</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">kernel.unprivileged_bpf_disabled</span>
                  <span class="s">sysctl</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">unprivileged</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">BPF.</span><span class="nv">  </span><span class="s">This</span><span class="nv"> </span><span class="s">ensures</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">unprivileged</span>
                  <span class="s">users</span><span class="nv"> </span><span class="s">cannot</span><span class="nv"> </span><span class="s">access</span><span class="nv"> </span><span class="s">Calico'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">maps</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">cannot</span><span class="nv"> </span><span class="s">insert</span><span class="nv"> </span><span class="s">their</span><span class="nv"> </span><span class="s">own</span>
                  <span class="s">BPF</span><span class="nv"> </span><span class="s">programs</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">interfere</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">Calico'</span><span class="s1">'</span><span class="s">s.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">bpfEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFEnabled,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">enabled</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">dataplane.</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">bpfExtToServiceConnmark</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFExtToServiceConnmark</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">mode,</span><span class="nv"> </span><span class="s">control</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">32bit</span>
                  <span class="s">mark</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">connections</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">external</span><span class="nv"> </span><span class="s">client</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">local</span>
                  <span class="s">service.</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">mark</span><span class="nv"> </span><span class="s">allows</span><span class="nv"> </span><span class="s">us</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">control</span><span class="nv"> </span><span class="s">how</span><span class="nv"> </span><span class="s">packets</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">connection</span>
                  <span class="s">are</span><span class="nv"> </span><span class="s">routed</span><span class="nv"> </span><span class="s">within</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">how</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">routing</span><span class="nv"> </span><span class="s">intepreted</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">RPF</span>
                  <span class="s">check.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">0]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">bpfExternalServiceMode</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFExternalServiceMode</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">mode,</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">how</span><span class="nv"> </span><span class="s">connections</span>
                  <span class="s">from</span><span class="nv"> </span><span class="s">outside</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">services</span><span class="nv"> </span><span class="s">(node</span><span class="nv"> </span><span class="s">ports</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">IPs)</span>
                  <span class="s">are</span><span class="nv"> </span><span class="s">forwarded</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">remote</span><span class="nv"> </span><span class="s">workloads.</span><span class="nv">  </span><span class="s">If</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">"Tunnel"</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">both</span>
                  <span class="s">request</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">response</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">tunneled</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">remote</span><span class="nv"> </span><span class="s">node.</span><span class="nv">  </span><span class="s">If</span>
                  <span class="s">set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">"DSR",</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">request</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">tunneled</span><span class="nv"> </span><span class="s">but</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">response</span><span class="nv"> </span><span class="s">traffic</span>
                  <span class="s">is</span><span class="nv"> </span><span class="s">sent</span><span class="nv"> </span><span class="s">directly</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">remote</span><span class="nv"> </span><span class="s">node.</span><span class="nv">  </span><span class="s">In</span><span class="nv"> </span><span class="s">"DSR"</span><span class="nv"> </span><span class="s">mode,</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">remote</span>
                  <span class="s">node</span><span class="nv"> </span><span class="s">appears</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">IP</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">ingress</span><span class="nv"> </span><span class="s">node;</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">requires</span><span class="nv"> </span><span class="s">a</span>
                  <span class="s">permissive</span><span class="nv"> </span><span class="s">L2</span><span class="nv"> </span><span class="s">network.</span><span class="nv">  </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">Tunnel]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">bpfKubeProxyEndpointSlicesEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">BPFKubeProxyEndpointSlicesEnabled in BPF mode, controls</span>
                  <span class="s">whether Felix's embedded kube-proxy accepts EndpointSlices or not.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">bpfKubeProxyIptablesCleanupEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFKubeProxyIptablesCleanupEnabled,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">enabled</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">BPF</span>
                  <span class="s">mode,</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">proactively</span><span class="nv"> </span><span class="s">clean</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">upstream</span><span class="nv"> </span><span class="s">Kubernetes</span><span class="nv"> </span><span class="s">kube-proxy'</span><span class="s1">'</span><span class="s">s</span>
                  <span class="s">iptables</span><span class="nv"> </span><span class="s">chains.</span><span class="nv">  </span><span class="s">Should</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">enabled</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">kube-proxy</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">running.</span><span class="nv">  </span><span class="s">[Default:</span>
                  <span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">bpfKubeProxyMinSyncPeriod</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFKubeProxyMinSyncPeriod,</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">mode,</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span>
                  <span class="s">minimum</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">between</span><span class="nv"> </span><span class="s">updates</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">dataplane</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">Felix'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">embedded</span>
                  <span class="s">kube-proxy.</span><span class="nv">  </span><span class="s">Lower</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">give</span><span class="nv"> </span><span class="s">reduced</span><span class="nv"> </span><span class="s">set-up</span><span class="nv"> </span><span class="s">latency.</span><span class="nv">  </span><span class="s">Higher</span><span class="nv"> </span><span class="s">values</span>
                  <span class="s">reduce</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">CPU</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">batching</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">work.</span><span class="nv">  </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">1s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">bpfLogLevel</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">BPFLogLevel</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">level</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">programs</span>
                  <span class="s">when</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">dataplane</span><span class="nv"> </span><span class="s">mode.</span><span class="nv">  </span><span class="s">One</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">"Off",</span><span class="nv"> </span><span class="s">"Info",</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">"Debug".</span><span class="nv">  </span><span class="s">The</span>
                  <span class="s">logs</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">emitted</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">trace</span><span class="nv"> </span><span class="s">pipe,</span><span class="nv"> </span><span class="s">accessible</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">command</span>
                  <span class="s">`tc</span><span class="nv"> </span><span class="s">exec</span><span class="nv"> </span><span class="s">bpf</span><span class="nv"> </span><span class="s">debug`.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">Off].'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">chainInsertMode</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ChainInsertMode</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">whether</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">hooks</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">kernel'</span><span class="s1">'</span><span class="s">s</span>
                  <span class="s">top-level</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">chains</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">inserting</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">top</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span>
                  <span class="s">chain</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">appending</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">bottom.</span><span class="nv"> </span><span class="s">insert</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">safe</span><span class="nv"> </span><span class="s">default</span>
                  <span class="s">since</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">prevents</span><span class="nv"> </span><span class="s">Calico'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">being</span><span class="nv"> </span><span class="s">bypassed.</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">switch</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">append</span><span class="nv"> </span><span class="s">mode,</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">sure</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">chains</span><span class="nv"> </span><span class="s">signal</span>
                  <span class="s">acceptance</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">falling</span><span class="nv"> </span><span class="s">through</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Calico</span><span class="nv"> </span><span class="s">rules,</span><span class="nv"> </span><span class="s">otherwise</span><span class="nv"> </span><span class="s">the</span>
                  <span class="s">Calico</span><span class="nv"> </span><span class="s">policy</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">bypassed.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">insert]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">dataplaneDriver</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">debugDisableLogDropping</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">debugMemoryProfilePath</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">debugSimulateCalcGraphHangAfter</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">debugSimulateDataplaneHangAfter</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">defaultEndpointToHostAction</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">DefaultEndpointToHostAction</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">what</span><span class="nv"> </span><span class="s">happens</span><span class="nv"> </span><span class="s">to</span>
                  <span class="s">traffic</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">goes</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">workload</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">itself</span><span class="nv"> </span><span class="s">(after</span>
                  <span class="s">the</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">hits</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">egress</span><span class="nv"> </span><span class="s">policy).</span><span class="nv"> </span><span class="s">By</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">Calico</span>
                  <span class="s">blocks</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">workload</span><span class="nv"> </span><span class="s">endpoints</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">itself</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">an</span>
                  <span class="s">iptables</span><span class="nv"> </span><span class="s">"DROP"</span><span class="nv"> </span><span class="s">action.</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">want</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">allow</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">traffic</span>
                  <span class="s">from</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">host,</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">parameter</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">RETURN</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">ACCEPT.</span><span class="nv"> </span><span class="s">Use</span>
                  <span class="s">RETURN</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">own</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">"INPUT"</span><span class="nv"> </span><span class="s">chain;</span>
                  <span class="s">Calico</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">insert</span><span class="nv"> </span><span class="s">its</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">top</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">chain,</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">"RETURN"</span>
                  <span class="s">packets</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">"INPUT"</span><span class="nv"> </span><span class="s">chain</span><span class="nv"> </span><span class="s">once</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">completed</span><span class="nv"> </span><span class="s">processing</span><span class="nv"> </span><span class="s">workload</span>
                  <span class="s">endpoint</span><span class="nv"> </span><span class="s">egress</span><span class="nv"> </span><span class="s">policy.</span><span class="nv"> </span><span class="s">Use</span><span class="nv"> </span><span class="s">ACCEPT</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">unconditionally</span><span class="nv"> </span><span class="s">accept</span><span class="nv"> </span><span class="s">packets</span>
                  <span class="s">from</span><span class="nv"> </span><span class="s">workloads</span><span class="nv"> </span><span class="s">after</span><span class="nv"> </span><span class="s">processing</span><span class="nv"> </span><span class="s">workload</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">egress</span><span class="nv"> </span><span class="s">policy.</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">Drop]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">deviceRouteProtocol</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">This defines the route protocol added to programmed device</span>
                  <span class="s">routes, by default this will be RTPROT_BOOT when left blank.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">deviceRouteSourceAddress</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">This is the source address to use on programmed device</span>
                  <span class="s">routes. By default the source address is left blank, leaving the</span>
                  <span class="s">kernel to choose the source address used.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">disableConntrackInvalidCheck</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">endpointReportingDelay</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">endpointReportingEnabled</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">externalNodesList</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ExternalNodesCIDRList is a list of CIDR's of external-non-calico-nodes</span>
                  <span class="s">which may source tunnel traffic and have the tunneled traffic be</span>
                  <span class="s">accepted at calico nodes.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">failsafeInboundHostPorts</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">FailsafeInboundHostPorts</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">UDP/TCP</span><span class="nv"> </span><span class="s">ports</span>
                  <span class="s">and</span><span class="nv"> </span><span class="s">CIDRs</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">allow</span><span class="nv"> </span><span class="s">incoming</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">endpoints</span>
                  <span class="s">on</span><span class="nv"> </span><span class="s">irrespective</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">security</span><span class="nv"> </span><span class="s">policy.</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">useful</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">avoid</span>
                  <span class="s">accidentally</span><span class="nv"> </span><span class="s">cutting</span><span class="nv"> </span><span class="s">off</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">incorrect</span><span class="nv"> </span><span class="s">configuration.</span><span class="nv"> </span><span class="s">For</span>
                  <span class="s">back-compatibility,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">protocol</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">specified,</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">defaults</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">"tcp".</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">CIDR</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">specified,</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">allow</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">from</span>
                  <span class="s">all</span><span class="nv"> </span><span class="s">addresses.</span><span class="nv"> </span><span class="s">To</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">inbound</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">ports,</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">value</span>
                  <span class="s">none.</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">allows</span><span class="nv"> </span><span class="s">ssh</span><span class="nv"> </span><span class="s">access</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">DHCP.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">tcp:22,</span>
                  <span class="s">udp:68,</span><span class="nv"> </span><span class="s">tcp:179,</span><span class="nv"> </span><span class="s">tcp:2379,</span><span class="nv"> </span><span class="s">tcp:2380,</span><span class="nv"> </span><span class="s">tcp:6443,</span><span class="nv"> </span><span class="s">tcp:6666,</span><span class="nv"> </span><span class="s">tcp:6667]'</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">ProtoPort is combination of protocol, port, and CIDR.</span>
                    <span class="s">Protocol and port must be specified.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">net</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">port</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">protocol</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">required</span><span class="pi">:</span>
                  <span class="pi">-</span> <span class="s">port</span>
                  <span class="pi">-</span> <span class="s">protocol</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">failsafeOutboundHostPorts</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">FailsafeOutboundHostPorts</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">UDP/TCP</span><span class="nv"> </span><span class="s">ports</span>
                  <span class="s">and</span><span class="nv"> </span><span class="s">CIDRs</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">allow</span><span class="nv"> </span><span class="s">outgoing</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">endpoints</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">irrespective</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">security</span><span class="nv"> </span><span class="s">policy.</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">useful</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">avoid</span>
                  <span class="s">accidentally</span><span class="nv"> </span><span class="s">cutting</span><span class="nv"> </span><span class="s">off</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">incorrect</span><span class="nv"> </span><span class="s">configuration.</span><span class="nv"> </span><span class="s">For</span>
                  <span class="s">back-compatibility,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">protocol</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">specified,</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">defaults</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">"tcp".</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">CIDR</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">specified,</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">allow</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">from</span>
                  <span class="s">all</span><span class="nv"> </span><span class="s">addresses.</span><span class="nv"> </span><span class="s">To</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">outbound</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">ports,</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">value</span>
                  <span class="s">none.</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">opens</span><span class="nv"> </span><span class="s">etcd'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">standard</span><span class="nv"> </span><span class="s">ports</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">that</span>
                  <span class="s">Felix</span><span class="nv"> </span><span class="s">does</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">get</span><span class="nv"> </span><span class="s">cut</span><span class="nv"> </span><span class="s">off</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">etcd</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">well</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">allowing</span><span class="nv"> </span><span class="s">DHCP</span><span class="nv"> </span><span class="s">and</span>
                  <span class="s">DNS.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">tcp:179,</span><span class="nv"> </span><span class="s">tcp:2379,</span><span class="nv"> </span><span class="s">tcp:2380,</span><span class="nv"> </span><span class="s">tcp:6443,</span><span class="nv"> </span><span class="s">tcp:6666,</span>
                  <span class="s">tcp:6667,</span><span class="nv"> </span><span class="s">udp:53,</span><span class="nv"> </span><span class="s">udp:67]'</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s">ProtoPort is combination of protocol, port, and CIDR.</span>
                    <span class="s">Protocol and port must be specified.</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">net</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">port</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">protocol</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">required</span><span class="pi">:</span>
                  <span class="pi">-</span> <span class="s">port</span>
                  <span class="pi">-</span> <span class="s">protocol</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">featureDetectOverride</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">FeatureDetectOverride is used to override the feature</span>
                  <span class="s">detection. Values are specified in a comma separated list with no</span>
                  <span class="s">spaces, example; "SNATFullyRandom=true,MASQFullyRandom=false,RestoreSupportsLock=".</span>
                  <span class="s">"true" or "false" will force the feature, empty or omitted values</span>
                  <span class="s">are auto-detected.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">genericXDPEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">GenericXDPEnabled</span><span class="nv"> </span><span class="s">enables</span><span class="nv"> </span><span class="s">Generic</span><span class="nv"> </span><span class="s">XDP</span><span class="nv"> </span><span class="s">so</span><span class="nv"> </span><span class="s">network</span><span class="nv"> </span><span class="s">cards</span>
                  <span class="s">that</span><span class="nv"> </span><span class="s">don'</span><span class="s1">'</span><span class="s">t</span><span class="nv"> </span><span class="s">support</span><span class="nv"> </span><span class="s">XDP</span><span class="nv"> </span><span class="s">offload</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">driver</span><span class="nv"> </span><span class="s">modes</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">XDP.</span><span class="nv"> </span><span class="s">This</span>
                  <span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">recommended</span><span class="nv"> </span><span class="s">since</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">doesn'</span><span class="s1">'</span><span class="s">t</span><span class="nv"> </span><span class="s">provide</span><span class="nv"> </span><span class="s">better</span><span class="nv"> </span><span class="s">performance</span>
                  <span class="s">than</span><span class="nv"> </span><span class="s">iptables.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">healthEnabled</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">healthHost</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">healthPort</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">interfaceExclude</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">InterfaceExclude</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">comma-separated</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">interfaces</span>
                  <span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">exclude</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">monitoring</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">endpoints.</span><span class="nv"> </span><span class="s">The</span>
                  <span class="s">default</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">ensures</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">ignores</span><span class="nv"> </span><span class="s">Kubernetes'</span><span class="s1">'</span><span class="nv"> </span><span class="s">IPVS</span><span class="nv"> </span><span class="s">dummy</span>
                  <span class="s">interface,</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">internally</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">kube-proxy.</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">want</span><span class="nv"> </span><span class="s">to</span>
                  <span class="s">exclude</span><span class="nv"> </span><span class="s">multiple</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">names</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">single</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">list</span>
                  <span class="s">supports</span><span class="nv"> </span><span class="s">regular</span><span class="nv"> </span><span class="s">expressions.</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">regular</span><span class="nv"> </span><span class="s">expressions</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">must</span><span class="nv"> </span><span class="s">wrap</span>
                  <span class="s">the</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">/'</span><span class="s1">'</span><span class="s">.</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">example</span><span class="nv"> </span><span class="s">having</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">/^kube/,veth1'</span><span class="s1">'</span>
                  <span class="s">will</span><span class="nv"> </span><span class="s">exclude</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">begin</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">kube'</span><span class="s1">'</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">also</span><span class="nv"> </span><span class="s">the</span>
                  <span class="s">interface</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">veth1'</span><span class="s1">'</span><span class="s">.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">kube-ipvs0]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">interfacePrefix</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">InterfacePrefix</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">interface</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">identifies</span>
                  <span class="s">workload</span><span class="nv"> </span><span class="s">endpoints</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">so</span><span class="nv"> </span><span class="s">distinguishes</span><span class="nv"> </span><span class="s">them</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">endpoint</span>
                  <span class="s">interfaces.</span><span class="nv"> </span><span class="s">Note:</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">environments</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">than</span><span class="nv"> </span><span class="s">bare</span><span class="nv"> </span><span class="s">metal,</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">orchestrators</span>
                  <span class="s">configure</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">appropriately.</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">example</span><span class="nv"> </span><span class="s">our</span><span class="nv"> </span><span class="s">Kubernetes</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">Docker</span>
                  <span class="s">integrations</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">cali'</span><span class="s1">'</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">our</span><span class="nv"> </span><span class="s">OpenStack</span><span class="nv"> </span><span class="s">integration</span>
                  <span class="s">sets</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">tap'</span><span class="s1">'</span><span class="nv"> </span><span class="s">value.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">cali]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">interfaceRefreshInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">InterfaceRefreshInterval is the period at which Felix</span>
                  <span class="s">rescans local interfaces to verify their state. The rescan can be</span>
                  <span class="s">disabled by setting the interval to 0.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">ipipEnabled</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">ipipMTU</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IPIPMTU</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">MTU</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">tunnel</span><span class="nv"> </span><span class="s">device.</span><span class="nv"> </span><span class="s">See</span>
                  <span class="s">Configuring</span><span class="nv"> </span><span class="s">MTU</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">1440]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">ipsetsRefreshInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IpsetsRefreshInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">period</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">re-checks</span>
                  <span class="s">all</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">state</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">process</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">accidentally</span>
                  <span class="s">broken</span><span class="nv"> </span><span class="s">Calico'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">rules.</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">refresh.</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">90s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesBackend</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">IptablesBackend specifies which backend of iptables will</span>
                  <span class="s">be used. The default is legacy.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesFilterAllowAction</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesLockFilePath</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IptablesLockFilePath</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">location</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">iptables</span>
                  <span class="s">lock</span><span class="nv"> </span><span class="s">file.</span><span class="nv"> </span><span class="s">You</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">change</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">lock</span><span class="nv"> </span><span class="s">file</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">in</span>
                  <span class="s">its</span><span class="nv"> </span><span class="s">standard</span><span class="nv"> </span><span class="s">location</span><span class="nv"> </span><span class="s">(for</span><span class="nv"> </span><span class="s">example</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">mapped</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">Felix'</span><span class="s1">'</span><span class="s">s</span>
                  <span class="s">container</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">different</span><span class="nv"> </span><span class="s">path).</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">/run/xtables.lock]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesLockProbeInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IptablesLockProbeInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">will</span>
                  <span class="s">wait</span><span class="nv"> </span><span class="s">between</span><span class="nv"> </span><span class="s">attempts</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">acquire</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">lock</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">not</span>
                  <span class="s">available.</span><span class="nv"> </span><span class="s">Lower</span><span class="nv"> </span><span class="s">values</span><span class="nv"> </span><span class="s">make</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">responsive</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">lock</span>
                  <span class="s">is</span><span class="nv"> </span><span class="s">contended,</span><span class="nv"> </span><span class="s">but</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">more</span><span class="nv"> </span><span class="s">CPU.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">50ms]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesLockTimeout</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IptablesLockTimeout</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">time</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">wait</span>
                  <span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">lock,</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">0,</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable.</span><span class="nv"> </span><span class="s">To</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">feature,</span><span class="nv"> </span><span class="s">Felix</span>
                  <span class="s">must</span><span class="nv"> </span><span class="s">share</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">lock</span><span class="nv"> </span><span class="s">file</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">processes</span><span class="nv"> </span><span class="s">that</span>
                  <span class="s">also</span><span class="nv"> </span><span class="s">take</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">lock.</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">running</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">inside</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">container,</span><span class="nv"> </span><span class="s">this</span>
                  <span class="s">requires</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">/run</span><span class="nv"> </span><span class="s">directory</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">mounted</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">calico/node</span>
                  <span class="s">or</span><span class="nv"> </span><span class="s">calico/felix</span><span class="nv"> </span><span class="s">container.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">0s</span><span class="nv"> </span><span class="s">disabled]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesMangleAllowAction</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesMarkMask</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IptablesMarkMask</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">mask</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">selects</span><span class="nv"> </span><span class="s">its</span>
                  <span class="s">IPTables</span><span class="nv"> </span><span class="s">Mark</span><span class="nv"> </span><span class="s">bits</span><span class="nv"> </span><span class="s">from.</span><span class="nv"> </span><span class="s">Should</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">32</span><span class="nv"> </span><span class="s">bit</span><span class="nv"> </span><span class="s">hexadecimal</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">with</span>
                  <span class="s">at</span><span class="nv"> </span><span class="s">least</span><span class="nv"> </span><span class="s">8</span><span class="nv"> </span><span class="s">bits</span><span class="nv"> </span><span class="s">set,</span><span class="nv"> </span><span class="s">none</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">clash</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">any</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">mark</span><span class="nv"> </span><span class="s">bits</span>
                  <span class="s">in</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">system.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">0xff000000]'</span>
                <span class="na">format</span><span class="pi">:</span> <span class="s">int32</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">iptablesNATOutgoingInterfaceFilter</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesPostWriteCheckInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IptablesPostWriteCheckInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">period</span><span class="nv"> </span><span class="s">after</span><span class="nv"> </span><span class="s">Felix</span>
                  <span class="s">has</span><span class="nv"> </span><span class="s">done</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">write</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">dataplane</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">schedules</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">extra</span><span class="nv"> </span><span class="s">read</span>
                  <span class="s">back</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">order</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">check</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">write</span><span class="nv"> </span><span class="s">was</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">clobbered</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">another</span><span class="nv"> </span><span class="s">process.</span>
                  <span class="s">This</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">occur</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">another</span><span class="nv"> </span><span class="s">application</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">system</span><span class="nv"> </span><span class="s">doesn'</span><span class="s1">'</span><span class="s">t</span>
                  <span class="s">respect</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">iptables</span><span class="nv"> </span><span class="s">lock.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">1s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">iptablesRefreshInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">IptablesRefreshInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">period</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">Felix</span>
                  <span class="s">re-checks</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">IP</span><span class="nv"> </span><span class="s">sets</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">dataplane</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">process</span>
                  <span class="s">has</span><span class="nv"> </span><span class="s">accidentally</span><span class="nv"> </span><span class="s">broken</span><span class="nv"> </span><span class="s">Calico'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">rules.</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">IP</span>
                  <span class="s">sets</span><span class="nv"> </span><span class="s">refresh.</span><span class="nv"> </span><span class="s">Note:</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">lower</span><span class="nv"> </span><span class="s">than</span><span class="nv"> </span><span class="s">the</span>
                  <span class="s">other</span><span class="nv"> </span><span class="s">refresh</span><span class="nv"> </span><span class="s">intervals</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">workaround</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">Linux</span><span class="nv"> </span><span class="s">kernel</span><span class="nv"> </span><span class="s">bug</span><span class="nv"> </span><span class="s">that</span>
                  <span class="s">was</span><span class="nv"> </span><span class="s">fixed</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">kernel</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">4.11.</span><span class="nv"> </span><span class="s">If</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">using</span><span class="nv"> </span><span class="s">v4.11</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">greater</span>
                  <span class="s">you</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">want</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">to,</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">higher</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">reduce</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">CPU</span>
                  <span class="s">usage.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">10s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">ipv6Support</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">kubeNodePortRanges</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">KubeNodePortRanges</span><span class="nv"> </span><span class="s">holds</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">port</span><span class="nv"> </span><span class="s">ranges</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">for</span>
                  <span class="s">service</span><span class="nv"> </span><span class="s">node</span><span class="nv"> </span><span class="s">ports.</span><span class="nv"> </span><span class="s">Only</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">felix</span><span class="nv"> </span><span class="s">detects</span><span class="nv"> </span><span class="s">kube-proxy</span><span class="nv"> </span><span class="s">running</span>
                  <span class="s">in</span><span class="nv"> </span><span class="s">ipvs</span><span class="nv"> </span><span class="s">mode.</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">uses</span><span class="nv"> </span><span class="s">these</span><span class="nv"> </span><span class="s">ranges</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">separate</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">workload</span>
                  <span class="s">traffic.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">30000:32767].'</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">anyOf</span><span class="pi">:</span>
                  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                  <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                  <span class="na">pattern</span><span class="pi">:</span> <span class="s">^.*</span>
                  <span class="na">x-kubernetes-int-or-string</span><span class="pi">:</span> <span class="no">true</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
              <span class="na">logFilePath</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">LogFilePath</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">full</span><span class="nv"> </span><span class="s">path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">log.</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">to</span>
                  <span class="s">none</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">file</span><span class="nv"> </span><span class="s">logging.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">/var/log/calico/felix.log]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">logPrefix</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">LogPrefix</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">prefix</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">uses</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">rendering</span>
                  <span class="s">LOG</span><span class="nv"> </span><span class="s">rules.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">calico-packet]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">logSeverityFile</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">LogSeverityFile</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">severity</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">logs</span>
                  <span class="s">are</span><span class="nv"> </span><span class="s">sent</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">file.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">Info]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">logSeverityScreen</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">LogSeverityScreen</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">severity</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">logs</span>
                  <span class="s">are</span><span class="nv"> </span><span class="s">sent</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">stdout.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">Info]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">logSeveritySys</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">LogSeveritySys</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">log</span><span class="nv"> </span><span class="s">severity</span><span class="nv"> </span><span class="s">above</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">logs</span>
                  <span class="s">are</span><span class="nv"> </span><span class="s">sent</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">syslog.</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">None</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">logging</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">syslog.</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">Info]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">maxIpsetSize</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">metadataAddr</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">MetadataAddr</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">IP</span><span class="nv"> </span><span class="s">address</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">domain</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span>
                  <span class="s">server</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">answer</span><span class="nv"> </span><span class="s">VM</span><span class="nv"> </span><span class="s">queries</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">cloud-init</span><span class="nv"> </span><span class="s">metadata.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">OpenStack,</span>
                  <span class="s">this</span><span class="nv"> </span><span class="s">corresponds</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">machine</span><span class="nv"> </span><span class="s">running</span><span class="nv"> </span><span class="s">nova-api</span><span class="nv"> </span><span class="s">(or</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">Ubuntu,</span>
                  <span class="s">nova-api-metadata).</span><span class="nv"> </span><span class="s">A</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">none</span><span class="nv"> </span><span class="s">(case</span><span class="nv"> </span><span class="s">insensitive)</span><span class="nv"> </span><span class="s">means</span><span class="nv"> </span><span class="s">that</span>
                  <span class="s">Felix</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">any</span><span class="nv"> </span><span class="s">NAT</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">metadata</span><span class="nv"> </span><span class="s">path.</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">127.0.0.1]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">metadataPort</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">MetadataPort</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">port</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">metadata</span><span class="nv"> </span><span class="s">server.</span><span class="nv"> </span><span class="s">This,</span>
                  <span class="s">combined</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">global.MetadataAddr</span><span class="nv"> </span><span class="s">(if</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">'</span><span class="s1">'</span><span class="s">None'</span><span class="s1">'</span><span class="s">),</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">to</span>
                  <span class="s">set</span><span class="nv"> </span><span class="s">up</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">NAT</span><span class="nv"> </span><span class="s">rule,</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">169.254.169.254:80</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">MetadataAddr:MetadataPort.</span>
                  <span class="s">In</span><span class="nv"> </span><span class="s">most</span><span class="nv"> </span><span class="s">cases</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">need</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">changed</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">8775].'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">mtuIfacePattern</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">MTUIfacePattern is a regular expression that controls</span>
                  <span class="s">which interfaces Felix should scan in order to calculate the host's</span>
                  <span class="s">MTU. This should not match workload interfaces (usually named cali...).</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">natOutgoingAddress</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">NATOutgoingAddress specifies an address to use when performing</span>
                  <span class="s">source NAT for traffic in a natOutgoing pool that is leaving the</span>
                  <span class="s">network. By default the address used is an address on the interface</span>
                  <span class="s">the traffic is leaving on (ie it uses the iptables MASQUERADE target)</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">natPortRange</span><span class="pi">:</span>
                <span class="na">anyOf</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">NATPortRange specifies the range of ports that is used</span>
                  <span class="s">for port mapping when doing outgoing NAT. When unset the default</span>
                  <span class="s">behavior of the network stack is used.</span>
                <span class="na">pattern</span><span class="pi">:</span> <span class="s">^.*</span>
                <span class="na">x-kubernetes-int-or-string</span><span class="pi">:</span> <span class="no">true</span>
              <span class="na">netlinkTimeout</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">openstackRegion</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">OpenstackRegion</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">region</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">particular</span>
                  <span class="s">Felix</span><span class="nv"> </span><span class="s">belongs</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">multi-region</span><span class="nv"> </span><span class="s">Calico/OpenStack</span><span class="nv"> </span><span class="s">deployment,</span>
                  <span class="s">this</span><span class="nv"> </span><span class="s">must</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">configured</span><span class="nv"> </span><span class="s">somehow</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">each</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">(here</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">datamodel,</span>
                  <span class="s">or</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">felix.cfg</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">environment</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">each</span><span class="nv"> </span><span class="s">compute</span><span class="nv"> </span><span class="s">node),</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">must</span>
                  <span class="s">match</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">[calico]</span><span class="nv"> </span><span class="s">openstack_region</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">configured</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">neutron.conf</span>
                  <span class="s">on</span><span class="nv"> </span><span class="s">each</span><span class="nv"> </span><span class="s">node.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">Empty]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">policySyncPathPrefix</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">PolicySyncPathPrefix</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">used</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">communicate</span>
                  <span class="s">policy</span><span class="nv"> </span><span class="s">changes</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">external</span><span class="nv"> </span><span class="s">services,</span><span class="nv"> </span><span class="s">like</span><span class="nv"> </span><span class="s">Application</span><span class="nv"> </span><span class="s">layer</span><span class="nv"> </span><span class="s">policy.</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">Empty]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">prometheusGoMetricsEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">PrometheusGoMetricsEnabled</span><span class="nv"> </span><span class="s">disables</span><span class="nv"> </span><span class="s">Go</span><span class="nv"> </span><span class="s">runtime</span><span class="nv"> </span><span class="s">metrics</span>
                  <span class="s">collection,</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Prometheus</span><span class="nv"> </span><span class="s">client</span><span class="nv"> </span><span class="s">does</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">default,</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">set</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">false.</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">reduces</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">metrics</span><span class="nv"> </span><span class="s">reported,</span><span class="nv"> </span><span class="s">reducing</span>
                  <span class="s">Prometheus</span><span class="nv"> </span><span class="s">load.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">prometheusMetricsEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">PrometheusMetricsEnabled</span><span class="nv"> </span><span class="s">enables</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Prometheus</span><span class="nv"> </span><span class="s">metrics</span>
                  <span class="s">server</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">true.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">prometheusMetricsHost</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">PrometheusMetricsHost</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">host</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Prometheus</span>
                  <span class="s">metrics</span><span class="nv"> </span><span class="s">server</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">bind</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">empty]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">prometheusMetricsPort</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">PrometheusMetricsPort</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">TCP</span><span class="nv"> </span><span class="s">port</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Prometheus</span>
                  <span class="s">metrics</span><span class="nv"> </span><span class="s">server</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">bind</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">9091]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">prometheusProcessMetricsEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">PrometheusProcessMetricsEnabled</span><span class="nv"> </span><span class="s">disables</span><span class="nv"> </span><span class="s">process</span><span class="nv"> </span><span class="s">metrics</span>
                  <span class="s">collection,</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Prometheus</span><span class="nv"> </span><span class="s">client</span><span class="nv"> </span><span class="s">does</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">default,</span><span class="nv"> </span><span class="s">when</span><span class="nv"> </span><span class="s">set</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">false.</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">reduces</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">number</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">metrics</span><span class="nv"> </span><span class="s">reported,</span><span class="nv"> </span><span class="s">reducing</span>
                  <span class="s">Prometheus</span><span class="nv"> </span><span class="s">load.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">removeExternalRoutes</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Whether or not to remove device routes that have not</span>
                  <span class="s">been programmed by Felix. Disabling this will allow external applications</span>
                  <span class="s">to also add device routes. This is enabled by default which means</span>
                  <span class="s">we will remove externally added routes.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">reportingInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ReportingInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">interval</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">reports</span>
                  <span class="s">its</span><span class="nv"> </span><span class="s">status</span><span class="nv"> </span><span class="s">into</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">datastore</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable.</span><span class="nv"> </span><span class="s">Must</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">non-zero</span>
                  <span class="s">in</span><span class="nv"> </span><span class="s">OpenStack</span><span class="nv"> </span><span class="s">deployments.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">30s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">reportingTTL</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ReportingTTL</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">time-to-live</span><span class="nv"> </span><span class="s">setting</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">process-wide</span>
                  <span class="s">status</span><span class="nv"> </span><span class="s">reports.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">90s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">routeRefreshInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">RouteRefreshInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">period</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">re-checks</span>
                  <span class="s">the</span><span class="nv"> </span><span class="s">routes</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">dataplane</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">process</span><span class="nv"> </span><span class="s">has</span>
                  <span class="s">accidentally</span><span class="nv"> </span><span class="s">broken</span><span class="nv"> </span><span class="s">Calico'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">rules.</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">route</span><span class="nv"> </span><span class="s">refresh.</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">90s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">routeSource</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">RouteSource</span><span class="nv"> </span><span class="s">configures</span><span class="nv"> </span><span class="s">where</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">gets</span><span class="nv"> </span><span class="s">its</span><span class="nv"> </span><span class="s">routing</span>
                  <span class="s">information.</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">WorkloadIPs:</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">workload</span><span class="nv"> </span><span class="s">endpoints</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">construct</span>
                  <span class="s">routes.</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">CalicoIPAM:</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">default</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">IPAM</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">construct</span><span class="nv"> </span><span class="s">routes.'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">routeTableRange</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">Calico programs additional Linux route tables for various</span>
                  <span class="s">purposes.  RouteTableRange specifies the indices of the route tables</span>
                  <span class="s">that Calico should use.</span>
                <span class="na">properties</span><span class="pi">:</span>
                  <span class="na">max</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                  <span class="na">min</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                <span class="na">required</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">max</span>
                <span class="pi">-</span> <span class="s">min</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
              <span class="na">serviceLoopPrevention</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">When</span><span class="nv"> </span><span class="s">service</span><span class="nv"> </span><span class="s">IP</span><span class="nv"> </span><span class="s">advertisement</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">enabled,</span><span class="nv"> </span><span class="s">prevent</span><span class="nv"> </span><span class="s">routing</span>
                  <span class="s">loops</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">service</span><span class="nv"> </span><span class="s">IPs</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">use,</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">dropping</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">rejecting</span>
                  <span class="s">packets</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">get</span><span class="nv"> </span><span class="s">DNAT'</span><span class="s1">'</span><span class="s">d</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">kube-proxy.</span><span class="nv"> </span><span class="s">Unless</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">"Disabled",</span>
                  <span class="s">in</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">case</span><span class="nv"> </span><span class="s">such</span><span class="nv"> </span><span class="s">routing</span><span class="nv"> </span><span class="s">loops</span><span class="nv"> </span><span class="s">continue</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">allowed.</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">Drop]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">sidecarAccelerationEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">SidecarAccelerationEnabled</span><span class="nv"> </span><span class="s">enables</span><span class="nv"> </span><span class="s">experimental</span><span class="nv"> </span><span class="s">sidecar</span>
                  <span class="s">acceleration</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">usageReportingEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">UsageReportingEnabled</span><span class="nv"> </span><span class="s">reports</span><span class="nv"> </span><span class="s">anonymous</span><span class="nv"> </span><span class="s">Calico</span><span class="nv"> </span><span class="s">version</span>
                  <span class="s">number</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">cluster</span><span class="nv"> </span><span class="s">size</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">projectcalico.org.</span><span class="nv"> </span><span class="s">Logs</span><span class="nv"> </span><span class="s">warnings</span><span class="nv"> </span><span class="s">returned</span>
                  <span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">usage</span><span class="nv"> </span><span class="s">server.</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">example,</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">significant</span><span class="nv"> </span><span class="s">security</span><span class="nv"> </span><span class="s">vulnerability</span>
                  <span class="s">has</span><span class="nv"> </span><span class="s">been</span><span class="nv"> </span><span class="s">discovered</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">Calico</span><span class="nv"> </span><span class="s">being</span><span class="nv"> </span><span class="s">used.</span><span class="nv"> </span><span class="s">[Default:</span>
                  <span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">usageReportingInitialDelay</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">UsageReportingInitialDelay</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">minimum</span><span class="nv"> </span><span class="s">delay</span>
                  <span class="s">before</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">makes</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">report.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">300s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">usageReportingInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">UsageReportingInterval</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">interval</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">which</span>
                  <span class="s">Felix</span><span class="nv"> </span><span class="s">makes</span><span class="nv"> </span><span class="s">reports.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">86400s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">useInternalDataplaneDriver</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">vxlanEnabled</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">vxlanMTU</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">VXLANMTU</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">MTU</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">tunnel</span><span class="nv"> </span><span class="s">device.</span><span class="nv"> </span><span class="s">See</span>
                  <span class="s">Configuring</span><span class="nv"> </span><span class="s">MTU</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">1440]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">vxlanPort</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">vxlanVNI</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">wireguardEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">WireguardEnabled</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">whether</span><span class="nv"> </span><span class="s">Wireguard</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">enabled.</span>
                  <span class="s">[Default:</span><span class="nv"> </span><span class="s">false]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">wireguardInterfaceName</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">WireguardInterfaceName</span><span class="nv"> </span><span class="s">specifies</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">name</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">for</span>
                  <span class="s">the</span><span class="nv"> </span><span class="s">Wireguard</span><span class="nv"> </span><span class="s">interface.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">wg.calico]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">wireguardListeningPort</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">WireguardListeningPort</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">listening</span><span class="nv"> </span><span class="s">port</span><span class="nv"> </span><span class="s">used</span>
                  <span class="s">by</span><span class="nv"> </span><span class="s">Wireguard.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">51820]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">wireguardMTU</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">WireguardMTU</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">MTU</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Wireguard</span><span class="nv"> </span><span class="s">interface.</span>
                  <span class="s">See</span><span class="nv"> </span><span class="s">Configuring</span><span class="nv"> </span><span class="s">MTU</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">1420]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">wireguardRoutingRulePriority</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">WireguardRoutingRulePriority</span><span class="nv"> </span><span class="s">controls</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">priority</span><span class="nv"> </span><span class="s">value</span>
                  <span class="s">to</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Wireguard</span><span class="nv"> </span><span class="s">routing</span><span class="nv"> </span><span class="s">rule.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">99]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
              <span class="na">xdpEnabled</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">XDPEnabled</span><span class="nv"> </span><span class="s">enables</span><span class="nv"> </span><span class="s">XDP</span><span class="nv"> </span><span class="s">acceleration</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">suitable</span><span class="nv"> </span><span class="s">untracked</span>
                  <span class="s">incoming</span><span class="nv"> </span><span class="s">deny</span><span class="nv"> </span><span class="s">rules.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">true]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">xdpRefreshInterval</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">XDPRefreshInterval</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">period</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">Felix</span><span class="nv"> </span><span class="s">re-checks</span>
                  <span class="s">all</span><span class="nv"> </span><span class="s">XDP</span><span class="nv"> </span><span class="s">state</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">ensure</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">process</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">accidentally</span><span class="nv"> </span><span class="s">broken</span>
                  <span class="s">Calico'</span><span class="s1">'</span><span class="s">s</span><span class="nv"> </span><span class="s">BPF</span><span class="nv"> </span><span class="s">maps</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">attached</span><span class="nv"> </span><span class="s">programs.</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">disable</span><span class="nv"> </span><span class="s">XDP</span>
                  <span class="s">refresh.</span><span class="nv"> </span><span class="s">[Default:</span><span class="nv"> </span><span class="s">90s]'</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">served</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">acceptedNames</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">conditions</span><span class="pi">:</span> <span class="pi">[]</span>
  <span class="na">storedVersions</span><span class="pi">:</span> <span class="pi">[]</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiextensions.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">CustomResourceDefinition</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">globalnetworkpolicies.crd.projectcalico.org</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">crd.projectcalico.org</span>
  <span class="na">names</span><span class="pi">:</span>
    <span class="na">kind</span><span class="pi">:</span> <span class="s">GlobalNetworkPolicy</span>
    <span class="na">listKind</span><span class="pi">:</span> <span class="s">GlobalNetworkPolicyList</span>
    <span class="na">plural</span><span class="pi">:</span> <span class="s">globalnetworkpolicies</span>
    <span class="na">singular</span><span class="pi">:</span> <span class="s">globalnetworkpolicy</span>
  <span class="na">scope</span><span class="pi">:</span> <span class="s">Cluster</span>
  <span class="na">versions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">v1</span>
    <span class="na">schema</span><span class="pi">:</span>
      <span class="na">openAPIV3Schema</span><span class="pi">:</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">apiVersion</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">APIVersion</span><span class="nv"> </span><span class="s">defines</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">versioned</span><span class="nv"> </span><span class="s">schema</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">representation</span>
              <span class="s">of</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">object.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">should</span><span class="nv"> </span><span class="s">convert</span><span class="nv"> </span><span class="s">recognized</span><span class="nv"> </span><span class="s">schemas</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latest</span>
              <span class="s">internal</span><span class="nv"> </span><span class="s">value,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">reject</span><span class="nv"> </span><span class="s">unrecognized</span><span class="nv"> </span><span class="s">values.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">kind</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Kind</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string</span><span class="nv"> </span><span class="s">value</span><span class="nv"> </span><span class="s">representing</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">REST</span><span class="nv"> </span><span class="s">resource</span><span class="nv"> </span><span class="s">this</span>
              <span class="s">object</span><span class="nv"> </span><span class="s">represents.</span><span class="nv"> </span><span class="s">Servers</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">infer</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">endpoint</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">client</span>
              <span class="s">submits</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">to.</span><span class="nv"> </span><span class="s">Cannot</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">updated.</span><span class="nv"> </span><span class="s">In</span><span class="nv"> </span><span class="s">CamelCase.</span><span class="nv"> </span><span class="s">More</span><span class="nv"> </span><span class="s">info:</span><span class="nv"> </span><span class="s">https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">metadata</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
          <span class="na">spec</span><span class="pi">:</span>
            <span class="na">properties</span><span class="pi">:</span>
              <span class="na">applyOnForward</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">ApplyOnForward indicates to apply the rules in this policy</span>
                  <span class="s">on forward traffic.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">doNotTrack</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">DoNotTrack indicates whether packets matched by the rules</span>
                  <span class="s">in this policy should go through the data plane's connection tracking,</span>
                  <span class="s">such as Linux conntrack.  If True, the rules in this policy are</span>
                  <span class="s">applied before any data plane connection tracking, and packets allowed</span>
                  <span class="s">by this policy are marked as not to be tracked.</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
              <span class="na">egress</span><span class="pi">:</span>
                <span class="na">description</span><span class="pi">:</span> <span class="s">The ordered set of egress rules.  Each rule contains</span>
                  <span class="s">a set of packet match criteria and a corresponding action to apply.</span>
                <span class="na">items</span><span class="pi">:</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">Rule</span><span class="nv"> </span><span class="s">encapsulates</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">criteria</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">an</span>
                    <span class="s">action.</span><span class="nv">  </span><span class="s">Both</span><span class="nv"> </span><span class="s">selector-based</span><span class="nv"> </span><span class="s">security</span><span class="nv"> </span><span class="s">Policy</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">security</span><span class="nv"> </span><span class="s">Profiles</span>
                    <span class="s">reference</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">separated</span><span class="nv"> </span><span class="s">out</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">rules</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">both</span><span class="nv"> </span><span class="s">ingress</span>
                    <span class="s">and</span><span class="nv"> </span><span class="s">egress</span><span class="nv"> </span><span class="s">packet</span><span class="nv"> </span><span class="s">matching.</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="s">Each</span><span class="nv"> </span><span class="s">positive</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">criteria</span><span class="nv"> </span><span class="s">has</span>
                    <span class="s">a</span><span class="nv"> </span><span class="s">negated</span><span class="nv"> </span><span class="s">version,</span><span class="nv"> </span><span class="s">prefixed</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="se">\"</span><span class="s">Not</span><span class="se">\"</span><span class="s">.</span><span class="nv"> </span><span class="s">All</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">match</span><span class="nv"> </span><span class="s">criteria</span>
                    <span class="s">within</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">must</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">satisfied</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">packet</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">match.</span><span class="nv"> </span><span class="s">A</span><span class="nv"> </span><span class="s">single</span>
                    <span class="s">rule</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">contain</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">positive</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">negative</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">match</span>
                    <span class="s">and</span><span class="nv"> </span><span class="s">both</span><span class="nv"> </span><span class="s">must</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">satisfied</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">match."</span>
                  <span class="na">properties</span><span class="pi">:</span>
                    <span class="na">action</span><span class="pi">:</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">destination</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">Destination contains the match criteria that apply</span>
                        <span class="s">to destination entity.</span>
                      <span class="na">properties</span><span class="pi">:</span>
                        <span class="na">namespaceSelector</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">NamespaceSelector</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">optional</span><span class="nv"> </span><span class="s">field</span><span class="nv"> </span><span class="s">that</span>
                            <span class="s">contains</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">selector</span><span class="nv"> </span><span class="s">expression.</span><span class="nv"> </span><span class="s">Only</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">originates</span>
                            <span class="s">from</span><span class="nv"> </span><span class="s">(or</span><span class="nv"> </span><span class="s">terminates</span><span class="nv"> </span><span class="s">at)</span><span class="nv"> </span><span class="s">endpoints</span><span class="nv"> </span><span class="s">within</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">selected</span>
                            <span class="s">namespaces</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">matched.</span><span class="nv"> </span><span class="s">When</span><span class="nv"> </span><span class="s">both</span><span class="nv"> </span><span class="s">NamespaceSelector</span>
                            <span class="s">and</span><span class="nv"> </span><span class="s">Selector</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">defined</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">same</span><span class="nv"> </span><span class="s">rule,</span><span class="nv"> </span><span class="s">then</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">workload</span>
                            <span class="s">endpoints</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">matched</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">both</span><span class="nv"> </span><span class="s">selectors</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">selected</span>
                            <span class="s">by</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">rule.</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">NetworkPolicy,</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">empty</span><span class="nv"> </span><span class="s">NamespaceSelector</span>
                            <span class="s">implies</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Selector</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">limited</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">selecting</span><span class="nv"> </span><span class="s">only</span>
                            <span class="s">workload</span><span class="nv"> </span><span class="s">endpoints</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">same</span><span class="nv"> </span><span class="s">namespace</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">NetworkPolicy.</span>
                            <span class="se">\n</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">NetworkPolicy,</span><span class="nv"> </span><span class="s">`global()`</span><span class="nv"> </span><span class="s">NamespaceSelector</span><span class="nv"> </span><span class="s">implies</span>
                            <span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Selector</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">limited</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">selecting</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">GlobalNetworkSet</span>
                            <span class="s">or</span><span class="nv"> </span><span class="s">HostEndpoint.</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="s">For</span><span class="nv"> </span><span class="s">GlobalNetworkPolicy,</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">empty</span>
                            <span class="s">NamespaceSelector</span><span class="nv"> </span><span class="s">implies</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Selector</span><span class="nv"> </span><span class="s">applies</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">workload</span>
                            <span class="s">endpoints</span><span class="nv"> </span><span class="s">across</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">namespaces."</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                        <span class="na">nets</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">Nets is an optional field that restricts the</span>
                            <span class="s">rule to only apply to traffic that originates from (or</span>
                            <span class="s">terminates at) IP addresses in any of the given subnets.</span>
                          <span class="na">items</span><span class="pi">:</span>
                            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                        <span class="na">notNets</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">NotNets is the negated version of the Nets</span>
                            <span class="s">field.</span>
                          <span class="na">items</span><span class="pi">:</span>
                            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                        <span class="na">notPorts</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">NotPorts is the negated version of the Ports</span>
                            <span class="s">field. Since only some protocols have ports, if any ports</span>
                            <span class="s">are specified it requires the Protocol match in the Rule</span>
                            <span class="s">to be set to "TCP" or "UDP".</span>
                          <span class="na">items</span><span class="pi">:</span>
                            <span class="na">anyOf</span><span class="pi">:</span>
                            <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                            <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                            <span class="na">pattern</span><span class="pi">:</span> <span class="s">^.*</span>
                            <span class="na">x-kubernetes-int-or-string</span><span class="pi">:</span> <span class="no">true</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                        <span class="na">notSelector</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">NotSelector is the negated version of the Selector</span>
                            <span class="s">field.  See Selector field for subtleties with negated</span>
                            <span class="s">selectors.</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                        <span class="na">ports</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Ports</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">optional</span><span class="nv"> </span><span class="s">field</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">restricts</span>
                            <span class="s">the</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">apply</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">has</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">source</span><span class="nv"> </span><span class="s">(destination)</span>
                            <span class="s">port</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">matches</span><span class="nv"> </span><span class="s">one</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">these</span><span class="nv"> </span><span class="s">ranges/values.</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">value</span>
                            <span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">list</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">integers</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">strings</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">represent</span><span class="nv"> </span><span class="s">ranges</span>
                            <span class="s">of</span><span class="nv"> </span><span class="s">ports.</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="s">Since</span><span class="nv"> </span><span class="s">only</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">protocols</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">ports,</span><span class="nv"> </span><span class="s">if</span>
                            <span class="s">any</span><span class="nv"> </span><span class="s">ports</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">specified</span><span class="nv"> </span><span class="s">it</span><span class="nv"> </span><span class="s">requires</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Protocol</span><span class="nv"> </span><span class="s">match</span>
                            <span class="s">in</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Rule</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="se">\"</span><span class="s">TCP</span><span class="se">\"</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="se">\"</span><span class="s">UDP</span><span class="se">\"</span><span class="s">."</span>
                          <span class="na">items</span><span class="pi">:</span>
                            <span class="na">anyOf</span><span class="pi">:</span>
                            <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                            <span class="pi">-</span> <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                            <span class="na">pattern</span><span class="pi">:</span> <span class="s">^.*</span>
                            <span class="na">x-kubernetes-int-or-string</span><span class="pi">:</span> <span class="no">true</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                        <span class="na">selector</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Selector</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">optional</span><span class="nv"> </span><span class="s">field</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">contains</span>
                            <span class="s">a</span><span class="nv"> </span><span class="s">selector</span><span class="nv"> </span><span class="s">expression</span><span class="nv"> </span><span class="s">(see</span><span class="nv"> </span><span class="s">Policy</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">sample</span><span class="nv"> </span><span class="s">syntax).</span>
                            <span class="se">\ </span><span class="s">Only</span><span class="nv"> </span><span class="s">traffic</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">originates</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">(terminates</span><span class="nv"> </span><span class="s">at)</span><span class="nv"> </span><span class="s">endpoints</span>
                            <span class="s">matching</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">selector</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">matched.</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="s">Note</span><span class="nv"> </span><span class="s">that:</span><span class="nv"> </span><span class="s">in</span>
                            <span class="s">addition</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">negated</span><span class="nv"> </span><span class="s">version</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Selector</span><span class="nv"> </span><span class="s">(see</span><span class="nv"> </span><span class="s">NotSelector</span>
                            <span class="s">below),</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">selector</span><span class="nv"> </span><span class="s">expression</span><span class="nv"> </span><span class="s">syntax</span><span class="nv"> </span><span class="s">itself</span><span class="nv"> </span><span class="s">supports</span>
                            <span class="s">negation.</span><span class="nv">  </span><span class="s">The</span><span class="nv"> </span><span class="s">two</span><span class="nv"> </span><span class="s">types</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">negation</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">subtly</span><span class="nv"> </span><span class="s">different.</span>
                            <span class="s">One</span><span class="nv"> </span><span class="s">negates</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">matched</span><span class="nv"> </span><span class="s">endpoints,</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">negates</span>
                            <span class="s">the</span><span class="nv"> </span><span class="s">whole</span><span class="nv"> </span><span class="s">match:</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="se">\t</span><span class="s">Selector</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="se">\"</span><span class="s">!has(my_label)</span><span class="se">\"</span><span class="nv"> </span><span class="s">matches</span>
                            <span class="s">packets</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">other</span><span class="nv"> </span><span class="s">Calico-controlled</span><span class="nv"> </span><span class="se">\t</span><span class="s">endpoints</span>
                            <span class="s">that</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">label</span><span class="nv"> </span><span class="se">\"</span><span class="s">my_label</span><span class="se">\"</span><span class="s">.</span><span class="nv"> </span><span class="se">\n</span><span class="nv"> </span><span class="se">\t</span><span class="s">NotSelector</span>
                            <span class="s">=</span><span class="nv"> </span><span class="se">\"</span><span class="s">has(my_label)</span><span class="se">\"</span><span class="nv"> </span><span class="s">matches</span><span class="nv"> </span><span class="s">packets</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">from</span>
                            <span class="s">Calico-controlled</span><span class="nv"> </span><span class="se">\t</span><span class="s">endpoints</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">label</span><span class="nv"> </span><span class="se">\"</span><span class="s">my_label</span><span class="se">\"</span><span class="s">.</span>
                            <span class="se">\n</span><span class="nv"> </span><span class="s">The</span><span class="nv"> </span><span class="s">effect</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">latter</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">accept</span><span class="nv"> </span><span class="s">packets</span><span class="nv"> </span><span class="s">from</span>
                            <span class="s">non-Calico</span><span class="nv"> </span><span class="s">sources</span><span class="nv"> </span><span class="s">whereas</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">former</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">limited</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">packets</span>
                            <span class="s">from</span><span class="nv"> </span><span class="s">Calico-controlled</span><span class="nv"> </span><span class="s">endpoints."</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                        <span class="na">serviceAccounts</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">ServiceAccounts is an optional field that restricts</span>
                            <span class="s">the rule to only apply to traffic that originates from</span>
                            <span class="s">(or terminates at) a pod running as a matching service</span>
                            <span class="s">account.</span>
                          <span class="na">properties</span><span class="pi">:</span>
                            <span class="na">names</span><span class="pi">:</span>
                              <span class="na">description</span><span class="pi">:</span> <span class="s">Names is an optional field that restricts</span>
                                <span class="s">the rule to only apply to traffic that originates</span>
                                <span class="s">from (or terminates at) a pod running as a service</span>
                                <span class="s">account whose name is in the list.</span>
                              <span class="na">items</span><span class="pi">:</span>
                                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                              <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                            <span class="na">selector</span><span class="pi">:</span>
                              <span class="na">description</span><span class="pi">:</span> <span class="s">Selector is an optional field that restricts</span>
                                <span class="s">the rule to only apply to traffic that originates</span>
                                <span class="s">from (or terminates at) a pod running as a service</span>
                                <span class="s">account that matches the given label selector. If</span>
                                <span class="s">both Names and Selector are specified then they are</span>
                                <span class="s">AND'ed.</span>
                              <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                    <span class="na">http</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">HTTP contains match criteria that apply to HTTP</span>
                        <span class="s">requests.</span>
                      <span class="na">properties</span><span class="pi">:</span>
                        <span class="na">methods</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">Methods is an optional field that restricts</span>
                            <span class="s">the rule to apply only to HTTP requests that use one of</span>
                            <span class="s">the listed HTTP Methods (e.g. GET, PUT, etc.) Multiple</span>
                            <span class="s">methods are OR'd together.</span>
                          <span class="na">items</span><span class="pi">:</span>
                            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                        <span class="na">paths</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Paths</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">optional</span><span class="nv"> </span><span class="s">field</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">restricts</span>
                            <span class="s">the</span><span class="nv"> </span><span class="s">rule</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">apply</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">HTTP</span><span class="nv"> </span><span class="s">requests</span><span class="nv"> </span><span class="s">that</span><span class="nv"> </span><span class="s">use</span><span class="nv"> </span><span class="s">one</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span>
                            <span class="s">listed</span><span class="nv"> </span><span class="s">HTTP</span><span class="nv"> </span><span class="s">Paths.</span><span class="nv"> </span><span class="s">Multiple</span><span class="nv"> </span><span class="s">paths</span><span class="nv"> </span><span class="s">are</span><span class="nv"> </span><span class="s">OR'</span><span class="s1">'</span><span class="s">d</span><span class="nv"> </span><span class="s">together.</span>
                            <span class="s">e.g:</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">exact:</span><span class="nv"> </span><span class="s">/foo</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">prefix:</span><span class="nv"> </span><span class="s">/bar</span><span class="nv"> </span><span class="s">NOTE:</span><span class="nv"> </span><span class="s">Each</span><span class="nv"> </span><span class="s">entry</span><span class="nv"> </span><span class="s">may</span>
                            <span class="s">ONLY</span><span class="nv"> </span><span class="s">specify</span><span class="nv"> </span><span class="s">either</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">`exact`</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">`prefix`</span><span class="nv"> </span><span class="s">match.</span><span class="nv"> </span><span class="s">The</span>
                            <span class="s">validator</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">check</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">it.'</span>
                          <span class="na">items</span><span class="pi">:</span>
                            <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">HTTPPath</span><span class="nv"> </span><span class="s">specifies</span><span class="nv"> </span><span class="s">an</span><span class="nv"> </span><span class="s">HTTP</span><span class="nv"> </span><span class="s">path</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">match.</span>
                              <span class="s">It</span><span class="nv"> </span><span class="s">may</span><span class="nv"> </span><span class="s">be</span><span class="nv"> </span><span class="s">either</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">form:</span><span class="nv"> </span><span class="s">exact:</span><span class="nv"> </span><span class="s">&lt;path&gt;:</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">matches</span>
                              <span class="s">the</span><span class="nv"> </span><span class="s">path</span><span class="nv"> </span><span class="s">exactly</span><span class="nv"> </span><span class="s">or</span><span class="nv"> </span><span class="s">prefix:</span><span class="nv"> </span><span class="s">&lt;path-prefix&gt;:</span><span class="nv"> </span><span class="s">which</span><span class="nv"> </span><span class="s">matches</span>
                              <span class="s">the</span><span class="nv"> </span><span class="s">path</span><span class="nv"> </span><span class="s">prefix'</span>
                            <span class="na">properties</span><span class="pi">:</span>
                              <span class="na">exact</span><span class="pi">:</span>
                                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                              <span class="na">prefix</span><span class="pi">:</span>
                                <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                      <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                    <span class="na">icmp</span><span class="pi">:</span>
                      <span class="na">description</span><span class="pi">:</span> <span class="s">ICMP is an optional field that restricts the rule</span>
                        <span class="s">to apply to a specific type and code of ICMP traffic.  This</span>
                        <span class="s">should only be specified if the Protocol field is set to "ICMP"</span>
                        <span class="s">or "ICMPv6".</span>
                      <span class="na">properties</span><span class="pi">:</span>
                        <span class="na">code</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">Match on a specific ICMP code.  If specified,</span>
                            <span class="s">the Type value must also be specified. This is a technical</span>
                            <span class="s">limitation imposed by the kernel's iptables firewall,</span>
                            <span class="s">which Calico uses to enforce the rule.</span>
                          <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                        <span class="na">type</span><span class="pi">:</span>
                          <span class="na">description</span><span class="pi">:</span> <span class="s">Match on a specific ICMP type.  For example</span>
                            <span class="s">a value of 8```</span>

<span class="s">执行初始化 `Calico`命令</span>

<span class="err">```</span><span class="s">bash</span>
<span class="s">kubectl apply -f calico.yaml</span>
</code></pre></div></div>

<h2 id="安装-helm-应用">安装 Helm 应用</h2>

<p>这里使用 Helm 3，注意安装脚本下载最新版本</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-fsSL</span> <span class="nt">-o</span> get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
<span class="nb">chmod </span>700 get_helm.sh
./get_helm.sh
</code></pre></div></div>

<h2 id="安装-storageclass">安装 StorageClass</h2>

<p>默认情况下，可以安装 K8s 默认 localdisk 作为默认存储，这里采用开源项目 Hwameistor 用作本地磁盘管理。</p>

<blockquote>
  <p>项目介绍： <a href="https://hwameistor.io">https://hwameistor.io</a>
安装指引： <a href="https://hwameistor.io/cn/docs/quick_start/install/deploy">https://hwameistor.io/cn/docs/quick_start/install/deploy</a></p>
</blockquote>

<h3 id="安装-helm-仓库">安装 Helm 仓库</h3>

<p>Hwameistor 依赖 Helm 进行安装，所以事先 需要完成 Helm 应用的安装</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm repo add hwameistor http://hwameistor.io/hwameistor

helm repo update hwameistor

helm pull hwameistor/hwameistor <span class="nt">--untar</span>
</code></pre></div></div>

<h3 id="安装-hwameistior-应用">安装 HwameiStior 应用</h3>

<p>使用镜像仓库安装，要切换镜像仓库的镜像，请使用 –set 更改这两个参数值：<code class="language-plaintext highlighter-rouge">global.k8sImageRegistry</code> 和 <code class="language-plaintext highlighter-rouge">global.hwameistorImageRegistry</code></p>
<blockquote>
  <p>注意默认的镜像仓库 quay.io 和 ghcr.io。如果无法访问，可尝试使用 DaoCloud 提供的镜像源 quay.m.daocloud.io 和 ghcr.m.daocloud.io</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>helm <span class="nb">install </span>hwameistor ./hwameistor <span class="se">\</span>
    <span class="nt">-n</span> hwameistor <span class="nt">--create-namespace</span> <span class="se">\</span>
    <span class="nt">--set</span> global.k8sImageRegistry<span class="o">=</span>k8s-gcr.m.daocloud.io <span class="se">\</span>
    <span class="nt">--set</span> global.hwameistorImageRegistry<span class="o">=</span>ghcr.m.daocloud.io
</code></pre></div></div>

<p>检查 Hwameistor 的全部 Pod 状态</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nt">-n</span> hwameistor get pod
NAME                                                       READY   STATUS
hwameistor-local-disk-csi-controller-665bb7f47d-6227f      2/2     Running
hwameistor-local-disk-manager-5ph2d                        2/2     Running
hwameistor-local-disk-manager-jhj59                        2/2     Running
hwameistor-local-disk-manager-k9cvj                        2/2     Running
hwameistor-local-disk-manager-kxwww                        2/2     Running
hwameistor-local-storage-csi-controller-667d949fbb-k488w   3/3     Running
hwameistor-local-storage-csqqv                             2/2     Running
hwameistor-local-storage-gcrzm                             2/2     Running
hwameistor-local-storage-v8g7t                             2/2     Running
hwameistor-local-storage-zkwmn                             2/2     Running
hwameistor-scheduler-58dfcf79f5-lswkt                      1/1     Running
hwameistor-webhook-986479678-278cr                         1/1     Running
</code></pre></div></div>

<blockquote>
  <p>local-disk-manager 和 local-storage 是 DaemonSet。在每个 Kubernetes 节点上都应该有一个 DaemonSet Pod。</p>
</blockquote>

<p>等到全部状态正常后，可进行后续操作，检查 <code class="language-plaintext highlighter-rouge">StorageClass</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get storageclass hwameistor-storage-lvm-hdd
NAME                                   PROVISIONER         RECLAIMPOLICY
hwameistor-storage-lvm-hdd <span class="o">(</span>default<span class="o">)</span>   lvm.hwameistor.io   Delete
</code></pre></div></div>

<h3 id="检查-lockdisknode和-lockdisk">检查 <code class="language-plaintext highlighter-rouge">LockDiskNode</code>和 <code class="language-plaintext highlighter-rouge">LockDisk</code></h3>

<p>默认在使用的磁盘状态应该 <code class="language-plaintext highlighter-rouge">PHASE</code> 展示位 <code class="language-plaintext highlighter-rouge">Bound</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get localdisknodes
NAME               NODEMATCH          PHASE
master01-k8s-com   master01-k8s-com   Bound
node01-k8s-com     node01-k8s-com     Bound
node02-k8s-com     node02-k8s-com     Bound

<span class="nv">$ </span>kubectl get localdisks
NAME                   NODEMATCH          CLAIM              PHASE
master01-k8s-com-vda   master01-k8s-com                      Bound
master01-k8s-com-vdb   master01-k8s-com   master01-k8s-com   Bound
node01-k8s-com-vda     node01-k8s-com                        Bound
node01-k8s-com-vdb     node01-k8s-com     node01-k8s-com     Bound
node02-k8s-com-vda     node02-k8s-com                        Bound
node02-k8s-com-vdb     node02-k8s-com     node02-k8s-com     Bound
</code></pre></div></div>

<h3 id="设置默认的-storageclass">设置默认的 <code class="language-plaintext highlighter-rouge">StorageClass</code></h3>

<p>这个对应的 <code class="language-plaintext highlighter-rouge">storageclasses</code>增加标识为默认的 <code class="language-plaintext highlighter-rouge">annotations</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl patch storageclasses.storage.k8s.io hwameistor-storage-lvm-hdd <span class="nt">-p</span> <span class="s1">'{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}'</span>
</code></pre></div></div>

<h3 id="创建存储池">创建存储池</h3>

<p>使用下方的命令创建对应的存储池，注意替换对应的 <code class="language-plaintext highlighter-rouge">nodeName</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>helm template ./hwameistor <span class="se">\</span>
   <span class="nt">-s</span> templates/post-install-claim-disks.yaml <span class="se">\</span>
   <span class="nt">--set</span> <span class="nv">storageNodes</span><span class="o">=</span><span class="s1">'{master01-k8s-com,node01-k8s-com,node02-k8s-com}'</span> <span class="se">\</span>
   | kubectl apply <span class="nt">-f</span> -
</code></pre></div></div>

<blockquote>
  <p>创建成功后，查看本地磁盘的 <code class="language-plaintext highlighter-rouge">ldc</code>，应该全部是 <code class="language-plaintext highlighter-rouge">Bound</code></p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get ldc
</code></pre></div></div>

<h2 id="安装-metrics-server">安装 <code class="language-plaintext highlighter-rouge">Metrics server</code></h2>

<p>接下来需要安装的 DCE5.0 需要安装 <code class="language-plaintext highlighter-rouge">metrics-server</code>，将下方的文件内容保存为 <code class="language-plaintext highlighter-rouge">metrics-server.yaml</code></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
    <span class="s">rbac.authorization.k8s.io/aggregate-to-admin</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="s">rbac.authorization.k8s.io/aggregate-to-edit</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="s">rbac.authorization.k8s.io/aggregate-to-view</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">system:aggregated-metrics-reader</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">metrics.k8s.io</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">pods</span>
  <span class="pi">-</span> <span class="s">nodes</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
  <span class="pi">-</span> <span class="s">list</span>
  <span class="pi">-</span> <span class="s">watch</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">system:metrics-server</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">nodes/metrics</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s2">"</span><span class="s">"</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">pods</span>
  <span class="pi">-</span> <span class="s">nodes</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
  <span class="pi">-</span> <span class="s">list</span>
  <span class="pi">-</span> <span class="s">watch</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server-auth-reader</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Role</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">extension-apiserver-authentication-reader</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server:system:auth-delegator</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">system:auth-delegator</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">system:metrics-server</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">system:metrics-server</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ports</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">https</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">443</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
    <span class="na">targetPort</span><span class="pi">:</span> <span class="s">https</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">strategy</span><span class="pi">:</span>
    <span class="na">rollingUpdate</span><span class="pi">:</span>
      <span class="na">maxUnavailable</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">args</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">--cert-dir=/tmp</span>
        <span class="pi">-</span> <span class="s">--secure-port=4443</span>
        <span class="pi">-</span> <span class="s">--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname</span>
        <span class="pi">-</span> <span class="s">--kubelet-use-node-status-port</span>
        <span class="pi">-</span> <span class="s">--metric-resolution=15s</span>
        <span class="pi">-</span> <span class="s">--kubelet-insecure-tls</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">registry.cn-hangzhou.aliyuncs.com/chenby/metrics-server:v0.6.2</span>
        <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
        <span class="na">livenessProbe</span><span class="pi">:</span>
          <span class="na">failureThreshold</span><span class="pi">:</span> <span class="m">3</span>
          <span class="na">httpGet</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s">/livez</span>
            <span class="na">port</span><span class="pi">:</span> <span class="s">https</span>
            <span class="na">scheme</span><span class="pi">:</span> <span class="s">HTTPS</span>
          <span class="na">periodSeconds</span><span class="pi">:</span> <span class="m">10</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">4443</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">https</span>
          <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
        <span class="na">readinessProbe</span><span class="pi">:</span>
          <span class="na">failureThreshold</span><span class="pi">:</span> <span class="m">3</span>
          <span class="na">httpGet</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s">/readyz</span>
            <span class="na">port</span><span class="pi">:</span> <span class="s">https</span>
            <span class="na">scheme</span><span class="pi">:</span> <span class="s">HTTPS</span>
          <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">20</span>
          <span class="na">periodSeconds</span><span class="pi">:</span> <span class="m">10</span>
        <span class="na">resources</span><span class="pi">:</span>
          <span class="na">requests</span><span class="pi">:</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">200Mi</span>
        <span class="na">securityContext</span><span class="pi">:</span>
          <span class="na">allowPrivilegeEscalation</span><span class="pi">:</span> <span class="no">false</span>
          <span class="na">readOnlyRootFilesystem</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">runAsNonRoot</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">runAsUser</span><span class="pi">:</span> <span class="m">1000</span>
        <span class="na">volumeMounts</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/tmp</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">tmp-dir</span>
      <span class="na">nodeSelector</span><span class="pi">:</span>
        <span class="s">kubernetes.io/os</span><span class="pi">:</span> <span class="s">linux</span>
      <span class="na">priorityClassName</span><span class="pi">:</span> <span class="s">system-cluster-critical</span>
      <span class="na">serviceAccountName</span><span class="pi">:</span> <span class="s">metrics-server</span>
      <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">emptyDir</span><span class="pi">:</span> <span class="pi">{}</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">tmp-dir</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apiregistration.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">APIService</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">k8s-app</span><span class="pi">:</span> <span class="s">metrics-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">v1beta1.metrics.k8s.io</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">group</span><span class="pi">:</span> <span class="s">metrics.k8s.io</span>
  <span class="na">groupPriorityMinimum</span><span class="pi">:</span> <span class="m">100</span>
  <span class="na">insecureSkipTLSVerify</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">service</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">metrics-server</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
  <span class="na">version</span><span class="pi">:</span> <span class="s">v1beta1</span>
  <span class="na">versionPriority</span><span class="pi">:</span> <span class="m">100</span>
</code></pre></div></div>

<p>执行安装命令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl apply <span class="nt">-f</span>  metrics-server.yaml
</code></pre></div></div>

<p>安装成功后，通过下方命令可以成功的看到 node 节点的资源利用情况</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl top node
NAME               CPU<span class="o">(</span>cores<span class="o">)</span>   CPU%   MEMORY<span class="o">(</span>bytes<span class="o">)</span>   MEMORY%
master01-k8s-com   218m         5%     5610Mi          35%
node01-k8s-com     445m         11%    9279Mi          59%
node02-k8s-com     464m         11%    9484Mi          60%
</code></pre></div></div>

<h2 id="安装-dce-社区版">安装 DCE 社区版</h2>

<p>以下操作步骤将会带着您一步一步完成 DaoCloud Enterprise 5.0 社区版的完整安装，注意安装细节</p>

<ul>
  <li>官方文档介绍 <a href="https://docs.daocloud.io/">https://docs.daocloud.io/</a></li>
  <li>安装依赖项 <a href="https://docs.daocloud.io/install/install-tools/">https://docs.daocloud.io/install/install-tools/</a></li>
  <li>在线安装标准社区版 <a href="https://docs.daocloud.io/install/community/k8s/online/#_1">https://docs.daocloud.io/install/community/k8s/online/</a></li>
</ul>

<h3 id="安装基础依赖">安装基础依赖</h3>

<p>DCE 已经提供了一键安装的离线工具依赖包，经过测试比较稳定的运行在 <code class="language-plaintext highlighter-rouge">CentOS 7</code> 和 <code class="language-plaintext highlighter-rouge">CentOS 8</code>，如果您也是这样两个系统，可以使用下方脚本。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-LO</span> https://proxy-qiniu-download-public.daocloud.io/DaoCloud_Enterprise/dce5/install_prerequisite.sh
<span class="nb">chmod</span> +x install_prerequisite.sh
<span class="nb">sudo </span>bash install_prerequisite.sh online community
</code></pre></div></div>

<p>也可以选择手动安装这些：</p>

<ul>
  <li>podman</li>
  <li>helm ≥ 3.9.4</li>
  <li>skopeo ≥ 1.9.2</li>
  <li>kind</li>
  <li>kubectl ≥ 1.22.0</li>
  <li>yq ≥ 4.27.5</li>
  <li>minio client</li>
</ul>

<h3 id="下载-dce5-installer-安装器">下载 dce5-installer 安装器</h3>

<p>注意，需要在 Master 节点 来进行 dce5-installer 的安装，建议直接下载到当前节点</p>
<blockquote>
  <p>获取最新版本的查看界面： <a href="https://docs.daocloud.io/download/dce5/#_1">https://docs.daocloud.io/download/dce5/#_1</a></p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 假定 VERSION 为 v0.3.28 , 使用上方链接获取最新版本</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">VERSION</span><span class="o">=</span>v0.3.28
<span class="nv">$ </span>curl <span class="nt">-Lo</span> ./dce5-installer  https://proxy-qiniu-download-public.daocloud.io/DaoCloud_Enterprise/dce5/dce5-installer-<span class="nv">$VERSION</span>

<span class="nv">$ </span><span class="nb">chmod</span> +x dce5-installer
</code></pre></div></div>

<blockquote>
  <p>如果<code class="language-plaintext highlighter-rouge">proxy-qiniu-download-public.daocloud.io</code> 链接失效，使用 <code class="language-plaintext highlighter-rouge">qiniu-download-public.daocloud.io</code></p>
</blockquote>

<h3 id="安装配置文件-可选">安装配置文件 [可选]</h3>

<p>将下方的配置文件内容保存为 <code class="language-plaintext highlighter-rouge">clusterconfig.yaml</code>，如果使用 <code class="language-plaintext highlighter-rouge">NodePort</code>的方式安装则不需要特定指定配置文件</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">provision.daocloud.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterConfig</span>
<span class="na">spec</span><span class="pi">:</span>
 <span class="na">loadBalancer</span><span class="pi">:</span> <span class="s">metallb</span>
 <span class="na">istioGatewayVip</span><span class="pi">:</span> <span class="s">10.6.229.10/32</span>  <span class="c1"># 这是 Istio gateway 的 VIP，也会是 DCE 5.0 的控制台的浏览器访问 IP</span>
 <span class="na">insightVip</span><span class="pi">:</span> <span class="s">10.6.229.11/32</span>  <span class="c1"># 这是 Global 集群的 Insight-Server 采集子集群的监控指标的网络路径用的 VIP</span>
</code></pre></div></div>

<blockquote>
  <p>如果使用配置文件，注意需要 事先安装 <code class="language-plaintext highlighter-rouge">MetaLB</code>，这一部分需要自行完成。</p>
</blockquote>

<h3 id="执行安装">执行安装</h3>

<p>根据需求选择下方的安装文件，如果选择指定配置文件内的</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 无配置文件</span>
<span class="nv">$ </span>./dce5-installer install-app

<span class="c"># 有指定 loadBalancer</span>
<span class="nv">$ </span>./dce5-installer install-app <span class="nt">-c</span> clusterConfig.yaml
</code></pre></div></div>

<h3 id="安装完成">安装完成</h3>

<p>如果看到下方的页面，说明安装成功了；默认账号密码为： <code class="language-plaintext highlighter-rouge">admin/changeme</code></p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/J9lNN0.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" /></p>

<h3 id="重定向登录页-portal-反向代理">重定向登录页 Portal 反向代理</h3>

<p>一般情况下，我们安装后的集群访问地址是一个内网地址，当我们需要集群页面开放到公网访问时，会发现登录页会自动重定向内网地址，这是因为 DCE 5.0 反向代理服务器地址默认是安装时的配置；需要作出以下更新：</p>

<p>设置环境变量，方便在后续中使用</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 您的反向代理地址，例如：`export DCE_PROXY="https://demo-alpha.daocloud.io"`</span>
<span class="nb">export </span><span class="nv">DCE_PROXY</span><span class="o">=</span><span class="s2">"https://domain:port"</span>

<span class="c"># helm --set 参数备份文件</span>
<span class="nb">export </span><span class="nv">GHIPPO_VALUES_BAK</span><span class="o">=</span><span class="s2">"ghippo-values-bak.yaml"</span>

<span class="c"># 获取当前 ghippo 的版本号</span>
<span class="nb">export </span><span class="nv">GHIPPO_HELM_VERSION</span><span class="o">=</span><span class="si">$(</span>helm get notes ghippo <span class="nt">-n</span> ghippo-system | <span class="nb">grep</span> <span class="s2">"Chart Version"</span> | <span class="nb">awk</span> <span class="nt">-F</span> <span class="s1">': '</span> <span class="s1">'{ print $2 }'</span><span class="si">)</span>
</code></pre></div></div>

<p>更新 Helm repo</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm repo update ghippo
</code></pre></div></div>

<p>备份 –set 参数</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm get values ghippo <span class="nt">-n</span> ghippo-system <span class="nt">-o</span> yaml <span class="o">&gt;</span> <span class="k">${</span><span class="nv">GHIPPO_VALUES_BAK</span><span class="k">}</span>
</code></pre></div></div>

<p>使用 vim 命令编辑并保存</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vim <span class="k">${</span><span class="nv">GHIPPO_VALUES_BAK</span><span class="k">}</span>

USER-SUPPLIED VALUES:
...
global:
  ...
  reverseProxy: <span class="k">${</span><span class="nv">DCE_PROXY</span><span class="k">}</span> <span class="c"># 只需要修改这一行</span>

</code></pre></div></div>

<p>使用 heml upgrade 更新配置</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm upgrade ghippo ghippo/ghippo <span class="se">\</span>
  <span class="nt">-n</span> ghippo-system <span class="se">\</span>
  <span class="nt">-f</span> <span class="k">${</span><span class="nv">GHIPPO_VALUES_BAK</span><span class="k">}</span> <span class="se">\</span>
  <span class="nt">--version</span> <span class="k">${</span><span class="nv">GHIPPO_HELM_VERSION</span><span class="k">}</span>
</code></pre></div></div>

<p>使用 kubectl 重启全局管理 Pod，使配置生效</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl rollout restart deploy/ghippo-apiserver <span class="nt">-n</span> ghippo-system
kubectl rollout restart statefulset/ghippo-keycloak <span class="nt">-n</span> ghippo-system
</code></pre></div></div>

<h3 id="申请社区版免费体验">申请社区版免费体验</h3>

<ul>
  <li>申请页面 <a href="https://qingflow.com/f/58604bf8">https://qingflow.com/f/58604bf8</a></li>
  <li>申请操作教程 <a href="https://docs.daocloud.io/dce/license0/">https://docs.daocloud.io/dce/license0/</a></li>
</ul>

        </div>

        <!-- <div id="related">
            <h2>Related Posts</h2>
            <ul class="posts"> 当一篇文章有两个 tag 一样时显示
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </ul>
        </div> -->

        <hr>
        <nav>
            <ul class="pager">
                
                <li class="previous"><a href="/post/2022/11/cskefu-opensource-project.html" title="开源项目 - 春松客服">&larr;
                    Previous（前一篇）</a></li>
                
                <!-- <li><a href="/static/archive.html">Archive（目录）</a></li> -->
                <li><a href="/archive.html">Archive（目录）</a></li>
                
                <li class="next"><a href="/post/2022/12/Skoala-Install-Dce5.html" title="DCE5-Skoala 安装教程">Next（后一篇） &rarr;</a></li>
                
            </ul>
        </nav>
    </div>

    <div class="col-xs-12 col-md-4">
        
        <ul class="tag_box">
            <li><span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span></li>
            
            


  
     
    	
      <li><a href="/categories.html#Kubernetes">
    		Kubernetes <span>15</span>
    	</a></li>
    
  



        </ul>
        

        
        <div id="floatbox">
            <div id="post-directory-module">
                <div id="toc"></div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="/assets/themes/evjekylltheme/toc.js"></script>
<script>!function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);</script>


			</div>

		</div>

    <footer>
      <div class="container">
        <div class="row mobilepadding">
          			<hr>
      &copy; 2023 船长. Powered by <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Theme Creator <a href="https://github.com/einverne" target="_blank" title="Ein Verne's GitHub Repos">Ein Verne</a> . Host on <a href="https://github.com/samzong/samzong.me" target="_blank" title="Samzong's GitHub Repos">Github</a> .
      <br><br>
      </div>
    </div>
    </footer>

    




	<script async type="text/javascript" src="/assets/themes/evjekylltheme/bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script async type="text/javascript" src="/assets/themes/evjekylltheme/webcore.js"></script>

 </body>
</html>

