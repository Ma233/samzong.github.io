<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Samzong | SAMZONG</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Samzong | SAMZONG"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/blog"><link data-rh="true" rel="alternate" href="https://samzong.me/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://samzong.me/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SAMZONG RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SAMZONG Atom Feed"><link rel="stylesheet" href="/assets/css/styles.44c5c7e5.css">
<link rel="preload" href="/assets/js/runtime~main.a4192aa2.js" as="script">
<link rel="preload" href="/assets/js/main.be9b3ddb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/13/google-sou-suo-ji-qiao-zheng-li">Google 搜索技巧整理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/02/21/ketbrains-ji-huo-fu-wu-qi">在线服务器激活 Ketbrains</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/16/raycast">Raycast 你的年度报告已到达</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/15/Skoala-Install-Dce5">DCE5-Skoala 安装教程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/06/dce5">保姆式安装 DCE5.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/28/cskefu-opensource-project">春松客服</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/23/what-is-hukou">What is Hukou</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/20/Copy-To-Markdwon">Copy to Markdown</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/16/dubbo-ji-chu-zhi-shi">Dubbo 基础知识梳理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/10/panads-fill-nan-value-to-zero">Panads fill NaN value to Zero</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/22/redash-for-docker-bu-shu">Redash for Docker 部署</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/18/jwt-nei-zhi-de-fang-shi">JWT 内置的方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/06/ji-ji-fu-ji-ji">唧唧复唧唧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/04/zi-bei-yu-chao-yue">自卑与超越</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/28/gitlab-forked-ru-he-gen-sui-upstream-zhu-ku">GitLab Forked 如何跟随 upstream 主库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/27/kafka-jing-pin-diao-yan-ji-gong-neng-she-ji">Kafka 调研及功能设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/22/poetry-shi-yong-bi-ji">Poetry 使用笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/20/skoala-bu-shu-jiao-cheng">Skoala 部署教程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/18/shi-yong-canal-jin-xing-shu-ju-ku-zeng-liang-tong-bu">使用 canal 进行数据库增量同步</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/12/k8s-xi-lie-nan-bei-liu-liang-he-dong-xi-liu-liang">K8s 系列 南北流量和东西流量</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/17/docker-for-mac-wang-luo-ji-qiao">Docker for Mac 网络技巧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/15/wa-er-deng-hu">瓦尔登湖</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/08/10/contour-xue-xi-bi-ji">Contour 学习笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/24/tong-guo-pipreqs-huo-qu-dang-qian-xiang-mu-di-yi-lai-ku">通过 pipreqs 获取当前项目的依赖库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/22/contour-envoy-zhi-biao">Contour和Envoy指标介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/22/jq-ming-ling-xing-json-chu-li-shen-qi">jq 命令行 Json 处理神器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/21/wei-fu-wu-yin-qing-wang-guan-neng-li-jie-shao">微服务引擎网关能力介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/18/bi-guan-bei-zhan-11-yue">闭关备战 11 月</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/07/18/i18n-shi-yong-gou-jian">i18n 使用构建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/29/mac-shang-an-zhuang-ruan-jian-de-fang-shi">Mac 上安装软件的方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/06/18/httpproxy-api-chuang-jian">HTTPProxy API 创建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/28/hexo-admonition">Hexo 增加 admonition 样式支持</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/18/gitlab-fa-song-qi-wei-ji-qi-ren-xiao-xi">Gitlab 发送企微机器人消息</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/17/guo-nei-huan-jing-da-jian-macos-k8s-kai-fa-huan-jing">国内环境搭建 MacOS K8s 开发环境</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/17/kubernetes-operator">Kubernetes Operator</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/11/contour-she-ji-li-nian">Contour 设计理念</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/07/macos-yin-cang-dock-lan-zhong-te-ding-ying-yong">MacOS 隐藏 Dock 栏中特定应用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/06/man-zu-yu-qi-de-wen-dang-zhan-mkdocs">满足预期的文档站 Mkdocs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/06/a-li-yun-yun-yuan-sheng-wang-guan">阿里云云原生网关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/06/teng-xun-yun-wei-fu-wu-wang-guan">腾讯云微服务网关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/03/alfred-workflow-tui-jian">Alfred Workflow 推荐</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/03/youtube-dl-xia-zai-youtube-shi-pin">youtube-dl 下载 YouTube 视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/05/03/tao-bao-python-sdk-you-hua-zhi-chi-python3">淘宝 Python SDK 优化支持 Python3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/24/kubernetes-xue-xi-zhi-lu">kubernetes 学习之路</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/22/github-pages-de-miao-yong">GitHub Pages 的妙用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/21/kubernetes-bu-shu-cuo-wu-jie-jue-hui-zong">Kubernetes 部署错误解决汇总</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/19/xu-yao-liao-jie-de-jing-pin">需要了解的 K8s 发行版本</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/18/cka-kao-shi-zhun-bei">CKA 考试准备</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/17/Docker-Run-at-Apple-Silicon-M1">Dockerfile Run at M1 processor build failed</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/17/python-request-install-pip-error">python Request install pip error</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/16/metabase-shang-shou-shi-yong-jar">Metabase 上手 - 使用 Jar 运行</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/15/sql-dui-shi-jian-zheng-dian-de-chu-li">SQL 对时间整点的处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/14/tao-bao-python-sdk-you-hua-zhi-chi-python3">淘宝 Python SDK 优化支持 Python3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/14/python-pip-guo-nei-jia-su">Python Pip 国内加速</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/11/git-xiu-fu-li-shi-cuo-wu-de-author-xin-xi">Git 修复历史错误的 Author 信息</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/04/10/awsome-telegram-bot">Awsome Telegram Bot</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/28/Javascript-Tips">Javascript Tips</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/27/awesome-hexo-plugins">Awesome Hexo Plugin</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/27/poetry-shi-yong-bi-ji">Poetry 使用笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/27/python-duo-ban-ben-guan-li-gong-ju">Pyenv Python 多版本管理利器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/03/11/xin-de-mu-biao">2022 新的目标</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/02/24/fastapi-shi-yong-wen-dang">FastAPI 使用文档</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/02/11/yi-ge-python-xiang-mu-di-mu-lu-jie-gou-she-ji">Python 项目的目录结构设计</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/21/python3-wen-ben-chu-li-strip-split">Python3 文本处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/20/clickhouse-chang-yong-han-shu-shi-yong">ClickHouse 常用函数使用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/04/mysql-case-when">MySQL Case WHEN</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/03/apollo-ru-he-shi-xian-pei-zhi-re-fa-bu">Apollo 如何实现配置热发布</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/03/get-current-timestamp">get current timestamp</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/01/03/python-flask-form">python flask form</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/29/git-zhong-duan-clone-jia-su">Github 使用 SSH 拉取代码加速</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/19/ding-ding-nei-wang-chuan-tou-gong-ju">钉钉内网穿透工具</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/17/creating-dataframe-using-list">Creating DataFrame using list</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/17/shi-yong-ding-ding-san-fang-shou-quan-deng-lu">使用钉钉三方授权登录</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/11/03/metabase-cai-keng-tiao-zhuan-lian-jie-de-liu-lan-qi-huan-cun">Metabase 踩坑：跳转链接的浏览器缓存</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/10/19/python-version-manage-pyenv">Python Version Manage `pyenv`</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/10/12/macos-10.15-kai-qi-hidpi">MacOS 10.15 开启 HiDPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/24/kuai-su-liao-jie-lian-jie-shu-ju-ku">快速了解连接数据库</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/24/node-nvm">node nvm</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/05/dataframe-pandas">dataframe - Pandas</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/09/05/shi-yong-python3-ge-shi-hua-da-xing-json-wen-jian">使用 Python3 格式化大型 json 文件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/25/python-zhua-chu-lai-sui-ji-xia-zai-ji-lu">Python 抓出来随机下载记录</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/09/mysql-regexp-huo-xue-huo-yong">MySQL REGEXP 活学活用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/08/08/chang-yong-sql">常用 SQL-拼接日期</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/07/22/zai-gu-ge-liu-lan-qi-zhong-an-zhuang-.crx-cha-jian">在谷歌浏览器中安装.crx 插件</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/07/22/zhi-hu-zhou-kan-dan-shen-hui-shang-yin">知乎周刊・单身会上瘾</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/06/25/iphone-ipad-bu-yue-yu-an-zhuang-jiu-ban-cheng-xu">iPhone/iPad 不越狱安装旧版程序</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/06/12/mac-ru-he-kuai-su-lu-zhi-gif-xiao-shi-pin">Mac 如何快速录制 GiF 小视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/04/18/kuai-su-liao-jie-mysql-shi-jian-fan-wei-can-shu">快速了解 MySQL 时间范围参数</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/04/16/hql-sql-shi-jian-chu-li">HQL/SQL时间处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/27/zhi-hu-zhou-kan-·-qiao-bu-si-wang-shi">知乎周刊·乔布斯往事</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/12/how-to-set-container-auto-restarting-with-docker">how to set container auto-restarting with docker</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ai-ni-jiu-xiang-ai-sheng-ming">爱你就像爱生命</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ju-ying-guo">巨婴国</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/macos-10.15-kai-qi-hidpi">macOS 10.15 开启 HiDPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/qi-shi-ni-suo-zhi-dao-de-shi-jie-hen-mo-sheng">其实，你所知道的世界很陌生</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ren-jian-shi-ge">人间失格</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/ren-sheng-de-jia-suo">人生的枷锁</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/san-sheng-san-shi-shi-li-tao-hua">三生三世十里桃花</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/wei-chuan-de-hong-jia-yi-chen-fu">未穿的红嫁衣·沉浮</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/wo-men-sheng-huo-zai-ju-da-de-cha-ju-li">我们生活在巨大的差距里</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/wo-suo-li-jie-de-sheng-huo">我所理解的生活</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/yuan-you-ren-pei-ni-dian-pei-liu-li">愿有人陪你颠沛流离</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/10/zui-hou-de-shua-hou-ren">最后的耍猴人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/macos-terminal-san-jian-ke">macOs Terminal 三剑客</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/pprint-beautiful-json-format">pprint beautiful json format</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/python3-traceback">python3 traceback</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/15/requests-post-data-shi-dui-json-xu-yao-te-shu-zhu-yi">requests post data 时对 json 需要特殊注意</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/09/dingtalk-orgbot-sign-generate">dingtalk orgBot sign generate</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/02/07/python-django-bian-xie-gong-gong-mo-kuai-zai-app-zhong-yin-yong">python django 编写公共模块在 app 中引用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/01/20/python-xlsxwriter-xie-ru-excel">python xlsxwriter 写入 excel</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/01/01/year-the-new-start">2021 年 - 全新出发</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/25/jian-cha-nin-de-app-shi-fou-yi-zhi-chi-applesilicon">检查您的 App 是否已支持 AppleSilicon</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/25/mac-tiao-zheng-launchpad-tu-biao-da-xiao">Mac 调整 Launchpad 图标大小</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/13/learn-sqlalchemy">learn sqlalchemy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/09/covert-timestamp2datetime">covert timestamp2datetime</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/08/python-wan-cheng-dou-dian-api-shou-quan">python 完成抖店 API 授权</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/12/03/python3-str-qu-chu-te-ding-nei-rong">python3 str 去除特定内容</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/24/Check-You-Favorites-App-Is-Ready-Apple-Silicon">Check You App readyOnAppleSilicon</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/23/ru-he-zhong-zhi-mac-de-smc">如何重置 Mac 的 SMC</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/18/dai-ma-ge-shi-xiang-guan">代码格式相关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/18/django-lian-shou-xiang-mu">Django 练手项目</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/17/python-re-zheng-ze-biao-da-shi">python re 正则表达式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/16/autoscraper-pa-chong-suo-jian-ji-suo-de">autoscraper 爬虫 所见即所得</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/09/django-chu-shi-hua-project">Django 初始化 project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/06/django-xiu-gai-modules-shi-chu-cuo">Django 修改 modules 时出错</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/06/join-yu-format-bu-tong-de-yong-fa">join 与 format 不同的用法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/05/beautiful-soup-4-shi-yong-ji-qiao">beautiful soup 4 使用技巧</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/11/04/python3-setup.py-help-commands">python3 setup.py --help-commands</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/10/23/use-devtools-encodeurl-&amp;-decodeurl">Use devtools encodeurl &amp; decodeurl</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2020/10/17/mac-shi-yong-ming-ling-guan-bi-he-qi-dong-airport">使用命令关闭和启动 AirPort</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/11/17/mac-jie-jue-oh-my-zsh-zai-zhong-duan-xia-da-kai-huan-man">Mac 下解决 oh-my-zsh 在终端下打开缓慢</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/07/22/mac-xia-homebrew-de-shi-yong">Mac 下 Homebrew 的使用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/07/03/mysql-ming-ling-xing-fu-zhu-mycli">MySQL 命令行辅助 mycli</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2019/01/22/mac-ru-he-kuai-su-lu-zhi-gif-xiao-shi-pin">MacTips 如何快速录制 GiF 小视频</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/11/17/mactips-dan-du-she-zhi-cheng-xu-yu-yan">MacTips 单独设置程序语言</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/08/04/HowTo-Skip-Atlassian-Auth-for-SourceTree">HowTo Skip Atlassian Auth for SourceTree</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/02/28/shi-yong-guo-nei-pypi-yuan-jia-su-pip-an-zhuang">使用国内 pypi 源加速 pip 安装</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2018/01/09/git-shi-yong-gui-fan-liu-cheng">Git 使用规范流程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/12/02/Howto-Install-Redmine-on-Ubuntu-16.04">Howto Install Redmine on Ubuntu 16.04</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/11/15/Howto-use-ssr-on-mac">HowTo Use SSR Service on Mac</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/10/22/iphone:ipad-bu-yue-yu-an-zhuang-jiu-ban-cheng-xu">iPhone/iPad 不越狱安装旧版程序</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/08/12/blazemeter-recoding-jmx">Jmeter 使用 BlazeMeter 为 Jmeter 录制脚本</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/06/02/bai-du-wang-pan-python-ke-hu-duan">bypy 百度网盘 Python 客户端</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/08/04/dong-ping-guo-jia-sen-lin-gong-yuan">东平国家森林公园</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/05/20/wo-lai-dao-zhe-shi-shang">我来到这世上</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/05/15/wannacry-ru-chong-bing-du-shi-jian-ji-xiu-fu-fang-an">Wannacry 蠕虫病毒事件及修复方案</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/18/centos-zeng-jia-xin-ying-pan-gei-gen-wen-jian-xi-tong-kuo-rong">CentOS 增加新硬盘给根文件系统扩容</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/13/HowTo-Install-GitLab">HowTo Install GitLab</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/11/guan-yu-kao-shi">关于考试</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/04/05/HowTo-set-Tomcat-7-automatic-startup-with-CentOS-7">HowTo set Tomcat 7 automatic startup with CentOS 7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/03/23/zai-linux-zhong-duan-shi-yong-ssr-fu-wu-shi-xian-ke-xue-shang-wang">在 Linux 终端使用 SSR 服务实现科学上网</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/03/06/HowTo-install-Zoomdata">HowTo install Zoomdata</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/03/04/si-jie-mo-fang-te-shu-qing-kuang-zhi-chu-li">四阶魔方特殊情况之处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/27/mactips-shi-yong-ming-ling-guan-bi-he-qi-dong-airport">MacTips 使用命令关闭和启动 AirPort</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/27/HowTo-Install-NextCloud">HowTo Install NextCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/22/HowTo-Install-Redmine">HowTo Install Redmine</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/20/HowTo-Upgrade-Your-Ghost-Version">HowTo Upgrade Your Ghost Version</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/19/HowTo-Automatic-Updates-CENTOS-RHEL-Using-YUM">HowTo Automatic Updates CENTOS/RHEL Using YUM</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/02/09/mysql-8-suo-yin-chuang-jian-shan-chu-he-cha-kan">MySQL 索引创建、删除和查看</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/18/HowTo-Monitor-Tomcat-Head-Memory-for-Zabbix">HowTo Monitor Tomcat HeadMemory for Zabbix</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/15/mei-ri-bei-fen-mysql-dan-biao-shu-ju">每日备份 MySQL 单表数据</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/10/sheng-huo-zai-bie-chu">生活在别处</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/07/docker-hub-guo-nei-jia-su">Docker Hub 国内加速</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2017/01/01/wo-de-2017">我的 2017</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/20/HowTo-Mount-OSS-Bucket-On-ECS">HowTo Mount OSS Bucket On ECS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/17/shang-hai-tian-leng-le">上海天冷了</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/17/gao-bie">告别</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/11/xue-zhan-gang-ju-ling">血战钢锯岭</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/08/HowTo-Install-Python3-on-CentOS-6-x">HowTo Install Python3 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/04/HowTo-Reset-MySQL-Root-Password">HowTo Reset MySQL Root Password</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/12/03/tomcat-2-li-yong-jdk-zi-shen-keytool-shi-xian-https">Tomcat 利用 JDK 自身 keytool 实现 HTTPS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/30/aws-use-s3cmd-ming-ling-xing-guan-li-s3-cun-chu">AWS Use s3cmd 命令行管理 S3 存储</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/29/Tomcat-1-java-lang-OutOfMemoryError">Tomcat java.lang.OutOfMemoryError</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/28/HowTo-Install-LNMP-on-CentOS-6-x">HowTo Install LNMP on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/27/shi-jie-shang-zui-mei-yong-de-dong-xi">世界上最没用的东西</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/23/denyhosts-zeng-jia-fu-wu-qi-ssh-hei-ming-dan-ji-zhi">Denyhosts 增加服务器 SSH 黑名单机制</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/11/10/mysql-5-qing-kong-biao-ming-ling-zhi-truncate-yu-delete-qu-bie">MySQL 清空表命令之：truncate 与 delete 区别</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/29/SSH-LINUX-Security-Settings">SSH LINUX Security Settings</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/20/HowTo-Install-PostgreSQL-9-5-on-CentOS-6-x">HowTo Install PostgreSQL 9.5 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/14/xie-de-wei-bo">微博随笔</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/10/14/xie-de-weibo">写的微博</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/09/22/HowTo-Use-pt-query-digest">HowTo Use pt-query-digest</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/09/20/sheng-zhe-gu-du">生者孤独</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/09/19/HowTo-Install-a-Tomcat-Server-7">HowTo Install a Tomcat Server 7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/19/er-shi-si-sui">二十四岁</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/13/Script-Install-LNMP">Use Script Install LNMP</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/04/HowTo-Setup-MariaDB-Galera-Cluster-10-On-CentOS-6-x">HowTo Setup MariaDB Galera Cluster 10 On CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/02/HowTo-Install-Openfire-on-CentOS">HowTo Install Openfire  on CentOS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/02/HowTo-Use-Docker-create-a-Tomcat-Project">HowTo Use Docker create a Tomcat Project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/08/01/ni-hao-ba-yue">你好，八月</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/29/HowTo-Trun-Off-IPv6-in-CentOS-6-x">HowTo Trun Off IPv6 in CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/27/HowTo-Install-KVM-Manage-Server-webvirtmgr">HowTo Install KVM Manage Server webvirtmgr</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/27/yum-zhong-releasever-he-basearch-de-qu-zhi">Yum 中$releasever 和$basearch 的取值</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/27/Manage-Tomcat-Service-Use-Shell-Script">Manage Tomcat Service Use Shell Script</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/24/HowTo-Play-Pokemon-GO-in-China">HowTo Play Pokemon GO in China</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/10/HowTo-Reset-Azure-VM-Linux-Password">HowTo Reset Azure VM Linux Password</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/07/HowTo-Install-Docker-on-CentOS-6-x">HowTo Install Docker on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/07/HowTo-Install-MySQL-5-5-6-7-on-RHEL-CentOS-5-6-7">HowTo Install MySQL 5.5/6/7 on RHEL/CentOS 5/6/7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/07/HowTo-Use-Remi-Install-Redis">HowTo Use Remi Install Redis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/07/05/HowTo-Use-Fuse-sshfs-to-Mount-Remote-Filesystems">HowTo Use Fuse-sshfs to Mount Remote Filesystems</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/06/16/mysql-1-chang-yong-you-hua">MySQL 常用配置优化</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/06/16/shi-yong-mosh-dai-ti-ssh-lian-jie-fu-wu-qi">使用 mosh 代替 ssh 连接服务器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/24/Azure-HowTo-Use-Azure-CLI-on-Mac">HowTo Use Azure CLI on Mac</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/24/Azure-3-HowTo-Use-Azure-CLI-on-Mac">Azure CLI Import AcountInfo</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/20/HowTo-Monitoring-MySQL-server-for-Zabbix">HowTo Monitoring MySQL server for Zabbix</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/18/HowTo-Install-CloudStack-4-8-on-CentOS-6-x">HowTo Install CloudStack 4.8 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/15/openstak-jie-shao">OpenStak 介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/12/azure-4-chuang-jian-he-shi-yong-azure-redis-cache">创建和使用 Azure Redis Cache</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/HowTo-Install-Fabric-on-CentOS-7-x">HowTo Install Fabric on CentOS 7.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/centos-7-2-xi-tong-fu-wu-guan-li-fang-shi">CentOS 系统服务管理方式</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/08/12/HowTo-Automatic-EasyBackup-MysqlDB">CentOS 修改系统主机名</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/centos-7-1-xiu-gai-xi-tong-zhu-ji-ming">CentOS 修改系统主机名</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/05/mysql-3-mysqldump-chang-yong-can-shu">mysqldump 常用参数</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/05/04/HowTo-Install-Python-2-7-8-on-CentOS-6-x">HowTo Install Python 2.7.8 on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/27/HowTo-Add-Piwik-Tracking-to-Ghost">HowTo Add Piwik Tracking to Ghost</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/27/HowTo-Install-piwik-with-nginx-on-centos-6-x">HowTo Install piwik with nginx on centos 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/20/shi-yong-sourecetree-guan-li-ni-de-git-xiang-mu">使用 SoureceTree 管理你的 git 项目</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/09/mac-1-tiao-zheng-launchpad-tu-biao-da-xiao">MacTips 调整 Launchpad 图标大小</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/08/mac-2-jie-jue-oh-my-zsh-zai-zhong-duan-xia-da-kai-huan-man">MacTips 解决 oh-my-zsh 在 Terminal 下打开缓慢</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/04/01/ru-he-zai-centos-6-an-zhuang-geng-gao-ban-ben-de-php">如何在 CentOS 6 安装更高版本的 PHP</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/29/mysql-4-mysql-shu-ju-ku-ji-chu">MySQL 数据库使用基础</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/29/linux-zhong-de-san-ge-te-shu-quan-xian">Linux 中的三个特殊权限</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/29/centos-6-1-shi-yong-createrepo-da-jian-ben-di-yuan">CentOS 使用 createrepo 搭建本地源</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/27/HowTo-Install-MongoDB-on-CentOS-6-x">HowTo Install MongoDB  on CentOS 6.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/24/zai-centos-zhong-pei-zhi-sftp-huan-jing">在 CentOS 中配置 SFTP 环境</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/24/mysql-6-li-yong-linux-ji-hua-ren-wu-ding-shi-tong-bu-mysql">利用 Linux 计划任务定时同步 MySQL</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/23/linux-bi-shi-shi-ti">Linux 笔试试题</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/22/mysql-2-kai-qi-man-ri-zhi-you-hua">MySQL 开启慢日志优化</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/19/centos-6-2-chu-shi-an-zhuang-ji-ben-you-hua-cao-zuo">CentOS 初始安装基本优化操作</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/18/li-jie-linux-de-ying-lian-jie-yu-ruan-lian-jie">理解 Linux 的硬链接与软链接</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/07/long-zu-lu-ming-fei">龙族路明非</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/03/04/2016-chun-jie-du-shu-bi-ji">2016 春节读书笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/02/12/HowTo-use-TortoiseGit-for-Windows">HowTo use TortoiseGit for Windows</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/01/22/install-mariadb10-centos7">How to install MariaDB 10.1 on CentOS 7.x</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2016/01/15/ru-he-zuo-yi-ge-cheng-shu-de-zi-ji">何余生说要感谢身边所有美好的人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/12/31/Hello-2016">Hello 2016</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/11/17/ji-jian-zhu-yi">极简主义</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/07/18/wu-ti">无题</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/06/04/min-yao-shi-sheng">民谣是生</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/04/12/zhe-shi-yi-dao-gui-men-guan">这是一道鬼门关</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/04/03/lu-tu-shang">路途上</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2015/02/23/xie-de-di-yi-ge-qian-duan-ye-mian">写的第一个前端页面</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2014/07/22/centos7-configure-bind-dns-server">CentOS 7 Configure DNS Server</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2014/03/27/wo-shi-yi-ge-zui-bu-hui-xie-biao-ti-de-ren">我是一个最不会写标题的人</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2012/07/30/ai-yu-tong-de-bian-yuan">爱与痛的边缘</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/07/13/google-sou-suo-ji-qiao-zheng-li">Google 搜索技巧整理</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-13T00:00:00.000Z" itemprop="datePublished">July 13, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/SAMZONG" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/SAMZONG.png" alt="Samzong Lu"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/SAMZONG" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Samzong Lu</span></a></div><small class="avatar__subtitle" itemprop="description">Product Designer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="笔记说明">笔记说明<a href="#笔记说明" class="hash-link" aria-label="Direct link to 笔记说明" title="Direct link to 笔记说明">​</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>支持 google、部分 baidu 网页检索和图片检索等</p></div></div><p><img loading="lazy" src="https://img.samzong.me/202307111726902.png" alt="20230711172625" class="img_ev3q"></p><ul><li>intitle: 仅在名称中查询<ul><li>allintitle: 多个关键词查询</li></ul></li><li>intext: 仅在正文中查询<ul><li>allintext: 多个关键词查询</li></ul></li><li>inurl: 仅在 url 中查询关键词<ul><li>allinurl: 多个关键词</li></ul></li><li>site: 在对应的网站内查询</li><li>filetype: 查询对应的文件类型</li><li>支持 <code>.</code> 和 <code>*</code> 作为正则匹配查询</li><li>支持 <code>&quot;&quot;</code> 作关键词精准查询</li><li>Index of 浏览网页的目录，就像浏览本地的普通目录</li><li>location: 指定查询的地区，返回对应地区的内容</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="命令参照表">命令参照表<a href="#命令参照表" class="hash-link" aria-label="Direct link to 命令参照表" title="Direct link to 命令参照表">​</a></h2><table><thead><tr><th>Keyworld</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>intitle</td><td>限定从网页标题中查询关键词</td><td>intitle:insight</td></tr><tr><td>allintitle</td><td>限定从网页标题中查询关键词，支持多个关键词</td><td>allintitle:insight kpanda</td></tr><tr><td>intext</td><td>限定从网页内容中查询关键词</td><td>intext:insight</td></tr><tr><td>allintext</td><td>限定从网页内容中查询关键词，支持多个关键词</td><td>allintext:insight kpanda</td></tr><tr><td>inurl</td><td>限定从网页 url 中查询关键词</td><td>inurl:insight</td></tr><tr><td>allinurl</td><td>限定从网页 url 中查询关键词，支持多个关键词</td><td>allinurl:insight</td></tr><tr><td>site</td><td>限定查询指定网址的内容</td><td>site:daocloud.io</td></tr><tr><td>&quot;&quot;, 《》</td><td>使得查询字符不分开</td><td>intitle:&quot;insight&quot;</td></tr><tr><td>.</td><td>匹配任意单个字符</td><td>intitle:&quot;i.sight&quot;</td></tr><tr><td>*</td><td>匹配任意长度字符</td><td>inurl:&quot;*<em>insight</em>&quot;</td></tr><tr><td>-</td><td>在查询结果中，剔除关键词</td><td>intitle:insight -daocloud<br>intitle:insight  site:&quot;daocloud.io&quot; -docs</td></tr><tr><td>+</td><td>在查询结果中，保留关键词</td><td>intitle:insight +daocloud</td></tr><tr><td>&quot;&quot;, 《》</td><td>使得查询字符不分开</td><td>intitle:《insight》</td></tr><tr><td>filetype</td><td>指定查询的文件类型，常用查询 ppt、PDF、等，结果可以直接下载</td><td>site:daocloud.io filetype:pdf intitle:insight</td></tr><tr><td>location</td><td>调整当前所在位置，用于解决浏览器基于不同地址反馈的数据权重问题</td><td></td></tr><tr><td>link</td><td>查看每一个引用了这个网址的网页</td><td></td></tr></tbody></table></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/google">Google</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2023/02/21/ketbrains-ji-huo-fu-wu-qi">在线服务器激活 Ketbrains</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-02-21T00:00:00.000Z" itemprop="datePublished">February 21, 2023</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ketbrains-激活服务器">Ketbrains 激活服务器<a href="#ketbrains-激活服务器" class="hash-link" aria-label="Direct link to Ketbrains 激活服务器" title="Direct link to Ketbrains 激活服务器">​</a></h2><p>目前 2022 年 最新 Jetbrains 激活服务器，全部产品均可激活；激活后，如果失效了就再去找个。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ketbrains-激活服务器-1">Ketbrains 激活服务器<a href="#ketbrains-激活服务器-1" class="hash-link" aria-label="Direct link to Ketbrains 激活服务器" title="Direct link to Ketbrains 激活服务器">​</a></h2><p>打开这个网站：<a href="https://search.censys.io/" target="_blank" rel="noopener noreferrer">https://search.censys.io/</a></p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20230221225628.png?x-oss-process=image/resize,w_960,m_lfit" alt="20230221225628" class="img_ev3q"></p><p>搜索框输入：<code>services.http.response.headers.location: account.jetbrains.com/fls-auth</code></p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20230221225749.png?x-oss-process=image/resize,w_960,m_lfit" alt="20230221225749" class="img_ev3q"></p><p>在查到的站点中，随便找一个点进去，查找到 <code>HTTP &amp; 302</code></p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20230221225811.png?x-oss-process=image/resize,w_960,m_lfit" alt="20230221225811" class="img_ev3q"></p><p>复制网址到 Ketbrains，选择许可证服务器/License server，粘贴刚刚复制的网址，激活。</p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20230221225910.png?x-oss-process=image/resize,w_960,m_lfit" alt="20230221225910" class="img_ev3q"></p><p>如果提示过期或者激活失败，再从查询列表中再找一个，多试几个。</p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20230221225930.png?x-oss-process=image/resize,w_960,m_lfit" alt="20230221225930" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/python">Python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mac">Mac</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/12/16/raycast">Raycast 你的年度报告已到达</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-12-16T00:00:00.000Z" itemprop="datePublished">December 16, 2022</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><p>从 Alfred 切换到 Raycast 也就 2 个多月的时间；使用体验有着比较大的提升。</p><p>我觉得的优势提升：
● Raycast 的插件生态目前很火热，自己开发插件也是非常方便
● 颜值很高
● 展示免费可用</p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/baomNz.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/LYzycF.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/aIggtS.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/kl85Wi.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mac">Mac</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/raycast">Raycast</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/12/15/Skoala-Install-Dce5">DCE5-Skoala 安装教程</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-12-15T00:00:00.000Z" itemprop="datePublished">December 15, 2022</time> · <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用之前的话">使用之前的话<a href="#使用之前的话" class="hash-link" aria-label="Direct link to 使用之前的话" title="Direct link to 使用之前的话">​</a></h2><p>本教程旨在补充需要手工安装和升级的方式。</p><ul><li><strong>优先通过安装器进行安装 <a href="https://docs.daocloud.io/install/intro/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/intro/</a> ，请以官方教程文档为准。</strong></li><li><strong>优先通过安装器进行安装 <a href="https://docs.daocloud.io/install/intro/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/intro/</a> ，请以官方教程文档为准。</strong></li><li><strong>优先通过安装器进行安装 <a href="https://docs.daocloud.io/install/intro/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/intro/</a> ，请以官方教程文档为准。</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装器-v0328-及之前">安装器 v0.3.28 及之前<a href="#安装器-v0328-及之前" class="hash-link" aria-label="Direct link to 安装器 v0.3.28 及之前" title="Direct link to 安装器 v0.3.28 及之前">​</a></h3><p>默认安装不支持；在安装规划时，可以修改 <strong>mainfest.yaml</strong> 开启 Skoala 自动安装</p><blockquote><p>检查预装环境</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./dce5-installer install-app -m /sample/manifest.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装器-v0329">安装器 v0.3.29<a href="#安装器-v0329" class="hash-link" aria-label="Direct link to 安装器 v0.3.29" title="Direct link to 安装器 v0.3.29">​</a></h3><p>20222.12.15 即将发版）支持默认安装 Skoala；仍旧建议检查<strong>mainfest.yaml</strong> ，确保 Skoala 会被安装器安装。</p><blockquote><p>enable 需要为 true，需要指定对应的 helmVersion：</p></blockquote><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">enable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">helmVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v0.12.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>重要的话：默认安装器版本携带的是当时最新经过测试的版本；如无特殊情况，不建议更新默认的 helm 安装版本。</strong></li><li><strong>重要的话：默认安装器版本携带的是当时最新经过测试的版本；如无特殊情况，不建议更新默认的 helm 安装版本。</strong></li><li><strong>重要的话：默认安装器版本携带的是当时最新经过测试的版本；如无特殊情况，不建议更新默认的 helm 安装版本。</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装前的检测">安装前的检测<a href="#安装前的检测" class="hash-link" aria-label="Direct link to 安装前的检测" title="Direct link to 安装前的检测">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="检测-skoala-安装情况">检测 skoala 安装情况<a href="#检测-skoala-安装情况" class="hash-link" aria-label="Direct link to 检测 skoala 安装情况" title="Direct link to 检测 skoala 安装情况">​</a></h3><p>查看 命名空间为 skoala-system 的之中是否有以下对应的资源，如果没有任何资源，说明 Skoala 的确没有安装。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n skoala-system get pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                   READY   STATUS    RESTARTS        AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hive-8548cd9b59-948j2                  </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">3h48m ago</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   3h48m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sesame-5955c878c6-jz8cd                </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">               3h48m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ui-7c9f5b7b67-9rpzc                    </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">               3h48m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm -n skoala-system list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME        NAMESPACE       REVISION    UPDATED                                 STATUS      CHART               APP VERSION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala      skoala-system   </span><span class="token number">3</span><span class="token plain">           </span><span class="token number">2022</span><span class="token plain">-12-16 </span><span class="token number">11</span><span class="token plain">:17:35.187799553 +0800 CST deployed    skoala-0.13.0       </span><span class="token number">0.13</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-依赖-common-mysql-的安装情况">2.2. 依赖 common-mysql 的安装情况<a href="#22-依赖-common-mysql-的安装情况" class="hash-link" aria-label="Direct link to 2.2. 依赖 common-mysql 的安装情况" title="Direct link to 2.2. 依赖 common-mysql 的安装情况">​</a></h3><p>skoala 在安装时需要用到 mysql 来存储配置，所以必须要保证数据库存在；另外查看下 common-mysql 是否有 skoala 这个数据库。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n mcamel-system get statefulset</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                          READY   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mcamel-common-mysql-cluster-mysql             </span><span class="token number">2</span><span class="token plain">/2     7d23h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>建议给到 skoala 用到的数据库信息如下：</p><ul><li>host: mcamel-common-mysql-cluster-mysql-master.mcamel-system.svc.cluster.local</li><li>port: 3306</li><li>database : skoala</li><li>user: skoala</li><li>password:</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="关于insight-agent">关于 insight-agent<a href="#关于insight-agent" class="hash-link" aria-label="Direct link to 关于 insight-agent" title="Direct link to 关于 insight-agent">​</a></h3><p>Skoala 所有的监控的信息，需要依赖 Insight 的能力，则需要在集群中安装对应的 insight-agent；</p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/KEjgFX.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><p>对 Skoala 的影响：</p><ul><li>如果 skoala-init 安装时未先安装 insight-agent，不会安装 service-monitor</li><li>如果需要安装 service-monitor，请先安装 insight-agent，再安装 skoala-init</li></ul><blockquote><p>如果先安装了 skoala-init, <strong>目前需要在安装 insight-agent 后，重装 skoala-init</strong></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="手动安装过程">手动安装过程<a href="#手动安装过程" class="hash-link" aria-label="Direct link to 手动安装过程" title="Direct link to 手动安装过程">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初始化-数据库表">初始化 数据库表<a href="#初始化-数据库表" class="hash-link" aria-label="Direct link to 初始化 数据库表" title="Direct link to 初始化 数据库表">​</a></h3><p>如果在 common-mysql 内的 skoala 数据库为空，请登录到 skoala 数据库后，执行以下 SQL：</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">registry</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bigint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">uid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">type</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">addresses</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">namespaces</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">deleted_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Time deteled&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">created_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">updated_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">idx_uid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">uid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">idx_name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">InnoDB</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CHARSET</span><span class="token operator">=</span><span class="token plain">utf8mb4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">book</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bigint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">uid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">author</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">status</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0:下架，1:上架&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">isPublished</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">tinyint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0: unpublished, 1: published&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">publishedAt</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;出版时间&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">deleted_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Time deteled&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">createdAt</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">updatedAt</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">idx_uid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">uid</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">idx_name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">InnoDB</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CHARSET</span><span class="token operator">=</span><span class="token plain">utf8mb4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">api</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">bigint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unsigned</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">is_hosted</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">tinyint</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">registry</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">service_name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">200</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">nacos_namespace</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">200</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Nacos namespace id&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">nacos_group_name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">200</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">data_type</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;JSON or YAML.&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">detail</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mediumtext</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">deleted_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">COMMENT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Time deteled&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">created_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">updated_at</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">timestamp</span><span class="token plain"> </span><span class="token operator">NOT</span><span class="token plain"> </span><span class="token boolean">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ON</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UPDATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">current_timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">idx_registry_and_service_name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">registry</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">service_name</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">ENGINE</span><span class="token operator">=</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">InnoDB</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CHARSET</span><span class="token operator">=</span><span class="token plain">utf8mb4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">INTO</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token identifier">book</span><span class="token identifier punctuation" style="color:rgb(248, 248, 242)">`</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;book-init&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;MicroService Pattern&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;daocloud&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2022-03-23 13:50:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token boolean">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token function" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain"> registry </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">add</span><span class="token plain"> is_hosted </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">tinyint</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">after</span><span class="token plain"> namespaces</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain"> registry </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">add</span><span class="token plain"> workspace_id </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">not</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DEFAULT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;default&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">after</span><span class="token plain"> uid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">table</span><span class="token plain"> registry </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">add</span><span class="token plain"> ext_id </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">varchar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">50</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token boolean">null</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">after</span><span class="token plain"> workspace_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">drop</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">index</span><span class="token plain"> idx_name </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain"> registry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">create</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">unique</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">index</span><span class="token plain"> idx_name </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">on</span><span class="token plain"> registry </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> workspace_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>完成以上操作，会在 Skoala 数据库内有 3 张表，注意检测对应 SQL 是否全部是生效。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置-skoala-helm-repo">配置 skoala helm repo<a href="#配置-skoala-helm-repo" class="hash-link" aria-label="Direct link to 配置 skoala helm repo" title="Direct link to 配置 skoala helm repo">​</a></h3><p>配置好 skoala 仓库，即可查看和获取到 skoala 的应用 chart</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm repo </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> skoala-release https://release.daocloud.io/chartrepo/skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm repo update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20221216185921.png?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><p>重点内容： ** 增加完成后 Skoala-release 之后，常用需要关注的有 2 个 Chart：</p><ul><li>Skoala   是 Skoala 的控制端的服务，<ul><li><strong>安装完成后，可以网页看到微服务引擎的入口</strong></li><li>包含 3 个组件 ui、hive、sesame</li><li>需要安装在全局管理集群</li></ul></li><li>Skoala-init 是 Skoala 所有的组件 Operator<ul><li><strong>仅安装到指定工作集群即可</strong></li><li>包含组件有：skoala-agent, nacos, contour, sentinel</li><li><strong>未安装时，创建注册中心和网关时会提示缺少组件</strong></li></ul></li></ul><p>默认情况下，安装完成 skoala 到 kpanda-global-cluster(全局管理集群)，就可以在侧边栏看到对应的微服务引擎的入口了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看-skoala-组件-最新版本">查看 skoala 组件 最新版本<a href="#查看-skoala-组件-最新版本" class="hash-link" aria-label="Direct link to 查看 skoala 组件 最新版本" title="Direct link to 查看 skoala 组件 最新版本">​</a></h3><p>在全局管理集群，查看 Skoala 的最新版本，直接通过 helm repo 来更新获取最新的；</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm repo update skoala-release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm search repo skoala-release/skoala --versions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                        CHART VERSION   APP VERSION DESCRIPTION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.13</span><span class="token plain">.0          </span><span class="token number">0.13</span><span class="token plain">.0      The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.12</span><span class="token plain">.2          </span><span class="token number">0.12</span><span class="token plain">.2      The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.12</span><span class="token plain">.1          </span><span class="token number">0.12</span><span class="token plain">.1      The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.12</span><span class="token plain">.0          </span><span class="token number">0.12</span><span class="token plain">.0      The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>在部署 skoala 时，会携带当时最新的前端版本，如果想要指定前端 ui 的版本，
可以去看前端代码仓库获取对应的版本号： <a href="https://gitlab.daocloud.cn/ndx/frontend-engineering/skoala-ui/-/tags" target="_blank" rel="noopener noreferrer">https://gitlab.daocloud.cn/ndx/frontend-engineering/skoala-ui/-/tags</a></p></blockquote><p>在工作集群，查看 Skoala-init 的最新版本，直接通过 helm repo 来更新获取最新的</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm repo update skoala-release</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm search repo skoala-release/skoala-init --versions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                        CHART VERSION   APP VERSION DESCRIPTION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.13</span><span class="token plain">.0          </span><span class="token number">0.13</span><span class="token plain">.0      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.12</span><span class="token plain">.2          </span><span class="token number">0.12</span><span class="token plain">.2      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.12</span><span class="token plain">.1          </span><span class="token number">0.12</span><span class="token plain">.1      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.12</span><span class="token plain">.0          </span><span class="token number">0.12</span><span class="token plain">.0      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-执行部署同样适用于升级">3.4. 执行部署（同样适用于升级）<a href="#34-执行部署同样适用于升级" class="hash-link" aria-label="Direct link to 3.4. 执行部署（同样适用于升级）" title="Direct link to 3.4. 执行部署（同样适用于升级）">​</a></h3><p>直接执行命令即可，注意对应的版本号</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm upgrade --install skoala --create-namespace -n skoala-system --cleanup-on-fail </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set ui.image.tag</span><span class="token operator">=</span><span class="token plain">v0.9.0 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set sweet.enable</span><span class="token operator">=</span><span class="token plain">true </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set hive.configMap.data.database.host</span><span class="token operator">=</span><span class="token plain">mcamel-common-mysql-cluster-mysql-master.mcamel-system.svc.cluster.local </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set hive.configMap.data.database.port</span><span class="token operator">=</span><span class="token number">3306</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set hive.configMap.data.database.user</span><span class="token operator">=</span><span class="token plain">root </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set hive.configMap.data.database.password</span><span class="token operator">=</span><span class="token plain">xxxxxxxx </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set hive.configMap.data.database.database</span><span class="token operator">=</span><span class="token plain">skoala </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    skoala-release/skoala </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --version </span><span class="token number">0.13</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>自定义并初始化数据库参数；需要将数据库信息做配置添加进去<br>
<!-- -->--set sweet.enable=true \
--set hive.configMap.data.database.host= \<br>
<!-- -->--set hive.configMap.data.database.port= \<br>
<!-- -->--set hive.configMap.data.database.user= \
--set hive.configMap.data.database.password= \<br>
<!-- -->--set hive.configMap.data.database.database= \</p><p>自定义前端 ui 版本
ui.image.tag=v0.9.0</p></blockquote><p>查看部署的 pod 是否启动成功</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n skoala-system get pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                   READY   STATUS    RESTARTS        AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hive-8548cd9b59-948j2                  </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">3h48m ago</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   3h48m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sesame-5955c878c6-jz8cd                </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">               3h48m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ui-7c9f5b7b67-9rpzc                    </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">               3h48m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="卸载-skoala">卸载 skoala<a href="#卸载-skoala" class="hash-link" aria-label="Direct link to 卸载 skoala" title="Direct link to 卸载 skoala">​</a></h3><p>这一步骤卸载，会把 skoala 相关的资源删除。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm uninstall skoala -n skoala-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更新-skoala">更新 skoala<a href="#更新-skoala" class="hash-link" aria-label="Direct link to 更新 skoala" title="Direct link to 更新 skoala">​</a></h3><p>更新操作同 3.4 部署，使用 helm upgrade 指定新版本即可</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更多参数的配置">更多参数的配置<a href="#更多参数的配置" class="hash-link" aria-label="Direct link to 更多参数的配置" title="Direct link to 更多参数的配置">​</a></h3><p>请查看 Skoala 代码仓库 <a href="https://gitlab.daocloud.cn/ndx/skoala/-/tree/main/build/charts/skoala" target="_blank" rel="noopener noreferrer">https://gitlab.daocloud.cn/ndx/skoala/-/tree/main/build/charts/skoala</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="38-安装-skoala-init-到工作集群">3.8.  安装 skoala-init 到工作集群<a href="#38-安装-skoala-init-到工作集群" class="hash-link" aria-label="Direct link to 3.8.  安装 skoala-init 到工作集群" title="Direct link to 3.8.  安装 skoala-init 到工作集群">​</a></h3><p>由于 Skoala 涉及的组件较多，我们将这些组件打包到同一个 Chart 内，也就是 skoala-init，所以我们应该在用到微服务引擎的工作集群安装好 skoala-init</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~  helm search repo skoala-release/skoala-init --versions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                        CHART VERSION   APP VERSION DESCRIPTION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.13</span><span class="token plain">.0          </span><span class="token number">0.13</span><span class="token plain">.0      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.12</span><span class="token plain">.2          </span><span class="token number">0.12</span><span class="token plain">.2      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.12</span><span class="token plain">.1          </span><span class="token number">0.12</span><span class="token plain">.1      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala-init  </span><span class="token number">0.12</span><span class="token plain">.0          </span><span class="token number">0.12</span><span class="token plain">.0      A Helm Chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala init, it includes Skoal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装命令，同更新; 确认需要安装到指定的命名空间，确认看到全部 Pod 启动成功。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm upgrade --install skoala-init --create-namespace -n skoala-system --cleanup-on-fail </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    skoala-release/skoala-init </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --version </span><span class="token number">0.13</span><span class="token plain">.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>除了通过终端安装，UI 的方式 可以在 Kpanda 集群管理中 Helm 应用内找到 Skoala-init 进行安装。</strong></p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/5JAl1G.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><p>卸载命令</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm uninstall skoala-init -n skoala-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mac">Mac</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/raycast">Raycast</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/12/06/dce5">保姆式安装 DCE5.0</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-12-06T00:00:00.000Z" itemprop="datePublished">December 6, 2022</time> · <!-- -->30 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前言">前言<a href="#前言" class="hash-link" aria-label="Direct link to 前言" title="Direct link to 前言">​</a></h2><p>本文完成了从 0 到 1 的完成 DCE5.0 社区版的安装；其中包含社区版需要一个 K8s 集群、与一些安装细节和注意事项。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="集群规划">集群规划<a href="#集群规划" class="hash-link" aria-label="Direct link to 集群规划" title="Direct link to 集群规划">​</a></h3><p>当前计划使用在 3 台 UCloud 的 VM，配置均为 8 核 16G。</p><table><thead><tr><th>角色</th><th>主机名</th><th>操作系统</th><th>IP</th><th>配置</th></tr></thead><tbody><tr><td>master</td><td>master-k8s-com</td><td>CentOS 7.9</td><td>10.23.245.63</td><td>8 核 16G 300GB</td></tr><tr><td>node01</td><td>node01-k8s-com</td><td>CentOS 7.9</td><td>10.23.104.173</td><td>8 核 16G 300GB</td></tr><tr><td>node02</td><td>node02-k8s-com</td><td>CentOS 7.9</td><td>10.23.112.244</td><td>8 核 16G 300GB</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组件介绍">组件介绍<a href="#组件介绍" class="hash-link" aria-label="Direct link to 组件介绍" title="Direct link to 组件介绍">​</a></h3><ul><li>Kubernetes  1.24.8</li><li>CRI containerd</li><li>CNI Calico</li><li>StorageClass HwameiStior</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="节点系统优化">节点系统优化<a href="#节点系统优化" class="hash-link" aria-label="Direct link to 节点系统优化" title="Direct link to 节点系统优化">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置主机名">配置主机名<a href="#配置主机名" class="hash-link" aria-label="Direct link to 配置主机名" title="Direct link to 配置主机名">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">hostnamctl set-hostname master-k8s-com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="添加-etchosts-配置">添加 /etc/hosts 配置<a href="#添加-etchosts-配置" class="hash-link" aria-label="Direct link to 添加 /etc/hosts 配置" title="Direct link to 添加 /etc/hosts 配置">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/hosts</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">10.23.245.63    master-k8s-com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">10.23.104.173   node01-k8s-com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">10.23.112.244   node02-k8s-com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-swap">禁用 Swap<a href="#禁用-swap" class="hash-link" aria-label="Direct link to 禁用 Swap" title="Direct link to 禁用 Swap">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">swapoff -a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/ swap / s/^/#/&#x27;</span><span class="token plain"> /etc/fstab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="禁用-selinux">禁用 SElinux<a href="#禁用-selinux" class="hash-link" aria-label="Direct link to 禁用 SElinux" title="Direct link to 禁用 SElinux">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">setenforce </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span><span class="token plain"> /etc/selinux/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="关闭防火墙">关闭防火墙<a href="#关闭防火墙" class="hash-link" aria-label="Direct link to 关闭防火墙" title="Direct link to 关闭防火墙">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl stop firewalld</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl disable firewalld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="允许-iptables-检查桥接流量">允许 iptables 检查桥接流量<a href="#允许-iptables-检查桥接流量" class="hash-link" aria-label="Direct link to 允许 iptables 检查桥接流量" title="Direct link to 允许 iptables 检查桥接流量">​</a></h4><p>加载 <code>br_netfilter</code> 模块</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/modules-load.d/kubernetes.conf</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">br_netfilter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 加载模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">modprobe br_netfilter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改 <code>net.bridge.bridge-nf-call-iptables</code> 设置为 1</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/sysctl.d/kubernetes.conf</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 刷新配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sysctl --system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="k8s-环境安装">K8s 环境安装<a href="#k8s-环境安装" class="hash-link" aria-label="Direct link to K8s 环境安装" title="Direct link to K8s 环境安装">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker">安装 Docker<a href="#安装-docker" class="hash-link" aria-label="Direct link to 安装 Docker" title="Direct link to 安装 Docker">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker-的软件源">安装 Docker 的软件源<a href="#安装-docker-的软件源" class="hash-link" aria-label="Direct link to 安装 Docker 的软件源" title="Direct link to 安装 Docker 的软件源">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y yum-utils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum-config-manager </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --add-repo </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    https://download.docker.com/linux/centos/docker-ce.repo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-docker-和-containerdio">安装 Docker 和 Containerd.io<a href="#安装-docker-和-containerdio" class="hash-link" aria-label="Direct link to 安装 Docker 和 Containerd.io" title="Direct link to 安装 Docker 和 Containerd.io">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum -y </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> docker-ce docker-ce-cli containerd.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改-docker-的配置">修改 Docker 的配置<a href="#修改-docker-的配置" class="hash-link" aria-label="Direct link to 修改 Docker 的配置" title="Direct link to 修改 Docker 的配置">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">touch</span><span class="token plain"> /etc/docker/daemon.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/docker/daemon.json</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改-containerd-的配置">修改 Containerd 的配置<a href="#修改-containerd-的配置" class="hash-link" aria-label="Direct link to 修改 Containerd 的配置" title="Direct link to 修改 Containerd 的配置">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 清理配置文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -f /etc/containerd/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 初始化配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> containerd config default </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> /etc/containerd/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 更新配置文件内容</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/SystemdCgroup\ =\ false/SystemdCgroup\ =\ true/&#x27;</span><span class="token plain"> /etc/containerd/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/k8s.gcr.io\/pause/registry.cn-hangzhou.aliyuncs.com\/google_containers\/pause/g&#x27;</span><span class="token plain"> /etc/containerd/config.toml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动服务配置">启动服务配置<a href="#启动服务配置" class="hash-link" aria-label="Direct link to 启动服务配置" title="Direct link to 启动服务配置">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> --now </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> --now containerd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="检查配置成功">检查配置成功<a href="#检查配置成功" class="hash-link" aria-label="Direct link to 检查配置成功" title="Direct link to 检查配置成功">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl status </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> containerd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kubernetes-系统组件">安装 Kubernetes 系统组件<a href="#安装-kubernetes-系统组件" class="hash-link" aria-label="Direct link to 安装 Kubernetes 系统组件" title="Direct link to 安装 Kubernetes 系统组件">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kubernetes-软件源">安装 Kubernetes 软件源<a href="#安装-kubernetes-软件源" class="hash-link" aria-label="Direct link to 安装 Kubernetes 软件源" title="Direct link to 安装 Kubernetes 软件源">​</a></h4><p>这里采用国内阿里云的源，具有加速效果</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation operator" style="color:rgb(248, 248, 242)">|</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">sudo</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> </span><span class="token string bash punctuation function" style="color:rgb(80, 250, 123)">tee</span><span class="token string bash punctuation" style="color:rgb(248, 248, 242)"> /etc/yum.repos.d/kubernetes.repo</span><span class="token string" style="color:rgb(255, 121, 198)"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">[kubernetes]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">name=Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">enabled=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgcheck=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">repo_gpgcheck=1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装-kubernetes-组件">安装 Kubernetes 组件<a href="#安装-kubernetes-组件" class="hash-link" aria-label="Direct link to 安装 Kubernetes 组件" title="Direct link to 安装 Kubernetes 组件">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">K8sVersion</span><span class="token operator">=</span><span class="token number">1.24</span><span class="token plain">.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y kubelet-1.24.8-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$K8sVersion</span><span class="token plain"> kubeadm-1.24.8-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$K8sVersion</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> yum </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -y kubectl-1.24.8-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$K8sVersion</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 可以仅在 Master 节点安装</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动-kubelet系统服务">启动 <code>kubelet</code>系统服务<a href="#启动-kubelet系统服务" class="hash-link" aria-label="Direct link to 启动-kubelet系统服务" title="Direct link to 启动-kubelet系统服务">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> --now kubelet</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此时启动后服务状态异常，会检查集群配置，因为没有配置会不断的重启，不影响后续操作</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初始化-master-节点">初始化 Master 节点<a href="#初始化-master-节点" class="hash-link" aria-label="Direct link to 初始化 Master 节点" title="Direct link to 初始化 Master 节点">​</a></h3><p>注意规划集群主节点配置，初始化主节点时，规划网络配置</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 指定对应的 kubernetes 的版本，注意与上方配置保持一致</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ sudokubeadm init --kubernetes-version</span><span class="token operator">=</span><span class="token plain">v1.24.8 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --image-repository</span><span class="token operator">=</span><span class="token plain">registry.cn-hangzhou.aliyuncs.com/google_containers </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> --pod-network-cidr </span><span class="token number">10.11</span><span class="token plain">.0.0/16 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using Kubernetes version: v1.24.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Running pre-flight checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Pulling images required </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> setting up a Kubernetes cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> This might take a minute or two, depending on the speed of your internet connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">preflight</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> You can also perform this action </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> beforehand using </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;kubeadm config images pull&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using certificateDir folder </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/pki&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ca&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver-kubelet-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;front-proxy-ca&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;front-proxy-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/ca&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/server&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/peer&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;etcd/healthcheck-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver-etcd-client&quot;</span><span class="token plain"> certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Generating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sa&quot;</span><span class="token plain"> key and public key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using kubeconfig folder </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;admin.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;controller-manager.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubeconfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;scheduler.conf&quot;</span><span class="token plain"> kubeconfig </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing kubelet environment </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> with flags to </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Writing kubelet configuration to </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/lib/kubelet/config.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-start</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Starting the kubelet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using manifest folder </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/manifests&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-apiserver&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-controller-manager&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-scheduler&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">etcd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating static Pod manifest </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> etcd </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/manifests&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">wait-control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Waiting </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the kubelet to boot up the control plane as static Pods from directory </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/manifests&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> This can take up to 4m0s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">apiclient</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> All control plane components are healthy after </span><span class="token number">6.503693</span><span class="token plain"> seconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">upload-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Storing the configuration used </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ConfigMap </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubeadm-config&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-system&quot;</span><span class="token plain"> Namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating a ConfigMap </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet-config-1.24.8&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> namespace kube-system with the configuration </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the kubelets </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NOTE: The </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet-config-1.24.8&quot;</span><span class="token plain"> naming of the kubelet ConfigMap is deprecated. Once the UnversionedKubeletConfigMap feature gate graduates to Beta the default name will become just </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubelet-config&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> Kubeadm upgrade will handle this transition transparently.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">upload-certs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Skipping phase. Please see --upload-certs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mark-control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Marking the </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> node1.k8s.com as control-plane by adding the labels: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">node-role.kubernetes.io/master</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">deprecated</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mark-control-plane</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Marking the </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> node1.k8s.com as control-plane by adding the taints </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">node-role.kubernetes.io/master:NoSchedule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Using token: c0wcm5.0yu9szfktsxvurza</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow Node Bootstrap tokens to get nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow Node Bootstrap tokens to post CSRs </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> order </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> nodes to get long term certificate credentials</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> configured RBAC rules to allow certificate rotation </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> all </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> client certificates </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">bootstrap-token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Creating the </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;cluster-info&quot;</span><span class="token plain"> ConfigMap </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kube-public&quot;</span><span class="token plain"> namespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">kubelet-finalize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Updating </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/etc/kubernetes/kubelet.conf&quot;</span><span class="token plain"> to point to a rotatable kubelet client certificate and key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">addons</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Applied essential addon: CoreDNS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">addons</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Applied essential addon: kube-proxy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your Kubernetes control-plane has initialized successfully</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To start using your cluster, you need to run the following as a regular user:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> -i /etc/kubernetes/admin.conf </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">chown</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">id</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -u</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">id</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -g</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.kube/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alternatively, </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> you are the root user, you can run:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">KUBECONFIG</span><span class="token operator">=</span><span class="token plain">/etc/kubernetes/admin.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">You should now deploy a pod network to the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Run </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubectl apply -f [podnetwork].yaml&quot;</span><span class="token plain"> with one of the options listed at:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Then you can </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> any number of worker nodes by running the following on each as root:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubeadm </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> </span><span class="token number">10.23</span><span class="token plain">.245.63:6443 --token djdsj2.sj23js90213j323 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        --discovery-token-ca-cert-hash sha256:ewuosdjk2390rjertw32p32j43p25a70298db818ajsdjk1293jk23k23201934h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="加入工作节点">加入工作节点<a href="#加入工作节点" class="hash-link" aria-label="Direct link to 加入工作节点" title="Direct link to 加入工作节点">​</a></h3><p>注意需要确保完成了前面的步骤 节点系统优化、安装 Docker、安装 Kubernetes 系统组件，并且成功完成 初始化 Master 节点</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubeadm </span><span class="token function" style="color:rgb(80, 250, 123)">join</span><span class="token plain"> </span><span class="token number">10.23</span><span class="token plain">.245.63:6443 --token djdsj2.sj23js90213j323 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        --discovery-token-ca-cert-hash sha256:ewuosdjk2390rjertw32p32j43p25a70298db818ajsdjk1293jk23k23201934h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>请分别添加 2 个工作节点：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME               STATUS   ROLES           AGE   VERSION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com   Ready    control-plane   9h    v1.24.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com     Ready    </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">          9h    v1.24.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com     Ready    </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">          9h    v1.24.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-cni-calico">安装 CNI Calico<a href="#安装-cni-calico" class="hash-link" aria-label="Direct link to 安装 CNI Calico" title="Direct link to 安装 CNI Calico">​</a></h3><p>将下发 <code>yaml</code>保存为 <code>calico.yaml</code>，或者 到我的 Github 去下载。</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Source: calico/templates/calico-config.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># This ConfigMap is used to configure a self-hosted Calico installation.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ConfigMap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Typha is disabled.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">typha_service_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;none&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Configure the backend to use.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">calico_backend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;bird&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># Configure the MTU to use for workload interfaces and tunnels.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># By default, MTU is auto-detected, and explicitly setting this field should not be required.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># You can override auto-detection by providing a non-zero value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">veth_mtu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># The CNI network configuration to install on each node. The special</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># values in this config will be automatically populated.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">cni_network_config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;k8s-pod-network&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&quot;cniVersion&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0.3.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">&quot;plugins&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;calico&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;log_level&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;info&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;log_file_path&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/log/calico/cni/cni.log&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;datastore_type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kubernetes&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;nodename&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;__KUBERNETES_NODE_NAME__&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;mtu&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> __CNI_MTU__</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;ipam&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;calico-ipam&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;policy&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;k8s&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;kubernetes&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">&quot;kubeconfig&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;__KUBECONFIG_FILEPATH__&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;portmap&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;snat&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;capabilities&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token key atrule">&quot;portMappings&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;bandwidth&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">&quot;capabilities&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token key atrule">&quot;bandwidth&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Source: calico/templates/kdd-crds.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgpconfigurations.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfigurationList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgpconfigurations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgpconfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfiguration contains the configuration for any BGP routing.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPConfigurationSpec contains the values of the BGP configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">asNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ASNumber is the default AS number used by a node. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token number">64512</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">communities</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Communities is a list of BGP community values and their</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  arbitrary names for tagging routes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Community contains standard or large community value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    and its name.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Name given to community value.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Value must be of format `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` or `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm`.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        For standard community use `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa` and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `nn` are 16 bit number. For large community use `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and `mm` are 32 bit number. Where</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `aa` is an AS Number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and `mm` are per</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">AS identifier.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^(\d+)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">(\d+)$</span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain">^(\d+)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">(\d+)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">(\d+)$</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">listenPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ListenPort is the port where BGP protocol should listen.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Defaults to 179</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">maximum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">65535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">minimum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeverityScreen</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeverityScreen is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the stdout. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> INFO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">nodeToNodeMeshEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;NodeToNodeMeshEnabled sets whether full node to node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  BGP mesh is enabled. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prefixAdvertisements</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PrefixAdvertisements contains per</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">prefix advertisement</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> PrefixAdvertisement configures advertisement properties</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    for the specified CIDR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CIDR for which properties should be advertised.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">communities</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Communities can be list of either community names</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        already defined in `Specs.Communities` or community value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        of format `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` or `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm`. For standard community use</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn` format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa` and `nn` are 16 bit number. For</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        large community use `aa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">nn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">mm` format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> where `aa`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `mm` are 32 bit number. Where</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">`aa` is an AS Number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `nn` and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        `mm` are per</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">AS identifier.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceClusterIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceClusterIPs are the CIDR blocks from which service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  cluster IPs are allocated. If specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Calico will advertise these</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  blocks</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> as well as any cluster IPs within them.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceClusterIPBlock represents a single allowed ClusterIP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    CIDR block.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceExternalIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceExternalIPs are the CIDR blocks for Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Service External IPs. Kubernetes Service ExternalIPs will only be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  advertised if they are within one of these blocks.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceExternalIPBlock represents a single allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    External IP CIDR block.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceLoadBalancerIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceLoadBalancerIPs are the CIDR blocks for Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Service LoadBalancer IPs. Kubernetes Service status.LoadBalancer.Ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  IPs will only be advertised if they are within one of these blocks.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceLoadBalancerIPBlock represents a single allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    LoadBalancer IP CIDR block.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgppeers.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPPeer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPPeerList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgppeers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> bgppeer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BGPPeerSpec contains the specification for a BGPPeer resource.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">asNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The AS Number of the peer.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">keepOriginalNextHop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Option to keep the original nexthop field when routes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to a BGP Peer. Setting &quot;true&quot; configures the selected BGP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Peers node to use the &quot;next hop keep;&quot; instead of &quot;next hop self;&quot;(default)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in the specific branch of the Node on &quot;bird.cfg&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The node name identifying the Calico node instance that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is targeted by this peer. If this is not set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and no nodeSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then this BGP peer selects all nodes in the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selector for the nodes that should have this peering.  When</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  this is set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the Node field must be empty.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Optional BGP password for the peerings generated by this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  BGPPeer resource.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">secretKeyRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selects a key of a secret in the node pod&#x27;s namespace.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The key of the secret to select from.  Must be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          a valid secret key.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Name of the referent. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//kubernetes.io/docs/concepts/overview/working</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">with</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">objects/names/</span><span class="token comment" style="color:rgb(98, 114, 164)">#names</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">TODO</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Add other useful fields. apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> uid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">?</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Specify whether the Secret or its key must be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          defined</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">peerIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The IP address of the peer followed by an optional port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  number to peer with. If port number is given</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> format should be `</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">&lt;IPv6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">port`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or `&lt;IPv4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">&lt;port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">` for IPv4. If optional port number is not set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and this peer IP and ASNumber belongs to a calico/node with ListenPort</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  set in BGPConfiguration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then we use that port to peer.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">peerSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selector for the remote nodes to peer with.  When this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the PeerIP and ASNumber fields must be empty.  For each</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  peering between the local node and selected remote nodes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> we configure</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  an IPv4 peering if both ends have NodeBGPSpec.IPv4Address specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and an IPv6 peering if both ends have NodeBGPSpec.IPv6Address specified.  The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  remote AS number comes from the remote node&#x27;s NodeBGPSpec.ASNumber</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or the global default if that is not set.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">sourceAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Specifies whether and how to configure a source address</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  for the peerings generated by this BGPPeer resource.  Default value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  &quot;UseNodeIP&quot; means to configure the node IP as the source address.  &quot;None&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  means not to configure a source address.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> blockaffinities.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BlockAffinity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BlockAffinityList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> blockaffinities</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> blockaffinity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BlockAffinitySpec contains the specification for a BlockAffinity</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              resource.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">cidr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">deleted</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deleted indicates that this block affinity is being deleted.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  This field is a string for compatibility with older releases that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  mistakenly treat this field as a string.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">state</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> cidr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> deleted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> state</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clusterinformations.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformationList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clusterinformations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> clusterinformation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformation contains the cluster specific information.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterInformationSpec contains the values of describing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              the cluster.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">calicoVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CalicoVersion is the version of Calico that the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">clusterGUID</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterGUID is the GUID of the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">clusterType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterType describes the type of the cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">datastoreReady</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DatastoreReady is used during significant datastore migrations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to signal to components such as Felix that it should wait before</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accessing the datastore.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">variant</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Variant declares which variant of Calico should be active.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> felixconfigurations.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FelixConfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FelixConfigurationList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> felixconfigurations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> felixconfiguration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Felix Configuration contains the configuration for Felix.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FelixConfigurationSpec contains the values of the Felix configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">allowIPIPPacketsFromWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;AllowIPIPPacketsFromWorkloads controls whether Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  will add a rule to drop IPIP encapsulated traffic from workloads</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">allowVXLANPacketsFromWorkloads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;AllowVXLANPacketsFromWorkloads controls whether Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  will add a rule to drop VXLAN encapsulated traffic from workloads</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">awsSrcDstCheck</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Set source</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">check on AWS EC2 instances. Accepted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  value must be one of &quot;DoNothing&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> &quot;Enabled&quot; or &quot;Disabled&quot;. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  DoNothing</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">enum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> DoNothing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Enable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> Disable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfConnectTimeLoadBalancingEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFConnectTimeLoadBalancingEnabled when in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  controls whether Felix installs the connection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">time load balancer.  The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  connect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">time load balancer is required for the host to be able to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  reach Kubernetes services and it improves the performance of pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  connections.  The only reason to disable it is for debugging purposes.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfDataIfacePattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BPFDataIfacePattern is a regular expression that controls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  which interfaces Felix should attach BPF programs to in order to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  catch traffic to/from the network.  This needs to match the interfaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that Calico workload traffic flows over as well as any interfaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that handle incoming traffic to nodeports and services from outside</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the cluster.  It should not match the workload interfaces (usually</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  named cali</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfDisableUnprivileged</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFDisableUnprivileged</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Felix sets the kernel.unprivileged_bpf_disabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  sysctl to disable unprivileged use of BPF.  This ensures that unprivileged</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  users cannot access Calico&#x27;&#x27;s BPF maps and cannot insert their own</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  BPF programs to interfere with Calico&#x27;&#x27;s. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if enabled Felix will use the BPF dataplane.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfExtToServiceConnmark</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFExtToServiceConnmark in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> control a 32bit</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  mark that is set on connections from an external client to a local</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  service. This mark allows us to control how packets of that connection</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are routed within the host and how is routing intepreted by RPF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  check. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfExternalServiceMode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFExternalServiceMode in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> controls how connections</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  from outside the cluster to services (node ports and cluster IPs)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are forwarded to remote workloads.  If set to &quot;Tunnel&quot; then both</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  request and response traffic is tunneled to the remote node.  If</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  set to &quot;DSR&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the request traffic is tunneled but the response traffic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is sent directly from the remote node.  In &quot;DSR&quot; mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the remote</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  node appears to use the IP of the ingress node; this requires a</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  permissive L2 network.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Tunnel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfKubeProxyEndpointSlicesEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> BPFKubeProxyEndpointSlicesEnabled in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> controls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  whether Felix&#x27;s embedded kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy accepts EndpointSlices or not.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfKubeProxyIptablesCleanupEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFKubeProxyIptablesCleanupEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if enabled in BPF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Felix will proactively clean up the upstream Kubernetes kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy&#x27;&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  iptables chains.  Should only be enabled if kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy is not running.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfKubeProxyMinSyncPeriod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFKubeProxyMinSyncPeriod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> in BPF mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> controls the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  minimum time between updates to the dataplane for Felix&#x27;&#x27;s embedded</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy.  Lower values give reduced set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">up latency.  Higher values</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  reduce Felix CPU usage by batching up more work.  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">bpfLogLevel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;BPFLogLevel controls the log level of the BPF programs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  when in BPF dataplane mode.  One of &quot;Off&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Info&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> or &quot;Debug&quot;.  The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  logs are emitted to the BPF trace pipe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> accessible with the command</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  `tc exec bpf debug`. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">chainInsertMode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ChainInsertMode controls whether Felix hooks the kernel&#x27;&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  top</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">level iptables chains by inserting a rule at the top of the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  chain or by appending a rule at the bottom. insert is the safe default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  since it prevents Calico&#x27;&#x27;s rules from being bypassed. If you switch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to append mode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> be sure that the other rules in the chains signal</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  acceptance by falling through to the Calico rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> otherwise the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Calico policy will be bypassed. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> insert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">dataplaneDriver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugDisableLogDropping</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugMemoryProfilePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugSimulateCalcGraphHangAfter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">debugSimulateDataplaneHangAfter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">defaultEndpointToHostAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;DefaultEndpointToHostAction controls what happens to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  traffic that goes from a workload endpoint to the host itself (after</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the traffic hits the endpoint egress policy). By default Calico</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  blocks traffic from workload endpoints to the host itself with an</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  iptables &quot;DROP&quot; action. If you want to allow some or all traffic</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  from endpoint to host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> set this parameter to RETURN or ACCEPT. Use</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  RETURN if you have your own rules in the iptables &quot;INPUT&quot; chain;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Calico will insert its rules at the top of that chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then &quot;RETURN&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  packets to the &quot;INPUT&quot; chain once it has completed processing workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  endpoint egress policy. Use ACCEPT to unconditionally accept packets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  from workloads after processing workload endpoint egress policy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Drop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">deviceRouteProtocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> This defines the route protocol added to programmed device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  routes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> by default this will be RTPROT_BOOT when left blank.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">deviceRouteSourceAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> This is the source address to use on programmed device</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  routes. By default the source address is left blank</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> leaving the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  kernel to choose the source address used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">disableConntrackInvalidCheck</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">endpointReportingDelay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">endpointReportingEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">externalNodesList</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ExternalNodesCIDRList is a list of CIDR&#x27;s of external</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  which may source tunnel traffic and have the tunneled traffic be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accepted at calico nodes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">failsafeInboundHostPorts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;FailsafeInboundHostPorts is a list of UDP/TCP ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and CIDRs that Felix will allow incoming traffic to host endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  on irrespective of the security policy. This is useful to avoid</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accidentally cutting off a host with incorrect configuration. For</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  back</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">compatibility</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if the protocol is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to &quot;tcp&quot;. If a CIDR is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it will allow traffic from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all addresses. To disable all inbound host ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> use the value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  none. The default value allows ssh access and DHCP. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">22</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">68</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">179</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2379</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2380</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6666</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6667</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ProtoPort is combination of protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and CIDR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Protocol and port must be specified.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">net</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> protocol</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">failsafeOutboundHostPorts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;FailsafeOutboundHostPorts is a list of UDP/TCP ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  and CIDRs that Felix will allow outgoing traffic from host endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to irrespective of the security policy. This is useful to avoid</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accidentally cutting off a host with incorrect configuration. For</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  back</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">compatibility</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if the protocol is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it defaults</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to &quot;tcp&quot;. If a CIDR is not specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> it will allow traffic from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all addresses. To disable all outbound host ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> use the value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  none. The default value opens etcd&#x27;&#x27;s standard ports to ensure that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix does not get cut off from etcd as well as allowing DHCP and</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  DNS. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">179</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2379</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">2380</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6443</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6666</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  tcp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">6667</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">53</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> udp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">67</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ProtoPort is combination of protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and CIDR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Protocol and port must be specified.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">net</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> protocol</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">featureDetectOverride</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> FeatureDetectOverride is used to override the feature</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  detection. Values are specified in a comma separated list with no</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  spaces</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> example; &quot;SNATFullyRandom=true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">MASQFullyRandom=false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">RestoreSupportsLock=&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  &quot;true&quot; or &quot;false&quot; will force the feature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> empty or omitted values</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are auto</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">detected.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">genericXDPEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;GenericXDPEnabled enables Generic XDP so network cards</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that don&#x27;&#x27;t support XDP offload or driver modes can use XDP. This</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is not recommended since it doesn&#x27;&#x27;t provide better performance</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  than iptables. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">healthEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">healthHost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">healthPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">interfaceExclude</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;InterfaceExclude is a comma</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">separated list of interfaces</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that Felix should exclude when monitoring for host endpoints. The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  default value ensures that Felix ignores Kubernetes&#x27;&#x27; IPVS dummy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  interface</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> which is used internally by kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy. If you want to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  exclude multiple interface names using a single value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  supports regular expressions. For regular expressions you must wrap</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the value with &#x27;&#x27;/&#x27;&#x27;. For example having values &#x27;&#x27;/^kube/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">veth1&#x27;&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  will exclude all interfaces that begin with &#x27;&#x27;kube&#x27;&#x27; and also the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  interface &#x27;&#x27;veth1&#x27;&#x27;. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">ipvs0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">interfacePrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;InterfacePrefix is the interface name prefix that identifies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  workload endpoints and so distinguishes them from host endpoint</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">interfaces. Note</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> in environments other than bare metal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the orchestrators</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  configure this appropriately. For example our Kubernetes and Docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  integrations set the &#x27;&#x27;cali&#x27;&#x27; value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and our OpenStack integration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  sets the &#x27;&#x27;tap&#x27;&#x27; value. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> cali</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">interfaceRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> InterfaceRefreshInterval is the period at which Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  rescans local interfaces to verify their state. The rescan can be</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  disabled by setting the interval to 0.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipipEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipipMTU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IPIPMTU is the MTU to set on the tunnel device. See</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Configuring MTU </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1440</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipsetsRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IpsetsRefreshInterval is the period at which Felix re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all iptables state to ensure that no other process has accidentally</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  broken Calico&#x27;&#x27;s rules. Set to 0 to disable iptables refresh. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesBackend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> IptablesBackend specifies which backend of iptables will</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  be used. The default is legacy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesFilterAllowAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesLockFilePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesLockFilePath is the location of the iptables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  lock file. You may need to change this if the lock file is not in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  its standard location (for example if you have mapped it into Felix&#x27;&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  container at a different path). </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /run/xtables.lock</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesLockProbeInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesLockProbeInterval is the time that Felix will</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  wait between attempts to acquire the iptables lock if it is not</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  available. Lower values make Felix more responsive when the lock</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  is contended</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> but use more CPU. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 50ms</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesLockTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesLockTimeout is the time that Felix will wait</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  for the iptables lock</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> or 0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> to disable. To use this feature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  must share the iptables lock file with all other processes that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  also take the lock. When running Felix inside a container</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  requires the /run directory of the host to be mounted into the calico/node</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or calico/felix container. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 0s disabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesMangleAllowAction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesMarkMask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesMarkMask is the mask that Felix selects its</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  IPTables Mark bits from. Should be a 32 bit hexadecimal number with</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  at least 8 bits set</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> none of which clash with any other mark bits</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in use on the system. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0xff000000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">format</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> int32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesNATOutgoingInterfaceFilter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesPostWriteCheckInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesPostWriteCheckInterval is the period after Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  has done a write to the dataplane that it schedules an extra read</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  back in order to check the write was not clobbered by another process.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  This should only occur if another application on the system doesn&#x27;&#x27;t</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  respect the iptables lock. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 1s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">iptablesRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;IptablesRefreshInterval is the period at which Felix</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks the IP sets in the dataplane to ensure that no other process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  has accidentally broken Calico&#x27;&#x27;s rules. Set to 0 to disable IP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">sets refresh. Note</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> the default for this value is lower than the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  other refresh intervals as a workaround for a Linux kernel bug that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  was fixed in kernel version 4.11. If you are using v4.11 or greater</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  you may want to set this to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> a higher value to reduce Felix CPU</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  usage. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 10s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">ipv6Support</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">kubeNodePortRanges</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;KubeNodePortRanges holds list of port ranges used for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  service node ports. Only used if felix detects kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in ipvs mode. Felix uses these ranges to separate host and workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  traffic. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 30000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">32767</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logFilePath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogFilePath is the full path to the Felix log. Set to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  none to disable file logging. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /var/log/calico/felix.log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogPrefix is the log prefix that Felix uses when rendering</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  LOG rules. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">packet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeverityFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeverityFile is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the log file. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeverityScreen</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeverityScreen is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the stdout. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">logSeveritySys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;LogSeveritySys is the log severity above which logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  are sent to the syslog. Set to None for no logging to syslog. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">maxIpsetSize</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">metadataAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;MetadataAddr is the IP address or domain name of the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  server that can answer VM queries for cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">init metadata. In OpenStack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  this corresponds to the machine running nova</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">api (or in Ubuntu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  nova</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">metadata). A value of none (case insensitive) means that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix should not set up any NAT rule for the metadata path. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">metadataPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;MetadataPort is the port of the metadata server. This</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  combined with global.MetadataAddr (if not &#x27;&#x27;None&#x27;&#x27;)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> is used to</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  set up a NAT rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> from 169.254.169.254</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">80 to MetadataAddr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">MetadataPort.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  In most cases this should not need to be changed </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">8775</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">mtuIfacePattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> MTUIfacePattern is a regular expression that controls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  which interfaces Felix should scan in order to calculate the host&#x27;s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  MTU. This should not match workload interfaces (usually named cali</span><span class="token punctuation" style="color:rgb(248, 248, 242)">...</span><span class="token plain">).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">natOutgoingAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NATOutgoingAddress specifies an address to use when performing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  source NAT for traffic in a natOutgoing pool that is leaving the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  network. By default the address used is an address on the interface</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the traffic is leaving on (ie it uses the iptables MASQUERADE target)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">natPortRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NATPortRange specifies the range of ports that is used</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  for port mapping when doing outgoing NAT. When unset the default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  behavior of the network stack is used.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">netlinkTimeout</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">openstackRegion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;OpenstackRegion is the name of the region that a particular</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix belongs to. In a multi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">region Calico/OpenStack deployment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  this must be configured somehow for each Felix (here in the datamodel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  or in felix.cfg or the environment on each compute node)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and must</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  match the </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> openstack_region value configured in neutron.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  on each node. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">policySyncPathPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PolicySyncPathPrefix is used to by Felix to communicate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  policy changes to external services</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> like Application layer policy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Empty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusGoMetricsEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusGoMetricsEnabled disables Go runtime metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  collection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> which the Prometheus client does by default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> when set</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to false. This reduces the number of metrics reported</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reducing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Prometheus load. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusMetricsEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusMetricsEnabled enables the Prometheus metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  server in Felix if set to true. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusMetricsHost</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusMetricsHost is the host that the Prometheus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  metrics server should bind to. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> empty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusMetricsPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusMetricsPort is the TCP port that the Prometheus</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  metrics server should bind to. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">9091</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">prometheusProcessMetricsEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;PrometheusProcessMetricsEnabled disables process metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  collection</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> which the Prometheus client does by default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> when set</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to false. This reduces the number of metrics reported</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> reducing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Prometheus load. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">removeExternalRoutes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Whether or not to remove device routes that have not</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  been programmed by Felix. Disabling this will allow external applications</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to also add device routes. This is enabled by default which means</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  we will remove externally added routes.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">reportingInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ReportingInterval is the interval at which Felix reports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  its status into the datastore or 0 to disable. Must be non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">zero</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in OpenStack deployments. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 30s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">reportingTTL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;ReportingTTL is the time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">live setting for process</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">wide</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  status reports. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">routeRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;RouteRefreshInterval is the period at which Felix re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the routes in the dataplane to ensure that no other process has</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  accidentally broken Calico&#x27;&#x27;s rules. Set to 0 to disable route refresh.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">routeSource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;RouteSource configures where Felix gets its routing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">information. - WorkloadIPs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> use workload endpoints to construct</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">routes. - CalicoIPAM</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> the default </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> use IPAM data to construct routes.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">routeTableRange</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Calico programs additional Linux route tables for various</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  purposes.  RouteTableRange specifies the indices of the route tables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  that Calico should use.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">max</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">min</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">required</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> max</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> min</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">serviceLoopPrevention</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;When service IP advertisement is enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> prevent routing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  loops to service IPs that are not in use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> by dropping or rejecting</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  packets that do not get DNAT&#x27;&#x27;d by kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">proxy. Unless set to &quot;Disabled&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in which case such routing loops continue to be allowed. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Drop</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">sidecarAccelerationEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;SidecarAccelerationEnabled enables experimental sidecar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  acceleration </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">usageReportingEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;UsageReportingEnabled reports anonymous Calico version</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  number and cluster size to projectcalico.org. Logs warnings returned</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  by the usage server. For example</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if a significant security vulnerability</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  has been discovered in the version of Calico being used. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">usageReportingInitialDelay</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;UsageReportingInitialDelay controls the minimum delay</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  before Felix makes a report. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 300s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">usageReportingInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;UsageReportingInterval controls the interval at which</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Felix makes reports. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 86400s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">useInternalDataplaneDriver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanMTU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;VXLANMTU is the MTU to set on the tunnel device. See</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Configuring MTU </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1440</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">vxlanVNI</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardEnabled controls whether Wireguard is enabled.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardInterfaceName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardInterfaceName specifies the name to use for</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  the Wireguard interface. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> wg.calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardListeningPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardListeningPort controls the listening port used</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  by Wireguard. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">51820</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardMTU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardMTU controls the MTU on the Wireguard interface.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  See Configuring MTU </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1420</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">wireguardRoutingRulePriority</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;WireguardRoutingRulePriority controls the priority value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  to use for the Wireguard routing rule. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">99</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">xdpEnabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;XDPEnabled enables XDP acceleration for suitable untracked</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  incoming deny rules. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">xdpRefreshInterval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;XDPRefreshInterval is the period at which Felix re</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">checks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  all XDP state to ensure that no other process has accidentally broken</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  Calico&#x27;&#x27;s BPF maps or attached programs. Set to 0 to disable XDP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  refresh. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token key atrule">Default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 90s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">served</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">storage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">acceptedNames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">conditions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">storedVersions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiextensions.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> CustomResourceDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> globalnetworkpolicies.crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> crd.projectcalico.org</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GlobalNetworkPolicy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">listKind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> GlobalNetworkPolicyList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">plural</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> globalnetworkpolicies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">singular</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> globalnetworkpolicy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">scope</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">openAPIV3Schema</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;APIVersion defines the versioned schema of this representation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              of an object. Servers should convert recognized schemas to the latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              internal value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token key atrule">and may reject unrecognized values. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#resources&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Kind is a string value representing the REST resource this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              object represents. Servers may infer this from the endpoint the client</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">submits requests to. Cannot be updated. In CamelCase. More info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//git.k8s.io/community/contributors/devel/sig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">architecture/api</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">conventions.md</span><span class="token comment" style="color:rgb(98, 114, 164)">#types-kinds&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">applyOnForward</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ApplyOnForward indicates to apply the rules in this policy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  on forward traffic.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">doNotTrack</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> DoNotTrack indicates whether packets matched by the rules</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  in this policy should go through the data plane&#x27;s connection tracking</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  such as Linux conntrack.  If True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the rules in this policy are</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  applied before any data plane connection tracking</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> and packets allowed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  by this policy are marked as not to be tracked.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">              </span><span class="token key atrule">egress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> The ordered set of egress rules.  Each rule contains</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  a set of packet match criteria and a corresponding action to apply.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;A Rule encapsulates a set of match criteria and an</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    action.  Both selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">based security Policy and security Profiles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    reference rules </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> separated out as a list of rules for both ingress</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    and egress packet matching. \n Each positive match criteria has</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    a negated version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> prefixed with \&quot;Not\&quot;. All the match criteria</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    within a rule must be satisfied for a packet to match. A single</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    rule can contain the positive and negative version of a match</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    and both must be satisfied for the rule to match.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                  </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">action</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">destination</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Destination contains the match criteria that apply</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        to destination entity.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">namespaceSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;NamespaceSelector is an optional field that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            contains a selector expression. Only traffic that originates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            from (or terminates at) endpoints within the selected</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            namespaces will be matched. When both NamespaceSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            and Selector are defined on the same rule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> then only workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            endpoints that are matched by both selectors will be selected</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            by the rule. \n For NetworkPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> an empty NamespaceSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            implies that the Selector is limited to selecting only</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            workload endpoints in the same namespace as the NetworkPolicy.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            \n For NetworkPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> `global()` NamespaceSelector implies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            that the Selector is limited to selecting only GlobalNetworkSet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            or HostEndpoint. \n For GlobalNetworkPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> an empty</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            NamespaceSelector implies the Selector applies to workload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            endpoints across all namespaces.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">nets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Nets is an optional field that restricts the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            rule to only apply to traffic that originates from (or</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            terminates at) IP addresses in any of the given subnets.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">notNets</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NotNets is the negated version of the Nets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            field.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">notPorts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NotPorts is the negated version of the Ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            field. Since only some protocols have ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if any ports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            are specified it requires the Protocol match in the Rule</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            to be set to &quot;TCP&quot; or &quot;UDP&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">notSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> NotSelector is the negated version of the Selector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            field.  See Selector field for subtleties with negated</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            selectors.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;Ports is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to only apply to traffic that has a source (destination)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            port that matches one of these ranges/values. This value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            is a list of integers or strings that represent ranges</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            of ports. \n Since only some protocols have ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> if</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            any ports are specified it requires the Protocol match</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            in the Rule to be set to \&quot;TCP\&quot; or \&quot;UDP\&quot;.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">anyOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ^.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">x-kubernetes-int-or-string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &quot;Selector is an optional field that contains</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            a selector expression (see Policy for sample syntax).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            \ Only traffic that originates from (terminates at) endpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">matching the selector will be matched. \n Note that</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            addition to the negated version of the Selector (see NotSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            below)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the selector expression syntax itself supports</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            negation.  The two types of negation are subtly different.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            One negates the set of matched endpoints</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> the other negates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">the whole match</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> \n \tSelector = \&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)">!has(my_label)</span><span class="token plain">\&quot; matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            packets that are from other Calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controlled \tendpoints</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            that do not have the label \&quot;my_label\&quot;. \n \tNotSelector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            = \&quot;has(my_label)\&quot; matches packets that are not from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            Calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controlled \tendpoints that do have the label \&quot;my_label\&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            \n The effect is that the latter will accept packets from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            non</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">Calico sources whereas the former is limited to packets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            from Calico</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">controlled endpoints.&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">serviceAccounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccounts is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to only apply to traffic that originates from</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            (or terminates at) a pod running as a matching service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            account.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">names</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Names is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                the rule to only apply to traffic that originates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                from (or terminates at) a pod running as a service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                account whose name is in the list.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Selector is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                the rule to only apply to traffic that originates</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                from (or terminates at) a pod running as a service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                account that matches the given label selector. If</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                both Names and Selector are specified then they are</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                AND&#x27;ed.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTP contains match criteria that apply to HTTP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        requests.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">methods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Methods is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to apply only to HTTP requests that use one of</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the listed HTTP Methods (e.g. GET</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> PUT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> etc.) Multiple</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            methods are OR&#x27;d together.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">paths</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;Paths is an optional field that restricts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the rule to apply to HTTP requests that use one of the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            listed HTTP Paths. Multiple paths are OR&#x27;&#x27;d together.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">e.g</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">exact</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">/foo - prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">/bar NOTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Each entry may</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            ONLY specify either a `exact` or a `prefix` match. The</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            validator will check for it.&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &#x27;HTTPPath specifies an HTTP path to match.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">It may be either of the form</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">exact</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">&lt;path&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> which matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">the path exactly or prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token key atrule">&lt;path-prefix&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> which matches</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              the path prefix&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">exact</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                              </span><span class="token key atrule">prefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> object</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token key atrule">icmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ICMP is an optional field that restricts the rule</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        to apply to a specific type and code of ICMP traffic.  This</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        should only be specified if the Protocol field is set to &quot;ICMP&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        or &quot;ICMPv6&quot;.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token key atrule">properties</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">code</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Match on a specific ICMP code.  If specified</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            the Type value must also be specified. This is a technical</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            limitation imposed by the kernel&#x27;s iptables firewall</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            which Calico uses to enforce the rule.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Match on a specific ICMP type.  For example</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            a value of 8```</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">执行初始化 `Calico`命令</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">f calico.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-helm-应用">安装 Helm 应用<a href="#安装-helm-应用" class="hash-link" aria-label="Direct link to 安装 Helm 应用" title="Direct link to 安装 Helm 应用">​</a></h2><p>这里使用 Helm 3，注意安装脚本下载最新版本</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> </span><span class="token number">700</span><span class="token plain"> get_helm.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">./get_helm.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-storageclass">安装 StorageClass<a href="#安装-storageclass" class="hash-link" aria-label="Direct link to 安装 StorageClass" title="Direct link to 安装 StorageClass">​</a></h2><p>默认情况下，可以安装 K8s 默认 localdisk 作为默认存储，这里采用开源项目 Hwameistor 用作本地磁盘管理。</p><blockquote><p>项目介绍： <a href="https://hwameistor.io" target="_blank" rel="noopener noreferrer">https://hwameistor.io</a>
安装指引： <a href="https://hwameistor.io/cn/docs/quick_start/install/deploy" target="_blank" rel="noopener noreferrer">https://hwameistor.io/cn/docs/quick_start/install/deploy</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-helm-仓库">安装 Helm 仓库<a href="#安装-helm-仓库" class="hash-link" aria-label="Direct link to 安装 Helm 仓库" title="Direct link to 安装 Helm 仓库">​</a></h3><p>Hwameistor 依赖 Helm 进行安装，所以事先 需要完成 Helm 应用的安装</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> hwameistor http://hwameistor.io/hwameistor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo update hwameistor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm pull hwameistor/hwameistor --untar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-hwameistior-应用">安装 HwameiStior 应用<a href="#安装-hwameistior-应用" class="hash-link" aria-label="Direct link to 安装 HwameiStior 应用" title="Direct link to 安装 HwameiStior 应用">​</a></h3><p>使用镜像仓库安装，要切换镜像仓库的镜像，请使用 --set 更改这两个参数值：<code>global.k8sImageRegistry</code> 和 <code>global.hwameistorImageRegistry</code></p><blockquote><p>注意默认的镜像仓库 quay.io 和 ghcr.io。如果无法访问，可尝试使用 DaoCloud 提供的镜像源 quay.m.daocloud.io 和 ghcr.m.daocloud.io</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ helm </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> hwameistor ./hwameistor </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -n hwameistor --create-namespace </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set global.k8sImageRegistry</span><span class="token operator">=</span><span class="token plain">k8s-gcr.m.daocloud.io </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    --set global.hwameistorImageRegistry</span><span class="token operator">=</span><span class="token plain">ghcr.m.daocloud.io</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查 Hwameistor 的全部 Pod 状态</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl -n hwameistor get pod</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                                       READY   STATUS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-csi-controller-665bb7f47d-6227f      </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-5ph2d                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-jhj59                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-k9cvj                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-disk-manager-kxwww                        </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-csi-controller-667d949fbb-k488w   </span><span class="token number">3</span><span class="token plain">/3     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-csqqv                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-gcrzm                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-v8g7t                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-local-storage-zkwmn                             </span><span class="token number">2</span><span class="token plain">/2     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-scheduler-58dfcf79f5-lswkt                      </span><span class="token number">1</span><span class="token plain">/1     Running</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-webhook-986479678-278cr                         </span><span class="token number">1</span><span class="token plain">/1     Running</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>local-disk-manager 和 local-storage 是 DaemonSet。在每个 Kubernetes 节点上都应该有一个 DaemonSet Pod。</p></blockquote><p>等到全部状态正常后，可进行后续操作，检查 <code>StorageClass</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get storageclass hwameistor-storage-lvm-hdd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                   PROVISIONER         RECLAIMPOLICY</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hwameistor-storage-lvm-hdd </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   lvm.hwameistor.io   Delete</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="检查-lockdisknode和-lockdisk">检查 <code>LockDiskNode</code>和 <code>LockDisk</code><a href="#检查-lockdisknode和-lockdisk" class="hash-link" aria-label="Direct link to 检查-lockdisknode和-lockdisk" title="Direct link to 检查-lockdisknode和-lockdisk">​</a></h3><p>默认在使用的磁盘状态应该 <code>PHASE</code> 展示位 <code>Bound</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get localdisknodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME               NODEMATCH          PHASE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com   master01-k8s-com   Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com     node01-k8s-com     Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com     node02-k8s-com     Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get localdisks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                   NODEMATCH          CLAIM              PHASE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com-vda   master01-k8s-com                      Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com-vdb   master01-k8s-com   master01-k8s-com   Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com-vda     node01-k8s-com                        Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com-vdb     node01-k8s-com     node01-k8s-com     Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com-vda     node02-k8s-com                        Bound</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com-vdb     node02-k8s-com     node02-k8s-com     Bound</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="设置默认的-storageclass">设置默认的 <code>StorageClass</code><a href="#设置默认的-storageclass" class="hash-link" aria-label="Direct link to 设置默认的-storageclass" title="Direct link to 设置默认的-storageclass">​</a></h3><p>这个对应的 <code>storageclasses</code>增加标识为默认的 <code>annotations</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl patch storageclasses.storage.k8s.io hwameistor-storage-lvm-hdd -p </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;metadata&quot;: {&quot;annotations&quot;:{&quot;storageclass.kubernetes.io/is-default-class&quot;:&quot;true&quot;}}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建存储池">创建存储池<a href="#创建存储池" class="hash-link" aria-label="Direct link to 创建存储池" title="Direct link to 创建存储池">​</a></h3><p>使用下方的命令创建对应的存储池，注意替换对应的 <code>nodeName</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ helm template ./hwameistor </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   -s templates/post-install-claim-disks.yaml </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   --set </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">storageNodes</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{master01-k8s-com,node01-k8s-com,node02-k8s-com}&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> kubectl apply -f -</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>创建成功后，查看本地磁盘的 <code>ldc</code>，应该全部是 <code>Bound</code></p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl get ldc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-metrics-server">安装 <code>Metrics server</code><a href="#安装-metrics-server" class="hash-link" aria-label="Direct link to 安装-metrics-server" title="Direct link to 安装-metrics-server">​</a></h2><p>接下来需要安装的 DCE5.0 需要安装 <code>metrics-server</code>，将下方的文件内容保存为 <code>metrics-server.yaml</code></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-admin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-edit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rbac.authorization.k8s.io/aggregate-to-view</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">aggregated</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> metrics.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">rules</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes/metrics</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">apiGroups</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">verbs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> watch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> RoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Role</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> extension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">apiserver</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">authentication</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">reader</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">delegator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">delegator</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRoleBinding</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">roleRef</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">apiGroup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterRole</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">subjects</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ServiceAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">targetPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">rollingUpdate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">maxUnavailable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">args</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dir=/tmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">secure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">port=4443</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">preferred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">types=InternalIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">ExternalIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">Hostname</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">use</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">node</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">status</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">port</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">metric</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">resolution=15s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">kubelet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">insecure</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tls</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> registry.cn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">hangzhou.aliyuncs.com/chenby/metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">v0.6.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">imagePullPolicy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> IfNotPresent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">livenessProbe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /livez</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTPS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">4443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">protocol</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> TCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">readinessProbe</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">failureThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">httpGet</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /readyz</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> HTTPS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">initialDelaySeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">periodSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">resources</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">cpu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 100m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token key atrule">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 200Mi</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">securityContext</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">allowPrivilegeEscalation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">readOnlyRootFilesystem</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">runAsNonRoot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">runAsUser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">volumeMounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /tmp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">nodeSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">kubernetes.io/os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> linux</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">priorityClassName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cluster</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">critical</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">serviceAccountName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">emptyDir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tmp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">dir</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apiregistration.k8s.io/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> APIService</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">k8s-app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1beta1.metrics.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">group</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics.k8s.io</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">groupPriorityMinimum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">insecureSkipTLSVerify</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">service</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kube</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1beta1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">versionPriority</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>执行安装命令：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl apply -f  metrics-server.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安装成功后，通过下方命令可以成功的看到 node 节点的资源利用情况</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ kubectl </span><span class="token function" style="color:rgb(80, 250, 123)">top</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME               CPU</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">cores</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   CPU%   MEMORY</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">   MEMORY%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">master01-k8s-com   218m         </span><span class="token number">5</span><span class="token plain">%     5610Mi          </span><span class="token number">35</span><span class="token plain">%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node01-k8s-com     445m         </span><span class="token number">11</span><span class="token plain">%    9279Mi          </span><span class="token number">59</span><span class="token plain">%</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">node02-k8s-com     464m         </span><span class="token number">11</span><span class="token plain">%    9484Mi          </span><span class="token number">60</span><span class="token plain">%</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-dce-社区版">安装 DCE 社区版<a href="#安装-dce-社区版" class="hash-link" aria-label="Direct link to 安装 DCE 社区版" title="Direct link to 安装 DCE 社区版">​</a></h2><p>以下操作步骤将会带着您一步一步完成 DaoCloud Enterprise 5.0 社区版的完整安装，注意安装细节</p><ul><li>官方文档介绍 <a href="https://docs.daocloud.io/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/</a></li><li>安装依赖项 <a href="https://docs.daocloud.io/install/install-tools/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/install-tools/</a></li><li>在线安装标准社区版 <a href="https://docs.daocloud.io/install/community/k8s/online/#_1" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/install/community/k8s/online/</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装基础依赖">安装基础依赖<a href="#安装基础依赖" class="hash-link" aria-label="Direct link to 安装基础依赖" title="Direct link to 安装基础依赖">​</a></h3><p>DCE 已经提供了一键安装的离线工具依赖包，经过测试比较稳定的运行在 <code>CentOS 7</code> 和 <code>CentOS 8</code>，如果您也是这样两个系统，可以使用下方脚本。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -LO https://proxy-qiniu-download-public.daocloud.io/DaoCloud_Enterprise/dce5/install_prerequisite.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x install_prerequisite.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"> install_prerequisite.sh online community</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也可以选择手动安装这些：</p><ul><li>podman</li><li>helm ≥ 3.9.4</li><li>skopeo ≥ 1.9.2</li><li>kind</li><li>kubectl ≥ 1.22.0</li><li>yq ≥ 4.27.5</li><li>minio client</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="下载-dce5-installer-安装器">下载 dce5-installer 安装器<a href="#下载-dce5-installer-安装器" class="hash-link" aria-label="Direct link to 下载 dce5-installer 安装器" title="Direct link to 下载 dce5-installer 安装器">​</a></h3><p>注意，需要在 Master 节点 来进行 dce5-installer 的安装，建议直接下载到当前节点</p><blockquote><p>获取最新版本的查看界面： <a href="https://docs.daocloud.io/download/dce5/#_1" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/download/dce5/#_1</a></p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 假定 VERSION 为 v0.3.28 , 使用上方链接获取最新版本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VERSION</span><span class="token operator">=</span><span class="token plain">v0.3.28</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -Lo ./dce5-installer  https://proxy-qiniu-download-public.daocloud.io/DaoCloud_Enterprise/dce5/dce5-installer-</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VERSION</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x dce5-installer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>如果<code>proxy-qiniu-download-public.daocloud.io</code> 链接失效，使用 <code>qiniu-download-public.daocloud.io</code></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装配置文件-可选">安装配置文件 <!-- -->[可选]<a href="#安装配置文件-可选" class="hash-link" aria-label="Direct link to 安装配置文件-可选" title="Direct link to 安装配置文件-可选">​</a></h3><p>将下方的配置文件内容保存为 <code>clusterconfig.yaml</code>，如果使用 <code>NodePort</code>的方式安装则不需要特定指定配置文件</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> provision.daocloud.io/v1alpha1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ClusterConfig</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">loadBalancer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> metallb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">istioGatewayVip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 10.6.229.10/32  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 这是 Istio gateway 的 VIP，也会是 DCE 5.0 的控制台的浏览器访问 IP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token key atrule">insightVip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 10.6.229.11/32  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 这是 Global 集群的 Insight-Server 采集子集群的监控指标的网络路径用的 VIP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>如果使用配置文件，注意需要 事先安装 <code>MetaLB</code>，这一部分需要自行完成。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="执行安装">执行安装<a href="#执行安装" class="hash-link" aria-label="Direct link to 执行安装" title="Direct link to 执行安装">​</a></h3><p>根据需求选择下方的安装文件，如果选择指定配置文件内的</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 无配置文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./dce5-installer install-app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 有指定 loadBalancer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ ./dce5-installer install-app -c clusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装完成">安装完成<a href="#安装完成" class="hash-link" aria-label="Direct link to 安装完成" title="Direct link to 安装完成">​</a></h3><p>如果看到下方的页面，说明安装成功了；默认账号密码为： <code>admin/changeme</code></p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/J9lNN0.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="重定向登录页-portal-反向代理">重定向登录页 Portal 反向代理<a href="#重定向登录页-portal-反向代理" class="hash-link" aria-label="Direct link to 重定向登录页 Portal 反向代理" title="Direct link to 重定向登录页 Portal 反向代理">​</a></h3><p>一般情况下，我们安装后的集群访问地址是一个内网地址，当我们需要集群页面开放到公网访问时，会发现登录页会自动重定向内网地址，这是因为 DCE 5.0 反向代理服务器地址默认是安装时的配置；需要作出以下更新：</p><p>设置环境变量，方便在后续中使用</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 您的反向代理地址，例如：`export DCE_PROXY=&quot;https://demo-alpha.daocloud.io&quot;`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DCE_PROXY</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://domain:port&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># helm --set 参数备份文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">GHIPPO_VALUES_BAK</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;ghippo-values-bak.yaml&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 获取当前 ghippo 的版本号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">GHIPPO_HELM_VERSION</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">helm get notes ghippo -n ghippo-system </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">grep</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&quot;Chart Version&quot;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">awk</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -F </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;: &#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;{ print $2 }&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>更新 Helm repo</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo update ghippo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>备份 --set 参数</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm get values ghippo -n ghippo-system -o yaml </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_VALUES_BAK}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 vim 命令编辑并保存</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">vim</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_VALUES_BAK}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token environment constant" style="color:rgb(189, 147, 249)">USER</span><span class="token plain">-SUPPLIED VALUES:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">global:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  reverseProxy: </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${DCE_PROXY}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># 只需要修改这一行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 heml upgrade 更新配置</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm upgrade ghippo ghippo/ghippo </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -n ghippo-system </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -f </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_VALUES_BAK}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --version </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${GHIPPO_HELM_VERSION}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用 kubectl 重启全局管理 Pod，使配置生效</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout restart deploy/ghippo-apiserver -n ghippo-system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl rollout restart statefulset/ghippo-keycloak -n ghippo-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="申请社区版免费体验">申请社区版免费体验<a href="#申请社区版免费体验" class="hash-link" aria-label="Direct link to 申请社区版免费体验" title="Direct link to 申请社区版免费体验">​</a></h3><ul><li>申请页面 <a href="https://qingflow.com/f/58604bf8" target="_blank" rel="noopener noreferrer">https://qingflow.com/f/58604bf8</a></li><li>申请操作教程 <a href="https://docs.daocloud.io/dce/license0/" target="_blank" rel="noopener noreferrer">https://docs.daocloud.io/dce/license0/</a></li></ul></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/11/28/cskefu-opensource-project">春松客服</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-28T00:00:00.000Z" itemprop="datePublished">November 28, 2022</time> · <!-- -->19 min read</div></header><div class="markdown" itemprop="articleBody"><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><a href="https://github.com/cskefu/cskefu" target="_blank" rel="noopener noreferrer">Cskefu</a></p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="项目起源">项目起源<a href="#项目起源" class="hash-link" aria-label="Direct link to 项目起源" title="Direct link to 项目起源">​</a></h2><p>很自豪给大家推荐，春松客服是我参与主导团队的第一个纯社区开源项目，目前在 Github 中文项目中开源排名第一。</p><p>目前我们正在规划 V8 产品迭代，这将会是一个全新的升级，请关注我们的项目进展 <a href="https://github.com/cskefu/cskefu" target="_blank" rel="noopener noreferrer">cskefu</a></p><p>同时也欢迎大家加入我们的团队。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="中国本土团队自主研发">中国本土团队自主研发<a href="#中国本土团队自主研发" class="hash-link" aria-label="Direct link to 中国本土团队自主研发" title="Direct link to 中国本土团队自主研发">​</a></h3><ul><li>春松客服是北京华夏春松于 2018 年发布的开源项目，目的是帮助企业上线智能客服系统。</li><li>2022 年中，春松客服开源社区成立，目前春松客服由春松客服技术委员会领导，核心开发者来自开源社区，实践与客户、合伙伙伴共建社区。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="最有价值开源项目">最有价值开源项目<a href="#最有价值开源项目" class="hash-link" aria-label="Direct link to 最有价值开源项目" title="Direct link to 最有价值开源项目">​</a></h3><p>至 2022 年 10 月，春松客服在企业中部署超过 1.8 万次，上线客户超过 500 家，是 GitHub 上最受欢迎的中文开源客服系统。因开源、云原生架构和功能丰富受到广泛好评，在 Gitee 上赢得最有价值项目奖项。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="我们的愿景">我们的愿景<a href="#我们的愿景" class="hash-link" aria-label="Direct link to 我们的愿景" title="Direct link to 我们的愿景">​</a></h2><p>在开源客服系统，我希望将春松客服平台成为一个开源的生态，希望吸引到成千上万的开发者和企业来使用和参与春松客服的开发。</p><ul><li>春松客服不是传统的客服操作系统，区别与传统客服产品或客服厂商，因为我们在尝试使用开源方式打造一个可持续发展的客服生态</li><li>我们承诺开放客服系统基础的核心能力和底层框架，上层应用增强功能则有开发者来决定</li><li>开源不代表免费，我们将会对提供的增值能力进行收费，以保证主导团队的可持续发展，包括但不限于（技术支持、SaaS 平台）</li><li>春松客服是一套开发者友好的客服操作系统，我们致力于让春松客服在即使脱离了主导团队，仍旧具备可持续发展的开源产品</li></ul><p>春松客服是一个依托于开源精神的客服操作系统，我们承诺永远开源，并与开发者打造一个完美的客服系统生态。</p><p>我们想做客服系统的 Kubernetes。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="最终用户">最终用户<a href="#最终用户" class="hash-link" aria-label="Direct link to 最终用户" title="Direct link to 最终用户">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="一线客服团队人员">一线客服团队人员<a href="#一线客服团队人员" class="hash-link" aria-label="Direct link to 一线客服团队人员" title="Direct link to 一线客服团队人员">​</a></h3><p>一线客服人员作为日常之中，长期使用客服系统的人员；客服系统的能力和效率将直接影响到他们的使用；</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="客服领域开发者">客服领域开发者<a href="#客服领域开发者" class="hash-link" aria-label="Direct link to 客服领域开发者" title="Direct link to 客服领域开发者">​</a></h3><p>开发者们，可以利用春松客服的开放能力，为春松客服编写大量的增强插件。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="产品设计理念">产品设计理念<a href="#产品设计理念" class="hash-link" aria-label="Direct link to 产品设计理念" title="Direct link to 产品设计理念">​</a></h2><p>春松客服的核心目标，不是打造一个我们认为的客服系统，而是我们希望打造一套轻量化的智能客服系统框架和具有海量插件的平台。</p><ul><li>对于一线客服团队，可以根据自己的需要，选择合适的功能。</li><li>对于客服领域的开发者们，提供一个平台，让开发者们可以轻松实现春松客服 + 的能力</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="合理的功能边界定义">合理的功能边界定义<a href="#合理的功能边界定义" class="hash-link" aria-label="Direct link to 合理的功能边界定义" title="Direct link to 合理的功能边界定义">​</a></h3><p>传统的客服系统提供了大量复杂的功能和配置，虽然总能找到对用户来说想要的功能，但是大量冗杂、甚至逻辑冲突的功能，这虽然没有过错；但的确极大的提高了一线客服人员的使用成本。</p><p>对于真正的使用者来说，我们希望客服系统的功能，可以刚好满足我所需要的全部功能，同时可以方便的进行功能的增减和升级。</p><p>所以，春松客服的功能边界在：提供 <strong>高性能、稳定、通用的、生产级</strong> 智能客服系统底座和平台。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="明确的功能范围定义">明确的功能范围定义<a href="#明确的功能范围定义" class="hash-link" aria-label="Direct link to 明确的功能范围定义" title="Direct link to 明确的功能范围定义">​</a></h3><ul><li>春松客服确保底层基础能力的支持，并且保证良好的可扩展性</li><li>春松客服避免直接内置开发复杂的应用功能（这往往会有兼容性问题），更多以标准开放能力为目标，交由开发者来实现 <code>增强插件</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能介绍">功能介绍<a href="#功能介绍" class="hash-link" aria-label="Direct link to 功能介绍" title="Direct link to 功能介绍">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="春松客服-v7">春松客服 V7<a href="#春松客服-v7" class="hash-link" aria-label="Direct link to 春松客服 V7" title="Direct link to 春松客服 V7">​</a></h2><p>春松客服到现在，已经发展了 2 年的时间，目前版本迭代到 V7，下面展示春松客服的功能和介绍网址入口。</p><table><thead><tr><th>功能</th><th>介绍网址</th></tr></thead><tbody><tr><td>应用部署</td><td><a href="https://docs.cskefu.com/docs/deploy" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/deploy</a></td></tr><tr><td>系统初始化</td><td><a href="https://docs.cskefu.com/docs/initialization" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/initialization</a></td></tr><tr><td>开源社区</td><td><a href="https://docs.cskefu.com/docs/osc/" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/</a></td></tr><tr><td>开源许可协议</td><td><a href="https://docs.cskefu.com/docs/osc/license" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/license</a></td></tr><tr><td>春松客服大讲堂</td><td><a href="https://docs.cskefu.com/docs/osc/training" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/training</a></td></tr><tr><td>开发环境搭建</td><td><a href="https://docs.cskefu.com/docs/osc/engineering" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/engineering</a></td></tr><tr><td>IDE 使用之 Eclipse IDE</td><td><a href="https://docs.cskefu.com/docs/osc/ide_eclipse" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/ide_eclipse</a></td></tr><tr><td>IDE 使用之 IntelliJ IDEA</td><td><a href="https://docs.cskefu.com/docs/osc/ide_intelij_idea" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/ide_intelij_idea</a></td></tr><tr><td>系统维护</td><td><a href="https://docs.cskefu.com/docs/osc/maintainence" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/maintainence</a></td></tr><tr><td>提交代码</td><td><a href="https://docs.cskefu.com/docs/osc/contribution" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/contribution</a></td></tr><tr><td>REST APIs</td><td><a href="https://docs.cskefu.com/docs/osc/restapi" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/osc/restapi</a></td></tr><tr><td>账号和权限</td><td><a href="https://docs.cskefu.com/docs/accounting" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/accounting</a></td></tr><tr><td>坐席工作台</td><td><a href="https://docs.cskefu.com/docs/work" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/work</a></td></tr><tr><td>渠道管理</td><td><a href="https://docs.cskefu.com/docs/channels/" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/channels/</a></td></tr><tr><td>Messenger 渠道</td><td><a href="https://docs.cskefu.com/docs/channels/messenger/" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/channels/messenger/</a></td></tr><tr><td>网页渠道</td><td><a href="https://docs.cskefu.com/docs/channels/webim" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/channels/webim</a></td></tr><tr><td>客户关系管理</td><td><a href="https://docs.cskefu.com/docs/crm" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/crm</a></td></tr><tr><td>坐席监控</td><td><a href="https://docs.cskefu.com/docs/monitoring" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/monitoring</a></td></tr><tr><td>机器人客服</td><td><a href="https://docs.cskefu.com/docs/work-chatbot/" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/work-chatbot/</a></td></tr><tr><td>安装配置</td><td><a href="https://docs.cskefu.com/docs/work-chatbot/install" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/work-chatbot/install</a></td></tr><tr><td>集成机器人客服</td><td><a href="https://docs.cskefu.com/docs/work-chatbot/bot-agent" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/work-chatbot/bot-agent</a></td></tr><tr><td>消息类型</td><td><a href="https://docs.cskefu.com/docs/work-chatbot/message-types" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/work-chatbot/message-types</a></td></tr><tr><td>会话历史</td><td><a href="https://docs.cskefu.com/docs/reports" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/reports</a></td></tr><tr><td>访问统计</td><td><a href="https://docs.cskefu.com/docs/usage" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com/docs/usage</a></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="账号和权限">账号和权限<a href="#账号和权限" class="hash-link" aria-label="Direct link to 账号和权限" title="Direct link to 账号和权限">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="系统管理员">系统管理员<a href="#系统管理员" class="hash-link" aria-label="Direct link to 系统管理员" title="Direct link to 系统管理员">​</a></h3><p>在春松客服里，系统管理员是具备管理所辖组织内坐席、权限、角色、联系人和坐席监控等资源的管理员，系统管理员分为两种类型：<strong>超级管理员</strong>和<strong>普通管理员</strong>，普通管理员也简称“管理员”。</p><p>超级管理员为春松客服系统设置的，初始化一个春松客服实例后，默认超级管理员用户名为 <code>admin</code>，密码为 <code>admin1234</code>，并且有且只有一个，IT 人员在初始化搭建的春松客服实例的第一件事就是更改超级管理员账号的密码，以确保系统安全。超级管理员具备更新系统所有属性的能力，读写数据，是春松客服内权限最大的用户。</p><p>安装启动系统，进入春松客服后台界面，输入初始化的超级管理员账号密码(用户名: <code>admin</code>, 密码: <code>admin1234</code>)，点击立即登录。</p><p><strong>超级管理员同时维护者春松客服的组织机构的高层级，组织机构是树形结构，默认情况下没有组织机构信息，春松客服搭建完成后，由超级管理员设定根节点，比如总公司、总公司下属子公司，维护这样的一个层级结构，再创建其他管理员账号，普通管理员账号可以创建多个，不同管理员隶属于不同组织机构，该管理员只有管理其所在组织机构及该组织机构附属组织机构的权限。</strong></p><p>系统管理员切换不同的组织机构，可以查看不同组织机构的数据。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="权限设计">权限设计<a href="#权限设计" class="hash-link" aria-label="Direct link to 权限设计" title="Direct link to 权限设计">​</a></h3><p>春松客服权限体系包括：组织机构，角色，账号。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="权限的管理">权限的管理<a href="#权限的管理" class="hash-link" aria-label="Direct link to 权限的管理" title="Direct link to 权限的管理">​</a></h4><p>角色可以自定义，设置对一系列资源的读写。<strong>角色的创建和删除，修改资源授权，只有超级管理员可以操作，</strong>，普通【管理员】只具备角色的使用权：添加或删除权限里的系统账号。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="系统账号读写资源与角色的关系">系统账号读写资源与角色的关系<a href="#系统账号读写资源与角色的关系" class="hash-link" aria-label="Direct link to 系统账号读写资源与角色的关系" title="Direct link to 系统账号读写资源与角色的关系">​</a></h4><p>将账号添加到角色后，因为账号也同时隶属于不同的组织机构，那么账号所具有的权限就是其所在组织机构以及附属组织机构的角色对应的资源的读写。</p><p>根据角色和坐席所在组织机构进行权限检查：</p><ul><li>超级管理员可以管理系统所有资源</li><li>管理员可以创建部门人员</li><li>组织机构支持层级的树状结构</li><li>角色包含对不同资源的读写权限</li><li>资源如联系人，客户等是根据组织机构进行隔离的</li><li>网站渠道必须启用技能组，不同网站渠道接入的访客根据网站渠道设置分配给不同的技能组</li><li>系统数据根据坐席当前所在的组织机构进行展示</li><li>坐席可以看到自己所在组织机构以及附属组织机构的数据</li></ul><p>假设组织机构如下：</p><ul><li>李四所能看到的联系人全集是 A 部门及其附属部门所创建的全部联系人</li><li>李四看不到 B 部门的联系人，张三看不到 A 部门的联系人</li><li>李四能看到刘一创建的联系人，刘一看不到李四创建的联系人</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="组织机构管理">组织机构管理<a href="#组织机构管理" class="hash-link" aria-label="Direct link to 组织机构管理" title="Direct link to 组织机构管理">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建部门">创建部门<a href="#创建部门" class="hash-link" aria-label="Direct link to 创建部门" title="Direct link to 创建部门">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>组织机构</em> -&gt; <em>创建部门</em>，并且可以启用或关闭技能组</p><ul><li>名词解释：</li></ul><p><strong>部门</strong> 需要创建的部门名称</p><p><strong>上级机构</strong> 选择上级部门</p><p><strong>启用技能组</strong> 这里启用与否，技能是接待同一个渠道的坐席人员群组，春松客服支持配置自动分配策略，连接访客与坐席，简称 ACD 模块</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="更新删除部门">更新、删除部门<a href="#更新删除部门" class="hash-link" aria-label="Direct link to 更新、删除部门" title="Direct link to 更新、删除部门">​</a></h4><p>进入部门列表</p><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>组织机构</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="编辑-修改-部门">编辑 (修改) 部门<a href="#编辑-修改-部门" class="hash-link" aria-label="Direct link to 编辑 (修改) 部门" title="Direct link to 编辑 (修改) 部门">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>组织机构</em> -&gt; <em>修改部门</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="删除部门">删除部门<a href="#删除部门" class="hash-link" aria-label="Direct link to 删除部门" title="Direct link to 删除部门">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>组织机构</em> -&gt; <em>删除部门</em></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置部门地区">设置部门地区<a href="#设置部门地区" class="hash-link" aria-label="Direct link to 设置部门地区" title="Direct link to 设置部门地区">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>组织结构</em> -&gt; <em>选中一个部门</em> -&gt; <em>地区设置</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="角色管理">角色管理<a href="#角色管理" class="hash-link" aria-label="Direct link to 角色管理" title="Direct link to 角色管理">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建角色">创建角色<a href="#创建角色" class="hash-link" aria-label="Direct link to 创建角色" title="Direct link to 创建角色">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>系统角色</em> -&gt; <em>新建角色</em></p><p>只有【系统超级管理员】可以创建角色。</p><p>名词解释：</p><p><strong>角色</strong> 系统中用户的操作权限是通过角色来控制，角色可以理解为具备一定操作权限的用户组；</p><p>可以把一个或者更多的用户添加到一个角色下；</p><p>可以给一个角色设置一定的系统权限，相当于这个角色下面的用户有了这些系统权限；</p><p>角色创建好了以后，在所有组织机构中共享。不同组织机构的管理员，只能管理其所在组织机构和下属组织机构里的账号的角色。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="编辑-修改-角色">编辑 (修改) 角色<a href="#编辑-修改-角色" class="hash-link" aria-label="Direct link to 编辑 (修改) 角色" title="Direct link to 编辑 (修改) 角色">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>系统角色</em> -&gt; <em>修改角色</em></p><p>只有【系统超级管理员】可以编辑角色。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="删除角色">删除角色<a href="#删除角色" class="hash-link" aria-label="Direct link to 删除角色" title="Direct link to 删除角色">​</a></h4><p>系统-&gt;系统概况-&gt;用户和组-&gt;系统角色&gt;删除角色</p><p>只有【系统超级管理员】可以删除角色。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="账号管理">账号管理<a href="#账号管理" class="hash-link" aria-label="Direct link to 账号管理" title="Direct link to 账号管理">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建用户账号系统---系统概况---用户和组---用户账号---创建新用户">创建用户账号：<em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>用户账号</em> -&gt; <em>创建新用户</em><a href="#创建用户账号系统---系统概况---用户和组---用户账号---创建新用户" class="hash-link" aria-label="Direct link to 创建用户账号系统---系统概况---用户和组---用户账号---创建新用户" title="Direct link to 创建用户账号系统---系统概况---用户和组---用户账号---创建新用户">​</a></h4><blockquote><p>提示：</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">电子邮件: 需要有效的格式密码: 字母数字最少8位，手动录入手机号: 全系统唯一</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>用户分为管理员和普通用户</p></li><li><p>坐席分为一般坐席和 SIP 坐席，普通用户与管理用户都可以成为坐席，SIP 坐席是在多媒体坐席的基础上</p></li><li><p><strong>每个账号必须分配到一个部门下，以及关联到一个角色上，才可以查看或管理资源，请详细阅读【组织机构】和【角色】管理</strong></p></li><li><p>创建普通用户</p></li><li><p>创建多媒体坐席</p></li><li><p>创建管理员</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="查看账号信息">查看账号信息<a href="#查看账号信息" class="hash-link" aria-label="Direct link to 查看账号信息" title="Direct link to 查看账号信息">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>用户账号</em></p><p>点击操作一栏中的“编辑”“删除”，可以对当前用户列表中的所有用户的信息进行编辑或者删除</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="添加账号到部门">添加账号到部门<a href="#添加账号到部门" class="hash-link" aria-label="Direct link to 添加账号到部门" title="Direct link to 添加账号到部门">​</a></h4><p><em>系统</em> -&gt; <em>系统概况</em> -&gt; <em>用户和组</em> -&gt; <em>组织结构</em> -&gt; <em>选中一个部门</em> -&gt; <em>添加用户到当前部门</em></p><ul><li><p>可以把已经存在的 用户账号 添加到一个特定的部门中</p></li><li><p>一个用户账号只能隶属于一个部门</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="添加账号到角色">添加账号到角色<a href="#添加账号到角色" class="hash-link" aria-label="Direct link to 添加账号到角色" title="Direct link to 添加账号到角色">​</a></h4><p>系统-&gt;系统概况-&gt;用户和组-&gt;系统角色&gt;添加用户到角色</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="渠道管理">渠道管理<a href="#渠道管理" class="hash-link" aria-label="Direct link to 渠道管理" title="Direct link to 渠道管理">​</a></h3><p>春松客服支持多种渠道，访客的来源可能是多渠道的，这也是目前联络中心发展的趋势，以及对智能客服系统的一个挑战，一方面随着信息技术和互联网通信、聊天工具的演变，企业的客户逐渐分散，尤其是营销平台多元化。</p><p>多渠道的适应能力，是春松客服的重要特色。在【渠道管理】的子菜单中，查看支持的不同类型的渠道。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="渠道支持">渠道支持<a href="#渠道支持" class="hash-link" aria-label="Direct link to 渠道支持" title="Direct link to 渠道支持">​</a></h4><table><thead><tr><th>渠道名称</th><th>简介</th><th>获得</th></tr></thead><tbody><tr><td><a href="https://docs.cskefu.com/docs/channels/webim" target="_blank" rel="noopener noreferrer">网页渠道</a></td><td>通过在网页中注入春松客服网页渠道 HTML，实现聊天控件，访客与客服建立实时通信连接，支持坐席邀请访客对话等功能</td><td><strong>开源，免费</strong>，随<a href="https://github.com/chatopera/cskefu" target="_blank" rel="noopener noreferrer">基础代码</a>发布</td></tr><tr><td><a href="https://docs.cskefu.com/docs/channels/messenger" target="_blank" rel="noopener noreferrer">Facebook Messenger 渠道</a></td><td>简称“Messenger 插件”或“ME”插件，Messenger 是 Facebook 旗下的最主要的即时通信软件，支持多种平台，因其创新的理念、优秀的用户体验和全球最大的社交网络，而广泛应用。春松客服 Messenger 插件帮助企业在 Facebook 平台上实现营销和客户服务</td><td><strong>开源，免费</strong>，随<a href="https://github.com/chatopera/cskefu" target="_blank" rel="noopener noreferrer">基础代码</a>发布</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="网页渠道">网页渠道<a href="#网页渠道" class="hash-link" aria-label="Direct link to 网页渠道" title="Direct link to 网页渠道">​</a></h3><p>网页聊天支持可以适配移动设备浏览器，桌面浏览器。可以在电脑，手机，微信等渠道接入网页聊天控件。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="安装">安装<a href="#安装" class="hash-link" aria-label="Direct link to 安装" title="Direct link to 安装">​</a></h4><p>获取网页脚本，<em>系统</em> -&gt; <em>系统管理</em> -&gt; <em>客服接入</em> -&gt; <em>网站列表</em> -&gt; <em>点击“Chatopera 官网”</em> -&gt; <em>基本设置</em> -&gt; <em>接入；</em></p><p>将图中的代码复制到一个 Web 项目的页面中，例如下图的。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用">使用<a href="#使用" class="hash-link" aria-label="Direct link to 使用" title="Direct link to 使用">​</a></h4><p>使用浏览器打开该 Web 页面。</p><p>【提示】该网页需要使用 http(s) 打开，不支持使用浏览器打开本地 HTML 页面。</p><p>点击该网页中出现的“在线客服”按钮，出现聊天窗口，可以作为访客，与客服聊天了。</p><p>【提示】春松客服提供一个测试网页客户端的例子，可以使用 <em><a href="https://docs.cskefu.com/docs/accountinghttp://%7B%7B%E6%98%A5%E6%9D%BE%E6%98%A5%E6%9D%BE%E5%AE%A2%E6%9C%8DIP:%5BPORT" target="_blank" rel="noopener noreferrer">http://IP:PORT</a>]<!-- -->}}/testclient.html</em> 进行访问。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="facebook-渠道">Facebook 渠道<a href="#facebook-渠道" class="hash-link" aria-label="Direct link to Facebook 渠道" title="Direct link to Facebook 渠道">​</a></h3><p>Messenger 是 Facebook 旗下的最主要的即时通信软件，支持多种平台，因其创新的理念、优秀的用户体验和全球最大的社交网络，而广泛应用。通过 Facebook Messenger 的官方链接，可以了解更多。</p><p><a href="https://www.messenger.com/" target="_blank" rel="noopener noreferrer">https://www.messenger.com/</a></p><p>春松客服 Messenger 插件帮助企业在 Facebook 平台上实现营销和客户服务。</p><ul><li>集成 Facebook 粉丝页，使用 OTN 推送营销活动信息，吸引新粉丝和激活老客户</li><li>集成 Chatopera 机器人客服，自动回答常见问题，提升客户体验</li><li>支持机器人客服转人工坐席，解决客户的复杂问题</li><li>产品迭代一年，提供多个最佳实践，帮助企业高效率运营</li><li>春松客服运营分析和 Chatopera 机器人客服运营分析生成报表，洞察业务指标</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="了解-messenger">了解 Messenger<a href="#了解-messenger" class="hash-link" aria-label="Direct link to 了解 Messenger" title="Direct link to 了解 Messenger">​</a></h4><p>首先，出海企业要获客，或者通过互联网方式提供服务，那么 Facebook 上的广告和 Messenger 服务，是您无论如何都要使用的，因为你可以从这里找到您的目标客户、潜在客户。但是，如果 Facebook 平台的商业化程度过高，将影响社交网络内用户的体验，比如用户收到和自己不相关、不感兴趣的、大量的广告。为此 Facebook 在广告和 Messenger 上，有很多设计、一些限制，达到了商业化和人们社交需求的平衡，这是 Facebook 能成为今天世界上最大的社交网络的关键原因之一。</p><p>其次，您需要了解 Messenger 的一些应用场景，比如 Cskefu 为九九互动提供的智能客服和 OTN 服务的案例 chatopera-me-jiujiu2020。</p><p>在正式介绍春松客服 Messenger 插件的使用之前，需要说明 Cskefu 提供该插件是通过 Facebook Messenger 平台的开发者 APIs 实现，因此，该插件的功能安全可靠、稳定强大并且会不断更新。</p><p><a href="https://developers.facebook.com/docs/messenger-platform" target="_blank" rel="noopener noreferrer">https://developers.facebook.com/docs/messenger-platform</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="使用指南">使用指南<a href="#使用指南" class="hash-link" aria-label="Direct link to 使用指南" title="Direct link to 使用指南">​</a></h4><ul><li><a href="https://docs.cskefu.com/docs/channels/messenger/install.html" target="_blank" rel="noopener noreferrer">Messenger 渠道配置</a></li><li><a href="https://docs.cskefu.com/docs/channels/messenger/facebook-otn.html" target="_blank" rel="noopener noreferrer">Facebook OTN 主动推送指南</a></li><li><a href="https://docs.cskefu.com/docs/channels/messenger/messenger-chatbot.html" target="_blank" rel="noopener noreferrer">Messenger 渠道配置机器人客服</a></li><li><a href="https://docs.cskefu.com/docs/channels/messenger/message-types.html" target="_blank" rel="noopener noreferrer">Messenger 管理机器人客服对话</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="春松客服全新版本-v8">春松客服全新版本 V8<a href="#春松客服全新版本-v8" class="hash-link" aria-label="Direct link to 春松客服全新版本 V8" title="Direct link to 春松客服全新版本 V8">​</a></h3><p>自今年春松客服开源社区和技术委员会成立，我们重新复盘了春松客服的发展过往；我们决心重构整个春松客服，所有 V8 会是一个全新定位的版本。</p><ul><li>新版本前端 UI 与产品功能<ul><li>首页模块</li><li>会话工作台</li><li>工单中心</li><li>用户中心</li></ul></li><li>全新打造学习中心</li><li>多维度统计</li><li>系统设计<ul><li>渠道管理<ul><li>渠道列表</li><li>渠道配置模板</li></ul></li><li>账号管理<ul><li>账号列表</li><li>分组管理</li><li>角色管理</li></ul></li><li>核心功能构建</li><li>性能测试场景设计</li><li>支持横向扩容</li><li>插件平台技术设计方案</li><li>通用渠道接入能力设计</li></ul></li><li>支持 K8s 部署，Helm Chart<ul><li>部署方式优化</li><li>Docker-compose 部署</li><li>依赖组件升级</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="后端技术栈">后端技术栈<a href="#后端技术栈" class="hash-link" aria-label="Direct link to 后端技术栈" title="Direct link to 后端技术栈">​</a></h2><ul><li>JAVA 版本：JAVA 11</li><li>构建工具：Maven</li><li>后端技术栈<ul><li>Spring security</li><li>Webflux</li><li>MyBatis 2.2.2</li><li>Jackson</li><li>Redisson 3.17.7</li><li>Mysql 8.0</li><li>HikariCP</li><li>Swagger 3.0.0</li><li>Spring boot 2.7.4</li><li>Spring cloud 2021.0.4</li><li>Spring cloud alibaba 2021.0.4.0</li><li>RabbitMQ</li><li>XXL-Job</li><li>Seata</li><li>ES6</li><li>Oauth2.0</li><li>MinIO</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="应用部署">应用部署<a href="#应用部署" class="hash-link" aria-label="Direct link to 应用部署" title="Direct link to 应用部署">​</a></h2><p>春松客服适应各种部署方式，本文使用 Docker 和 Docker compose 的方式，适合体验、开发、测试和上线春松客服，此种方式简单快捷。</p><blockquote><p>更新：我们正在推进基于 Helm Chart 的方式安装，让企业可以更方便的 Kubernetes 容器平台使用</p></blockquote><p>重要提示：部署应用后，必须按照<a href="https://docs.cskefu.com/docs/initialization/" target="_blank" rel="noopener noreferrer">《系统初始化》</a>文档进行系统初始化，再使用，不做初始化，会造成坐席无法分配等问题。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="环境准备">环境准备<a href="#环境准备" class="hash-link" aria-label="Direct link to 环境准备" title="Direct link to 环境准备">​</a></h3><table><thead><tr><th>项目</th><th>说明</th></tr></thead><tbody><tr><td>操作系统</td><td>Linux (CentOS 7.x, Ubuntu 16.04+ 等)，<strong>推荐使用 Ubuntu LTS</strong></td></tr><tr><td>Docker 版本</td><td>Docker version 1.13.x 及以上</td></tr><tr><td>Docker Compose 版本</td><td>version 1.23.x 及以上</td></tr><tr><td>防火墙端口</td><td>8035, 8036</td></tr><tr><td>其他软件</td><td>git</td></tr><tr><td>内存</td><td>开发测试 &gt;= 8GB</td></tr><tr><td>CPU 颗数</td><td>开发测试 &gt;= 2</td></tr><tr><td>硬盘</td><td>&gt;= 20GB</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="获取源码">获取源码<a href="#获取源码" class="hash-link" aria-label="Direct link to 获取源码" title="Direct link to 获取源码">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone -b master https://github.com/cskefu/cskefu.git cskefu</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> cskefu</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> sample.env .env </span><span class="token comment" style="color:rgb(98, 114, 164)"># 使用文本编辑器打开 .env 文件，并按照需求需改配置</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以上命令中，<code>master</code> 代表当前稳定版，是 <a href="https://github.com/cskefu/cskefu" target="_blank" rel="noopener noreferrer">cskefu/cskefu</a> 的 master 分支，分支说明。</p><table><thead><tr><th>分支</th><th>说明</th></tr></thead><tbody><tr><td>master</td><td>当前稳定版本</td></tr><tr><td>develop</td><td>当前开发版本</td></tr></tbody></table><p>克隆代码时，按照需要指定分支信息；本部署文档针对 master 分支。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置项说明">配置项说明<a href="#配置项说明" class="hash-link" aria-label="Direct link to 配置项说明" title="Direct link to 配置项说明">​</a></h3><p>以下为部署相关的环境变量，可以在 <code>.env</code> 中覆盖默认值。</p><table><thead><tr><th>KEY</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>COMPOSE_FILE</td><td>docker-compose.yml</td><td>服务编排描述文件，保持默认值</td></tr><tr><td>COMPOSE_PROJECT_NAME</td><td>cskefu</td><td>服务实例的容器前缀，可以用其它字符串</td></tr><tr><td>MYSQL_PORT</td><td>8037</td><td>MySQL 数据库映射到宿主机器使用的端口</td></tr><tr><td>REDIS_PORT</td><td>8041</td><td>Redis 映射到宿主机器的端口</td></tr><tr><td>ES_PORT1</td><td>8039</td><td>ElasticSearch RestAPI 映射到宿主机器的端口</td></tr><tr><td>ES_PORT2</td><td>8040</td><td>ElasticSearch 服务发现端口映射到宿主机器的端口</td></tr><tr><td>CC_WEB_PORT</td><td>8035</td><td>春松客服 Web 服务地址映射到宿主机器的端口</td></tr><tr><td>CC_SOCKET_PORT</td><td>8036</td><td>春松客服 SocketIO 服务映射到宿主机器的端口</td></tr><tr><td>ACTIVEMQ_PORT1</td><td>8051</td><td>ActiveMQ 端口</td></tr><tr><td>ACTIVEMQ_PORT2</td><td>8052</td><td>ActiveMQ 端口</td></tr><tr><td>ACTIVEMQ_PORT2</td><td>8053</td><td>ActiveMQ 端口</td></tr><tr><td>DB_PASSWD</td><td>123456</td><td>数据库密码，设置到 MySQL, Redis, ActiveMQ</td></tr><tr><td>LOG_LEVEL</td><td>INFO</td><td>日志级别，可使用 WARN, ERROR, INFO, DEBUG</td></tr></tbody></table><p>以上配置中，<strong>端口的各默认值需要保证在宿主机器上还没有被占用；数据库的密码尽量复杂；CC_WEB_PORT 和 CC_SOCKET_PORT 这两个值尽量不要变更；生产环境下 LOG_LEVEL 使用至少 WARN 的级别</strong>。</p><p>以下为一些业务功能相关配置的环境变量：</p><table><thead><tr><th>KEY</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>TONGJI_BAIDU_SITEKEY</td><td>placeholder</td><td>使用<a href="https://tongji.baidu.com/web/welcome/login" target="_blank" rel="noopener noreferrer">百度统计</a> 记录和查看页面访问情况，默认不记录</td></tr><tr><td>EXTRAS_LOGIN_BANNER</td><td>off</td><td>登录页上方展示通知的内容，默认 (off) 不展示</td></tr><tr><td>EXTRAS_LOGIN_CHATBOX</td><td>off</td><td>登录页支持加入一个春松客服网页渠道聊天按钮，比如 <a href="https://oh-my.cskefu.com/im/xxx.html%EF%BC%8C%E9%BB%98%E8%AE%A4(off)" target="_blank" rel="noopener noreferrer">https://oh-my.cskefu.com/im/xxx.html，默认 (off</a>不展示</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="管理命令">管理命令<a href="#管理命令" class="hash-link" aria-label="Direct link to 管理命令" title="Direct link to 管理命令">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="启动服务">启动服务<a href="#启动服务" class="hash-link" aria-label="Direct link to 启动服务" title="Direct link to 启动服务">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> cskefu                            </span><span class="token comment" style="color:rgb(98, 114, 164)"># 进入下载后的文件夹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> pull                  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 拉取镜像</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> up -d contact-center  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 启动服务</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="查看服务日志">查看服务日志<a href="#查看服务日志" class="hash-link" aria-label="Direct link to 查看服务日志" title="Direct link to 查看服务日志">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> logs -f contact-center</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="登陆系统">登陆系统<a href="#登陆系统" class="hash-link" aria-label="Direct link to 登陆系统" title="Direct link to 登陆系统">​</a></h3><p>在日志中，查看到如下类似信息，代表服务已经启动。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">INFO  c.c.socketio.SocketIOServer - SocketIO server started at port: </span><span class="token number">8036</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">nioEventLoopGroup-2-1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">INFO  com.chatopera.cc.Application - Started Application </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token number">35.319</span><span class="token plain"> seconds </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">JVM running </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token number">42.876</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后，从浏览器打开 <a href="https://docs.cskefu.com/docs/deployhttp://YOUR_IP:CC_WEB_PORT/" target="_blank" rel="noopener noreferrer">http://YOUR_IP:CC_WEB_PORT/</a> 访问服务。默认管理员账号：admin 密码：admin1234</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="演示环境">演示环境<a href="#演示环境" class="hash-link" aria-label="Direct link to 演示环境" title="Direct link to 演示环境">​</a></h2><p>春松客服提供了，在线体验环境，方便您了解春松客服最新功能。</p><table><thead><tr><th>内容</th><th>说明</th></tr></thead><tbody><tr><td>网站</td><td><a href="https://demo.cskefu.com" target="_blank" rel="noopener noreferrer">https://demo.cskefu.com</a></td></tr><tr><td>默认用户名</td><td>admin</td></tr><tr><td>默认密码</td><td>admin1234</td></tr></tbody></table><p>注意，请不要修改用户名和密码，演示环境随时有可能可能，请自行保障数据安全。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="客户案例">客户案例<a href="#客户案例" class="hash-link" aria-label="Direct link to 客户案例" title="Direct link to 客户案例">​</a></h2><ul><li><a href="https://mp.weixin.qq.com/s/t4J_qPaN6on_yTz6s6GSew" target="_blank" rel="noopener noreferrer">富盈证券上线春松客服</a></li><li><a href="https://mp.weixin.qq.com/s/MSC2E46Y1soeKsfJdntcow" target="_blank" rel="noopener noreferrer">江北新区研创园</a></li><li><a href="https://mp.weixin.qq.com/s/7_eCxA3ylNaxCR48h3eqNw" target="_blank" rel="noopener noreferrer">高科华烨</a></li><li><a href="https://mp.weixin.qq.com/s/9afFcXrQRQHchFPW4usSxg" target="_blank" rel="noopener noreferrer">深圳尔雅</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="关注春松客服">关注春松客服<a href="#关注春松客服" class="hash-link" aria-label="Direct link to 关注春松客服" title="Direct link to 关注春松客服">​</a></h2><ul><li>春松客服官网 <a href="https://www.cskefu.com" target="_blank" rel="noopener noreferrer">https://www.cskefu.com</a></li><li>Github 主页  <a href="https://github.com/cskefu/cskefu" target="_blank" rel="noopener noreferrer">https://github.com/cskefu/cskefu</a></li><li>春松客服文档站 <a href="https://docs.cskefu.com" target="_blank" rel="noopener noreferrer">https://docs.cskefu.com</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="社区会议">社区会议<a href="#社区会议" class="hash-link" aria-label="Direct link to 社区会议" title="Direct link to 社区会议">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="定期社区会议">定期社区会议<a href="#定期社区会议" class="hash-link" aria-label="Direct link to 定期社区会议" title="Direct link to 定期社区会议">​</a></h3><p>周日 10:00UTC+8（中文）（单周）。<a href="https://www.thetimezoneconverter.com/?t=10%3A00&amp;tz=GMT%2B8&amp;" target="_blank" rel="noopener noreferrer">转换为您的时区</a></p><ul><li><a href="https://www.cskefu.com/category/conferences/" target="_blank" rel="noopener noreferrer">会议记录和议程</a> | <a href="https://space.bilibili.com/34290698/channel/collectiondetail?sid=817713" target="_blank" rel="noopener noreferrer">Bilibili Video</a></li><li><a href="https://www.feishu.cn/calendar/share?token=e1a022850428d49e1ab84aef69e8ee5c" target="_blank" rel="noopener noreferrer">会议日历</a></li><li><a href="https://vc.feishu.cn/j/400656075" target="_blank" rel="noopener noreferrer">会议链接</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="往期会议">往期会议<a href="#往期会议" class="hash-link" aria-label="Direct link to 往期会议" title="Direct link to 往期会议">​</a></h3><ul><li>会议记录 <a href="https://www.cskefu.com/category/conferences/" target="_blank" rel="noopener noreferrer">https://www.cskefu.com/category/conferences/</a></li><li>视频记录 <a href="https://space.bilibili.com/34290698/channel/collectiondetail?sid=817713" target="_blank" rel="noopener noreferrer">https://space.bilibili.com/34290698/channel/collectiondetail?sid=817713</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/projects">Projects</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/11/23/what-is-hukou">What is Hukou</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-23T00:00:00.000Z" itemprop="datePublished">November 23, 2022</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2><p>对于一个大型企业，内部有几十个业务系统是非常正常的一件事情。</p><p>在这个背景下，有一个具体的服务可以很干净的只做一件事情是非常棒的：把人管好。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能接入">功能接入<a href="#功能接入" class="hash-link" aria-label="Direct link to 功能接入" title="Direct link to 功能接入">​</a></h2><ul><li>支持接收其他业务系统的注册<ul><li>支持配置 system_key</li><li>支持自定义回调地址</li></ul></li><li>通用的身份认证接入方式<ul><li>接入方系统只需要简单的集成即可完成用户身份的登录支持</li></ul></li><li>支持一键禁用账号登录<ul><li>增强版能力，支持广播账号身份信息发生变化，实时触发账号验证<ul><li>可选项，由接入方系统根据需求决定是否接入</li></ul></li></ul></li><li>支持与三方业务系统集成<ul><li>钉钉</li><li>飞书</li><li>etc.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="功能逻辑说明">功能逻辑说明<a href="#功能逻辑说明" class="hash-link" aria-label="Direct link to 功能逻辑说明" title="Direct link to 功能逻辑说明">​</a></h2><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20221123145010.png?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><blockquote><p>验证流程图</p></blockquote><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/VIzBnN.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="相关技术和开源实现">相关技术和开源实现<a href="#相关技术和开源实现" class="hash-link" aria-label="Direct link to 相关技术和开源实现" title="Direct link to 相关技术和开源实现">​</a></h2><ul><li>开源项目<ul><li>Keyclock</li></ul></li><li>相关技术<ul><li>Microsoft AD</li><li>LDAP</li><li>OIDC</li><li>OAtuh</li></ul></li><li>SaaS 产品<ul><li>飞书 &lt;门神&gt;</li><li><a href="https://auth0.com" target="_blank" rel="noopener noreferrer">auth0.com</a></li><li><a href="https://fusionauth.io/" target="_blank" rel="noopener noreferrer">fusionauth</a></li></ul></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservice">Microservice</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/11/20/Copy-To-Markdwon">Copy to Markdown</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-20T00:00:00.000Z" itemprop="datePublished">November 20, 2022</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2><p>梳理笔记工具，最近把语雀都迁移到了 Github，找个时间可以 讨论下中间的过程。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/11/16/dubbo-ji-chu-zhi-shi">Dubbo 基础知识梳理</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-16T00:00:00.000Z" itemprop="datePublished">November 16, 2022</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>参考资料：</p></blockquote><ul><li><a href="https://juejin.cn/post/7128953614403371015#heading-5" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7128953614403371015#heading-5</a></li><li><a href="https://dubbo.apache.org/zh/docs/" target="_blank" rel="noopener noreferrer">https://dubbo.apache.org/zh/docs/</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h2><ul><li>Apache Dubbo 一款基于 RPC 服务开发的云原生微服务框架，与 SpringCloud 类似</li><li>使用 Dubbo 开发的微服务原生具备相互之间远程地址发现 (注册中心) 和通信的能力</li><li>Dubbo 支持丰富的服务治理特性，包含 服务发现、负载均衡、流量调度 等，高度可扩展</li><li>Dubbo 由 阿里巴巴 开发，并贡献给 Apache</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="发展历程">发展历程<a href="#发展历程" class="hash-link" aria-label="Direct link to 发展历程" title="Direct link to 发展历程">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="版本迭代">版本迭代<a href="#版本迭代" class="hash-link" aria-label="Direct link to 版本迭代" title="Direct link to 版本迭代">​</a></h3><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20221117023215.png?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="软件生态的活跃度">软件生态的活跃度<a href="#软件生态的活跃度" class="hash-link" aria-label="Direct link to 软件生态的活跃度" title="Direct link to 软件生态的活跃度">​</a></h3><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/8G8hZG.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="与-springcloud-相比的优势">与 SpringCloud 相比的优势<a href="#与-springcloud-相比的优势" class="hash-link" aria-label="Direct link to 与 SpringCloud 相比的优势" title="Direct link to 与 SpringCloud 相比的优势">​</a></h2><ul><li>功能丰富，基于原生库即可完成大部分的微服务治理能力</li><li>支持超大规模的微服务机器设计，高性能 RPC 通信协议实现</li><li>高度可扩展性，支持在调用过程中对流量及协议进行拦截扩展，如 Filter、Router、LB 等</li><li>支持微服务治理的扩展组件<ul><li>Registry 注册中心：Zookeeper、Nacos</li><li>Config Center 配置中心：Zookeeper、Nacos</li><li>Metadata Center 元数据中心 (Dubbo3 支持)</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-的基础概念介绍">Dubbo 的基础概念介绍<a href="#dubbo-的基础概念介绍" class="hash-link" aria-label="Direct link to Dubbo 的基础概念介绍" title="Direct link to Dubbo 的基础概念介绍">​</a></h2><ul><li>RPC 通信</li><li>服务发现</li><li>流量治理</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rpc-通信">RPC 通信<a href="#rpc-通信" class="hash-link" aria-label="Direct link to RPC 通信" title="Direct link to RPC 通信">​</a></h3><ul><li>Dubbo3 之中，RPC 通信主要使用 Triple 协议，构建在 HTTP/2 协议之上，兼容 gRPC</li><li>提供 Request Response、Request Streaming、Response Streaming、Bi-directional Streaming 通信模型</li><li>支持 IDL，基于 Triple 协议</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="服务发现">服务发现<a href="#服务发现" class="hash-link" aria-label="Direct link to 服务发现" title="Direct link to 服务发现">​</a></h3><p>服务发现，是消费端自动发现服务地址列表的能力，是微服务框架需要具备的关键能力，借助于自动化的服务发现，微服务之间在无需感知对端部署位置与 IP 地址的情况下实现通信。</p><p>Dubbo 提供的 Client-Based 服务发现机制，同时也需要第三方注册中心来协调服务发现过程，比如 Nacos/Zookeeper 等。</p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/oaqyGX.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="流量治理">流量治理<a href="#流量治理" class="hash-link" aria-label="Direct link to 流量治理" title="Direct link to 流量治理">​</a></h3><ul><li>Dubbo2 开始，Dubbo 就提供了丰富的服务治理规则，包括路由规则/动态配置等</li><li>Dubbo3 之中的实现<ul><li>Dubbo Mesh : 通过对接 xDS 对接到时下流行的 Mesh 产品如 Istio 中所使用的以 VirtualService、DestinationRule 为代表的治理规则</li><li>另一方面 Dubbo 正寻求设计一套自有规则以实现在不通部署场景下的流量治理，以及灵活的治理能力。</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo-mesh">Dubbo Mesh<a href="#dubbo-mesh" class="hash-link" aria-label="Direct link to Dubbo Mesh" title="Direct link to Dubbo Mesh">​</a></h2><p>Dubbo Mesh 的目标是提供适应 Dubbo 体系的完整 Mesh 解决方案，包含定制化控制面（Control Plane）、定制化数据面解决方案。Dubbo 控制面基于业界主流 Istio 扩展，支持更丰富的流量治理规则、Dubbo 应用级服务发现模型等，Dubbo 数据面可以采用 Envoy Sidecar，即实现 Dubbo SDK + Envoy 的部署方案，也可以采用 Dubbo Proxyless 模式，直接实现 Dubbo 与控制面的通信。</p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/vMniiR.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dubbo3">Dubbo3<a href="#dubbo3" class="hash-link" aria-label="Direct link to Dubbo3" title="Direct link to Dubbo3">​</a></h2><p>Dubbo 3.0 提供的新特性包括：</p><ul><li><strong>新的地址发现模型（应用级服务发现）</strong><ul><li>查看<a href="https://dubbo.apache.org/zh/docs/migration/migration-service-discovery" target="_blank" rel="noopener noreferrer">应用级服务发现的迁移步骤</a></li><li>查看应用级服务发现的使用方式</li><li>查看应用级服务发现设计与实现</li></ul></li><li><strong>下一代基于 HTTP/2 的 Triple 协议</strong><ul><li>查看<a href="https://dubbo.apache.org/zh/docs/migration/migration-triple" target="_blank" rel="noopener noreferrer">Triple 协议迁移步骤</a></li><li>查看 <a href="https://dubbo.apache.org/zh/docs/references/protocols/tri" target="_blank" rel="noopener noreferrer">Triple 协议使用方式</a></li><li>查看 Triple 协议设计与实现</li></ul></li><li><strong>统一的路由规则。</strong><ul><li>查看<a href="https://dubbo.apache.org/zh/docs/migration/migration-routingrule/" target="_blank" rel="noopener noreferrer">统一路由规则的迁移步骤</a></li><li>查看<a href="https://dubbo.apache.org/zh/docs/references/routers/" target="_blank" rel="noopener noreferrer">统一路由规则使用方式</a></li><li>查看统一路由规则设计与实现</li></ul></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservice">Microservice</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/11/10/panads-fill-nan-value-to-zero">Panads fill NaN value to Zero</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-11-10T00:00:00.000Z" itemprop="datePublished">November 10, 2022</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> pandas</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">read_csv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;somefile.txt&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">df </span><span class="token operator">=</span><span class="token plain"> df</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">fillna</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/python">Python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/10/22/redash-for-docker-bu-shu">Redash for Docker 部署</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-22T00:00:00.000Z" itemprop="datePublished">October 22, 2022</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><blockquote><p>暗坑很多</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="部署过程">部署过程<a href="#部署过程" class="hash-link" aria-label="Direct link to 部署过程" title="Direct link to 部署过程">​</a></h2><ol><li>需要自行维护一个 env 作为配置文件</li></ol><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">REDASH_COOKIE_SECRET=a07cca441ab9f28b66c589f3118e0de48469b1bc6a5036eade7badbed305d96e</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">POSTGRES_HOST_AUTH_METHOD=trust</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REDASH_REDIS_URL=redis://redis:6379/0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REDASH_DATABASE_URL=postgresql://postgres</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>需要创建一个 postgres-data 并配置 docker-compose.yml 的路径，数据库持久化</p></li><li><p>需要给 postgres 容器增加 sudo 命令</p><ul><li>apk add sudo</li></ul></li><li><p>需要手工进入到 postgresql 容器内创建 role 和 database</p><ul><li>createuser -U postgres redash</li><li>createdb -U postgres redash</li></ul></li><li><p>执行数据库初始化动作</p></li><li><p>docker-compose run --rm server create<!-- -->_<!-- -->db</p></li><li><p>然后重启 redash 全部服务即可 docker-compose down 后重启</p></li></ul><blockquote><p>postgresql 在执行 psql 命令时，默认会读取当前系统用户作为执行 role；但 psql 默认用户是 postgres</p></blockquote><p><a href="https://redash.io/help/open-source/setup" target="_blank" rel="noopener noreferrer">https://redash.io/help/open-source/setup</a>
<a href="https://redash.io/help/open-source/dev-guide/docker" target="_blank" rel="noopener noreferrer">https://redash.io/help/open-source/dev-guide/docker</a>
<a href="https://docs.victoriametrics.com/url-examples.html#apiv1exportcsv" target="_blank" rel="noopener noreferrer">https://docs.victoriametrics.com/url-examples.html#apiv1exportcsv</a></p><p><a href="https://mp.weixin.qq.com/s?src=11%5C&amp;timestamp=1660629444%5C&amp;ver=3985%5C&amp;signature=verv70veamW*Ez2Sgc8e89yMJGwANIOzz4lfwbezyVV3wpWNT2d9SnGrDecUOwrbTJBR2o-Ax6ZS4Fpu2UxfX7Sy9xsk1LCXfY1wNr42ucl3tFePfJ7c536c8z*L-HOy%5C&amp;new=1" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s?src=11\<!-- -->×<!-- -->tamp=1660629444\&amp;ver=3985\&amp;signature=verv70veamW<em>Ez2Sgc8e89yMJGwANIOzz4lfwbezyVV3wpWNT2d9SnGrDecUOwrbTJBR2o-Ax6ZS4Fpu2UxfX7Sy9xsk1LCXfY1wNr42ucl3tFePfJ7c536c8z</em>L-HOy\&amp;new=1</a></p><p><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1660682601&amp;ver=3986&amp;signature=h8m0RzEX3qWsKcUo6Ee3azdsnzLQqUf3N8FdLhyWNa52U4vAvlbEaBFUCrTZnh54tT-YS2mODfkp-6Hemmzt3n*hzGHlEmXP-HO5830W0Fzmn4MMfnsOPBKLrcjaiU0h&amp;new=1" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s?src=11<!-- -->×<!-- -->tamp=1660682601&amp;ver=3986&amp;signature=h8m0RzEX3qWsKcUo6Ee3azdsnzLQqUf3N8FdLhyWNa52U4vAvlbEaBFUCrTZnh54tT-YS2mODfkp-6Hemmzt3n*hzGHlEmXP-HO5830W0Fzmn4MMfnsOPBKLrcjaiU0h&amp;new=1</a></p><ul><li>redash env 配置：<a href="https://redash.io/help/open-source/admin-guide/env-vars-settings" target="_blank" rel="noopener noreferrer">https://redash.io/help/open-source/admin-guide/env-vars-settings</a></li><li>postgres 权限问题 <a href="https://stackoverflow.com/a/25051632/5067657" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/25051632/5067657</a></li><li><a href="https://techoverflow.net/2021/05/07/how-to-fix-alpine-linux-ash-sudo-not-found/" target="_blank" rel="noopener noreferrer">https://techoverflow.net/2021/05/07/how-to-fix-alpine-linux-ash-sudo-not-found/</a></li><li><a href="https://discuss.redash.io/t/error-99-connecting-to-localhost-6379-cannot-assign-requested-address/9716/7" target="_blank" rel="noopener noreferrer">https://discuss.redash.io/t/error-99-connecting-to-localhost-6379-cannot-assign-requested-address/9716/7</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="启动的服务介绍">启动的服务介绍<a href="#启动的服务介绍" class="hash-link" aria-label="Direct link to 启动的服务介绍" title="Direct link to 启动的服务介绍">​</a></h2><ul><li>v10-redashio_adhoc_worker_1     # 执行查询任务的 worker</li><li>v10-redashio_postgres_1       # 数据库</li><li>v10-redashio_redis_1        # 缓存</li><li>v10-redashio_scheduled_worker_1   # 执行计划任务的 worker</li><li>v10-redashio_scheduler_1      # 计划任务管理 server</li><li>v10-redashio_server_1        # 主体 server</li></ul><p>以上主要会设计到 3 个镜像，redis、pgsql、redash，其中核心是 redash，所以关注镜像版本也是这个</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="版本升级">版本升级<a href="#版本升级" class="hash-link" aria-label="Direct link to 版本升级" title="Direct link to 版本升级">​</a></h2><p>redash 的版本升级较为方便，更换 server 的镜像；然后升级数据库即可。</p><blockquote><p>测试过从 v8 升级到 v10 , 和 v9 升级到 v10，都是 ok 的。</p></blockquote><ol><li>关闭 Redash 服务<ol><li><code>docker-compose stop server scheduler scheduled_worker adhoc_worker</code></li></ol></li><li>更新 docker-compose.yml<ol><li>基本上这一步，只需要更新 redash 的镜像版本即可</li><li>然后执行 <code>docker-compose pull</code> 拉取新镜像版本</li></ol></li><li>执行数据库升级<ol><li><code>docker-compose run --rm server manage db upgrade</code></li></ol></li><li>启动全部服务即可<ol><li><code>docker-compse up -d</code></li></ol></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="解决-es-的-https-问题">解决 ES 的 HTTPS 问题<a href="#解决-es-的-https-问题" class="hash-link" aria-label="Direct link to 解决 ES 的 HTTPS 问题" title="Direct link to 解决 ES 的 HTTPS 问题">​</a></h2><p>由于我们的 es 地址访问地址采用 https，但为自签证书，所以在 request 之中会有些问题，所以我在这里更新了 elasticsearch 的插件，然后将其上传到我个人的 docker hub.
<a href="https://hub.docker.com/r/samzong/redash" target="_blank" rel="noopener noreferrer">https://hub.docker.com/r/samzong/redash</a></p><blockquote><p>带来的问题，页面上无法选择到 Elasticsearch 作为数据源，没时间去研究了</p></blockquote><p>看了下还是可以使用 redash 的 API 去创建的 <code>/api/data_sources</code>:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置">配置<a href="#配置" class="hash-link" aria-label="Direct link to 配置" title="Direct link to 配置">​</a></h2><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;options&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;basic_auth_password&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;-----&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;basic_auth_user&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;elastic&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;server&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://10.6.51.101:31001/&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;skip_tls_verification&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;elasticsearch&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-es&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建完成后，就可以在页面上更新了。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/tools">Tools</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/10/18/jwt-nei-zhi-de-fang-shi">JWT 内置的方式</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-18T00:00:00.000Z" itemprop="datePublished">October 18, 2022</time> · <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><ul><li>支持为 API 启用 jwt token 解码的能力 ,  读取网关的 jwt key<ul><li>读取请求 Header 中的 Authorization</li></ul></li><li>需要支持为网关配置多 jwt key , and 加密长度 ?<ul><li>解密的性能问题</li><li>expire<!-- -->_<!-- -->time 过期时间的配置</li><li>解密后的参数传递</li></ul></li></ul><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1666060887030-ff0a6f09-9bf0-44d5-a92b-dc36fc9b7d47.png?x-oss-process=image/resize,w_960,m_lfit" alt="image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="迭代的方向">迭代的方向<a href="#迭代的方向" class="hash-link" aria-label="Direct link to 迭代的方向" title="Direct link to 迭代的方向">​</a></h3><ol><li>采用外置的 Jwt server 认证服务<ol><li>配置 jwt server url</li><li>respone 解密后的  json 内容；进行参数传递</li></ol></li><li>采用托管的 Jwt server 来进行托管<ol><li>配置 jwt key (支持自动生成)</li><li>expire<!-- -->_<!-- -->time</li><li>加密长度</li><li>自动配置参数传递<ol><li>全部传递</li><li>全部传递 (not token)</li><li>白名单传递</li></ol></li></ol></li></ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservice">Microservice</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/10/06/ji-ji-fu-ji-ji">唧唧复唧唧</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-06T00:00:00.000Z" itemprop="datePublished">October 6, 2022</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><p><a href="https://www.amazon.cn/gp/product/B01951CHO6/ref=as_li_qf_sp_asin_tl?ie=UTF8%5C&amp;camp=536%5C&amp;creative=3200%5C&amp;creativeASIN=B01951CHO6%5C&amp;linkCode=as2%5C&amp;tag=llll1-23" target="_blank" rel="noopener noreferrer">王路</a>
12 highlights</p><ul><li><p>同样一潭池水，天人视之为清波，饿鬼视之为阳焰。所有的看法，无非是一个人的世界观投在故事上的倒影，它</p></li><li><p>就常有这样的经验。比如碰见好久不见的老友，事前特别期待，想到有很多话可以聊，等坐到桌上，却发现只剩下老生常谈。这怪不得谁，每个人的生活都不一样，各自感兴趣的事儿都不同。不像以往，大家都在同一个班里，每天的生活都是类似的，所思所想也都差不了太远。</p></li><li><p>要想在一个圈子里得到认同，需要遵照这个圈子的价值标准和话语体系。</p></li><li><p>很久之后，我才慢慢明白自己当初的做法多么愚蠢。想要一个人改变习惯，很难。而尤其不应该的是，总把自己以为便利的东西强加给别人。年龄和岁月足以让一个人的学习能力慢慢退化，并最终丧失对新事物的好奇。从头掌握最基本的技能，对不年轻的人来说，成本太高昂。他们需要为养家糊口奔波，为时不多的暇余，并不足以支撑他们疲惫的身心去探究世界的种种新奇。于是，他们就远远被时代抛下了。</p></li><li><p>圣诞老人的意思就是：在你爱的人不知道的时候，把礼物放到他的身边。因为收到礼物的人不知道，所以这个夜晚是寂静的。</p></li><li><p>许多东西，只在此时、此地、此景有。没办法绸缪，也没办法复盘。可贵的事物之所以可贵，正在其转瞬即逝，不可复得。在一刹那灭去，并成为永恒。</p></li><li><p>屏蔽掉一个人，看不到他的样子，听不到他的声音，却抑制不了不去想他。世间的痛苦和烦恼，不在于不能得到，而在于不能割舍。不在于不想屏蔽的东西被屏蔽，而在于想屏蔽的东西无法屏蔽</p></li><li><p>对于贪著心，真正可怕的不是一件事情上的得失，而是串习的力量对一个人行为举止的巨大影响。这种影响是潜在的，却是深刻而难以磨灭的。</p></li><li><p>三涂之苦</p></li><li><p>编程谓之 Class，《</p></li><li><p>钱穆先生曾在《宋明理学概述》序言里说：““虽居乡僻，未尝敢一日废学。虽经乱离困厄，未尝敢一日颓其志。虽或名利当前，未尝敢动其心。虽或毁誉横生，未尝敢馁其气。虽学不足以自成立，未尝或忘先儒之榘矱，时切其向慕。虽垂老无以自靖献，未尝不于国家民族世道人心，自任以匹夫之有其责。””</p></li><li><p>佛家说烦恼即是般若，那些让你斩不断的愁丝才是真正度你到彼岸的船筏。</p></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/随笔">随笔</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/10/04/zi-bei-yu-chao-yue">自卑与超越</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-04T00:00:00.000Z" itemprop="datePublished">October 4, 2022</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><p><a href="https://www.amazon.cn/gp/product/B013GD8VEY/ref=as_li_qf_sp_asin_tl?ie=UTF8%5C&amp;camp=536%5C&amp;creative=3200%5C&amp;creativeASIN=B013GD8VEY%5C&amp;linkCode=as2%5C&amp;tag=llll1-23" target="_blank" rel="noopener noreferrer">【奥】阿尔弗雷德··阿德勒</a></p><p>前言 阿德勒：超越自卑，找到生命的真正意义 阿德勒是个体心理学的先驱和代表。个体心理学与其他心理学流派相比，最突出显要的一点在于，它对人的研究是以个体为始，即首先关注个体本身的成长发展和人生历程。有趣的是，如果你对阿德勒本人的人生经历及其学说有所了解的话，你会发现其人的发展轨迹恰好印证了他所秉持的观点和理论。阿德勒认为，每个人都有不同程度的自卑感，而优越感则是自卑感的补偿。但自卑感的存在并不是一件坏事，因为它激励了人不断追求卓越，克服自身的障碍，在有限的生命空间内发挥出最大的价值。可以说，正是由于人类会有自卑感，才会有不断取得发展和进步的不竭动力。与此相印证的是，阿德勒本人就是一个““先天发展不足””、一开始就存在着极为强烈自卑感的人。阿德勒是一个直到 4 岁才会走路的体弱多病的儿童。他患有佝偻病，无法进行激烈的体育活动。但他并没有让身体上的缺陷压倒自己，相反，这刺激了他的上进心。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/读书">读书</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/09/28/gitlab-forked-ru-he-gen-sui-upstream-zhu-ku">GitLab Forked 如何跟随 upstream 主库</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-28T00:00:00.000Z" itemprop="datePublished">September 28, 2022</time> · <!-- -->2 min read</div></header><div class="markdown" itemprop="articleBody"><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>通过 PR 的方式共同对主仓库进行贡献的方式，是开源项目协作的非常有效的方法；通常我们不会直接对主仓库直接提交代码。</p></div></div><p>一般情况下，我们的操作是，在需要贡献时，Fork 一份项目，然后自己修改以 PR 的方式提交贡献请求。</p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664330743895-9b2e0dc6-527e-4bcd-8b63-c223aa634b8f.png?x-oss-process=image/resize,w_960,m_lfit" alt="image.png" title="一份完整的 Github贡献指南" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-的实现方式">Github 的实现方式<a href="#github-的实现方式" class="hash-link" aria-label="Direct link to Github 的实现方式" title="Direct link to Github 的实现方式">​</a></h2><p>熟悉 Github 的同学会发现，在 Github 上最近更新了 <code>Sync fork</code>的功能，通过简单的点击操作，即可完成对源库 (upstream) 的更新同步。
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664330528512-563a5536-1734-4fd0-b41c-9c5d121327e0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-09-28 at 10.01.33.jpg" title="当 upstream 超前时，提示 update branch" class="img_ev3q">
通过以上方式，我们可以方便在跟随主库的更新</p><blockquote><p>Tips Github 的方式，仅在 Web 端 和 Github CLI 官方提供的 GH 才可以使用这样的功能</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="no-github-when-gitlab-">No Github, When Gitlab ?<a href="#no-github-when-gitlab-" class="hash-link" aria-label="Direct link to No Github, When Gitlab ?" title="Direct link to No Github, When Gitlab ?">​</a></h2><p>Github 更多在开源项目时贡献，实际上，在我们日常的工作当中，更多会有自建的 Gitlab 或者其他的代码 Hub，这里以 Gitlab 为例</p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664331575915-853554f5-c047-4f14-8e79-67e2214429bc.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-09-28 at 10.19.20.jpg" title="gitlab 默认项目首页" class="img_ev3q">
Gitlab 并未提供 Sync fork 的功能，所以我们需要自行解决同步的需求</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为仓库添加-upstream-源仓库">为仓库添加 upstream 源仓库<a href="#为仓库添加-upstream-源仓库" class="hash-link" aria-label="Direct link to 为仓库添加 upstream 源仓库" title="Direct link to 为仓库添加 upstream 源仓库">​</a></h2><div class="theme-admonition theme-admonition-success alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>以下方式会在终端或本地使用<code>Sourcetree</code>更加自由，仅使用 Git 的方式协作，自由度很大</p></div></div><p>基于这个方式我们可以实现，有关联的 主库到从库的同步；也可以完成跨 Hub 的同步，比如：</p><ul><li>Github -&gt;  Gitlab</li><li>Github -&gt; Github</li><li>Gitlab  -&gt; Gitlab</li><li>Gitlab  -&gt;  Github</li><li>Gitee  -&gt;  Gitlab</li><li>Gitee -&gt; Github</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">samzonglu at samzongs-MacBook-Pro </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ~/Git/daocloud/DaoCloud-docs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">main✔</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">± </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> remote </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> upstream https://github.com/DaoCloud/DaoCloud-docs.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alias tip: gra upstream https://github.com/DaoCloud/DaoCloud-docs.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">samzonglu at samzongs-MacBook-Pro </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ~/Git/daocloud/DaoCloud-docs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">main✔</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">± </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> remote</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alias tip: gr</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">origin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">upstream</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">samzonglu at samzongs-MacBook-Pro </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ~/Git/daocloud/DaoCloud-docs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">main✔</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">± </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> fetch upstream</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alias tip: gf upstream</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: Enumerating objects: </span><span class="token number">1268</span><span class="token plain">, done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: Counting objects: </span><span class="token number">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">182</span><span class="token plain">/182</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: Compressing objects: </span><span class="token number">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token plain">/5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">remote: Total </span><span class="token number">1268</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">delta </span><span class="token number">177</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, reused </span><span class="token number">182</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">delta </span><span class="token number">177</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, pack-reused </span><span class="token number">1086</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Receiving objects: </span><span class="token number">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1268</span><span class="token plain">/1268</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, </span><span class="token number">1.87</span><span class="token plain"> MiB </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">2.74</span><span class="token plain"> MiB/s, done.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resolving deltas: </span><span class="token number">100</span><span class="token plain">% </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">637</span><span class="token plain">/637</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">, completed with </span><span class="token number">119</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">local</span><span class="token plain"> objects.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">From https://github.com/DaoCloud/DaoCloud-docs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">new branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      feature/theme                            -</span><span class="token operator">&gt;</span><span class="token plain"> upstream/feature/theme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">new branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      fix-typo                                 -</span><span class="token operator">&gt;</span><span class="token plain"> upstream/fix-typo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">new branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      gh-pages                                 -</span><span class="token operator">&gt;</span><span class="token plain"> upstream/gh-pages</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">new branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      main                                     -</span><span class="token operator">&gt;</span><span class="token plain"> upstream/main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">new branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      patch-new-gh-pages-01                    -</span><span class="token operator">&gt;</span><span class="token plain"> upstream/patch-new-gh-pages-01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">new branch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">      stash/bug-codes                          -</span><span class="token operator">&gt;</span><span class="token plain"> upstream/stash/bug-codes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">samzonglu at samzongs-MacBook-Pro </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ~/Git/daocloud/DaoCloud-docs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">main✔</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">± </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> pull upstream main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alias tip: gl upstream main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">From https://github.com/DaoCloud/DaoCloud-docs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * branch            main       -</span><span class="token operator">&gt;</span><span class="token plain"> FETCH_HEAD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Already up to date.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">samzonglu at samzongs-MacBook-Pro </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> ~/Git/daocloud/DaoCloud-docs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">main✔</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">± </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> push origin main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Alias tip: gp origin main</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Everything up-to-date</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/git">Git</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/09/27/kafka-jing-pin-diao-yan-ji-gong-neng-she-ji">Kafka 调研及功能设计</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-27T00:00:00.000Z" itemprop="datePublished">September 27, 2022</time> · <!-- -->8 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="调研对象">调研对象<a href="#调研对象" class="hash-link" aria-label="Direct link to 调研对象" title="Direct link to 调研对象">​</a></h2><table><thead><tr><th>厂家</th><th>产品控制台主页</th><th>应用模式</th></tr></thead><tbody><tr><td>阿里云</td><td><a href="https://kafka.console.aliyun.com/" target="_blank" rel="noopener noreferrer">https://kafka.console.aliyun.com/</a></td><td>中间件 PaaS 模块之一</td></tr><tr><td>腾讯云</td><td><a href="https://console.cloud.tencent.com/ckafka/overview" target="_blank" rel="noopener noreferrer">https://console.cloud.tencent.com/ckafka/overview</a></td><td>中间件 PaaS 模块之一</td></tr><tr><td>华为云</td><td><a href="https://console.huaweicloud.com/dms/?region=cn-east-3&amp;engine=kafka" target="_blank" rel="noopener noreferrer">https://console.huaweicloud.com/dms/?region=cn-east-3&amp;engine=kafka</a></td><td>中间件 PaaS 模块之一</td></tr><tr><td>QingCloud</td><td><a href="https://console.qingcloud.com/pek3/app/app-n9ro0xcp/" target="_blank" rel="noopener noreferrer">https://console.qingcloud.com/pek3/app/app-n9ro0xcp/</a></td><td>中间件 AppCenter 模块之一</td></tr><tr><td>UCloud</td><td><a href="https://console.ucloud.cn/ukafka/ukafka" target="_blank" rel="noopener noreferrer">https://console.ucloud.cn/ukafka/ukafka</a></td><td>中间件 PaaS 模块之一</td></tr><tr><td>时速云</td><td><a href="https://console.tenxcloud.com/middleware_center/app" target="_blank" rel="noopener noreferrer">https://console.tenxcloud.com/middleware_center/app</a></td><td>中间件 应用之一</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operator-选型">operator 选型<a href="#operator-选型" class="hash-link" aria-label="Direct link to operator 选型" title="Direct link to operator 选型">​</a></h2><ul><li><a href="https://github.com/strimzi/strimzi-kafka-operator" target="_blank" rel="noopener noreferrer">https://github.com/strimzi/strimzi-kafka-operator</a></li><li><a href="https://github.com/banzaicloud/koperator" target="_blank" rel="noopener noreferrer">https://github.com/banzaicloud/koperator</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="功能横向对比">功能横向对比<a href="#功能横向对比" class="hash-link" aria-label="Direct link to 功能横向对比" title="Direct link to 功能横向对比">​</a></h3><table><thead><tr><th>功能点</th><th>阿里云</th><th>腾讯云</th><th>华为云</th><th>QingCloud</th><th>UCloud</th><th>时速云</th><th>strimzi-kafka-operator</th><th>koperator</th></tr></thead><tbody><tr><td>Kafka 实例的生命周期管理</td><td>√</td><td>√</td><td>√</td><td>√</td><td>√</td><td>√</td><td>√</td><td>√</td></tr><tr><td>Kafka 多版本支持</td><td>√ 默认固定，工单调整</td><td>√</td><td>√</td><td>√(仅 1 个)</td><td>√</td><td>√</td><td>√</td><td>√</td></tr><tr><td>Kafka 节点列表</td><td>√</td><td></td><td>√</td><td></td><td>√</td><td>跳转 Pod</td><td>√ (能创建 pod)</td><td>√</td></tr><tr><td>Kafka 原生参数管理</td><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td> </td><td></td><td>√</td><td>√ 原生</td><td>√</td><td>√ 原生</td><td>√</td><td>√</td><td></td></tr><tr><td>Kafka 常用参数抽象</td><td>√</td><td>√</td><td>√</td><td></td><td>√</td><td></td><td>√</td><td>√</td></tr><tr><td>Kafka 模块自带 Zookeeper</td><td>√</td><td>√</td><td>√</td><td></td><td>√</td><td></td><td>√</td><td> </td></tr><tr><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>消息查询功能</td><td>√</td><td>√</td><td>√</td><td>√ 原生</td><td></td><td>√ 原生</td><td></td><td></td></tr><tr><td>消息下载功能</td><td>√(高级版）</td><td></td><td> </td><td></td><td></td><td></td><td></td><td></td></tr><tr><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Topic 管理列表</td><td>√</td><td>√</td><td>√</td><td>√ 原生</td><td>√</td><td>√ 原生</td><td> </td><td></td></tr><tr><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Topic 增删改查</td><td>√</td><td>√</td><td>√</td><td>√ 原生</td><td>√</td><td>√ 原生</td><td> </td><td></td></tr><tr><td> </td><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Topic 高级参数支持</td><td>√</td><td>√</td><td>√</td><td>√ 原生</td><td>√</td><td>√ 原生</td><td> </td><td></td></tr><tr><td> </td><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td> </td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Topic 详情</td><td>√</td><td>√</td><td> </td><td></td><td></td><td></td><td></td><td></td></tr><tr><td> </td><td>√ 原生</td><td>√</td><td>√ 原生</td><td>√</td><td>√</td><td></td><td></td><td></td></tr><tr><td>Consumer Group 列表</td><td>√</td><td>√</td><td></td><td>√ 原生</td><td></td><td>√ 原生</td><td></td><td></td></tr><tr><td>Consumer Group 增删改查</td><td>√</td><td>√</td><td></td><td>√ 原生</td><td>√</td><td>√ 原生</td><td></td><td></td></tr><tr><td>资源监控看板</td><td>√</td><td>√</td><td></td><td>√</td><td>√</td><td>√</td><td>√ grafana dashboard</td><td>√ grafana dashboard</td></tr><tr><td>Kafka 业务数据监控 (消息量/积压/消费情况)</td><td>√</td><td>√</td><td>√</td><td></td><td>√</td><td>√Grafana</td><td>√ exporter+grafana</td><td>√  exporter+grafana</td></tr><tr><td>示例接入代码</td><td>√</td><td>√</td><td>√</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>消息发送测试窗口</td><td>√</td><td>√</td><td>√</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>Kafka 服务日志查看</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>操作审计日志查看</td><td>√</td><td>√</td><td>√</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>提供 Kafka Manager UI</td><td></td><td></td><td></td><td>√</td><td></td><td>√</td><td></td><td></td></tr><tr><td>提供 kafka export 备份功能</td><td>√</td><td>√</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>友好性帮助文档</td><td>√</td><td>√</td><td>√</td><td>√</td><td>√</td><td></td><td></td><td></td></tr><tr><td>提供帮助用户迁入上云</td><td>√</td><td>√</td><td>√</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-创建过程及开放参数">Kafka 创建过程及开放参数<a href="#kafka-创建过程及开放参数" class="hash-link" aria-label="Direct link to Kafka 创建过程及开放参数" title="Direct link to Kafka 创建过程及开放参数">​</a></h2><table><thead><tr><th>厂家</th><th>字段</th></tr></thead><tbody><tr><td>阿里云</td><td>名称流量规格集群流量 = 业务流量 + 集群内副本复制流量，该规格实际业务读流量处理峰值为 50 MB/s，业务写流量处理峰值为 10 MB/s。磁盘容量数据默认 3 副本存储。实例规格为标准版时，如购买 300G 磁盘，实际存储业务的磁盘大小为 100G，其余 200G 为备份容量。实例规格为专业版时，如购买 300G 磁盘，实际存储业务的磁盘大小为 300G，额外赠送 600G 备份容量。消息保留最长时间是指在磁盘容量充足的情况下，消息的最长保留时间；在磁盘容量不足（即磁盘水位达到 85%）时，将提前删除旧的消息，以确保服务可用性；默认 72 小时，可选 24 小时 ～ 168 小时。最大消息大小，默认 1MB 边界值？标准版实例单条消息最大为 256KB，专业版实例单条消息最大为 10MB 且支持<strong>下载</strong>Topic 数量</td></tr><tr><td>腾讯云</td><td>名称 Kafka 版本实例规格配置存储容量消息保留时长</td></tr><tr><td>华为云</td><td>名称 Kafka 版本实例规格配置存储容量</td></tr><tr><td>QingCloud</td><td>名称 Kafka 版本 Kafka 节点配置：CPU / 内存  / 节点数（规格）客户端节点配置：CPU / 内存  / 节点数（规格）Kafka-Manager / CLI）Zookeeper 实例存储容量自定义参数配置内部 Topic offset replicasKafka manager 认证 zabbix.agentkafka scale version</td></tr><tr><td>UCloud</td><td>名称 Kafka 版本实例规格配置 + 存储容量实例数 3&lt;设定值&lt;100 消息保留时长</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="基础设计问题">基础设计问题<a href="#基础设计问题" class="hash-link" aria-label="Direct link to 基础设计问题" title="Direct link to 基础设计问题">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署方式">部署方式？<a href="#部署方式" class="hash-link" aria-label="Direct link to 部署方式？" title="Direct link to 部署方式？">​</a></h3><p>DCE5 支持多集群，Kafka 采用 operator 的方式部署，则需要先安装 Operator 模板到集群内</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么时间安装---kafka-operator">什么时间安装   Kafka-operator？<a href="#什么时间安装---kafka-operator" class="hash-link" aria-label="Direct link to 什么时间安装   Kafka-operator？" title="Direct link to 什么时间安装   Kafka-operator？">​</a></h3><p>在用户创建 kafka 实例时，检测是否目标集群是否存在 kafka-operator，如果不存在则同步安装</p><blockquote><p>什么时间移除 kafka-operator，默认情况下安装后不移除；交由 Kpanda 对集群释放时处理</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="如果支持-kafka-多版本">如果支持 Kafka 多版本？<a href="#如果支持-kafka-多版本" class="hash-link" aria-label="Direct link to 如果支持 Kafka 多版本？" title="Direct link to 如果支持 Kafka 多版本？">​</a></h3><p>通过多版本 对应 多 Kafka-opeator 的方式，让用户进行多版本选择</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="operator-更新后存量-kafka-怎么办">Operator 更新后，存量 Kafka 怎么办？<a href="#operator-更新后存量-kafka-怎么办" class="hash-link" aria-label="Direct link to Operator 更新后，存量 Kafka 怎么办？" title="Direct link to Operator 更新后，存量 Kafka 怎么办？">​</a></h3><blockquote><p>非必要需求，短期不支持</p></blockquote><p>默认情况下更新了 operator 之后，不对存量做处理；后续可以做友好提示用户升级即可</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="调研对象主要功能截图">调研对象主要功能截图<a href="#调研对象主要功能截图" class="hash-link" aria-label="Direct link to 调研对象主要功能截图" title="Direct link to 调研对象主要功能截图">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="阿里云">阿里云<a href="#阿里云" class="hash-link" aria-label="Direct link to 阿里云" title="Direct link to 阿里云">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例生命周期管理">实例生命周期管理<a href="#实例生命周期管理" class="hash-link" aria-label="Direct link to 实例生命周期管理" title="Direct link to 实例生命周期管理">​</a></h4><blockquote><p>实例创建</p></blockquote><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307586169-51f50e53-916d-4c22-b365-94403478b2cd.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.19.23.jpg" class="img_ev3q"></p><blockquote><p>实例详情</p></blockquote><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307617207-228cff9e-97a2-45df-a072-de9161d99594.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.20.05.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-topic-管理">Kafka Topic 管理<a href="#kafka-topic-管理" class="hash-link" aria-label="Direct link to Kafka Topic 管理" title="Direct link to Kafka Topic 管理">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307510049-397d57bc-29e5-4795-83f0-f08a0d91606b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.18.17.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-消息查询">Kafka 消息查询<a href="#kafka-消息查询" class="hash-link" aria-label="Direct link to Kafka 消息查询" title="Direct link to Kafka 消息查询">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307481227-28a5f677-942f-4bee-8a40-f211a0699427.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.16.43.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="监控告警页面">监控告警页面<a href="#监控告警页面" class="hash-link" aria-label="Direct link to 监控告警页面" title="Direct link to 监控告警页面">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307674273-cd48a1dc-2d56-4ac6-85ba-f7a15e9c977b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.20.49.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="topic-详情">Topic 详情<a href="#topic-详情" class="hash-link" aria-label="Direct link to Topic 详情" title="Direct link to Topic 详情">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661315257657-3dd43b19-5c83-44a5-8dcf-3a7b00fdde2d.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 12.27.10@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325524370-2d137783-d065-40cf-b0e1-f758ec574a06.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.18.33@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325542835-025378a0-2813-4d38-a0ad-506012d0b7ec.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.18.54@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325553902-8071ff2d-e5ce-4328-bf30-33be12a1aec0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.07@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="group-管理">Group 管理<a href="#group-管理" class="hash-link" aria-label="Direct link to Group 管理" title="Direct link to Group 管理">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325583058-974985e4-822b-4229-bf20-7c78e07a5ac7.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.37.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325590879-42d393a0-93de-44fe-b71b-de31ce075c09.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.45@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325603155-d688fe65-6f4c-4324-9244-854b7a818154.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.54@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prom-监控">Prom 监控<a href="#prom-监控" class="hash-link" aria-label="Direct link to Prom 监控" title="Direct link to Prom 监控">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661323003273-fe3de5cc-28d0-48ab-8ead-38d8ba7b52b1.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 14.28.53.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="腾讯云">腾讯云<a href="#腾讯云" class="hash-link" aria-label="Direct link to 腾讯云" title="Direct link to 腾讯云">​</a></h3><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325816247-f34749aa-9d99-4a79-9295-108e9f97cbed.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.23.24@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-实例生命周期管理">Kafka 实例生命周期管理<a href="#kafka-实例生命周期管理" class="hash-link" aria-label="Direct link to Kafka 实例生命周期管理" title="Direct link to Kafka 实例生命周期管理">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325788285-5a658ef6-092c-40b2-88b8-1317e29b71b4.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.22.56@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="消息查询功能">消息查询功能<a href="#消息查询功能" class="hash-link" aria-label="Direct link to 消息查询功能" title="Direct link to 消息查询功能">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325835047-bc37c5a0-919b-422a-8706-bcb444171aef.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.23.44@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="数据同步任务">数据同步任务<a href="#数据同步任务" class="hash-link" aria-label="Direct link to 数据同步任务" title="Direct link to 数据同步任务">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325851682-523521fc-491d-431d-a255-efdaa2c1fa2d.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.24.04@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="迁移上云功能">迁移上云功能<a href="#迁移上云功能" class="hash-link" aria-label="Direct link to 迁移上云功能" title="Direct link to 迁移上云功能">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325869643-c2bc8a18-17be-406d-891f-fac1348d8072.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.24.21@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="topic-管理">Topic 管理<a href="#topic-管理" class="hash-link" aria-label="Direct link to Topic 管理" title="Direct link to Topic 管理">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332709528-c073dd8e-8637-4620-831b-59b714fd31ec.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.18.06@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332721004-1c4aae0a-424a-4a40-89de-904f2cc9e021.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.18.35@2x.jpg" class="img_ev3q">
<a href="https://cloud.tencent.com/document/product/597/73566" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/document/product/597/73566</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="查看-topic-详情">查看 Topic 详情<a href="#查看-topic-详情" class="hash-link" aria-label="Direct link to 查看 Topic 详情" title="Direct link to 查看 Topic 详情">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332758035-b38e4bf8-e5e5-4fc6-82ad-72d27a995c05.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.19.00@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="查看-topic-生产端连接">查看 Topic 生产端连接<a href="#查看-topic-生产端连接" class="hash-link" aria-label="Direct link to 查看 Topic 生产端连接" title="Direct link to 查看 Topic 生产端连接">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332800322-193f8f5e-b5cf-49d1-830c-a35496a34737.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.19.30@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="发送测试消息">发送测试消息<a href="#发送测试消息" class="hash-link" aria-label="Direct link to 发送测试消息" title="Direct link to 发送测试消息">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332849948-44c9aa3b-6fcb-42e8-8d07-91ad7dc1108b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.20.13@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="group-管理-1">Group 管理<a href="#group-管理-1" class="hash-link" aria-label="Direct link to Group 管理" title="Direct link to Group 管理">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332888749-197b7cd0-4db2-4324-a8be-523f6230e1d8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.21.06@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332903130-4aa1572a-2191-4b9a-a7d8-da430d5b664a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.21.36@2x.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="华为云">华为云<a href="#华为云" class="hash-link" aria-label="Direct link to 华为云" title="Direct link to 华为云">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例的创建">实例的创建<a href="#实例的创建" class="hash-link" aria-label="Direct link to 实例的创建" title="Direct link to 实例的创建">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326023773-8c1cfb61-6d36-451a-9ae8-e23253d0630a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.26.48@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326059316-df094fe7-237e-4aa3-b94c-be9015099325.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.27.28@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例基本信息">实例基本信息<a href="#实例基本信息" class="hash-link" aria-label="Direct link to 实例基本信息" title="Direct link to 实例基本信息">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327087509-8db8e907-fc63-46b0-8df3-de9c03f05ec1.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.44.29@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例配置修改">实例配置修改<a href="#实例配置修改" class="hash-link" aria-label="Direct link to 实例配置修改" title="Direct link to 实例配置修改">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326942939-93255eb4-0f4f-4d09-b4f7-c824fe2cdb7d.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.42.03@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建-topic">创建 Topic<a href="#创建-topic" class="hash-link" aria-label="Direct link to 创建 Topic" title="Direct link to 创建 Topic">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326884381-03f190c8-7371-4ee3-8222-39cf0c78bb17.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.41.07@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="监控">监控<a href="#监控" class="hash-link" aria-label="Direct link to 监控" title="Direct link to 监控">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326916095-08d2ad76-421b-481c-a81e-8bd6b402fea3.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.41.43@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326990347-ab2413fc-d1c5-4875-8026-408ba05c19e0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.01@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327009996-7525be7c-31e7-4c94-9b88-9a9d6c06f6bb.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.16@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327029319-18496da6-1f6c-458e-9cc2-2841da4ae21b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.40@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327041939-b6642928-ddb3-4f6d-9cf6-f900ff0ba7ee.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.56@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="示例代码">示例代码<a href="#示例代码" class="hash-link" aria-label="Direct link to 示例代码" title="Direct link to 示例代码">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327057619-5dbb3d4b-d6b8-40ec-a528-8b87e6253d62.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.44.07@2x.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="qingcloud">QingCloud<a href="#qingcloud" class="hash-link" aria-label="Direct link to QingCloud" title="Direct link to QingCloud">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-实例的创建">Kafka 实例的创建<a href="#kafka-实例的创建" class="hash-link" aria-label="Direct link to Kafka 实例的创建" title="Direct link to Kafka 实例的创建">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327953531-4347c195-85b1-4284-90c9-71b2f658d20a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.07@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327970196-df7533af-51b5-44c1-a3e6-dc53dd345165.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.23@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327978746-cde36af3-af9d-4818-a225-0435be7d8c70.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.33@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327989141-65ba9381-c39d-4df4-b35f-eb30c2c0f117.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.43@2x.jpg" class="img_ev3q"></p><blockquote><p>创建时，需要关联依赖服务 zookeeper</p></blockquote><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327998858-3c6af065-aac1-4351-8e7a-3a72c803ee36.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.51@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例详情">实例详情<a href="#实例详情" class="hash-link" aria-label="Direct link to 实例详情" title="Direct link to 实例详情">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661328648427-68359d73-3397-4f51-a41e-72ff088aa1da.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.10.36@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="topic-管理-1">Topic 管理<a href="#topic-管理-1" class="hash-link" aria-label="Direct link to Topic 管理" title="Direct link to Topic 管理">​</a></h4><p>提供了原生的 Kafka-manager 管理 UI
<a href="https://docsv3.qingcloud.com/middware/kafka/manual/kafka_manager/kafka_manager_topic/" target="_blank" rel="noopener noreferrer">https://docsv3.qingcloud.com/middware/kafka/manual/kafka_manager/kafka_manager_topic/</a></p><p>访问方式，以 openvpn 的方式接入到 VPC(需绑定入口公网 IP) 后，通过 client 内网地址访问
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661335030256-d6d8f4ce-5450-4675-9887-d91bfc43261e.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.57.01@2x.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ucloud">UCloud<a href="#ucloud" class="hash-link" aria-label="Direct link to UCloud" title="Direct link to UCloud">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建实例">创建实例<a href="#创建实例" class="hash-link" aria-label="Direct link to 创建实例" title="Direct link to 创建实例">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661329936765-dc801f1f-b820-4346-8cd5-bd16f22c933b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.32.07@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-实例详情">Kafka 实例详情<a href="#kafka-实例详情" class="hash-link" aria-label="Direct link to Kafka 实例详情" title="Direct link to Kafka 实例详情">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330180680-64f2f85d-65b1-429b-a9c2-0d4a3b7e7057.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.01@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330194590-e638d644-6d73-4008-9e73-fbd9386a739c.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.29@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330211435-8ac8d8e4-fa63-4151-a3c4-6cd85c346c2c.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.41@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330224056-a5b18cfb-21d8-44ab-aa10-2ec8b3225ad8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.55@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-节点的详情页面">Kafka 节点的详情页面<a href="#kafka-节点的详情页面" class="hash-link" aria-label="Direct link to Kafka 节点的详情页面" title="Direct link to Kafka 节点的详情页面">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331042096-143c7a92-3189-4413-b0f8-59c2e6480eb4.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.50.34@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330392867-c7609d4a-72bd-45e6-b741-943c2c7711fd.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.39.28@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-自定义配置">kafka 自定义配置<a href="#kafka-自定义配置" class="hash-link" aria-label="Direct link to kafka 自定义配置" title="Direct link to kafka 自定义配置">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331022340-2de4f944-dd32-42ea-a0ab-538044f96ab7.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.50.13@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-连接器">Kafka 连接器<a href="#kafka-连接器" class="hash-link" aria-label="Direct link to Kafka 连接器" title="Direct link to Kafka 连接器">​</a></h4><p>将上游 Kafka 数据传输到 HDFS 或者 es
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331196868-8af6eb6f-7690-49f8-83fa-f39297820c5f.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.53.11@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331184528-87b97468-042b-479b-9051-6a49838280a2.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.52.58@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331174214-c2788e65-e3a2-4080-b275-73b30ac6ed3c.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.52.43@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="监控看板">监控看板<a href="#监控看板" class="hash-link" aria-label="Direct link to 监控看板" title="Direct link to 监控看板">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330312396-375635d6-015b-447a-88c2-e5c2ad51de23.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.38.11@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建-topic-1">创建 Topic<a href="#创建-topic-1" class="hash-link" aria-label="Direct link to 创建 Topic" title="Direct link to 创建 Topic">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331056766-ea9a2a74-12bd-482a-b77c-e375e9e0bb45.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.50.50@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330340573-54024fe3-75fe-4dfb-b322-a0f157e369bf.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.38.45@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331099713-b943c976-ca08-4769-a4dc-710c92d899a2.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.51.29@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331073008-7df8b7f5-b92b-41a2-8c7f-74cc29071bc8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.51.05@2x.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="时速云">时速云<a href="#时速云" class="hash-link" aria-label="Direct link to 时速云" title="Direct link to 时速云">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例生命周期管理-1">实例生命周期管理<a href="#实例生命周期管理-1" class="hash-link" aria-label="Direct link to 实例生命周期管理" title="Direct link to 实例生命周期管理">​</a></h4><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331586127-3cd1e00a-fbed-4454-aea2-14e3bf95c393.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.59.24@2x.jpg" class="img_ev3q"></p><ul><li>需要提前安装 zookeeper</li><li>需要联系时速云管理员安装 kafka-cluster-operator<ul><li>到交付中心，找到 Operator Hub，选择 Kafka-cluster-operator 安装</li><li>安装完成后，可通过 Yaml + 表单形式 创建 Kafka</li></ul></li><li>提供 Kafka manger 原生 UI 控制台</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-实例详情-1">Kafka 实例详情<a href="#kafka-实例详情-1" class="hash-link" aria-label="Direct link to Kafka 实例详情" title="Direct link to Kafka 实例详情">​</a></h4><p>提供原生的实例管理界面，进行配置更新等
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334983034-f068a1ae-ccda-40b7-9b12-40e64bde24cc.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.56.16@2x.jpg" class="img_ev3q">
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334441012-bb78b74e-4c95-4679-a25b-52ace6645dd0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.47.02@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-实例下节点信息">Kafka 实例下节点信息<a href="#kafka-实例下节点信息" class="hash-link" aria-label="Direct link to Kafka 实例下节点信息" title="Direct link to Kafka 实例下节点信息">​</a></h4><p>直接跳转到 K8s 容器组界面查看
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334844501-fd53ecb8-9194-477e-ba99-690950d32ac2.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.53.57@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="topic-管理-2">Topic 管理<a href="#topic-管理-2" class="hash-link" aria-label="Direct link to Topic 管理" title="Direct link to Topic 管理">​</a></h4><p>在 Kafka manger 原生 UI 控制台内管理，默认启用了控制台公网访问能力
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661335035163-a487b30d-6938-4cfb-88a7-5ebbf08a4d02.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.57.01@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实例资源监控">实例资源监控<a href="#实例资源监控" class="hash-link" aria-label="Direct link to 实例资源监控" title="Direct link to 实例资源监控">​</a></h4><p>基础 CPU、内存、网络、存储监控
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334944904-59442083-e24e-4776-8e4b-3683c27e279e.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.55.38@2x.jpg" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka-性能监控">Kafka 性能监控<a href="#kafka-性能监控" class="hash-link" aria-label="Direct link to Kafka 性能监控" title="Direct link to Kafka 性能监控">​</a></h4><p>接入 Grafana 提供一个 Dashboard 的，可以查看 Topics 的消息数，消费量，积压数
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334965612-08293584-95c6-4220-b4e5-dcdfe2db44e1.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.55.57@2x.jpg" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="调研对象操作视频录制">调研对象操作视频录制<a href="#调研对象操作视频录制" class="hash-link" aria-label="Direct link to 调研对象操作视频录制" title="Direct link to 调研对象操作视频录制">​</a></h2><p>操作视频已上传到 OneDrive 共享空间</p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661337926424-23d5d513-4080-4f36-af59-2bda413eb905.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 18.45.08@2x.jpg" class="img_ev3q"></p><p><a href="https://yongyu2000hotmailcom.sharepoint.cn/:f:/s/ndx/EuCYqMaXhdlPh411YVnihRQBmCbGLQ4BvU1QW_2DX7_uUQ?e=18NyTR" target="_blank" rel="noopener noreferrer">https://yongyu2000hotmailcom.sharepoint.cn/:f:/s/ndx/EuCYqMaXhdlPh411YVnihRQBmCbGLQ4BvU1QW_2DX7_uUQ?e=18NyTR</a></p><blockquote><p>腾讯云只可以按月份订购，所以没有录制视频。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="选型确认">选型确认<a href="#选型确认" class="hash-link" aria-label="Direct link to 选型确认" title="Direct link to 选型确认">​</a></h2><p>方案一：</p><ul><li>中间件实例 LCM + 三方 UI 管理工具</li></ul><p>实现：</p><ul><li>Kafka 实例 LCM</li><li>Kafka Manage UI (三方)</li><li>监控三件套 (Insight) <!-- -->[只需要做实例级别]</li></ul><p>方案比对：</p><ul><li>现有 Opeator 不带 Kafka Manger，需要自行处理</li><li>不需要关心 Topic LCM</li><li>不需要做业务监控</li><li>沿用现有的 DCE 中间件的设计思路</li></ul><p>方案二：</p><ul><li>不增加三方 Kafka Manage UI</li></ul><p>实现：</p><ul><li>Kafka 实例 LCM</li><li>Topic LCM</li><li>监控三件套 (Insight) <!-- -->[需要做实例 + 业务监控]</li></ul><p>方案对比：</p><ul><li>现有 Operator 带有 Topic CR，可以用</li><li>需要做业务监控</li><li>需要做 Topic LCM</li><li>与其他中间件模块定义不一致（当前阶段）</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/microservice">Microservice</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kafka">Kafka</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/09/22/poetry-shi-yong-bi-ji">Poetry 使用笔记</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-22T00:00:00.000Z" itemprop="datePublished">September 22, 2022</time> · <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><p>poetry 是目前比较流行的 Python 环境管理工具 和 包管理工具，对多项目开发时的环境隔离有非常大的帮助，同时集成了包管理能力。</p><blockquote><p>官方网站  <a href="https://python-poetry.org/" target="_blank" rel="noopener noreferrer">https://python-poetry.org/</a>   集成了所有 Poetry 最新的使用文档，以下仅在我的环境上经过验证</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装方式">安装方式<a href="#安装方式" class="hash-link" aria-label="Direct link to 安装方式" title="Direct link to 安装方式">​</a></h3><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># In Pip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> 安装 pip install poetry </span><span class="token comment" style="color:rgb(98, 114, 164)"># pip3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> 更新 poetry self update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># In my Mac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> 安装 brew install poetry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> 更新 brew upgrade poetry</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># In my CentOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> 安装 curl </span><span class="token operator">-</span><span class="token plain">sSL https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token operator">//</span><span class="token plain">raw</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">githubusercontent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">com</span><span class="token operator">/</span><span class="token plain">python</span><span class="token operator">-</span><span class="token plain">poetry</span><span class="token operator">/</span><span class="token plain">poetry</span><span class="token operator">/</span><span class="token plain">master</span><span class="token operator">/</span><span class="token plain">get</span><span class="token operator">-</span><span class="token plain">poetry</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">py </span><span class="token operator">|</span><span class="token plain"> python </span><span class="token operator">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">-</span><span class="token plain"> 更新 poetry self update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置技巧相关">配置技巧相关<a href="#配置技巧相关" class="hash-link" aria-label="Direct link to 配置技巧相关" title="Direct link to 配置技巧相关">​</a></h3><p>在开始使用前，建议先对 poetry 的配置有些了解，并调整为适合你的方式，主要是调整一下虚拟环境的安装位置</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><code>poetry config</code> poetry 相关的查看和编辑的命令</p></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">~</span><span class="token plain"> poetry config </span><span class="token operator">-</span><span class="token operator">-</span><span class="token builtin" style="color:rgb(189, 147, 249)">list</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 获取当前 poetry 的配置情况</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cache</span><span class="token operator">-</span><span class="token builtin" style="color:rgb(189, 147, 249)">dir</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/Users/$username/Library/Caches/pypoetry&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">experimental</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">new</span><span class="token operator">-</span><span class="token plain">installer </span><span class="token operator">=</span><span class="token plain"> true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">installer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">parallel </span><span class="token operator">=</span><span class="token plain"> true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virtualenvs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">create </span><span class="token operator">=</span><span class="token plain"> true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virtualenvs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token operator">-</span><span class="token plain">project </span><span class="token operator">=</span><span class="token plain"> true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">virtualenvs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">path </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;{cache-dir}/virtualenvs&quot;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># /Users/$username/Library/Caches/pypoetry/virtualenvs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th><strong>配置项目</strong></th><th><strong>配置内容</strong></th><th><strong>配置项说明</strong></th><th><strong>建议配置</strong></th></tr></thead><tbody><tr><td>cache-dir</td><td>String</td><td>缓存目录配置，使用 poetry 安装的包源文件都会缓存到这个目录。</td><td>不建议更改</td></tr><tr><td>installer.parallel</td><td>boolean</td><td>此配置会被忽略</td><td></td></tr><tr><td>virtualenvs.create</td><td>boolean</td><td>默认为 true，如果当前工程的虚拟环境不存在，就创建一个</td><td>不建议更改</td></tr><tr><td>virtualenvs.in-project</td><td>boolean</td><td>None：poetry 会在系统特定目录创建一个.venv 目录，由下面的 path 参数指定</td><td></td></tr></tbody></table><p>true：poetry 会在项目根目录创建一个.venv 目录
false：poetry 将会忽略已存在的.venv 目录 | <strong>《建议修改》</strong></p><p>推荐这种方式，在项目根目录创建虚拟环境，这样就算移动目录位置也不影响虚拟环境的使用 |
| virtualenvs.path | string | 默认是{cache-dir}/virtualenvs，虚拟环境创建的目录，如果上面的 in-project 为 true，此配置就无效 | 不建议更改 |</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>建议 在使用前 启用 virtualenvs.in-project，这样会在每个项目下有一个.venv 方便隔离管理</p></div></div><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># poetry 配置说明</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry config virtualenvs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token operator">-</span><span class="token plain">project true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="poetry-常用指令说明">poetry 常用指令说明<a href="#poetry-常用指令说明" class="hash-link" aria-label="Direct link to poetry 常用指令说明" title="Direct link to poetry 常用指令说明">​</a></h3><table><thead><tr><th><strong>Poetry Command</strong></th><th><strong>解释</strong></th></tr></thead><tbody><tr><td>$ poetry --version</td><td>显示您的 Poetry 安装版本。</td></tr><tr><td>$ poetry new</td><td>创建一个新的 Poetry 项目。</td></tr><tr><td>$ poetry init</td><td>将 Poetry 添加到现有项目中。</td></tr><tr><td>$ poetry run</td><td>使用 Poetry 执行给定的命令。</td></tr><tr><td>$ poetry add</td><td>添加一个包 pyproject.toml 并安装它。</td></tr><tr><td>$ poetry update</td><td>更新项目的依赖项。</td></tr><tr><td>$ poetry install</td><td>安装依赖项。</td></tr><tr><td>$ poetry show</td><td>列出已安装的软件包。</td></tr><tr><td>$ poetry lock</td><td>将最新版本的依赖项固定到 poetry.lock.</td></tr><tr><td>$ poetry lock --no-update</td><td>刷新 poetry.lock 文件而不更新任何依赖版本。</td></tr><tr><td>$ poetry check</td><td>验证 pyproject.toml。</td></tr><tr><td>$ poetry config --list</td><td>显示 Poetry 配置。</td></tr><tr><td>$ poetry env list</td><td>列出项目的虚拟环境。</td></tr><tr><td>$ poetry export</td><td>导出 poetry.lock 为其他格式。</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="新项目初始化流程">新项目初始化流程<a href="#新项目初始化流程" class="hash-link" aria-label="Direct link to 新项目初始化流程" title="Direct link to 新项目初始化流程">​</a></h3><blockquote><p>这里以 初始化一个  FastAPI 项目作为 实例</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  fastapi poetry new fastapi-demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Created package fastapi_demo </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> fastapi-demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  fastapi </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> -lh fastapi-demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">total </span><span class="token number">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-r--r--  </span><span class="token number">1</span><span class="token plain"> samzonglu  staff     0B  </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">15</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:28 README.rst</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxr-xr-x  </span><span class="token number">3</span><span class="token plain"> samzonglu  staff    96B  </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">15</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:28 fastapi_demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-rw-r--r--  </span><span class="token number">1</span><span class="token plain"> samzonglu  staff   304B  </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">15</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:28 pyproject.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxr-xr-x  </span><span class="token number">4</span><span class="token plain"> samzonglu  staff   128B  </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">15</span><span class="token plain"> </span><span class="token number">14</span><span class="token plain">:28 tests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  fastapi </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> fastapi-demo</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">➜  fastapi-demo poetry </span><span class="token function" style="color:rgb(80, 250, 123)">env</span><span class="token plain"> use </span><span class="token number">3.10</span><span class="token plain">.2  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 配置项目的虚拟环境</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirementstxt-已存在项目使用-poetry">requirements.txt 已存在项目使用 poetry<a href="#requirementstxt-已存在项目使用-poetry" class="hash-link" aria-label="Direct link to requirements.txt 已存在项目使用 poetry" title="Direct link to requirements.txt 已存在项目使用 poetry">​</a></h3><p>这里会遇到一个问题，已存在的项目基本都已经有了 requirements.txt，所以 poetry 最好可以直接读取它</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">cat</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> requirements.txt</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将项目依赖导出为  requirements.txt</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> --output requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="更新内容">更新内容<a href="#更新内容" class="hash-link" aria-label="Direct link to 更新内容" title="Direct link to 更新内容">​</a></h2><p>如何把项目移交给一个 not use Poetry 的人运行，对于 Python 的 环境包 依赖，上述的 ouput/input 的方式，会存在一些问题，这里进行纠正。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="问题-pip-freeze-不能用了">问题 pip freeze 不能用了<a href="#问题-pip-freeze-不能用了" class="hash-link" aria-label="Direct link to 问题 pip freeze 不能用了" title="Direct link to 问题 pip freeze 不能用了">​</a></h3><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>pip freeze &gt; requirements.txt</p></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">anyio @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/cd/3f/ae/baff749ce6cb4d7985e4142650605d2d30cb92eb418e2d121868e4413d/anyio-3.6.1-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">certifi @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/b1/9b/6f/cd63ce97294ee9a1fb57e5cebf02f251fbb8f9ac48353a27ceeddc410b/certifi-2022.6.15-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">charset-normalizer @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/86/c8/3e/d878881698fbd2b72f484e4fca340588d633102920a002b66a293f9480/charset_normalizer-2.1.0-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">click @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/63/f3/4c/2270b95f4d37b9ea73cd401abe68b6e9ede30380533cd4e7118a8e3aa3/click-8.1.3-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fastapi @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/f9/37/53/c998e9ffd7ace66218174711f5c3ef1026a0bd3cd72f5fe2908e9b949b/fastapi-0.78.0-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">h11 @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/ef/5c/a2/a6d556bc5e3493616e52726df9c880b2da2fbf9c3be5e8351c84fbfafd/h11-0.13.0-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">idna @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/90/36/8c/81eabf6ac88608721ab27f439c9a6b9a8e6a21cc58c59ebb1a42720199/idna-3.3-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pydantic @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/c2/13/d4/b9f7dbf75702d85504b4a5f36545ff903c7e2264d4889e94ce02637276/pydantic-1.9.1-cp310-cp310-macosx_11_0_arm64.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">requests @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/14/1f/4d/1b93db6513b8ab38db841e4ce62691288ba549a5c1b6f3ca7274a1c9fd/requests-2.28.1-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sniffio @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/2b/1b/93/9c34d727e29f7bb11ce5b2ca7f43e77cb4e96a81ee5e07a92763951416/sniffio-1.2.0-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">starlette @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/3d/fc/74/569a1206737284325f5bb2e4f34689632c159dafbe8b7ff30bf2893c2d/starlette-0.19.1-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">typing_extensions @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/4a/aa/fe/e4680f3423fbdb5ac89a6fb2f83d9e7ff7fb48173b0fa1604786182558/typing_extensions-4.3.0-py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">urllib3 @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/8a/87/ce/4a44bf6bb59a745f4af7082c6977ab23a478fca039ad4d631dfdc0185b/urllib3-1.26.10-py2.py3-none-any.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">uvicorn @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/62/76/ec/dcafe6bae872839618dbf982c87eb314eee97784f7df74895e07bd198a/uvicorn-0.18.2-py3-none-any.whl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以看到，默认情况下<code>pip freeze</code>在输出时，携带里对应的安装路径；如果这个时候，我们把项目移交给其他人运行时，会遇到以下问题</p><blockquote><p>ERROR: Could not install packages due to an EnvironmentError: <!-- -->[<!-- -->Errno 2] No such</p></blockquote><p>这是 pip 安装软件包的一种特殊语法（自 19.1 开始受支持）<a href="https://www.python.org/dev/peps/pep-0440/#direct-references" target="_blank" rel="noopener noreferrer">PEP404</a>，
但是该此种路径取决于环境，file:///URL 仅在本地文件系统上可用，你不能将生成的 requirements.txt 文件提供给其他人使用</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="先说解决方法-01-poetry-style">先说解决方法 01 <!-- -->[<!-- -->poetry style]<a href="#先说解决方法-01-poetry-style" class="hash-link" aria-label="Direct link to 先说解决方法-01-poetry-style" title="Direct link to 先说解决方法-01-poetry-style">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> --without-hashes --format</span><span class="token operator">=</span><span class="token plain">requirements.txt </span><span class="token operator">&gt;</span><span class="token plain"> requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>通过 poetry 自带的导出能力，会携带更多的一些信息：对于环境中 python 版本的依赖，虽然更加友好一些。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">anyio</span><span class="token operator">==</span><span class="token number">3.6</span><span class="token plain">.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_full_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6.2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">certifi</span><span class="token operator">==</span><span class="token number">2022.6</span><span class="token plain">.15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">charset-normalizer</span><span class="token operator">==</span><span class="token number">2.1</span><span class="token plain">.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_full_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">click</span><span class="token operator">==</span><span class="token number">8.1</span><span class="token plain">.3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.7&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">colorama</span><span class="token operator">==</span><span class="token number">0.4</span><span class="token plain">.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.7&quot;</span><span class="token plain"> and python_full_version </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.0.0&quot;</span><span class="token plain"> and platform_system </span><span class="token operator">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Windows&quot;</span><span class="token plain"> or platform_system </span><span class="token operator">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Windows&quot;</span><span class="token plain"> and python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.7&quot;</span><span class="token plain"> and python_full_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.5.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">fastapi</span><span class="token operator">==</span><span class="token number">0.78</span><span class="token plain">.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_full_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">h11</span><span class="token operator">==</span><span class="token number">0.13</span><span class="token plain">.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">idna</span><span class="token operator">==</span><span class="token number">3.3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">pydantic</span><span class="token operator">==</span><span class="token number">1.9</span><span class="token plain">.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_full_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">requests</span><span class="token operator">==</span><span class="token number">2.28</span><span class="token plain">.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.7&quot;</span><span class="token plain"> and python_version </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">sniffio</span><span class="token operator">==</span><span class="token number">1.2</span><span class="token plain">.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">starlette</span><span class="token operator">==</span><span class="token number">0.19</span><span class="token plain">.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">typing-extensions</span><span class="token operator">==</span><span class="token number">4.3</span><span class="token plain">.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.7&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">urllib3</span><span class="token operator">==</span><span class="token number">1.26</span><span class="token plain">.10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2.7&quot;</span><span class="token plain"> and python_full_version </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.0.0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> or </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">python_full_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.6.0&quot;</span><span class="token plain"> and python_version </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">uvicorn</span><span class="token operator">==</span><span class="token number">0.18</span><span class="token plain">.2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> python_version </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.7&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="再说解决方法-02">再说解决方法 02<a href="#再说解决方法-02" class="hash-link" aria-label="Direct link to 再说解决方法 02" title="Direct link to 再说解决方法 02">​</a></h3><p>在新版的 python 中，推荐采用另外一个命令方式，<code>pip list --format=freeze</code> 这样会输出一份干净的依赖清单，我们可以通过这个方式，快速导出一份 <code>原汁原味</code> 的 requirements.txt</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">poetry run pip list --format</span><span class="token operator">=</span><span class="token plain">freeze</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">anyio</span><span class="token operator">==</span><span class="token number">3.6</span><span class="token plain">.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">certifi</span><span class="token operator">==</span><span class="token number">2022.6</span><span class="token plain">.15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">charset-normalizer</span><span class="token operator">==</span><span class="token number">2.1</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">click</span><span class="token operator">==</span><span class="token number">8.1</span><span class="token plain">.3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">fastapi</span><span class="token operator">==</span><span class="token number">0.78</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">h11</span><span class="token operator">==</span><span class="token number">0.13</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">idna</span><span class="token operator">==</span><span class="token number">3.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">pip</span><span class="token operator">==</span><span class="token number">22.2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">pydantic</span><span class="token operator">==</span><span class="token number">1.9</span><span class="token plain">.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">requests</span><span class="token operator">==</span><span class="token number">2.28</span><span class="token plain">.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">setuptools</span><span class="token operator">==</span><span class="token number">62.6</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">sniffio</span><span class="token operator">==</span><span class="token number">1.2</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">starlette</span><span class="token operator">==</span><span class="token number">0.19</span><span class="token plain">.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">typing_extensions</span><span class="token operator">==</span><span class="token number">4.3</span><span class="token plain">.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">urllib3</span><span class="token operator">==</span><span class="token number">1.26</span><span class="token plain">.10</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">uvicorn</span><span class="token operator">==</span><span class="token number">0.18</span><span class="token plain">.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wheel</span><span class="token operator">==</span><span class="token number">0.37</span><span class="token plain">.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="补充安装来自于-requirementstxt-的方式">补充安装来自于 requirements.txt 的方式<a href="#补充安装来自于-requirementstxt-的方式" class="hash-link" aria-label="Direct link to 补充安装来自于 requirements.txt 的方式" title="Direct link to 补充安装来自于 requirements.txt 的方式">​</a></h3><blockquote><p>with poetry</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> requirements.txt </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">xargs</span><span class="token plain"> poetry </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>without poetry</p></blockquote><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> -r requirements.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/python">Python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/09/20/skoala-bu-shu-jiao-cheng">Skoala 部署教程</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-20T00:00:00.000Z" itemprop="datePublished">September 20, 2022</time> · <!-- -->7 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用之前的话">使用之前的话<a href="#使用之前的话" class="hash-link" aria-label="Direct link to 使用之前的话" title="Direct link to 使用之前的话">​</a></h2><p>Skoala 的微服务治理和微服务是强依赖的 Ghippo、Insight 和 Kpanda 作为基石；同时 Skoala 也支持了 Mesh 服务治理能力，所以也需要 Mspider。
为了保证良好的使用体验，以及减少不可预知的部署问题，请确认以上组件均可正常工作。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="检测方式一">检测方式一<a href="#检测方式一" class="hash-link" aria-label="Direct link to 检测方式一" title="Direct link to 检测方式一">​</a></h3><p>访问 UI 界面环境，可以在左侧导航栏能够正确看到所有模块，并且可以正常使用。
<img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1662545276376-f34d4b1d-e736-4552-b873-83421c7a70e8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-09-07 at 18.07.42@2x.jpg" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="检测方式二">检测方式二<a href="#检测方式二" class="hash-link" aria-label="Direct link to 检测方式二" title="Direct link to 检测方式二">​</a></h3><p>通过终端查看集群内的 apiserver 是否正常，检查服务 Pod 是否正常运行</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 检测 ghippo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n ghippo-system get pods </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">egrep</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver|ui&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ghippo-apiserver-589c4ddcf6-cmct7              </span><span class="token number">3</span><span class="token plain">/3     Running     </span><span class="token number">0</span><span class="token plain">          17h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ghippo-apiserver-589c4ddcf6-sts8t              </span><span class="token number">3</span><span class="token plain">/3     Running     </span><span class="token number">0</span><span class="token plain">          17h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ghippo-ui-7ddddc548c-nsbkj                     </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          94m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 检查 kpanda</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n kpanda-system get pods </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">egrep</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apiserver|ui&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kpanda-apiserver-695b76f476-kdb8l                                 </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          5m56s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kpanda-apiserver-695b76f476-mvllg                                 </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          7m51s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kpanda-clusterpedia-apiserver-574d49c4c-hptm7                     </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          74m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kpanda-clusterpedia-apiserver-574d49c4c-mjm84                     </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          74m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kpanda-ui-5f9586d49b-f4mn2                                        </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          66m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kpanda-ui-5f9586d49b-qpgwd                                        </span><span class="token number">2</span><span class="token plain">/2     Running     </span><span class="token number">0</span><span class="token plain">          66m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 检查 Insight</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n insight-system get pods </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">egrep</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;server|ui&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insight-server-5bbc96bb94-n2wc7                                </span><span class="token number">1</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">          174m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insight-ui-66b6795c44-zm6qj                                    </span><span class="token number">1</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">          3h38m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 检查 mspider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n mspider-system get pods </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">egrep</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;api|ui&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mspider-api-service-7d96c6798-mljst       </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">          3h20m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mspider-ui-6f5d58cdc6-59hbn               </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">          170m</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mspider-work-api-684b75dccb-4659g         </span><span class="token number">2</span><span class="token plain">/2     Running   </span><span class="token number">0</span><span class="token plain">          3h20m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置-skoala-helm-repo">配置 skoala helm repo<a href="#配置-skoala-helm-repo" class="hash-link" aria-label="Direct link to 配置 skoala helm repo" title="Direct link to 配置 skoala helm repo">​</a></h2><p>配置好 skoala 仓库，即可查看和获取到 skoala 的应用 chart</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> skoala-release https://release.daocloud.io/chartrepo/skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm repo update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>需要实现安装 Helm</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装依赖-mysql">安装依赖 mysql<a href="#安装依赖-mysql" class="hash-link" aria-label="Direct link to 安装依赖 mysql" title="Direct link to 安装依赖 mysql">​</a></h2><p>在安装 skoala 的组件时，hive 和 sesame 需要用到 mysql 组件，所以这里需要预先安装一下 mysql，执行下方 yaml。</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 使用如下命令</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system apply </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">f skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">mysql.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 保存到 skoala-mysql.yml 文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ cat skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">mysql.yml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3306</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">clusterIP</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> None</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">namespace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">matchLabels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">strategy</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Recreate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">template</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">metadata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">labels</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">app</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">spec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> release.daocloud.io/skoala/mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">5.7.32</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgb(98, 114, 164)"># Use secret in real usage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> MYSQL_ROOT_PASSWORD</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> password</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">ports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">containerPort</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">3306</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">volumeMounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">persistent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /var/lib/mysql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">volumes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">persistent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">storage</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token key atrule">claimName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">pv</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">claim</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>注意修改以上，mysql 的密码。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="初始化-mysql">初始化 mysql<a href="#初始化-mysql" class="hash-link" aria-label="Direct link to 初始化 mysql" title="Direct link to 初始化 mysql">​</a></h3><p>登录到 pod 内，并成功登录到 mysql 内</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system exec pods/`kubectl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system get pods </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> grep skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">mysql </span><span class="token punctuation" style="color:rgb(248, 248, 242)">|</span><span class="token plain"> awk &#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">print $1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">&#x27;` </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">it bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1662548094736-0d938b21-7991-426b-a0b0-9aa19a2d357a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-09-07 at 18.54.47@2x.jpg" class="img_ev3q"></p><p>初始化数据库表</p><ul><li>获取到 mysql 的初始化脚本文件，<a href="https://gitlab.daocloud.cn/ndx/skoala/-/tree/main/app/hive/db" target="_blank" rel="noopener noreferrer">https://gitlab.daocloud.cn/ndx/skoala/-/tree/main/app/hive/db</a></li><li>依次查看对应的文件，并放在 mysql 中执行</li></ul><p>注意把对应的版本，建议使用最新的版本，这里建议  v0.6.1</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm upgrade --install skoala --create-namespace -n skoala-system --cleanup-on-fail </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--set image.tag</span><span class="token operator">=</span><span class="token plain">v0.6.1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala/skoala-agent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--version </span><span class="token number">0.6</span><span class="token plain">.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里会将资源部署到 skoala-system 命名空间内，可以通过查看该命名空间内的资源来查看是否部署成功。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl -n skoala-system get pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                           READY   STATUS    RESTARTS         AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hive-96b58785c-shhnh           </span><span class="token number">0</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">                23h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sesame-cdd894f74-l55hw         </span><span class="token number">0</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">                23h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ui-7df9754f85-v2gg5            </span><span class="token number">1</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">                23h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-skoala">安装 Skoala<a href="#安装-skoala" class="hash-link" aria-label="Direct link to 安装 Skoala" title="Direct link to 安装 Skoala">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看-skaola-当前最新版本">查看 skaola 当前最新版本<a href="#查看-skaola-当前最新版本" class="hash-link" aria-label="Direct link to 查看 skaola 当前最新版本" title="Direct link to 查看 skaola 当前最新版本">​</a></h3><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm search repo skoala-release/skoala --versions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                CHART VERSION APP VERSION DESCRIPTION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.6</span><span class="token plain">.1         </span><span class="token number">0.6</span><span class="token plain">.1       The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.6</span><span class="token plain">.0         </span><span class="token number">0.6</span><span class="token plain">.0       The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala-release/skoala       </span><span class="token number">0.5</span><span class="token plain">.1         </span><span class="token number">0.5</span><span class="token plain">.1       The helm chart </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> Skoala</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="执行部署">执行部署<a href="#执行部署" class="hash-link" aria-label="Direct link to 执行部署" title="Direct link to 执行部署">​</a></h3><p>这里注意各个组件的版本，建议安装如下版本，直接执行命令即可，【在 demo 部署时】</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm upgrade </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">install skoala </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">namespace </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cleanup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fail \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">set ui.image.tag=v0.5.3 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">set hive.image.tag=v0.6.1 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">set sesame.image.tag=v0.6.1 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">daocloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">registry/skoala \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">version 0.6.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查看部署的 pod 是否启动成功</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system get pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                           READY   STATUS             RESTARTS          AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">96b58785c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">shhnh           1/1     Running            0                 25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sesame</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cdd894f74</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">l55hw         1/1     Running            0                 25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">mysql</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">75dc5cfc7</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">99tbs   1/1     Running            0                 25h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ui</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">7df9754f85</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">v2gg5            1/1     Running            0                 23h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="卸载">卸载<a href="#卸载" class="hash-link" aria-label="Direct link to 卸载" title="Direct link to 卸载">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm uninstall skoala </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更多参数的配置">更多参数的配置<a href="#更多参数的配置" class="hash-link" aria-label="Direct link to 更多参数的配置" title="Direct link to 更多参数的配置">​</a></h3><table><thead><tr><th><strong>Key</strong></th><th><strong>Type</strong></th><th><strong>Default</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>global.image.pullPolicy</td><td>string</td><td><code>&quot;IfNotPresent&quot;</code></td><td></td></tr><tr><td>global.image.repository</td><td>string</td><td><code>&quot;release.daocloud.io&quot;</code></td><td></td></tr><tr><td>global.imageCredentials.email</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>global.imageCredentials.password</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>global.imageCredentials.username</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>global.imagePullSecrets</td><td>list</td><td><code>[]</code></td><td></td></tr><tr><td>global.istioInjection.enable</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>global.namespace</td><td>string</td><td><code>&quot;skoala-system&quot;</code></td><td></td></tr><tr><td>hive.configMap.chart-repos.skoala.name</td><td>string</td><td><code>&quot;skoala&quot;</code></td><td></td></tr><tr><td>hive.configMap.chart-repos.skoala.password</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>hive.configMap.chart-repos.skoala.url</td><td>string</td><td><code>&quot;https://release.daocloud.io/chartrepo/skoala&quot;</code></td><td></td></tr><tr><td>hive.configMap.chart-repos.skoala.user</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>hive.configMap.client.ghippo.kubeconfig</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>hive.configMap.client.ghippo.timeout</td><td>int</td><td><code>30</code></td><td></td></tr><tr><td>hive.configMap.client.insight</td><td>string</td><td><code>&quot;insight-server.insight-system:80&quot;</code></td><td></td></tr><tr><td>hive.configMap.client.kpanda</td><td>string</td><td><code>&quot;kpanda-apiserver.kpanda-system:80&quot;</code></td><td></td></tr><tr><td>hive.configMap.client.mspider</td><td>string</td><td><code>&quot;mspider-api-service.mspider-system:8081&quot;</code></td><td></td></tr><tr><td>hive.configMap.client.mspider<!-- -->_<!-- -->mcpc</td><td>string</td><td><code>&quot;mspider-work-api.mspider-system:8081&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.database.database</td><td>string</td><td><code>&quot;hive&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.database.driver</td><td>string</td><td><code>&quot;mysql&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.database.host</td><td>string</td><td><code>&quot;skoala-mysql&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.database.max-connection-lifetime</td><td>int</td><td><code>20</code></td><td></td></tr><tr><td>hive.configMap.data.database.max-idle-connections</td><td>int</td><td><code>150</code></td><td></td></tr><tr><td>hive.configMap.data.database.max-open-connections</td><td>int</td><td><code>150</code></td><td></td></tr><tr><td>hive.configMap.data.database.password</td><td>string</td><td><code>&quot;dangerous&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.database.port</td><td>int</td><td><code>3306</code></td><td></td></tr><tr><td>hive.configMap.data.database.user</td><td>string</td><td><code>&quot;root&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.server.grpc.addr</td><td>string</td><td><code>&quot;0.0.0.0:9091&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.server.grpc.timeout</td><td>string</td><td><code>&quot;1s&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.server.http.addr</td><td>string</td><td><code>&quot;0.0.0.0:8081&quot;</code></td><td></td></tr><tr><td>hive.configMap.data.server.http.timeout</td><td>string</td><td><code>&quot;1s&quot;</code></td><td></td></tr><tr><td>hive.enable</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>hive.image.name</td><td>string</td><td><code>&quot;skoala/hive&quot;</code></td><td></td></tr><tr><td>hive.image.pullPolicy</td><td>string</td><td><code>&quot;IfNotPresent&quot;</code></td><td></td></tr><tr><td>hive.image.tag</td><td>string</td><td><code>&quot;v0.6.0&quot;</code></td><td></td></tr><tr><td>hive.nameOverride</td><td>string</td><td><code>&quot;hive&quot;</code></td><td></td></tr><tr><td>hive.replicaCount</td><td>int</td><td><code>1</code></td><td></td></tr><tr><td>hive.resources</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>hive.service.grpc.nodePort</td><td>int</td><td><code>30091</code></td><td></td></tr><tr><td>hive.service.grpc.port</td><td>int</td><td><code>9091</code></td><td></td></tr><tr><td>hive.service.http.nodePort</td><td>int</td><td><code>30081</code></td><td></td></tr><tr><td>hive.service.http.port</td><td>int</td><td><code>8081</code></td><td></td></tr><tr><td>hive.service.type</td><td>string</td><td><code>&quot;NodePort&quot;</code></td><td></td></tr><tr><td>sesame.configMap.chart-repos.skoala.name</td><td>string</td><td><code>&quot;skoala&quot;</code></td><td></td></tr><tr><td>sesame.configMap.chart-repos.skoala.password</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>sesame.configMap.chart-repos.skoala.url</td><td>string</td><td><code>&quot;https://release.daocloud.io/chartrepo/skoala&quot;</code></td><td></td></tr><tr><td>sesame.configMap.chart-repos.skoala.user</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>sesame.configMap.client.ghippo.kubeconfig</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>sesame.configMap.client.ghippo.timeout</td><td>int</td><td><code>30</code></td><td></td></tr><tr><td>sesame.configMap.client.insight</td><td>string</td><td><code>&quot;insight-server.insight-system:80&quot;</code></td><td></td></tr><tr><td>sesame.configMap.client.kpanda</td><td>string</td><td><code>&quot;kpanda-apiserver.kpanda-system:80&quot;</code></td><td></td></tr><tr><td>sesame.configMap.data.server.grpc.addr</td><td>string</td><td><code>&quot;0.0.0.0:9092&quot;</code></td><td></td></tr><tr><td>sesame.configMap.data.server.grpc.timeout</td><td>string</td><td><code>&quot;1s&quot;</code></td><td></td></tr><tr><td>sesame.configMap.data.server.http.addr</td><td>string</td><td><code>&quot;0.0.0.0:8082&quot;</code></td><td></td></tr><tr><td>sesame.configMap.data.server.http.timeout</td><td>string</td><td><code>&quot;1s&quot;</code></td><td></td></tr><tr><td>sesame.configMap.log.development</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>sesame.configMap.log.disable-color</td><td>bool</td><td><code>false</code></td><td></td></tr><tr><td>sesame.configMap.log.disable-stacktrace</td><td>bool</td><td><code>false</code></td><td></td></tr><tr><td>sesame.configMap.log.enable-caller</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>sesame.configMap.log.error-output-paths</td><td>string</td><td><code>&quot;dist/log/skoala-sesame.error.log&quot;</code></td><td></td></tr><tr><td>sesame.configMap.log.format</td><td>string</td><td><code>&quot;console&quot;</code></td><td></td></tr><tr><td>sesame.configMap.log.level</td><td>string</td><td><code>&quot;debug&quot;</code></td><td></td></tr><tr><td>sesame.configMap.log.name</td><td>string</td><td><code>&quot;skoala-sesame&quot;</code></td><td></td></tr><tr><td>sesame.configMap.log.output-paths</td><td>string</td><td><code>&quot;dist/log/skoala-sesame.log,stdout&quot;</code></td><td></td></tr><tr><td>sesame.enable</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>sesame.image.name</td><td>string</td><td><code>&quot;skoala/sesame&quot;</code></td><td></td></tr><tr><td>sesame.image.pullPolicy</td><td>string</td><td><code>&quot;IfNotPresent&quot;</code></td><td></td></tr><tr><td>sesame.image.tag</td><td>string</td><td><code>&quot;v0.6.0&quot;</code></td><td></td></tr><tr><td>sesame.nameOverride</td><td>string</td><td><code>&quot;sesame&quot;</code></td><td></td></tr><tr><td>sesame.replicaCount</td><td>int</td><td><code>1</code></td><td></td></tr><tr><td>sesame.resources</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>sesame.service.grpc.nodePort</td><td>int</td><td><code>30092</code></td><td></td></tr><tr><td>sesame.service.grpc.port</td><td>int</td><td><code>9092</code></td><td></td></tr><tr><td>sesame.service.http.nodePort</td><td>int</td><td><code>30082</code></td><td></td></tr><tr><td>sesame.service.http.port</td><td>int</td><td><code>8082</code></td><td></td></tr><tr><td>sesame.service.type</td><td>string</td><td><code>&quot;NodePort&quot;</code></td><td></td></tr><tr><td>ui.enable</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>ui.image.name</td><td>string</td><td><code>&quot;skoala/skoala-ui&quot;</code></td><td></td></tr><tr><td>ui.image.pullPolicy</td><td>string</td><td><code>&quot;IfNotPresent&quot;</code></td><td></td></tr><tr><td>ui.image.tag</td><td>string</td><td><code>&quot;v0.4.0&quot;</code></td><td></td></tr><tr><td>ui.nameOverride</td><td>string</td><td><code>&quot;ui&quot;</code></td><td></td></tr><tr><td>ui.replicaCount</td><td>int</td><td><code>1</code></td><td></td></tr><tr><td>ui.resources</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>ui.service.nodePort</td><td>int</td><td><code>30090</code></td><td></td></tr><tr><td>ui.service.port</td><td>int</td><td><code>80</code></td><td></td></tr><tr><td>ui.service.type</td><td>string</td><td><code>&quot;NodePort&quot;</code></td><td></td></tr><tr><td>create</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>ui.serviceAccount.name</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>ui.tolerations</td><td>list</td><td><code>[]</code></td><td></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="安装-skoala-agent">安装 skoala-agent<a href="#安装-skoala-agent" class="hash-link" aria-label="Direct link to 安装 skoala-agent" title="Direct link to 安装 skoala-agent">​</a></h2><p>安装步骤说明</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="查看当前最新版本">查看当前最新版本<a href="#查看当前最新版本" class="hash-link" aria-label="Direct link to 查看当前最新版本" title="Direct link to 查看当前最新版本">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ helm search repo skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">release/skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">versions</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                CHART VERSION APP VERSION DESCRIPTION</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala/skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent 0.6.1         0.6.1       A Helm chart for Skoala Agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala/skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent 0.6.0         0.6.0       A Helm chart for Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala/skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent 0.5.1         0.5.1       A Helm chart for Kubernetes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala/skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent 0.5.0         0.5.0       A Helm chart for Kubernetes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="部署">部署<a href="#部署" class="hash-link" aria-label="Direct link to 部署" title="Direct link to 部署">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm upgrade </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">install skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">namespace </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cleanup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">fail \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">set image.tag=v0.6.1 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala/skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">version 0.6.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查看部署的 pod 是否启动成功</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">~ kubectl </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent get pods</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                            READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">679c6d64b4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">tb7k4   1/1     Running   0          26h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="卸载命令">卸载命令<a href="#卸载命令" class="hash-link" aria-label="Direct link to 卸载命令" title="Direct link to 卸载命令">​</a></h3><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">helm uninstall skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">n skoala</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">agent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更多参数设置">更多参数设置<a href="#更多参数设置" class="hash-link" aria-label="Direct link to 更多参数设置" title="Direct link to 更多参数设置">​</a></h3><table><thead><tr><th>Key</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>affinity</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>autoscaling.enabled</td><td>bool</td><td><code>false</code></td><td></td></tr><tr><td>autoscaling.maxReplicas</td><td>int</td><td><code>100</code></td><td></td></tr><tr><td>autoscaling.minReplicas</td><td>int</td><td><code>1</code></td><td></td></tr><tr><td>autoscaling.targetCPUUtilizationPercentage</td><td>int</td><td><code>80</code></td><td></td></tr><tr><td>fullnameOverride</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>image.pullPolicy</td><td>string</td><td><code>&quot;IfNotPresent&quot;</code></td><td></td></tr><tr><td>image.repository</td><td>string</td><td><code>&quot;release-ci.daocloud.io/skoala/skoala-agent&quot;</code></td><td></td></tr><tr><td>image.tag</td><td>string</td><td><code>&quot;v0.6.0&quot;</code></td><td></td></tr><tr><td>imagePullSecrets</td><td>list</td><td><code>[]</code></td><td></td></tr><tr><td>ingress.annotations</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>ingress.className</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>ingress.enabled</td><td>bool</td><td><code>false</code></td><td></td></tr><tr><td>ingress.hosts<!-- -->[<!-- -->0].host</td><td>string</td><td><code>&quot;chart-example.local&quot;</code></td><td></td></tr><tr><td>ingress.hosts<!-- -->[<!-- -->0].paths<!-- -->[<!-- -->0].path</td><td>string</td><td><code>&quot;/&quot;</code></td><td></td></tr><tr><td>ingress.hosts<!-- -->[<!-- -->0].paths<!-- -->[<!-- -->0].pathType</td><td>string</td><td><code>&quot;ImplementationSpecific&quot;</code></td><td></td></tr><tr><td>ingress.tls</td><td>list</td><td><code>[]</code></td><td></td></tr><tr><td>istioInjection.enable</td><td>bool</td><td><code>true</code></td><td></td></tr><tr><td>nameOverride</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>nodeSelector</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>podAnnotations</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>podSecurityContext</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>replicaCount</td><td>int</td><td><code>1</code></td><td></td></tr><tr><td>resources</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>securityContext</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>service.port</td><td>int</td><td><code>443</code></td><td></td></tr><tr><td>service.type</td><td>string</td><td><code>&quot;NodePort&quot;</code></td><td></td></tr><tr><td>serviceAccount.annotations</td><td>object</td><td><code>{}</code></td><td></td></tr><tr><td>serviceAccount.create</td><td>bool</td><td><code>false</code></td><td></td></tr><tr><td>serviceAccount.name</td><td>string</td><td><code>&quot;&quot;</code></td><td></td></tr><tr><td>tolerations</td><td>list</td><td><code>[]</code></td><td></td></tr></tbody></table></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/dao-cloud">DaoCloud</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/09/18/shi-yong-canal-jin-xing-shu-ju-ku-zeng-liang-tong-bu">使用 canal 进行数据库增量同步</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-18T00:00:00.000Z" itemprop="datePublished">September 18, 2022</time> · <!-- -->3 min read</div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1662586780206-7328e88e-c0e3-4e2f-ac6d-e072747efc4a.png?x-oss-process=image/resize,w_960,m_lfit" alt="image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h2><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20191104101735947.png?x-oss-process=image/resize,w_960,m_lfit" alt="image" class="img_ev3q"></p><p><strong>canal <!-- -->[<!-- -->kə&#x27;næl]</strong>，译意为水道/管道/沟渠，主要用途是基于 MySQL 数据库增量日志解析，提供增量数据订阅和消费</p><p>早期阿里巴巴因为杭州和美国双机房部署，存在跨机房同步的业务需求，实现方式主要是基于业务 trigger 获取增量变更。从 2010 年开始，业务逐步尝试数据库日志解析获取增量变更进行同步，由此衍生出了大量的数据库增量订阅和消费业务。</p><p>基于日志增量订阅和消费的业务包括</p><ul><li>数据库镜像</li><li>数据库实时备份</li><li>索引构建和实时维护 (拆分异构索引、倒排索引等)</li><li>业务 cache 刷新</li><li>带业务逻辑的增量数据处理</li></ul><p>当前的 canal 支持源端 MySQL 版本包括 5.1.x , 5.5.x , 5.6.x , 5.7.x , 8.0.x</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="工作原理">工作原理<a href="#工作原理" class="hash-link" aria-label="Direct link to 工作原理" title="Direct link to 工作原理">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mysql-主备复制原理">MySQL 主备复制原理<a href="#mysql-主备复制原理" class="hash-link" aria-label="Direct link to MySQL 主备复制原理" title="Direct link to MySQL 主备复制原理">​</a></h3><ul><li>MySQL master 将数据变更写入二进制日志 ( binary log, 其中记录叫做二进制日志事件 binary log events，可以通过 show binlog events 进行查看)</li><li>MySQL slave 将 master 的 binary log events 拷贝到它的中继日志 (relay log)</li><li>MySQL slave 重放 relay log 中事件，将数据变更反映它自己的数据</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="canal-工作原理">canal 工作原理<a href="#canal-工作原理" class="hash-link" aria-label="Direct link to canal 工作原理" title="Direct link to canal 工作原理">​</a></h3><ul><li>canal 模拟 MySQL slave 的交互协议，伪装自己为 MySQL slave，向 MySQL master 发送 dump 协议</li><li>MySQL master 收到 dump 请求，开始推送 binary log 给 slave (即 canal )</li><li>canal 解析 binary log 对象 (原始为 byte 流)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="文档支持">文档支持<a href="#文档支持" class="hash-link" aria-label="Direct link to 文档支持" title="Direct link to 文档支持">​</a></h2><ul><li><a href="https://github.com/alibaba/canal/wiki/Home" target="_blank" rel="noopener noreferrer">Home</a></li><li><a href="https://github.com/alibaba/canal/wiki/Introduction" target="_blank" rel="noopener noreferrer">Introduction</a></li><li><a href="https://github.com/alibaba/canal/wiki/QuickStart" target="_blank" rel="noopener noreferrer">QuickStart</a><ul><li><a href="https://github.com/alibaba/canal/wiki/Docker-QuickStart" target="_blank" rel="noopener noreferrer">Docker QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Kafka-RocketMQ-QuickStart%22" target="_blank" rel="noopener noreferrer">Canal Kafka/RocketMQ QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/aliyun-RDS-QuickStart" target="_blank" rel="noopener noreferrer">Aliyun RDS for MySQL QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/Prometheus-QuickStart" target="_blank" rel="noopener noreferrer">Prometheus QuickStart</a></li></ul></li><li>Canal Admin<ul><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-QuickStart" target="_blank" rel="noopener noreferrer">Canal Admin QuickStart</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-Guide" target="_blank" rel="noopener noreferrer">Canal Admin Guide</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-ServerGuide" target="_blank" rel="noopener noreferrer">Canal Admin ServerGuide</a></li><li><a href="https://github.com/alibaba/canal/wiki/Canal-Admin-Docker" target="_blank" rel="noopener noreferrer">Canal Admin Docker</a></li></ul></li><li><a href="https://github.com/alibaba/canal/wiki/AdminGuide" target="_blank" rel="noopener noreferrer">AdminGuide</a></li><li><a href="https://github.com/alibaba/canal/wiki/ClientExample" target="_blank" rel="noopener noreferrer">ClientExample</a></li><li><a href="https://github.com/alibaba/canal/wiki/ClientAPI" target="_blank" rel="noopener noreferrer">ClientAPI</a></li><li><a href="https://github.com/alibaba/canal/wiki/Performance" target="_blank" rel="noopener noreferrer">Performance</a></li><li><a href="https://github.com/alibaba/canal/wiki/DevGuide" target="_blank" rel="noopener noreferrer">DevGuide</a></li><li><a href="https://github.com/alibaba/canal/wiki/BinlogChange%28mysql5.6%29" target="_blank" rel="noopener noreferrer">BinlogChange(MySQL 5.6)</a></li><li><a href="https://github.com/alibaba/canal/wiki/BinlogChange%28MariaDB%29" target="_blank" rel="noopener noreferrer">BinlogChange(MariaDB)</a></li><li><a href="https://github.com/alibaba/canal/wiki/TableMetaTSDB" target="_blank" rel="noopener noreferrer">TableMetaTSDB</a></li><li><a href="http://alibaba.github.com/canal/release.html" target="_blank" rel="noopener noreferrer">ReleaseNotes</a></li><li><a href="https://github.com/alibaba/canal/releases" target="_blank" rel="noopener noreferrer">Download</a></li><li><a href="https://github.com/alibaba/canal/wiki/FAQ" target="_blank" rel="noopener noreferrer">FAQ</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="多语言">多语言<a href="#多语言" class="hash-link" aria-label="Direct link to 多语言" title="Direct link to 多语言">​</a></h2><p>canal 特别设计了 client-server 模式，交互协议使用 protobuf 3.0 , client 端可采用不同语言实现不同的消费逻辑，欢迎大家提交 pull request</p><ul><li>canal java 客户端：<a href="https://github.com/alibaba/canal/wiki/ClientExample" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/canal/wiki/ClientExample</a></li><li>canal c# 客户端：<a href="https://github.com/dotnetcore/CanalSharp" target="_blank" rel="noopener noreferrer">https://github.com/dotnetcore/CanalSharp</a></li><li>canal go 客户端：<a href="https://github.com/CanalClient/canal-go" target="_blank" rel="noopener noreferrer">https://github.com/CanalClient/canal-go</a></li><li>canal php 客户端：<a href="https://github.com/xingwenge/canal-php" target="_blank" rel="noopener noreferrer">https://github.com/xingwenge/canal-php</a></li><li>canal Python 客户端：<a href="https://github.com/haozi3156666/canal-python" target="_blank" rel="noopener noreferrer">https://github.com/haozi3156666/canal-python</a></li><li>canal Rust 客户端：<a href="https://github.com/laohanlinux/canal-rs" target="_blank" rel="noopener noreferrer">https://github.com/laohanlinux/canal-rs</a></li><li>canal Nodejs 客户端：<a href="https://github.com/marmot-z/canal-nodejs" target="_blank" rel="noopener noreferrer">https://github.com/marmot-z/canal-nodejs</a></li></ul><p>canal 作为 MySQL binlog 增量获取和解析工具，可将变更记录投递到 MQ 系统中，比如 Kafka/RocketMQ，可以借助于 MQ 的多语言能力</p><ul><li>参考文档：<a href="https://github.com/alibaba/canal/wiki/Canal-Kafka-RocketMQ-QuickStart" target="_blank" rel="noopener noreferrer">Canal Kafka/RocketMQ QuickStart</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="资料整理">资料整理<a href="#资料整理" class="hash-link" aria-label="Direct link to 资料整理" title="Direct link to 资料整理">​</a></h2><p>canal 的策略是模拟了 MySQL Slave 的行为，因此需要有 SELECT, REPLICATION SLAVE, REPLICATION CLIENT 的权限</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/tools">Tools</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-sql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/2022/09/12/k8s-xi-lie-nan-bei-liu-liang-he-dong-xi-liu-liang">K8s 系列 南北流量和东西流量</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-12T00:00:00.000Z" itemprop="datePublished">September 12, 2022</time> · <!-- -->4 min read</div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="南北流量和东西流量-是什么意思">南北流量和东西流量 是什么意思？<a href="#南北流量和东西流量-是什么意思" class="hash-link" aria-label="Direct link to 南北流量和东西流量 是什么意思？" title="Direct link to 南北流量和东西流量 是什么意思？">​</a></h2><p>在 Service Mesh 微服务架构中，我们常常会听到东西流量和南北流量两个术语。</p><p>南北流量（NORTH-SOUTH traffic）和东西流量（EAST-WEST traffic）是数据中心环境中的网络流量模式。下面我们通过一个例子来理解这两个术语。</p><p>假设我们尝试通过浏览器访问某些 Web 应用。Web 应用部署在位于某个数据中心的应用服务器中。在多层体系结构中，典型的数据中心不仅包含应用服务器，还包含其他服务器，如负载均衡器、数据库等，以及路由器和交换机等网络组件。假设应用服务器是负载均衡器的前端。</p><p>当我们访问 web 应用时，会发生以下类型的网络流量：</p><p><img loading="lazy" src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/f9c10a68e23f6955cc25c176d2ea98f7.png?x-oss-process=image/resize,w_960,m_lfit" class="img_ev3q"></p><p>数据中心树型拓扑图是一个典型的包含接入层、汇聚层、核心层三层的网络结构。这种结构诞生之初就是为了将外部流量引流到内部应用。</p><p>流量从外部穿过防火墙或者数据中心其它外围网络设备进来，对应到上⾯这张图里，流动方向为从上到下，称为南向流量（和地图一样，上北下南），而与之对应的，数据中心内部产生的，离开数据中心的流量，从下到上故称为北向流量。合起来称为南北流量。</p><p>在微服务化流行之前，以巨石系统（monolithic）这种单体应用为单位部署的方式，产生的是典型的南北流量。一个单体应用配有一个专门的服务器（或虚拟机），一个外部请求通常在单体应用内独立完成，除了访问数据库等必须依赖服务之外，很少会发生横向的流量。</p><p>但云计算机、大数据、微服务、云原生等技术的发展催生了大量的从左到右以及从右到左的流量，也被称为东西流量。</p><p>数据中心内部南北流量的削弱，而东西流量的井喷在硬件上要求数据中心要横向扩展以提供更宽的大二层以及容纳更多的服务器，而在软件上则要求一种新的服务编排方式以便能充分挖掘、利用现有的计算能力，从这个角度看 K8s 的出现是一种必然。</p><p>举两个例子：</p><ul><li><p>客户端（位于数据中心一侧的浏览器）与负载均衡器（位于数据中心）之间的网络流量</p></li><li><p>负载均衡器、应用服务器、数据库等之间的网络流量，它们都位于数据中心。</p></li></ul><p>在这个例子中，前者即即客户端和服务器之间的流量被称为南北流量。简而言之，南北流量是 server-client 流量。</p><p>第二种流量即不同服务器之间的流量与数据中心或不同数据中心之间的网络流被称为东西流量。简而言之，东西流量是 service-service 流量。</p><p>当下，东西流量远超南北流量，尤其是在当今的大数据生态系统中，比如 Hadoop 生态系统（大量 server 驻留在数据中心中，用 map reduce 处理），server-server 流量远大于 server-client 流量。</p><p>大家可能会好奇，东西南北，为什么这么命名？</p><p>该命名来自于绘制典型 network diagrams 的习惯。在图表中，通常核心网络组件绘制在顶部（NORTH），客户端绘制在底部（SOUTH），而数据中心内的不同服务器水平（EAST-WEST）</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/kubernetes">Kubernetes</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div></div>
<script src="/assets/js/runtime~main.a4192aa2.js"></script>
<script src="/assets/js/main.be9b3ddb.js"></script>
</body>
</html>