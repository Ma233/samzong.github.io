
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
  <head>
    <meta charset="utf-8">
	<link rel="manifest" href="/static/pwa/manifest.json">
	<title> Home | 船长的课记 </title>
    
		
    <meta name="author" content="船长">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#2196F3">
	<meta name="google-site-verification" content="puZt0ZyqB-t67BYdYAgLUyIPBeismG68J0dmEc01QeY" />

	
    <script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function () {
				navigator.serviceWorker
										.register('/sw.js')
										.then(function(registration) {
											console.log("Successfully registered service worker", registration.scope);
										}).catch(function(err) {
											console.log("Service worker registration failed: ", err);
										});
				//navigator.serviceWorker.ready always resolve
				navigator.serviceWorker.ready.then(function (registration) {
					console.log('Service worker successfully registered on scope', registration.scope);
				});
			});
		}
    </script>
	<script type="text/javascript" src="/assets/themes/evjekylltheme/jquery-3.6.0.slim.min.js"></script>

	<link href="/assets/themes/evjekylltheme/google-code-prettify/desert.css" type="text/css" rel="stylesheet" />

    <!-- Le styles -->
    <link href="/assets/themes/evjekylltheme/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/evjekylltheme/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">

    <!-- atom & rss feed -->
    <link href="" type="application/atom+xml" rel="alternate" title="Jekyll auto generate ATOM Feed">
    <link href="" type="application/atom+xml" rel="alternate" title="Site ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Site RSS Feed">
	<link rel="stylesheet" href="/assets/themes/evjekylltheme/font-awesome-4.4.0/css/font-awesome.min.css">
	<!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-W2LDG64');</script> -->
		<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8529425670069509"
						crossorigin="anonymous"></script> -->
	<!-- <script async src="https://cdn.splitbee.io/sb.js"></script> -->
  </head>

  <body>
	<!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LDG64"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    <div class="navbar navbar-default navbar-fixed-top">
				<div class="container">
          <div class="row mobilepadding">
					<!-- <a class="navbar-brand" href="/">船长的课记</a> -->
					<a class="navbar-brand" href="/">SAMZONG</a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse" id="mNavbar">
  					<ul class="nav navbar-nav">
  						
  						
  						


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/friends.html">Friends</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



						  <li class="dropdown">
							  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Other</a>
							  <ul class="dropdown-menu">
									<li><a href="/about.html">About</a></li>
									<li><a href="https://yuque.com/samzong/note" target="_blank">船长的课记</a></li>
									<li><a href="https://yuque.com/samzong/ap" target="_blank">果粉日记</a></li>
									<li><a href="https://yuque.com/samzong/code" target="_blank">Code Snippet</a></li>
									<li><a href="https://www.yuque.com/samzong/mcx" target="_blank">集</a></li>
									<li><a href="https://www.yuque.com/zooka" target="_blank">藏金阁</a></li>
								</ul>
						  </li>
  					</ul>
  					<form id="search-form" class="navbar-form navbar-right" role="search">
  						<div class="form-group">
  						<input type="text" class="form-control input-sm" placeholder="Search's Bad" id="query">
  						</div>
  					</form>
  					<div class="nav-icon">
  						<a href="/feed.xml"><i class="fa fa-rss fa-2x"></i></a>
  					</div>
          </div>
				</div>
      </div>
    </div>

    <div class="container">
			<div class="row mobilepadding">
        <div class="row">
					<div class="col-md-12">
						<div class="searchresult">
						</div>
						<div id="search-loader" class="img-wrap">
						</div>
					</div>
        </div>
				<meta itemprop="image" content="https://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com/uPic/telegram-cloud-photo-size-4-5971176114485308439-x.jpg">
<div class="row">
  <div class="col-xs-12 col-md-8">
    
    
    <h1><a class="title" href="/post/2021/08/%E5%B8%B8%E7%94%A8SQL.html">常用 SQL-拼接日期</a></h1>
    <div class="post_at_index">
      <h2 id="concat_ws">concat_ws</h2>

<ul>
  <li>concat_ws(‘-‘,year,month,day) =&gt; ‘2021-4-15’   拼接日期</li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2021-08-08</cite> <i class="icon-tag"></i>
      <a href="/tags.html#SQL">SQL</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/07/%E7%9F%A5%E4%B9%8E%E5%91%A8%E5%88%8A-%E5%8D%95%E8%BA%AB%E4%BC%9A%E4%B8%8A%E7%98%BE.html">知乎周刊・单身会上瘾</a></h1>
    <div class="post_at_index">
      <ul>
  <li>我们所有的迷茫与纠结，恰恰因为我们把目光只放在「结婚」或者「不结婚」，我们辗转反侧，因为我们期盼只一种选择便可以带自己过幸福生活。</li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2021-07-22</cite> <i class="icon-tag"></i>
      <a href="/tags.html#读书笔记">读书笔记</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/07/%E5%9C%A8%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E5%AE%89%E8%A3%85.crx%E6%8F%92%E4%BB%B6.html">在谷歌浏览器中安装.crx 插件</a></h1>
    <div class="post_at_index">
      <p>下载插件：<a href="https://www.yuque.com/attachments/yuque/0/2021/zip/343806/1626953566160-f0ac0382-2820-497b-ac94-4d45bf856ab6.zip?_lake_card=%7B%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2021%2Fzip%2F343806%2F1626953566160-f0ac0382-2820-497b-ac94-4d45bf856ab6.zip%22%2C%22name%22%3A%22immpkjjlgappgfkkfieppnmlhakdmaab_v0.9.8.74.zip%22%2C%22size%22%3A149152%2C%22type%22%3A%22application%2Fzip%22%2C%22ext%22%3A%22zip%22%2C%22status%22%3A%22done%22%2C%22taskId%22%3A%22uc49f92d7-8f44-47ac-9838-e24bd41e27c%22%2C%22taskType%22%3A%22upload%22%2C%22id%22%3A%22u573c41c9%22%2C%22card%22%3A%22file%22%7D">immpkjjlgappgfkkfieppnmlhakdmaab_v0.9.8.74.zip</a></p>

<p>首先用户点击谷歌浏览器右上角的自定义及控制按钮，在下拉框中选择工具选项，然后点击扩展程序来启动 Chrome 浏览器的扩展管理器页面。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1626952554504-3c460965-2e50-43f0-aae1-ea75eb41a0ea.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>在打开的谷歌浏览器的扩展管理器中用户可以看到一些已经安装程序的 Chrome 插件，或者一个 Chrome 插件也没有。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1626952554502-412d793c-6275-44d2-89af-b4f6f8a46f72.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>找到自己已经下载好的 Chrome 离线安装文件 xxx.crx，然后将其从资源管理器中拖动到 Chrome 的扩展管理界面中，这时候用户会发现在扩展管理器的中央部分中会多出一个”拖动以安装“的插件按钮。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1626952554380-ea8d6413-261e-4117-9b6d-809e6f2d03b3.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>松开鼠标就可以把当前正在拖动的插件安装到谷歌浏览器中去，但是谷歌考虑用户的安全隐私，在用户松开鼠标后还会给予用户一个确认安装的提示。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1626952554465-85ae5ac6-585c-40b9-80c1-dce5ccc78196.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>用户这时候只需要点击添加按钮就可以把该离线 Chrome 插件安装到谷歌浏览器中去，安装成功以后该插件会立即显示在浏览器右上角（如果有插件按钮的话），如果没有插件按钮的话，用户还可以通过 Chrome 扩展管理器找到已经安装的插件。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1626952554429-dc14b5fb-59e8-4426-85ba-c9743bfb12e6.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>用户只需要通过上面介绍的五个步骤就可以轻松地把离线谷歌浏览器插件安装到 Chrome 中去，希望这个离线 Chrome 插件的安装方法能够帮助到您或者是您的朋友。</p>

<blockquote>
  <p>出处 <a href="https://huajiakeji.com/utilities/2014-09/181.html">https://huajiakeji.com/utilities/2014-09/181.html</a></p>
</blockquote>

      
    </div>
    <br/>
    <div>
      <cite>2021-07-22</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Mac">Mac</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/06/iPhone_iPad-%E4%B8%8D%E8%B6%8A%E7%8B%B1%E5%AE%89%E8%A3%85%E6%97%A7%E7%89%88%E7%A8%8B%E5%BA%8F.html">iPhone/iPad 不越狱安装旧版程序</a></h1>
    <div class="post_at_index">
      <h2 id="前言">前言</h2>

<p>软件版本迭代是会带来新的功能和 BUG 修复，为给用户带来更好的使用体验，我也是乐于尝鲜的性格，所以在软件推出发布新版本时都会及时更新，但用户体验其实是一个玄学的话题，有时并不能给你带来更好的体验，在 iOS 上，由于苹果商店严格的管理机制导致我们在升级后，想要回退到之前版本变得十分困难。</p>

<p>虾米音乐升级到 6.0 版本之后，改变很大，作为一位老虾米非常不适应，所以就瞄准了 6.0 之前的最后一个版本：5.9.4。</p>

<p>解决办法是在 iTunes 下载程序时，使用抓包工具对与苹果应用商店服务器之间的请求进行分析，通过修改下载请求中程序版本识别序列号来下载旧版本。</p>

<h2 id="准备">准备</h2>

<p>网上较多的解决办法是使用 Fiddler+iTunes 是在 Windows 平台，因为我只有 Mac，所以用 Charles 代替 Fiddler，这里需要注意的是 iTunes 的版本，在笔者写这篇教程的前一天 iTunes 更新到 12.7，在 12.7 中有一个很大的变化移除了 App store，所以请使用低于 12.7 版本的 iTunes。</p>

<h3 id="charles-安装">Charles 安装</h3>

<p>对于 Charles 版本并没有特殊要求，我这边是通过 brew 安装，你也可以到 Charles 官网下载安装，Charles 是需要付费的软件，但是有 30 天免费使用期限，如果你有长期使用打算，建议购买正版授权。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/x4dkc.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<h3 id="charles-ssl-证书导入系统">Charles SSL 证书导入系统</h3>

<p>从 Charles 中导出证书文件</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/v815e.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>在 KeyChain Access 中导入证书</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/883p7.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>选中导入的证书，然后右键选择 ‘Get Info’ ，设置证书信任状态</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/xoalz.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<h2 id="虾米音乐的三次下载">“虾米音乐”的三次下载</h2>

<h3 id="第一次下载">第一次下载</h3>

<p>打开 Charles，开启监听，然后使用搜索虾米音乐，点击 Downloads 按钮。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/6dt52.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>点击下载后，在 Charles 会出现监听到信息，找到一条 ‘p[xx]-buy.itunes.apple.com’ ，其中 xx 是一个随机的数字，选中它，然后右键菜单栏中勾选 ‘Enable SSL Proxying’ 和 ‘Breakpoints’ 。设置完成后，在 iTunes 下载中，清理下载记录。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/ea85i.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<h3 id="第二次下载">第二次下载</h3>

<p>重新搜索虾米音乐，并点击下载按钮，这时 Charles 会弹出窗口，然后在弹出窗口的右下三个按钮中选择 ‘Execute’ ，这一步是我们请求服务器，紧接着出现的就是服务器给我们的响应，然后选择 ‘Edit Response’ - ‘XML Text’ ，然后向下滚动找到下图中的部分，这里是所有虾米音乐的版本的序列数字，但是这里没有办法直接看到版本号，越大的数字版本号越新。这里可以通过在手机 App store 中查看软件的版本记录，找到大概要回退多少个版本，然后数字从大到小找个半个序列数字记录下来，然后在下面三个按钮中选择 ‘Abort’ ，这时 iTunes 会弹出一个报错窗口，关掉即可。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/27nit.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<h3 id="第三次下载">第三次下载</h3>

<p>再次重新搜索虾米音乐，并点击下载，在这次 Charles 弹出窗口中我们需要直接修改 ‘Edit Requset’ - ‘XML Text’ ，将如下图中的 ‘appExtVrsid’ 对应的值修改为，我们上一步中记录的序列数字，然后就一直在每次弹出选择时，选择 ‘Execute’ ，直到下载完成记录。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/h7zzu.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<h2 id="验证">验证</h2>

<p>下载完成后，你的 iTunes App Library 中已经有了一个虾米音乐，连接上你的手机，将其安装到手机上即可，下图是我安装后的版本截图。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/ppy2m.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

      
    </div>
    <br/>
    <div>
      <cite>2021-06-25</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Mac">Mac</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/06/Mac-%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%BD%95%E5%88%B6GiF%E5%B0%8F%E8%A7%86%E9%A2%91.html">Mac 如何快速录制 GiF 小视频</a></h1>
    <div class="post_at_index">
      <p>在平时的沟通中经常有需要用到分享一个连续的操作等，在很多时候截图不能满足我的需求，录制视频文件的话呢，文件过大，不同平台限制过多是一个很麻烦的视频，所以录制 GIF 是一个非常好的解决办法，今天给大家推荐两款软件，关于录制 GIF 和 GIF 编辑。</p>

<h2 id="录制工具-1-kap">录制工具 (1) Kap</h2>

<p>Kap 是一款轻量级开源的 GIF 录制工具，这意味它是免费简单易用; 你可以从官网下载。官网</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/sbuwo.gif?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>安装完成，启动 Kap, 它是以一个圆环的形式显示在状态栏上，所有的界面都在这里，你可以点击红框直接开始录制，点击后你的屏幕上会出现一个虚线框，你可以通过拖动四角调整大小。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/vcaug.gif?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>确定好录制范围之后，这时你发现 Kap 上红色录制按钮一个变成一个红色实心圆，再次单击即可开始录制。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/9txw3.gif?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<p>在你操作完成之后，再次单击，即可结束录制。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/lws2b.gif?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

<h2 id="录制工具-2-macappquicktime-player">录制工具 (2) MacApp：QuickTime Player</h2>

<p>以上管理 Kap 的使用 GIF 录制我是用过 Mac 自带的 QuickTime Player 录制，教程可以直接看 @JasonZone  的教程 链接</p>

<h2 id="gif-编辑">GIF 编辑</h2>

<p>在@JasonZone  最后使用的是一个网站进行了从 mov 转换为 gif 格式的操作，这里推荐一个 Mac 应用 Video to Gif Maker, 可以批量进行多个 GIF 文件转换，也支持在 GIF 增加文字或图片，这很实用。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/5yogy.gif?x-oss-process=image/resize,w_960,m_lfit" alt="image" /></p>

      
    </div>
    <br/>
    <div>
      <cite>2021-06-12</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Mac">Mac</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/04/%E5%BF%AB%E9%80%9F%E4%BA%86%E8%A7%A3MySQL%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4%E5%8F%82%E6%95%B0.html">快速了解 MySQL 时间范围参数</a></h1>
    <div class="post_at_index">
      <h2 id="查询-30-天">查询 30 天</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 查询 30 天</span>
<span class="k">select</span> <span class="n">DATE_SUB</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">(),</span> <span class="n">INTERVAL</span> <span class="mi">30</span> <span class="k">DAY</span><span class="p">)</span> <span class="n">frm</span> <span class="k">table</span><span class="p">;</span>


<span class="err">今天</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="err">表名</span> <span class="k">where</span> <span class="n">to_days</span><span class="p">(</span><span class="err">时间字段名</span><span class="p">)</span> <span class="o">=</span> <span class="n">to_days</span><span class="p">(</span><span class="n">now</span><span class="p">());</span>

<span class="err">昨天</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="err">表名</span> <span class="k">WHERE</span> <span class="n">TO_DAYS</span><span class="p">(</span> <span class="n">NOW</span><span class="p">(</span> <span class="p">)</span> <span class="p">)</span> <span class="o">-</span> <span class="n">TO_DAYS</span><span class="p">(</span> <span class="err">时间字段名</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span>

<span class="mi">7</span><span class="err">天</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="err">表名</span> <span class="k">where</span> <span class="n">DATE_SUB</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">(),</span> <span class="n">INTERVAL</span> <span class="mi">7</span> <span class="k">DAY</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">date</span><span class="p">(</span><span class="err">时间字段名</span><span class="p">)</span>

<span class="err">近</span><span class="mi">30</span><span class="err">天</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="err">表名</span> <span class="k">where</span> <span class="n">DATE_SUB</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">(),</span> <span class="n">INTERVAL</span> <span class="mi">30</span> <span class="k">DAY</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="nb">date</span><span class="p">(</span><span class="err">时间字段名</span><span class="p">)</span>

<span class="err">本月</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="err">表名</span> <span class="k">WHERE</span> <span class="n">DATE_FORMAT</span><span class="p">(</span> <span class="err">时间字段名</span><span class="p">,</span> <span class="s1">'%Y%m'</span> <span class="p">)</span> <span class="o">=</span> <span class="n">DATE_FORMAT</span><span class="p">(</span> <span class="n">CURDATE</span><span class="p">(</span> <span class="p">)</span> <span class="p">,</span> <span class="s1">'%Y%m'</span> <span class="p">)</span>

<span class="err">上一月</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="err">表名</span> <span class="k">WHERE</span> <span class="n">PERIOD_DIFF</span><span class="p">(</span> <span class="n">date_format</span><span class="p">(</span> <span class="n">now</span><span class="p">(</span> <span class="p">)</span> <span class="p">,</span> <span class="s1">'%Y%m'</span> <span class="p">)</span> <span class="p">,</span> <span class="n">date_format</span><span class="p">(</span> <span class="err">时间字段名</span><span class="p">,</span> <span class="s1">'%Y%m'</span> <span class="p">)</span> <span class="p">)</span> <span class="o">=</span><span class="mi">1</span>

 

<span class="o">#</span><span class="err">查询本季度数据</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">`ht_invoice_information`</span> <span class="k">where</span> <span class="n">QUARTER</span><span class="p">(</span><span class="n">create_date</span><span class="p">)</span><span class="o">=</span><span class="n">QUARTER</span><span class="p">(</span><span class="n">now</span><span class="p">());</span>
<span class="o">#</span><span class="err">查询上季度数据</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">`ht_invoice_information`</span> <span class="k">where</span> <span class="n">QUARTER</span><span class="p">(</span><span class="n">create_date</span><span class="p">)</span><span class="o">=</span><span class="n">QUARTER</span><span class="p">(</span><span class="n">DATE_SUB</span><span class="p">(</span><span class="n">now</span><span class="p">(),</span><span class="n">interval</span> <span class="mi">1</span> <span class="n">QUARTER</span><span class="p">));</span>
<span class="o">#</span><span class="err">查询本年数据</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">`ht_invoice_information`</span> <span class="k">where</span> <span class="nb">YEAR</span><span class="p">(</span><span class="n">create_date</span><span class="p">)</span><span class="o">=</span><span class="nb">YEAR</span><span class="p">(</span><span class="n">NOW</span><span class="p">());</span>
<span class="o">#</span><span class="err">查询上年数据</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">`ht_invoice_information`</span> <span class="k">where</span> <span class="nb">year</span><span class="p">(</span><span class="n">create_date</span><span class="p">)</span><span class="o">=</span><span class="nb">year</span><span class="p">(</span><span class="n">date_sub</span><span class="p">(</span><span class="n">now</span><span class="p">(),</span><span class="n">interval</span> <span class="mi">1</span> <span class="nb">year</span><span class="p">));</span>

 

<span class="err">查询当前这周的数据</span> 
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span><span class="n">submittime</span> <span class="k">FROM</span> <span class="n">enterprise</span> <span class="k">WHERE</span> <span class="n">YEARWEEK</span><span class="p">(</span><span class="n">date_format</span><span class="p">(</span><span class="n">submittime</span><span class="p">,</span><span class="s1">'%Y-%m-%d'</span><span class="p">))</span> <span class="o">=</span> <span class="n">YEARWEEK</span><span class="p">(</span><span class="n">now</span><span class="p">());</span>

<span class="err">查询上周的数据</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span><span class="n">submittime</span> <span class="k">FROM</span> <span class="n">enterprise</span> <span class="k">WHERE</span> <span class="n">YEARWEEK</span><span class="p">(</span><span class="n">date_format</span><span class="p">(</span><span class="n">submittime</span><span class="p">,</span><span class="s1">'%Y-%m-%d'</span><span class="p">))</span> <span class="o">=</span> <span class="n">YEARWEEK</span><span class="p">(</span><span class="n">now</span><span class="p">())</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>

<span class="err">查询当前月份的数据</span>
<span class="k">select</span> <span class="n">name</span><span class="p">,</span><span class="n">submittime</span> <span class="k">from</span> <span class="n">enterprise</span>   <span class="k">where</span> <span class="n">date_format</span><span class="p">(</span><span class="n">submittime</span><span class="p">,</span><span class="s1">'%Y-%m'</span><span class="p">)</span><span class="o">=</span><span class="n">date_format</span><span class="p">(</span><span class="n">now</span><span class="p">(),</span><span class="s1">'%Y-%m'</span><span class="p">)</span>

<span class="err">查询距离当前现在</span><span class="mi">6</span><span class="err">个月的数据</span>
<span class="k">select</span> <span class="n">name</span><span class="p">,</span><span class="n">submittime</span> <span class="k">from</span> <span class="n">enterprise</span> <span class="k">where</span> <span class="n">submittime</span> <span class="k">between</span> <span class="n">date_sub</span><span class="p">(</span><span class="n">now</span><span class="p">(),</span><span class="n">interval</span> <span class="mi">6</span> <span class="k">month</span><span class="p">)</span> <span class="k">and</span> <span class="n">now</span><span class="p">();</span>

<span class="err">查询上个月的数据</span>
<span class="k">select</span> <span class="n">name</span><span class="p">,</span><span class="n">submittime</span> <span class="k">from</span> <span class="n">enterprise</span>   <span class="k">where</span> <span class="n">date_format</span><span class="p">(</span><span class="n">submittime</span><span class="p">,</span><span class="s1">'%Y-%m'</span><span class="p">)</span><span class="o">=</span><span class="n">date_format</span><span class="p">(</span><span class="n">DATE_SUB</span><span class="p">(</span><span class="n">curdate</span><span class="p">(),</span> <span class="n">INTERVAL</span> <span class="mi">1</span> <span class="k">MONTH</span><span class="p">),</span><span class="s1">'%Y-%m'</span><span class="p">)</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="nv">` user `</span> <span class="k">where</span> <span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">pudate</span><span class="p">,</span> <span class="s1">' %Y%m '</span> <span class="p">)</span> <span class="o">=</span> <span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">CURDATE</span><span class="p">(),</span> <span class="s1">' %Y%m '</span> <span class="p">)</span> <span class="p">;</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="k">user</span> <span class="k">where</span> <span class="n">WEEKOFYEAR</span><span class="p">(</span><span class="n">FROM_UNIXTIME</span><span class="p">(</span><span class="n">pudate</span><span class="p">,</span><span class="s1">'%y-%m-%d'</span><span class="p">))</span> <span class="o">=</span> <span class="n">WEEKOFYEAR</span><span class="p">(</span><span class="n">now</span><span class="p">())</span>

<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="k">user</span> 
<span class="k">where</span> <span class="k">MONTH</span> <span class="p">(</span><span class="n">FROM_UNIXTIME</span><span class="p">(</span><span class="n">pudate</span><span class="p">,</span> <span class="s1">' %y-%m-%d '</span> <span class="p">))</span> <span class="o">=</span> <span class="k">MONTH</span> <span class="p">(</span><span class="n">now</span><span class="p">())</span>

<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="p">[</span> <span class="k">user</span> <span class="p">]</span> 
<span class="k">where</span> <span class="nb">YEAR</span> <span class="p">(</span><span class="n">FROM_UNIXTIME</span><span class="p">(</span><span class="n">pudate</span><span class="p">,</span> <span class="s1">' %y-%m-%d '</span> <span class="p">))</span> <span class="o">=</span> <span class="nb">YEAR</span> <span class="p">(</span><span class="n">now</span><span class="p">())</span>
<span class="k">and</span> <span class="k">MONTH</span> <span class="p">(</span><span class="n">FROM_UNIXTIME</span><span class="p">(</span><span class="n">pudate</span><span class="p">,</span> <span class="s1">' %y-%m-%d '</span> <span class="p">))</span> <span class="o">=</span> <span class="k">MONTH</span> <span class="p">(</span><span class="n">now</span><span class="p">())</span>

<span class="k">select</span> <span class="o">*</span> 
<span class="k">from</span> <span class="p">[</span> <span class="k">user</span> <span class="p">]</span> 
<span class="k">where</span> <span class="n">pudate</span> <span class="k">between</span> <span class="err">上月最后一天</span>
<span class="k">and</span> <span class="err">下月第一天</span>

<span class="k">where</span>   <span class="nb">date</span><span class="p">(</span><span class="n">regdate</span><span class="p">)</span>   <span class="o">=</span>   <span class="n">curdate</span><span class="p">();</span>

<span class="k">select</span>   <span class="o">*</span>   <span class="k">from</span>   <span class="n">test</span>   <span class="k">where</span>   <span class="nb">year</span><span class="p">(</span><span class="n">regdate</span><span class="p">)</span><span class="o">=</span><span class="nb">year</span><span class="p">(</span><span class="n">now</span><span class="p">())</span>   <span class="k">and</span>   <span class="k">month</span><span class="p">(</span><span class="n">regdate</span><span class="p">)</span><span class="o">=</span><span class="k">month</span><span class="p">(</span><span class="n">now</span><span class="p">())</span>   <span class="k">and</span>   <span class="k">day</span><span class="p">(</span><span class="n">regdate</span><span class="p">)</span><span class="o">=</span><span class="k">day</span><span class="p">(</span><span class="n">now</span><span class="p">())</span>

<span class="k">SELECT</span> <span class="nb">date</span><span class="p">(</span> <span class="n">c_instime</span> <span class="p">)</span> <span class="p">,</span><span class="n">curdate</span><span class="p">(</span> <span class="p">)</span>
<span class="k">FROM</span> <span class="nv">`t_score`</span>
<span class="k">WHERE</span> <span class="mi">1</span>
<span class="k">LIMIT</span> <span class="mi">0</span> <span class="p">,</span> <span class="mi">30</span>
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2021-04-18</cite> <i class="icon-tag"></i>
      <a href="/tags.html#SQL">SQL</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/04/HQL_SQL%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86.html">HQL/SQL时间处理</a></h1>
    <div class="post_at_index">
      <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--HQL ms</span>
<span class="n">from_unixtime</span><span class="p">(</span><span class="k">CAST</span><span class="p">(</span><span class="n">obtained_ms</span><span class="o">/</span><span class="mi">1000</span> <span class="k">AS</span> <span class="nb">BIGINT</span><span class="p">),</span> <span class="s1">'yyyy-MM-dd HH:mm:ss'</span><span class="p">)</span>

<span class="c1">--SQL ms</span>
<span class="n">from_unixtime</span><span class="p">(</span><span class="n">time_in_ms</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>

<span class="c1">--SQL date</span>
<span class="nb">date</span><span class="p">(</span><span class="n">from_unixtime</span><span class="p">(</span><span class="n">time_in_ms</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span> <span class="k">as</span> <span class="n">dt</span>
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2021-04-16</cite> <i class="icon-tag"></i>
      <a href="/tags.html#SQL">SQL</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/03/%E7%9F%A5%E4%B9%8E%E5%91%A8%E5%88%8A-%E4%B9%94%E5%B8%83%E6%96%AF%E5%BE%80%E4%BA%8B.html">知乎周刊·乔布斯往事</a></h1>
    <div class="post_at_index">
      <p><a href="https://www.amazon.cn/s/ref=as_li_ss_tl?_encoding=UTF8\&amp;camp=536\&amp;creative=3132\&amp;field-keywords=%E7%9F%A5%E4%B9%8E%E5%91%A8%E5%88%8A%C2%B7%E4%B9%94%E5%B8%83%E6%96%AF%E5%BE%80%E4%BA%8B\&amp;linkCode=ur2\&amp;tag=llll1-23\&amp;url=search-alias%3Dbooks">知乎</a>
4 highlights</p>

<ul>
  <li>
    <p>那些凡是搞不清楚自己所享受的器物的来历、奥妙、作用、差异、价值、韵味等等，但偏偏就是享受得起，并且还要拼命享受＋拼命炫耀的行为，都是土鳖。</p>
  </li>
  <li>
    <p>格言：故事本身并不重要，怎么讲才更重要。所以有两株枣树这个事实并不重要，怎么来告诉读者有两株枣树比较重要。</p>
  </li>
  <li>
    <p>唯真名士自风流，</p>
  </li>
  <li>
    <p>在众人的眼中，悲伤只有得到外化的表现才是真实的，合理的；没有人去思考这样的悲伤是否为伪造的结果。人们关心的不是他到底悲不悲伤，而是有没有呈现出悲伤的状态来。</p>
  </li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2021-03-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#读书笔记">读书笔记</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/03/how-to-set-container-auto-restarting-with-docker.html">how to set container auto-restarting with docker</a></h1>
    <div class="post_at_index">
      <h2 id="auto-restarting-with-docker">auto-restarting with docker</h2>

<p>docker run –restart=always my-container</p>

<h2 id="disable-auto-restarting-with-docker">disable auto-restarting with docker</h2>

<p>docker update –restart=no my-container</p>

      
    </div>
    <br/>
    <div>
      <cite>2021-03-12</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Docker">Docker</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2021/03/%E7%88%B1%E4%BD%A0%E5%B0%B1%E5%83%8F%E7%88%B1%E7%94%9F%E5%91%BD.html">爱你就像爱生命</a></h1>
    <div class="post_at_index">
      <ul>
  <li>我的灵魂里有很多地方玩世不恭，对人傲慢无礼，但是它有一个核心，这个核心害怕黑暗，柔弱得像绵羊一样。只有顶平等的友爱才能使它得到安慰。你对我是属于这个核心的。</li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2021-03-10</cite> <i class="icon-tag"></i>
      <a href="/tags.html#读书笔记">读书笔记</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    

    <!-- Pagination links -->
    <nav>
      <ul class="pagination hidden-xs">
        
        
        <li>
          <a href="/page8">&laquo; Previous</a>
        </li>
        
        

        
        <li>
          <a href="/">1</a>
        </li>
        

        
          
            
            <li>
              <a href="/page2">2</a>
            </li>
            
            <li>
              <a href="/page3">3</a>
            </li>
            
            <li>
              <a href="/page4">4</a>
            </li>
            
            <li>
              <a href="/page5">5</a>
            </li>
            
            <li class="disabled"><span>...</span></li>
            <li class="active"><a>9</a></li>
          
          <li class="disabled"><span>...</span></li>
          <li><a href="/page25">25</a></li>
        

        
        

        
        <li>
          <a href="/page10">Next &raquo;</a>
        </li>
        
      </ul>
    </nav>
  </div>
  <div class="col-xs-12 col-md-4">
		<!-- <div>
			<a class="twitter-timeline" data-width="390" data-height="640" data-theme="light" href="https://twitter.com/samzong_lu?ref_src=twsrc%5Etfw">Tweets by SAMZONG</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		</div> -->
    <div>
      <h2>传送门</h2>
      <ul>
        <li><a href="https://yuque.com/samzong">语雀-花园</a></li>
        <li><a href="https://github.com/samzong">Github</a></li>
      </ul>
    </div>
    <div class="categories">
      <h2>文章分类</h2>
      <ul class="tag_box">
        
        


  
     
    	
      <li><a href="/categories.html#故事汇">
    		故事汇 <span>23</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Linux">
    		Linux <span>22</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#前端">
    		前端 <span>5</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#数据库">
    		数据库 <span>30</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Git">
    		Git <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Mac">
    		Mac <span>18</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Tools">
    		Tools <span>7</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#OpenSource">
    		OpenSource <span>11</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Python">
    		Python <span>45</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#云平台">
    		云平台 <span>8</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#虚拟化">
    		虚拟化 <span>3</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Java">
    		Java <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Docker">
    		Docker <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Blog">
    		Blog <span>7</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#安全">
    		安全 <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#读书笔记">
    		读书笔记 <span>16</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#微服务">
    		微服务 <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Kubernetes">
    		Kubernetes <span>15</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#DaoCloud Enterprise">
    		DaoCloud Enterprise <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#春松客服">
    		春松客服 <span>1</span>
    	</a></li>
    
  



      </ul>
    </div>
    <div>
      <h2>最近文章</h2>
      <ul>
        
        <li>
          <a href="/post/2022/12/raycast-01.html">Raycast 你的年度报告已到达</a>
          从 Alfred 切换到 Raycast 也就 2 个多月的时间；使用体验有着比较大的提升。


        </li>
        
        <li>
          <a href="/post/2022/12/Skoala-Install-Dce5.html">DCE5-Skoala 安装教程</a>
          使用之前的话


        </li>
        
        <li>
          <a href="/post/2022/12/dce50.html">保姆式安装 DCE5.0</a>
          前言


        </li>
        
        <li>
          <a href="/post/2022/11/cskefu-opensource-project.html">开源项目 - 春松客服</a>
          项目起源


        </li>
        
        <li>
          <a href="/post/2022/11/what-is-hukou.html">What is Hukou</a>
          背景


        </li>
        
      </ul>
    </div>
  </div>
</div>

			</div>

		</div>

    <footer>
      <div class="container">
        <div class="row mobilepadding">
          			<hr>
      &copy; 2023 船长. Powered by <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Theme Creator <a href="https://github.com/einverne" target="_blank" title="Ein Verne's GitHub Repos">Ein Verne</a> . Host on <a href="https://github.com/samzong/samzong.me" target="_blank" title="Samzong's GitHub Repos">Github</a> .
      <br><br>
      </div>
    </div>
    </footer>

    




	<script async type="text/javascript" src="/assets/themes/evjekylltheme/bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script async type="text/javascript" src="/assets/themes/evjekylltheme/webcore.js"></script>

 </body>
</html>

