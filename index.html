
<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Blog">
  <head>
    <meta charset="utf-8">
	<link rel="manifest" href="/static/pwa/manifest.json">
	<title> Home | 船长的课记 </title>
    
		
    <meta name="author" content="船长">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#2196F3">
	<meta name="google-site-verification" content="puZt0ZyqB-t67BYdYAgLUyIPBeismG68J0dmEc01QeY" />

	
    <script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function () {
				navigator.serviceWorker
										.register('/sw.js')
										.then(function(registration) {
											console.log("Successfully registered service worker", registration.scope);
										}).catch(function(err) {
											console.log("Service worker registration failed: ", err);
										});
				//navigator.serviceWorker.ready always resolve
				navigator.serviceWorker.ready.then(function (registration) {
					console.log('Service worker successfully registered on scope', registration.scope);
				});
			});
		}
    </script>
	<script type="text/javascript" src="/assets/themes/evjekylltheme/jquery-3.6.0.slim.min.js"></script>

	<link href="/assets/themes/evjekylltheme/google-code-prettify/desert.css" type="text/css" rel="stylesheet" />

    <!-- Le styles -->
    <link href="/assets/themes/evjekylltheme/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/evjekylltheme/css/style.css" rel="stylesheet" type="text/css" media="all">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/images/favicon.ico">

    <!-- atom & rss feed -->
    <link href="" type="application/atom+xml" rel="alternate" title="Jekyll auto generate ATOM Feed">
    <link href="" type="application/atom+xml" rel="alternate" title="Site ATOM Feed">
    <link href="" type="application/rss+xml" rel="alternate" title="Site RSS Feed">
	<link rel="stylesheet" href="/assets/themes/evjekylltheme/font-awesome-4.4.0/css/font-awesome.min.css">
	<!-- <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-W2LDG64');</script> -->
		<!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8529425670069509"
						crossorigin="anonymous"></script> -->
	<!-- <script async src="https://cdn.splitbee.io/sb.js"></script> -->
  </head>

  <body>
	<!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2LDG64"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> -->
    <div class="navbar navbar-default navbar-fixed-top">
				<div class="container">
          <div class="row mobilepadding">
					<!-- <a class="navbar-brand" href="/">船长的课记</a> -->
					<a class="navbar-brand" href="/">SAMZONG</a>
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse" id="mNavbar">
  					<ul class="nav navbar-nav">
  						
  						
  						


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/friends.html">Friends</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  
    
  
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  



						  <li class="dropdown">
							  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Other</a>
							  <ul class="dropdown-menu">
									<li><a href="/about.html">About</a></li>
									<li><a href="https://yuque.com/samzong/note" target="_blank">船长的课记</a></li>
									<li><a href="https://yuque.com/samzong/ap" target="_blank">果粉日记</a></li>
									<li><a href="https://yuque.com/samzong/code" target="_blank">Code Snippet</a></li>
									<li><a href="https://www.yuque.com/samzong/mcx" target="_blank">集</a></li>
									<li><a href="https://www.yuque.com/zooka" target="_blank">藏金阁</a></li>
								</ul>
						  </li>
  					</ul>
  					<form id="search-form" class="navbar-form navbar-right" role="search">
  						<div class="form-group">
  						<input type="text" class="form-control input-sm" placeholder="Search's Bad" id="query">
  						</div>
  					</form>
  					<div class="nav-icon">
  						<a href="/feed.xml"><i class="fa fa-rss fa-2x"></i></a>
  					</div>
          </div>
				</div>
      </div>
    </div>

    <div class="container">
			<div class="row mobilepadding">
        <div class="row">
					<div class="col-md-12">
						<div class="searchresult">
						</div>
						<div id="search-loader" class="img-wrap">
						</div>
					</div>
        </div>
				<meta itemprop="image" content="https://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com/uPic/telegram-cloud-photo-size-4-5971176114485308439-x.jpg">
<div class="row">
  <div class="col-xs-12 col-md-8">
    
    
    <h1><a class="title" href="/post/2022/11/Copy-To-Markdwon.html">Copy To Markdwon</a></h1>
    <div class="post_at_index">
      

      
    </div>
    <br/>
    <div>
      <cite>2022-11-20</cite> <i class="icon-tag"></i>
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/11/Dubbo-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html">Dubbo 基础知识梳理</a></h1>
    <div class="post_at_index">
      <blockquote>
  <p>参考资料：</p>
</blockquote>

<ul>
  <li><a href="https://juejin.cn/post/7128953614403371015#heading-5">https://juejin.cn/post/7128953614403371015#heading-5</a></li>
  <li><a href="https://dubbo.apache.org/zh/docs/">https://dubbo.apache.org/zh/docs/</a></li>
</ul>

<h2 id="简介">简介</h2>

<ul>
  <li>Apache Dubbo 一款基于 RPC 服务开发的云原生微服务框架，与 SpringCloud 类似</li>
  <li>使用 Dubbo 开发的微服务原生具备相互之间远程地址发现 (注册中心) 和通信的能力</li>
  <li>Dubbo 支持丰富的服务治理特性，包含 服务发现、负载均衡、流量调度 等，高度可扩展</li>
  <li>Dubbo 由 阿里巴巴 开发，并贡献给 Apache</li>
</ul>

<h2 id="发展历程">发展历程</h2>

<h3 id="版本迭代">版本迭代</h3>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/20221117023215.png?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" /></p>

<h3 id="软件生态的活跃度">软件生态的活跃度</h3>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/8G8hZG.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" /></p>

<h2 id="与-springcloud-相比的优势">与 SpringCloud 相比的优势</h2>

<ul>
  <li>功能丰富，基于原生库即可完成大部分的微服务治理能力</li>
  <li>支持超大规模的微服务机器设计，高性能 RPC 通信协议实现</li>
  <li>高度可扩展性，支持在调用过程中对流量及协议进行拦截扩展，如 Filter、Router、LB 等</li>
  <li>支持微服务治理的扩展组件
    <ul>
      <li>Registry 注册中心：Zookeeper、Nacos</li>
      <li>Config Center 配置中心：Zookeeper、Nacos</li>
      <li>Metadata Center 元数据中心 (Dubbo3 支持)</li>
    </ul>
  </li>
</ul>

<h2 id="dubbo-的基础概念介绍">Dubbo 的基础概念介绍</h2>

<ul>
  <li>RPC 通信</li>
  <li>服务发现</li>
  <li>流量治理</li>
</ul>

<h3 id="rpc-通信">RPC 通信</h3>

<ul>
  <li>Dubbo3 之中，RPC 通信主要使用 Triple 协议，构建在 HTTP/2 协议之上，兼容 gRPC</li>
  <li>提供 Request Response、Request Streaming、Response Streaming、Bi-directional Streaming 通信模型</li>
  <li>支持 IDL，基于 Triple 协议</li>
</ul>

<h3 id="服务发现">服务发现</h3>

<p>服务发现，是消费端自动发现服务地址列表的能力，是微服务框架需要具备的关键能力，借助于自动化的服务发现，微服务之间在无需感知对端部署位置与 IP 地址的情况下实现通信。</p>

<p>Dubbo 提供的 Client-Based 服务发现机制，同时也需要第三方注册中心来协调服务发现过程，比如 Nacos/Zookeeper 等。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/oaqyGX.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" /></p>

<h3 id="流量治理">流量治理</h3>

<ul>
  <li>Dubbo2 开始，Dubbo 就提供了丰富的服务治理规则，包括路由规则/动态配置等</li>
  <li>Dubbo3 之中的实现
    <ul>
      <li>Dubbo Mesh : 通过对接 xDS 对接到时下流行的 Mesh 产品如 Istio 中所使用的以 VirtualService、DestinationRule 为代表的治理规则</li>
      <li>另一方面 Dubbo 正寻求设计一套自有规则以实现在不通部署场景下的流量治理，以及灵活的治理能力。</li>
    </ul>
  </li>
</ul>

<h2 id="dubbo-mesh">Dubbo Mesh</h2>

<p>Dubbo Mesh 的目标是提供适应 Dubbo 体系的完整 Mesh 解决方案，包含定制化控制面（Control Plane）、定制化数据面解决方案。Dubbo 控制面基于业界主流 Istio 扩展，支持更丰富的流量治理规则、Dubbo 应用级服务发现模型等，Dubbo 数据面可以采用 Envoy Sidecar，即实现 Dubbo SDK + Envoy 的部署方案，也可以采用 Dubbo Proxyless 模式，直接实现 Dubbo 与控制面的通信。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/vMniiR.jpg?x-oss-process=image/resize,w_960,m_lfit" alt="resize,w_960,m_lfit" /></p>

<h2 id="dubbo3">Dubbo3</h2>

<p>Dubbo 3.0 提供的新特性包括：</p>

<ul>
  <li><strong>新的地址发现模型（应用级服务发现）</strong>
    <ul>
      <li>查看<a href="https://dubbo.apache.org/zh/docs/migration/migration-service-discovery">应用级服务发现的迁移步骤</a></li>
      <li>查看应用级服务发现的使用方式</li>
      <li>查看应用级服务发现设计与实现</li>
    </ul>
  </li>
  <li><strong>下一代基于 HTTP/2 的 Triple 协议</strong>
    <ul>
      <li>查看<a href="https://dubbo.apache.org/zh/docs/migration/migration-triple">Triple 协议迁移步骤</a></li>
      <li>查看 <a href="https://dubbo.apache.org/zh/docs/references/protocols/tri">Triple 协议使用方式</a></li>
      <li>查看 Triple 协议设计与实现</li>
    </ul>
  </li>
  <li><strong>统一的路由规则。</strong>
    <ul>
      <li>查看<a href="https://dubbo.apache.org/zh/docs/migration/migration-routingrule/">统一路由规则的迁移步骤</a></li>
      <li>查看<a href="https://dubbo.apache.org/zh/docs/references/routers/">统一路由规则使用方式</a></li>
      <li>查看统一路由规则设计与实现</li>
    </ul>
  </li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2022-11-16</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Dubbo">Dubbo</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/11/Panads-fill-NaN-value-to-Zero.html">Panads fill NaN value to Zero</a></h1>
    <div class="post_at_index">
      <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="p">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'somefile.txt'</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2022-11-10</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Pandas">Pandas</a>
      , 
      <a href="/tags.html#Python">Python</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/10/Redash-for-Docker-%E9%83%A8%E7%BD%B2.html">Redash for Docker 部署</a></h1>
    <div class="post_at_index">
      <blockquote>
  <p>暗坑很多</p>
</blockquote>

<h2 id="部署过程">部署过程</h2>

<ol>
  <li>需要自行维护一个 env 作为配置文件</li>
</ol>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>REDASH_COOKIE_SECRET=a07cca441ab9f28b66c589f3118e0de48469b1bc6a5036eade7badbed305d96e
POSTGRES_HOST_AUTH_METHOD=trust
REDASH_REDIS_URL=redis://redis:6379/0
REDASH_DATABASE_URL=postgresql://postgres
</code></pre></div></div>

<ul>
  <li>
    <p>需要创建一个 postgres-data 并配置 docker-compose.yml 的路径，数据库持久化</p>
  </li>
  <li>需要给 postgres 容器增加 sudo 命令
    <ul>
      <li>apk add sudo</li>
    </ul>
  </li>
  <li>需要手工进入到 postgresql 容器内创建 role 和 database
    <ul>
      <li>createuser -U postgres redash</li>
      <li>createdb -U postgres redash</li>
    </ul>
  </li>
  <li>执行数据库初始化动作</li>
  <li>docker-compose run –rm server create_db</li>
  <li>然后重启 redash 全部服务即可 docker-compose down 后重启</li>
</ul>

<blockquote>
  <p>postgresql 在执行 psql 命令时，默认会读取当前系统用户作为执行 role；但 psql 默认用户是 postgres</p>
</blockquote>

<p><a href="https://redash.io/help/open-source/setup">https://redash.io/help/open-source/setup</a>
<a href="https://redash.io/help/open-source/dev-guide/docker">https://redash.io/help/open-source/dev-guide/docker</a>
<a href="https://docs.victoriametrics.com/url-examples.html#apiv1exportcsv">https://docs.victoriametrics.com/url-examples.html#apiv1exportcsv</a></p>

<p><a href="https://mp.weixin.qq.com/s?src=11\&amp;timestamp=1660629444\&amp;ver=3985\&amp;signature=verv70veamW*Ez2Sgc8e89yMJGwANIOzz4lfwbezyVV3wpWNT2d9SnGrDecUOwrbTJBR2o-Ax6ZS4Fpu2UxfX7Sy9xsk1LCXfY1wNr42ucl3tFePfJ7c536c8z*L-HOy\&amp;new=1">https://mp.weixin.qq.com/s?src=11\&amp;timestamp=1660629444\&amp;ver=3985\&amp;signature=verv70veamW<em>Ez2Sgc8e89yMJGwANIOzz4lfwbezyVV3wpWNT2d9SnGrDecUOwrbTJBR2o-Ax6ZS4Fpu2UxfX7Sy9xsk1LCXfY1wNr42ucl3tFePfJ7c536c8z</em>L-HOy\&amp;new=1</a></p>

<p><a href="https://mp.weixin.qq.com/s?src=11&amp;timestamp=1660682601&amp;ver=3986&amp;signature=h8m0RzEX3qWsKcUo6Ee3azdsnzLQqUf3N8FdLhyWNa52U4vAvlbEaBFUCrTZnh54tT-YS2mODfkp-6Hemmzt3n*hzGHlEmXP-HO5830W0Fzmn4MMfnsOPBKLrcjaiU0h&amp;new=1">https://mp.weixin.qq.com/s?src=11&amp;timestamp=1660682601&amp;ver=3986&amp;signature=h8m0RzEX3qWsKcUo6Ee3azdsnzLQqUf3N8FdLhyWNa52U4vAvlbEaBFUCrTZnh54tT-YS2mODfkp-6Hemmzt3n*hzGHlEmXP-HO5830W0Fzmn4MMfnsOPBKLrcjaiU0h&amp;new=1</a></p>

<ul>
  <li>redash env 配置：<a href="https://redash.io/help/open-source/admin-guide/env-vars-settings">https://redash.io/help/open-source/admin-guide/env-vars-settings</a></li>
  <li>postgres 权限问题 <a href="https://stackoverflow.com/a/25051632/5067657">https://stackoverflow.com/a/25051632/5067657</a></li>
  <li><a href="https://techoverflow.net/2021/05/07/how-to-fix-alpine-linux-ash-sudo-not-found/">https://techoverflow.net/2021/05/07/how-to-fix-alpine-linux-ash-sudo-not-found/</a></li>
  <li><a href="https://discuss.redash.io/t/error-99-connecting-to-localhost-6379-cannot-assign-requested-address/9716/7">https://discuss.redash.io/t/error-99-connecting-to-localhost-6379-cannot-assign-requested-address/9716/7</a></li>
</ul>

<h2 id="启动的服务介绍">启动的服务介绍</h2>

<ul>
  <li>v10-redashio_adhoc_worker_1     # 执行查询任务的 worker</li>
  <li>v10-redashio_postgres_1       # 数据库</li>
  <li>v10-redashio_redis_1        # 缓存</li>
  <li>v10-redashio_scheduled_worker_1   # 执行计划任务的 worker</li>
  <li>v10-redashio_scheduler_1      # 计划任务管理 server</li>
  <li>v10-redashio_server_1        # 主体 server</li>
</ul>

<p>以上主要会设计到 3 个镜像，redis、pgsql、redash，其中核心是 redash，所以关注镜像版本也是这个</p>

<h2 id="版本升级">版本升级</h2>

<p>redash 的版本升级较为方便，更换 server 的镜像；然后升级数据库即可。</p>

<blockquote>
  <p>测试过从 v8 升级到 v10 , 和 v9 升级到 v10，都是 ok 的。</p>
</blockquote>

<ol>
  <li>关闭 Redash 服务
    <ol>
      <li><code class="language-plaintext highlighter-rouge">docker-compose stop server scheduler scheduled_worker adhoc_worker</code></li>
    </ol>
  </li>
  <li>更新 docker-compose.yml
    <ol>
      <li>基本上这一步，只需要更新 redash 的镜像版本即可</li>
      <li>然后执行 <code class="language-plaintext highlighter-rouge">docker-compose pull</code> 拉取新镜像版本</li>
    </ol>
  </li>
  <li>执行数据库升级
    <ol>
      <li><code class="language-plaintext highlighter-rouge">docker-compose run --rm server manage db upgrade</code></li>
    </ol>
  </li>
  <li>启动全部服务即可
    <ol>
      <li><code class="language-plaintext highlighter-rouge">docker-compse up -d</code></li>
    </ol>
  </li>
</ol>

<h2 id="解决-es-的-https-问题">解决 ES 的 HTTPS 问题</h2>

<p>由于我们的 es 地址访问地址采用 https，但为自签证书，所以在 request 之中会有些问题，所以我在这里更新了 elasticsearch 的插件，然后将其上传到我个人的 docker hub.
<a href="https://hub.docker.com/r/samzong/redash">https://hub.docker.com/r/samzong/redash</a></p>

<blockquote>
  <p>带来的问题，页面上无法选择到 Elasticsearch 作为数据源，没时间去研究了</p>
</blockquote>

<p>看了下还是可以使用 redash 的 API 去创建的 <code class="language-plaintext highlighter-rouge">/api/data_sources</code>:</p>

<h2 id="配置">配置</h2>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"basic_auth_password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"basic_auth_user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"elastic"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"server"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://10.6.51.101:31001/"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"skip_tls_verification"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"elasticsearch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test-es"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>创建完成后，就可以在页面上更新了。</p>

      
    </div>
    <br/>
    <div>
      <cite>2022-10-22</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Redash">Redash</a>
      , 
      <a href="/tags.html#BI">BI</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/10/JWT-%E5%86%85%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F.html">JWT 内置的方式</a></h1>
    <div class="post_at_index">
      <ul>
  <li>支持为 API 启用 jwt token 解码的能力 ,  读取网关的 jwt key
    <ul>
      <li>读取请求 Header 中的 Authorization</li>
    </ul>
  </li>
  <li>需要支持为网关配置多 jwt key , and 加密长度 ?
    <ul>
      <li>解密的性能问题</li>
      <li>expire_time 过期时间的配置</li>
      <li>解密后的参数传递</li>
    </ul>
  </li>
</ul>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1666060887030-ff0a6f09-9bf0-44d5-a92b-dc36fc9b7d47.png?x-oss-process=image/resize,w_960,m_lfit" alt="image.png" /></p>

<h3 id="迭代的方向">迭代的方向</h3>

<ol>
  <li>采用外置的Jwt server 认证服务
    <ol>
      <li>配置 jwt server url</li>
      <li>respone 解密后的  json 内容； 进行参数传递</li>
    </ol>
  </li>
  <li>采用托管的 Jwt server 来进行托管
    <ol>
      <li>配置 jwt key (支持自动生成)</li>
      <li>expire_time</li>
      <li>加密长度</li>
      <li>自动配置参数传递
        <ol>
          <li>全部传递</li>
          <li>全部传递(not token)</li>
          <li>白名单传递</li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

      
    </div>
    <br/>
    <div>
      <cite>2022-10-18</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Contour">Contour</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/10/%E5%94%A7%E5%94%A7%E5%A4%8D%E5%94%A7%E5%94%A7.html">唧唧复唧唧</a></h1>
    <div class="post_at_index">
      <p><a href="https://www.amazon.cn/gp/product/B01951CHO6/ref=as_li_qf_sp_asin_tl?ie=UTF8\&amp;camp=536\&amp;creative=3200\&amp;creativeASIN=B01951CHO6\&amp;linkCode=as2\&amp;tag=llll1-23">王路</a>
12 highlights</p>

<ul>
  <li>
    <p>同样一潭池水，天人视之为清波，饿鬼视之为阳焰。所有的看法，无非是一个人的世界观投在故事上的倒影，它</p>
  </li>
  <li>
    <p>就常有这样的经验。比如碰见好久不见的老友，事前特别期待，想到有很多话可以聊，等坐到桌上，却发现只剩下老生常谈。这怪不得谁，每个人的生活都不一样，各自感兴趣的事儿都不同。不像以往，大家都在同一个班里，每天的生活都是类似的，所思所想也都差不了太远。</p>
  </li>
  <li>
    <p>要想在一个圈子里得到认同，需要遵照这个圈子的价值标准和话语体系。</p>
  </li>
  <li>
    <p>很久之后，我才慢慢明白自己当初的做法多么愚蠢。想要一个人改变习惯，很难。而尤其不应该的是，总把自己以为便利的东西强加给别人。年龄和岁月足以让一个人的学习能力慢慢退化，并最终丧失对新事物的好奇。从头掌握最基本的技能，对不年轻的人来说，成本太高昂。他们需要为养家糊口奔波，为时不多的暇余，并不足以支撑他们疲惫的身心去探究世界的种种新奇。于是，他们就远远被时代抛下了。</p>
  </li>
  <li>
    <p>圣诞老人的意思就是：在你爱的人不知道的时候，把礼物放到他的身边。因为收到礼物的人不知道，所以这个夜晚是寂静的。</p>
  </li>
  <li>
    <p>许多东西，只在此时、此地、此景有。没办法绸缪，也没办法复盘。可贵的事物之所以可贵，正在其转瞬即逝，不可复得。在一刹那灭去，并成为永恒。</p>
  </li>
  <li>
    <p>屏蔽掉一个人，看不到他的样子，听不到他的声音，却抑制不了不去想他。世间的痛苦和烦恼，不在于不能得到，而在于不能割舍。不在于不想屏蔽的东西被屏蔽，而在于想屏蔽的东西无法屏蔽</p>
  </li>
  <li>
    <p>对于贪著心，真正可怕的不是一件事情上的得失，而是串习的力量对一个人行为举止的巨大影响。这种影响是潜在的，却是深刻而难以磨灭的。</p>
  </li>
  <li>
    <p>三涂之苦</p>
  </li>
  <li>
    <p>编程谓之 Class，《</p>
  </li>
  <li>
    <p>钱穆先生曾在《宋明理学概述》序言里说：““虽居乡僻，未尝敢一日废学。虽经乱离困厄，未尝敢一日颓其志。虽或名利当前，未尝敢动其心。虽或毁誉横生，未尝敢馁其气。虽学不足以自成立，未尝或忘先儒之榘矱，时切其向慕。虽垂老无以自靖献，未尝不于国家民族世道人心，自任以匹夫之有其责。””</p>
  </li>
  <li>
    <p>佛家说烦恼即是般若，那些让你斩不断的愁丝才是真正度你到彼岸的船筏。</p>
  </li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2022-10-06</cite> <i class="icon-tag"></i>
      <a href="/tags.html#读书笔记">读书笔记</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/10/%E8%87%AA%E5%8D%91%E4%B8%8E%E8%B6%85%E8%B6%8A.html">自卑与超越</a></h1>
    <div class="post_at_index">
      <p><a href="https://www.amazon.cn/gp/product/B013GD8VEY/ref=as_li_qf_sp_asin_tl?ie=UTF8\&amp;camp=536\&amp;creative=3200\&amp;creativeASIN=B013GD8VEY\&amp;linkCode=as2\&amp;tag=llll1-23">【奥】阿尔弗雷德··阿德勒</a></p>

<p>前言 阿德勒：超越自卑，找到生命的真正意义 阿德勒是个体心理学的先驱和代表。个体心理学与其他心理学流派相比，最突出显要的一点在于，它对人的研究是以个体为始，即首先关注个体本身的成长发展和人生历程。有趣的是，如果你对阿德勒本人的人生经历及其学说有所了解的话，你会发现其人的发展轨迹恰好印证了他所秉持的观点和理论。阿德勒认为，每个人都有不同程度的自卑感，而优越感则是自卑感的补偿。但自卑感的存在并不是一件坏事，因为它激励了人不断追求卓越，克服自身的障碍，在有限的生命空间内发挥出最大的价值。可以说，正是由于人类会有自卑感，才会有不断取得发展和进步的不竭动力。与此相印证的是，阿德勒本人就是一个““先天发展不足””、一开始就存在着极为强烈自卑感的人。阿德勒是一个直到 4 岁才会走路的体弱多病的儿童。他患有佝偻病，无法进行激烈的体育活动。但他并没有让身体上的缺陷压倒自己，相反，这刺激了他的上进心。</p>

      
    </div>
    <br/>
    <div>
      <cite>2022-10-04</cite> <i class="icon-tag"></i>
      <a href="/tags.html#读书笔记">读书笔记</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/09/GitLab-Forked-%E5%A6%82%E4%BD%95%E8%B7%9F%E9%9A%8Fupstream%E4%B8%BB%E5%BA%93.html">GitLab Forked 如何跟随 upstream 主库</a></h1>
    <div class="post_at_index">
      <p>:::info
通过 PR 的方式共同对主仓库进行贡献的方式，是开源项目协作的非常有效的方法；通常我们不会直接对主仓库直接提交代码。
:::</p>

<p>一般情况下，我们的操作是，在需要贡献时，Fork 一份项目，然后自己修改以 PR 的方式提交贡献请求。</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664330743895-9b2e0dc6-527e-4bcd-8b63-c223aa634b8f.png?x-oss-process=image/resize,w_960,m_lfit" alt="image.png" title="一份完整的 Github贡献指南" /></p>

<h2 id="github-的实现方式">Github 的实现方式</h2>

<p>熟悉 Github 的同学会发现，在 Github 上最近更新了 <code class="language-plaintext highlighter-rouge">Sync fork</code>的功能，通过简单的点击操作，即可完成对源库 (upstream) 的更新同步。
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664330528512-563a5536-1734-4fd0-b41c-9c5d121327e0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-09-28 at 10.01.33.jpg" title="当 upstream 超前时，提示 update branch" />
通过以上方式，我们可以方便在跟随主库的更新</p>

<blockquote>
  <p>Tips Github 的方式，仅在 Web 端 和 Github CLI 官方提供的 GH 才可以使用这样的功能</p>
</blockquote>

<h2 id="no-github-when-gitlab-">No Github, When Gitlab ?</h2>

<p>Github 更多在开源项目时贡献，实际上，在我们日常的工作当中，更多会有自建的 Gitlab 或者其他的代码 Hub，这里以 Gitlab 为例</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1664331575915-853554f5-c047-4f14-8e79-67e2214429bc.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-09-28 at 10.19.20.jpg" title="gitlab 默认项目首页" />
Gitlab 并未提供 Sync fork 的功能，所以我们需要自行解决同步的需求</p>

<h2 id="为仓库添加-upstream-源仓库">为仓库添加 upstream 源仓库</h2>

<p>:::success
以下方式会在终端或本地使用<code class="language-plaintext highlighter-rouge">Sourcetree</code>更加自由，仅使用 Git 的方式协作，自由度很大
:::
基于这个方式我们可以实现，有关联的 主库到从库的同步；也可以完成跨 Hub 的同步，比如：</p>

<ul>
  <li>Github -&gt;  Gitlab</li>
  <li>Github -&gt; Github</li>
  <li>Gitlab  -&gt; Gitlab</li>
  <li>Gitlab  -&gt;  Github</li>
  <li>Gitee  -&gt;  Gitlab</li>
  <li>Gitee -&gt; Github</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>samzonglu at samzongs-MacBook-Pro <span class="k">in</span> ~/Git/daocloud/DaoCloud-docs<span class="o">(</span>main✔<span class="o">)</span>
± git remote add upstream https://github.com/DaoCloud/DaoCloud-docs.git
Alias tip: gra upstream https://github.com/DaoCloud/DaoCloud-docs.git

samzonglu at samzongs-MacBook-Pro <span class="k">in</span> ~/Git/daocloud/DaoCloud-docs<span class="o">(</span>main✔<span class="o">)</span>
± git remote
Alias tip: gr
origin
upstream

samzonglu at samzongs-MacBook-Pro <span class="k">in</span> ~/Git/daocloud/DaoCloud-docs<span class="o">(</span>main✔<span class="o">)</span>
± git fetch upstream
Alias tip: gf upstream
remote: Enumerating objects: 1268, <span class="k">done</span><span class="nb">.</span>
remote: Counting objects: 100% <span class="o">(</span>182/182<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
remote: Compressing objects: 100% <span class="o">(</span>5/5<span class="o">)</span>, <span class="k">done</span><span class="nb">.</span>
remote: Total 1268 <span class="o">(</span>delta 177<span class="o">)</span>, reused 182 <span class="o">(</span>delta 177<span class="o">)</span>, pack-reused 1086
Receiving objects: 100% <span class="o">(</span>1268/1268<span class="o">)</span>, 1.87 MiB | 2.74 MiB/s, <span class="k">done</span><span class="nb">.</span>
Resolving deltas: 100% <span class="o">(</span>637/637<span class="o">)</span>, completed with 119 <span class="nb">local </span>objects.
From https://github.com/DaoCloud/DaoCloud-docs
 <span class="k">*</span> <span class="o">[</span>new branch]      feature/theme                            -&gt; upstream/feature/theme
 <span class="k">*</span> <span class="o">[</span>new branch]      fix-typo                                 -&gt; upstream/fix-typo
 <span class="k">*</span> <span class="o">[</span>new branch]      gh-pages                                 -&gt; upstream/gh-pages
 <span class="k">*</span> <span class="o">[</span>new branch]      main                                     -&gt; upstream/main
 <span class="k">*</span> <span class="o">[</span>new branch]      patch-new-gh-pages-01                    -&gt; upstream/patch-new-gh-pages-01
 <span class="k">*</span> <span class="o">[</span>new branch]      stash/bug-codes                          -&gt; upstream/stash/bug-codes

samzonglu at samzongs-MacBook-Pro <span class="k">in</span> ~/Git/daocloud/DaoCloud-docs<span class="o">(</span>main✔<span class="o">)</span>
± git pull upstream main
Alias tip: gl upstream main
From https://github.com/DaoCloud/DaoCloud-docs
 <span class="k">*</span> branch            main       -&gt; FETCH_HEAD
Already up to date.

samzonglu at samzongs-MacBook-Pro <span class="k">in</span> ~/Git/daocloud/DaoCloud-docs<span class="o">(</span>main✔<span class="o">)</span>
± git push origin main
Alias tip: gp origin main
Everything up-to-date
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2022-09-28</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Git">Git</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/09/Kafka-%E7%AB%9E%E5%93%81%E8%B0%83%E7%A0%94%E5%8F%8A%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1.html">Kafka 调研及功能设计</a></h1>
    <div class="post_at_index">
      <h2 id="调研对象">调研对象</h2>

<table>
  <thead>
    <tr>
      <th>厂家</th>
      <th>产品控制台主页</th>
      <th>应用模式</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>阿里云</td>
      <td><a href="https://kafka.console.aliyun.com/">https://kafka.console.aliyun.com/</a></td>
      <td>中间件 PaaS 模块之一</td>
    </tr>
    <tr>
      <td>腾讯云</td>
      <td><a href="https://console.cloud.tencent.com/ckafka/overview">https://console.cloud.tencent.com/ckafka/overview</a></td>
      <td>中间件 PaaS 模块之一</td>
    </tr>
    <tr>
      <td>华为云</td>
      <td><a href="https://console.huaweicloud.com/dms/?region=cn-east-3&amp;engine=kafka">https://console.huaweicloud.com/dms/?region=cn-east-3&amp;engine=kafka</a></td>
      <td>中间件 PaaS 模块之一</td>
    </tr>
    <tr>
      <td>QingCloud</td>
      <td><a href="https://console.qingcloud.com/pek3/app/app-n9ro0xcp/">https://console.qingcloud.com/pek3/app/app-n9ro0xcp/</a></td>
      <td>中间件 AppCenter 模块之一</td>
    </tr>
    <tr>
      <td>UCloud</td>
      <td><a href="https://console.ucloud.cn/ukafka/ukafka">https://console.ucloud.cn/ukafka/ukafka</a></td>
      <td>中间件 PaaS 模块之一</td>
    </tr>
    <tr>
      <td>时速云</td>
      <td><a href="https://console.tenxcloud.com/middleware_center/app">https://console.tenxcloud.com/middleware_center/app</a></td>
      <td>中间件 应用之一</td>
    </tr>
  </tbody>
</table>

<h2 id="operator选型">operator选型</h2>

<ul>
  <li><a href="https://github.com/strimzi/strimzi-kafka-operator">https://github.com/strimzi/strimzi-kafka-operator</a></li>
  <li><a href="https://github.com/banzaicloud/koperator">https://github.com/banzaicloud/koperator</a></li>
</ul>

<h3 id="功能横向对比">功能横向对比</h3>

<table>
  <thead>
    <tr>
      <th>功能点</th>
      <th>阿里云</th>
      <th>腾讯云</th>
      <th>华为云</th>
      <th>QingCloud</th>
      <th>UCloud</th>
      <th>时速云</th>
      <th>strimzi-kafka-operator</th>
      <th>koperator</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Kafka实例的生命周期管理</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
    </tr>
    <tr>
      <td>Kafka多版本支持</td>
      <td>√ 默认固定，工单调整</td>
      <td>√</td>
      <td>√</td>
      <td>√(仅 1 个)</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
    </tr>
    <tr>
      <td>Kafka 节点列表</td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td>跳转 Pod</td>
      <td>√ (能创建pod)</td>
      <td>√</td>
    </tr>
    <tr>
      <td>Kafka 原生参数管理</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td>√</td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
    </tr>
    <tr>
      <td>Kafka 常用参数抽象</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td>√</td>
    </tr>
    <tr>
      <td>Kafka 模块自带Zookeeper</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>消息查询功能</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√ 原生</td>
      <td> </td>
      <td>√ 原生</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>消息下载功能</td>
      <td>√(高级版）</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Topic 管理列表</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√ 原生</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Topic 增删改查</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√ 原生</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Topic 高级参数支持</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√ 原生</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Topic 详情</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Consumer Group 列表</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td>√ 原生</td>
      <td> </td>
      <td>√ 原生</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Consumer Group 增删改查</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td>√ 原生</td>
      <td>√</td>
      <td>√ 原生</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>资源监控看板</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√ grafana dashboard</td>
      <td>√ grafana dashboard</td>
    </tr>
    <tr>
      <td>Kafka 业务数据监控(消息量/积压/消费情况)</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td>√Grafana</td>
      <td>√ exporter+grafana</td>
      <td>√  exporter+grafana</td>
    </tr>
    <tr>
      <td>示例接入代码</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>消息发送测试窗口</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>Kafka 服务日志查看</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>操作审计日志查看</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>提供 Kafka Manager UI</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td>√</td>
      <td> </td>
      <td>√</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>提供 kafka export 备份功能</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>友好性帮助文档</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>提供帮助用户迁入上云</td>
      <td>√</td>
      <td>√</td>
      <td>√</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="kafka-创建过程及开放参数">Kafka 创建过程及开放参数</h2>

<table>
  <thead>
    <tr>
      <th>厂家</th>
      <th>字段</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>阿里云</td>
      <td>名称流量规格集群流量 = 业务流量 + 集群内副本复制流量，该规格实际业务读流量处理峰值为 50 MB/s，业务写流量处理峰值为 10 MB/s。磁盘容量数据默认 3 副本存储。实例规格为标准版时，如购买 300G 磁盘，实际存储业务的磁盘大小为 100G，其余 200G 为备份容量。实例规格为专业版时，如购买 300G 磁盘，实际存储业务的磁盘大小为 300G，额外赠送 600G 备份容量。消息保留最长时间是指在磁盘容量充足的情况下，消息的最长保留时间；在磁盘容量不足（即磁盘水位达到85%）时，将提前删除旧的消息，以确保服务可用性；默认 72 小时，可选 24 小时 ～ 168 小时。最大消息大小，默认 1MB 边界值?标准版实例单条消息最大为256KB，专业版实例单条消息最大为10MB且支持<strong>下载</strong>Topic 数量</td>
    </tr>
    <tr>
      <td>腾讯云</td>
      <td>名称Kafka 版本实例规格配置存储容量消息保留时长</td>
    </tr>
    <tr>
      <td>华为云</td>
      <td>名称Kafka 版本实例规格配置存储容量</td>
    </tr>
    <tr>
      <td>QingCloud</td>
      <td>名称Kafka 版本Kafka 节点配置： CPU / 内存  / 节点数 （规格）客户端节点配置： CPU / 内存  / 节点数 （规格）Kafka-Manager / CLI）Zookeeper 实例存储容量自定义参数配置内部 Topic offset replicasKafka manager 认证zabbix.agentkafka scale version</td>
    </tr>
    <tr>
      <td>UCloud</td>
      <td>名称Kafka 版本实例规格配置 + 存储容量实例数 3&lt;设定值&lt;100消息保留时长</td>
    </tr>
  </tbody>
</table>

<h2 id="基础设计问题">基础设计问题</h2>

<h3 id="部署方式-">部署方式 ？</h3>

<p>DCE5 支持多集群，Kafka 采用 operator 的方式部署，则需要先安装 Operator 模板到集群内</p>

<h3 id="什么时间安装---kafka-operator-">什么时间安装   Kafka-operator ？</h3>

<p>在用户创建kafka 实例时，检测是否目标集群是否存在 kafka-operator，如果不存在则同步安装</p>

<blockquote>
  <p>什么时间移除 kafka-operator， 默认情况下安装后不移除；交由 Kpanda 对集群释放时处理</p>
</blockquote>

<h3 id="如果支持-kafka-多版本-">如果支持 Kafka 多版本 ？</h3>

<p>通过多版本 对应 多 Kafka-opeator 的方式，让用户进行多版本选择</p>

<h3 id="operator-更新后存量-kafka-怎么办-">Operator 更新后，存量 Kafka 怎么办 ？</h3>

<blockquote>
  <p>非必要需求，短期不支持</p>
</blockquote>

<p>默认情况下更新了 operator 之后，不对存量做处理 ；后续可以做友好提示用户升级即可</p>

<h2 id="调研对象主要功能截图">调研对象主要功能截图</h2>

<h3 id="阿里云">阿里云</h3>

<h4 id="实例生命周期管理">实例生命周期管理</h4>

<blockquote>
  <p>实例创建</p>
</blockquote>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307586169-51f50e53-916d-4c22-b365-94403478b2cd.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.19.23.jpg" /></p>

<blockquote>
  <p>实例详情</p>
</blockquote>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307617207-228cff9e-97a2-45df-a072-de9161d99594.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.20.05.jpg" /></p>

<h4 id="kafka-topic-管理">Kafka Topic 管理</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307510049-397d57bc-29e5-4795-83f0-f08a0d91606b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.18.17.jpg" /></p>

<h4 id="kafka-消息查询">Kafka 消息查询</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307481227-28a5f677-942f-4bee-8a40-f211a0699427.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.16.43.jpg" /></p>

<h4 id="监控告警页面">监控告警页面</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661307674273-cd48a1dc-2d56-4ac6-85ba-f7a15e9c977b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 10.20.49.jpg" /></p>

<h4 id="topic-详情">Topic 详情</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661315257657-3dd43b19-5c83-44a5-8dcf-3a7b00fdde2d.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 12.27.10@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325524370-2d137783-d065-40cf-b0e1-f758ec574a06.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.18.33@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325542835-025378a0-2813-4d38-a0ad-506012d0b7ec.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.18.54@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325553902-8071ff2d-e5ce-4328-bf30-33be12a1aec0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.07@2x.jpg" /></p>

<h4 id="group-管理">Group 管理</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325583058-974985e4-822b-4229-bf20-7c78e07a5ac7.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.37.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325590879-42d393a0-93de-44fe-b71b-de31ce075c09.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.45@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325603155-d688fe65-6f4c-4324-9244-854b7a818154.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.19.54@2x.jpg" /></p>

<h4 id="prom监控">Prom监控</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661323003273-fe3de5cc-28d0-48ab-8ead-38d8ba7b52b1.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 14.28.53.jpg" /></p>

<h3 id="腾讯云">腾讯云</h3>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325816247-f34749aa-9d99-4a79-9295-108e9f97cbed.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.23.24@2x.jpg" /></p>

<h4 id="kafka-实例生命周期管理">Kafka 实例生命周期管理</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325788285-5a658ef6-092c-40b2-88b8-1317e29b71b4.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.22.56@2x.jpg" /></p>

<h4 id="消息查询功能">消息查询功能</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325835047-bc37c5a0-919b-422a-8706-bcb444171aef.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.23.44@2x.jpg" /></p>

<h4 id="数据同步任务">数据同步任务</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325851682-523521fc-491d-431d-a255-efdaa2c1fa2d.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.24.04@2x.jpg" /></p>

<h4 id="迁移上云功能">迁移上云功能</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661325869643-c2bc8a18-17be-406d-891f-fac1348d8072.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.24.21@2x.jpg" /></p>

<h4 id="topic-管理">Topic 管理</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332709528-c073dd8e-8637-4620-831b-59b714fd31ec.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.18.06@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332721004-1c4aae0a-424a-4a40-89de-904f2cc9e021.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.18.35@2x.jpg" />
<a href="https://cloud.tencent.com/document/product/597/73566">https://cloud.tencent.com/document/product/597/73566</a></p>

<h4 id="查看-topic-详情">查看 Topic 详情</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332758035-b38e4bf8-e5e5-4fc6-82ad-72d27a995c05.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.19.00@2x.jpg" /></p>

<h4 id="查看topic-生产端连接">查看Topic 生产端连接</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332800322-193f8f5e-b5cf-49d1-830c-a35496a34737.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.19.30@2x.jpg" /></p>

<h4 id="发送测试消息">发送测试消息</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332849948-44c9aa3b-6fcb-42e8-8d07-91ad7dc1108b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.20.13@2x.jpg" /></p>

<h4 id="group-管理-1">Group 管理</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332888749-197b7cd0-4db2-4324-a8be-523f6230e1d8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.21.06@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661332903130-4aa1572a-2191-4b9a-a7d8-da430d5b664a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.21.36@2x.jpg" /></p>

<h3 id="华为云">华为云</h3>

<h4 id="实例的创建">实例的创建</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326023773-8c1cfb61-6d36-451a-9ae8-e23253d0630a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.26.48@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326059316-df094fe7-237e-4aa3-b94c-be9015099325.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.27.28@2x.jpg" /></p>

<h4 id="实例基本信息">实例基本信息</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327087509-8db8e907-fc63-46b0-8df3-de9c03f05ec1.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.44.29@2x.jpg" /></p>

<h4 id="实例配置修改">实例配置修改</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326942939-93255eb4-0f4f-4d09-b4f7-c824fe2cdb7d.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.42.03@2x.jpg" /></p>

<h4 id="创建-topic">创建 Topic</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326884381-03f190c8-7371-4ee3-8222-39cf0c78bb17.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.41.07@2x.jpg" /></p>

<h4 id="监控">监控</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326916095-08d2ad76-421b-481c-a81e-8bd6b402fea3.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.41.43@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661326990347-ab2413fc-d1c5-4875-8026-408ba05c19e0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.01@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327009996-7525be7c-31e7-4c94-9b88-9a9d6c06f6bb.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.16@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327029319-18496da6-1f6c-458e-9cc2-2841da4ae21b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.40@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327041939-b6642928-ddb3-4f6d-9cf6-f900ff0ba7ee.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.43.56@2x.jpg" /></p>

<h4 id="示例代码">示例代码</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327057619-5dbb3d4b-d6b8-40ec-a528-8b87e6253d62.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.44.07@2x.jpg" /></p>

<h3 id="qingcloud">QingCloud</h3>

<h4 id="kafka-实例的创建">Kafka 实例的创建</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327953531-4347c195-85b1-4284-90c9-71b2f658d20a.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.07@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327970196-df7533af-51b5-44c1-a3e6-dc53dd345165.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.23@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327978746-cde36af3-af9d-4818-a225-0435be7d8c70.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.33@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327989141-65ba9381-c39d-4df4-b35f-eb30c2c0f117.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.43@2x.jpg" /></p>

<blockquote>
  <p>创建时，需要关联依赖服务 zookeeper</p>
</blockquote>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661327998858-3c6af065-aac1-4351-8e7a-3a72c803ee36.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 15.59.51@2x.jpg" /></p>

<h4 id="实例详情">实例详情</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661328648427-68359d73-3397-4f51-a41e-72ff088aa1da.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.10.36@2x.jpg" /></p>

<h4 id="topic管理">Topic管理</h4>

<p>提供了原生的 Kafka-manager 管理 UI
<a href="https://docsv3.qingcloud.com/middware/kafka/manual/kafka_manager/kafka_manager_topic/">https://docsv3.qingcloud.com/middware/kafka/manual/kafka_manager/kafka_manager_topic/</a></p>

<p>访问方式，以 openvpn 的方式接入到 VPC(需绑定入口公网 IP) 后，通过 client 内网地址访问
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661335030256-d6d8f4ce-5450-4675-9887-d91bfc43261e.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.57.01@2x.jpg" /></p>

<h3 id="ucloud">UCloud</h3>

<h4 id="创建实例">创建实例</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661329936765-dc801f1f-b820-4346-8cd5-bd16f22c933b.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.32.07@2x.jpg" /></p>

<h4 id="kafka-实例详情">Kafka 实例详情</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330180680-64f2f85d-65b1-429b-a9c2-0d4a3b7e7057.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.01@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330194590-e638d644-6d73-4008-9e73-fbd9386a739c.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.29@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330211435-8ac8d8e4-fa63-4151-a3c4-6cd85c346c2c.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.41@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330224056-a5b18cfb-21d8-44ab-aa10-2ec8b3225ad8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.36.55@2x.jpg" /></p>

<h4 id="kafka-节点的详情页面">Kafka 节点的详情页面</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331042096-143c7a92-3189-4413-b0f8-59c2e6480eb4.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.50.34@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330392867-c7609d4a-72bd-45e6-b741-943c2c7711fd.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.39.28@2x.jpg" /></p>

<h4 id="kafka-自定义配置">kafka 自定义配置</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331022340-2de4f944-dd32-42ea-a0ab-538044f96ab7.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.50.13@2x.jpg" /></p>

<h4 id="kafka-连接器">Kafka 连接器</h4>

<p>将上游 Kafka 数据传输到 HDFS 或者 es
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331196868-8af6eb6f-7690-49f8-83fa-f39297820c5f.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.53.11@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331184528-87b97468-042b-479b-9051-6a49838280a2.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.52.58@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331174214-c2788e65-e3a2-4080-b275-73b30ac6ed3c.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.52.43@2x.jpg" /></p>

<h4 id="监控看板">监控看板</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330312396-375635d6-015b-447a-88c2-e5c2ad51de23.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.38.11@2x.jpg" /></p>

<h4 id="创建-topic-1">创建 Topic</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331056766-ea9a2a74-12bd-482a-b77c-e375e9e0bb45.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.50.50@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661330340573-54024fe3-75fe-4dfb-b322-a0f157e369bf.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.38.45@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331099713-b943c976-ca08-4769-a4dc-710c92d899a2.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.51.29@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331073008-7df8b7f5-b92b-41a2-8c7f-74cc29071bc8.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.51.05@2x.jpg" /></p>

<h3 id="时速云">时速云</h3>

<h4 id="实例生命周期管理-1">实例生命周期管理</h4>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661331586127-3cd1e00a-fbed-4454-aea2-14e3bf95c393.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 16.59.24@2x.jpg" /></p>

<ul>
  <li>需要提前安装 zookeeper</li>
  <li>需要联系时速云管理员安装 kafka-cluster-operator
    <ul>
      <li>到交付中心，找到 Operator Hub ， 选择 Kafka-cluster-operator 安装</li>
      <li>安装完成后，可通过 Yaml + 表单形式 创建 Kafka</li>
    </ul>
  </li>
  <li>提供 Kafka manger 原生 UI 控制台</li>
</ul>

<h4 id="kafka-实例详情-1">Kafka 实例详情</h4>

<p>提供原生的实例管理界面，进行配置更新等
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334983034-f068a1ae-ccda-40b7-9b12-40e64bde24cc.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.56.16@2x.jpg" />
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334441012-bb78b74e-4c95-4679-a25b-52ace6645dd0.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.47.02@2x.jpg" /></p>

<h4 id="kafka-实例下节点信息">Kafka 实例下节点信息</h4>

<p>直接跳转到 K8s 容器组界面查看
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334844501-fd53ecb8-9194-477e-ba99-690950d32ac2.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.53.57@2x.jpg" /></p>

<h4 id="topic-管理-1">Topic 管理</h4>

<p>在 Kafka manger 原生 UI 控制台内管理，默认启用了控制台公网访问能力
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661335035163-a487b30d-6938-4cfb-88a7-5ebbf08a4d02.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.57.01@2x.jpg" /></p>

<h4 id="实例资源监控">实例资源监控</h4>

<p>基础 CPU、内存、网络、存储监控
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334944904-59442083-e24e-4776-8e4b-3683c27e279e.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.55.38@2x.jpg" /></p>

<h4 id="kafka-性能监控">Kafka 性能监控</h4>

<p>接入 Grafana 提供一个 Dashboard 的，可以查看 Topics 的消息数，消费量，积压数
<img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661334965612-08293584-95c6-4220-b4e5-dcdfe2db44e1.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 17.55.57@2x.jpg" /></p>

<h2 id="调研对象操作视频录制">调研对象操作视频录制</h2>

<p>操作视频已上传到 OneDrive 共享空间</p>

<p><img src="http://ipic-typora-samzong.oss-cn-qingdao.aliyuncs.com//uPic/1661337926424-23d5d513-4080-4f36-af59-2bda413eb905.jpeg?x-oss-process=image/resize,w_960,m_lfit" alt="CleanShot 2022-08-24 at 18.45.08@2x.jpg" /></p>

<p><a href="https://yongyu2000hotmailcom.sharepoint.cn/:f:/s/ndx/EuCYqMaXhdlPh411YVnihRQBmCbGLQ4BvU1QW_2DX7_uUQ?e=18NyTR">https://yongyu2000hotmailcom.sharepoint.cn/:f:/s/ndx/EuCYqMaXhdlPh411YVnihRQBmCbGLQ4BvU1QW_2DX7_uUQ?e=18NyTR</a></p>

<blockquote>
  <p>腾讯云只可以按月份订购，所以没有录制视频。</p>
</blockquote>

<h2 id="选型确认">选型确认</h2>

<p>方案一:</p>

<ul>
  <li>中间件实例 LCM + 三方 UI 管理工具</li>
</ul>

<p>实现：</p>

<ul>
  <li>Kafka 实例 LCM</li>
  <li>Kafka Manage UI (三方)</li>
  <li>监控三件套(Insight) [只需要做实例级别]</li>
</ul>

<p>方案比对：</p>

<ul>
  <li>现有 Opeator 不带Kafka Manger，需要自行处理</li>
  <li>不需要关心 Topic LCM</li>
  <li>不需要做业务监控</li>
  <li>沿用现有的 DCE 中间件的设计思路</li>
</ul>

<p>方案二：</p>

<ul>
  <li>不增加三方 Kafka Manage UI</li>
</ul>

<p>实现:</p>

<ul>
  <li>Kafka 实例 LCM</li>
  <li>Topic LCM</li>
  <li>监控三件套(Insight) [需要做实例+业务监控]</li>
</ul>

<p>方案对比：</p>

<ul>
  <li>现有 Operator 带有 Topic CR，可以用</li>
  <li>需要做业务监控</li>
  <li>需要做 Topic LCM</li>
  <li>与其他中间件模块定义不一致（当前阶段）</li>
</ul>

      
    </div>
    <br/>
    <div>
      <cite>2022-09-27</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Kafka">Kafka</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    
    
    <h1><a class="title" href="/post/2022/09/Poetry-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0.html">Poetry 使用笔记</a></h1>
    <div class="post_at_index">
      <p>poetry 是目前比较流行的 Python 环境管理工具 和 包管理工具，对多项目开发时的环境隔离有非常大的帮助，同时集成了包管理能力。</p>

<blockquote>
  <p>官方网站  <a href="https://python-poetry.org/">https://python-poetry.org/</a>   集成了所有 Poetry 最新的使用文档，以下仅在我的环境上经过验证</p>
</blockquote>

<h3 id="安装方式">安装方式</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># In Pip
</span><span class="o">-</span> <span class="n">安装</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">poetry</span> <span class="c1"># pip3
</span><span class="o">-</span> <span class="n">更新</span> <span class="n">poetry</span> <span class="bp">self</span> <span class="n">update</span>

<span class="c1"># In my Mac
</span><span class="o">-</span> <span class="n">安装</span> <span class="n">brew</span> <span class="n">install</span> <span class="n">poetry</span>
<span class="o">-</span> <span class="n">更新</span> <span class="n">brew</span> <span class="n">upgrade</span> <span class="n">poetry</span>

<span class="c1"># In my CentOS
</span><span class="o">-</span> <span class="n">安装</span> <span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="p">.</span><span class="n">githubusercontent</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">python</span><span class="o">-</span><span class="n">poetry</span><span class="o">/</span><span class="n">poetry</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">poetry</span><span class="p">.</span><span class="n">py</span> <span class="o">|</span> <span class="n">python</span> <span class="o">-</span>
<span class="o">-</span> <span class="n">更新</span> <span class="n">poetry</span> <span class="bp">self</span> <span class="n">update</span>
</code></pre></div></div>

<h3 id="配置技巧相关">配置技巧相关</h3>

<p>在开始使用前，建议先对 poetry 的配置有些了解，并调整为适合你的方式，主要是调整一下虚拟环境的安装位置
:::info
<code class="language-plaintext highlighter-rouge">poetry config</code> poetry 相关的查看和编辑的命令
:::</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">~</span> <span class="n">poetry</span> <span class="n">config</span> <span class="o">--</span><span class="nb">list</span>  <span class="c1"># 获取当前 poetry 的配置情况
</span>
<span class="n">cache</span><span class="o">-</span><span class="nb">dir</span> <span class="o">=</span> <span class="s">"/Users/$username/Library/Caches/pypoetry"</span>
<span class="n">experimental</span><span class="p">.</span><span class="n">new</span><span class="o">-</span><span class="n">installer</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">installer</span><span class="p">.</span><span class="n">parallel</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">virtualenvs</span><span class="p">.</span><span class="n">create</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">virtualenvs</span><span class="p">.</span><span class="ow">in</span><span class="o">-</span><span class="n">project</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">virtualenvs</span><span class="p">.</span><span class="n">path</span> <span class="o">=</span> <span class="s">"{cache-dir}/virtualenvs"</span>  <span class="c1"># /Users/$username/Library/Caches/pypoetry/virtualenvs
</span>
</code></pre></div></div>

<p>| <strong>配置项目</strong> | <strong>配置内容</strong> | <strong>配置项说明</strong> | <strong>建议配置</strong> |
| — | — | — | — |
| cache-dir | String | 缓存目录配置，使用 poetry 安装的包源文件都会缓存到这个目录。 | 不建议更改 |
| installer.parallel | boolean | 此配置会被忽略 |  |
| virtualenvs.create | boolean | 默认为 true，如果当前工程的虚拟环境不存在，就创建一个 | 不建议更改 |
| virtualenvs.in-project | boolean | None：poetry 会在系统特定目录创建一个.venv 目录，由下面的 path 参数指定
true：poetry 会在项目根目录创建一个.venv 目录
false：poetry 将会忽略已存在的.venv 目录 | <strong>《建议修改》</strong></p>

<table>
  <tbody>
    <tr>
      <td>推荐这种方式，在项目根目录创建虚拟环境，这样就算移动目录位置也不影响虚拟环境的使用</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td>virtualenvs.path</td>
      <td>string</td>
      <td>默认是{cache-dir}/virtualenvs，虚拟环境创建的目录，如果上面的 in-project 为 true，此配置就无效</td>
      <td>不建议更改</td>
    </tr>
  </tbody>
</table>

<p>:::danger
建议 在使用前 启用 virtualenvs.in-project，这样会在每个项目下有一个.venv 方便隔离管理
:::</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># poetry 配置说明
</span><span class="n">poetry</span> <span class="n">config</span> <span class="n">virtualenvs</span><span class="p">.</span><span class="ow">in</span><span class="o">-</span><span class="n">project</span> <span class="n">true</span>
</code></pre></div></div>

<h3 id="poetry-常用指令说明">poetry 常用指令说明</h3>

<table>
  <thead>
    <tr>
      <th><strong>Poetry Command</strong></th>
      <th><strong>解释</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$ poetry –version</td>
      <td>显示您的 Poetry 安装版本。</td>
    </tr>
    <tr>
      <td>$ poetry new</td>
      <td>创建一个新的 Poetry 项目。</td>
    </tr>
    <tr>
      <td>$ poetry init</td>
      <td>将 Poetry 添加到现有项目中。</td>
    </tr>
    <tr>
      <td>$ poetry run</td>
      <td>使用 Poetry 执行给定的命令。</td>
    </tr>
    <tr>
      <td>$ poetry add</td>
      <td>添加一个包 pyproject.toml 并安装它。</td>
    </tr>
    <tr>
      <td>$ poetry update</td>
      <td>更新项目的依赖项。</td>
    </tr>
    <tr>
      <td>$ poetry install</td>
      <td>安装依赖项。</td>
    </tr>
    <tr>
      <td>$ poetry show</td>
      <td>列出已安装的软件包。</td>
    </tr>
    <tr>
      <td>$ poetry lock</td>
      <td>将最新版本的依赖项固定到 poetry.lock.</td>
    </tr>
    <tr>
      <td>$ poetry lock –no-update</td>
      <td>刷新 poetry.lock 文件而不更新任何依赖版本。</td>
    </tr>
    <tr>
      <td>$ poetry check</td>
      <td>验证 pyproject.toml。</td>
    </tr>
    <tr>
      <td>$ poetry config –list</td>
      <td>显示 Poetry 配置。</td>
    </tr>
    <tr>
      <td>$ poetry env list</td>
      <td>列出项目的虚拟环境。</td>
    </tr>
    <tr>
      <td>$ poetry export</td>
      <td>导出 poetry.lock 为其他格式。</td>
    </tr>
  </tbody>
</table>

<h3 id="新项目初始化流程">新项目初始化流程</h3>

<blockquote>
  <p>这里以 初始化一个  FastAPI 项目作为 实例</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>➜  fastapi poetry new fastapi-demo
Created package fastapi_demo <span class="k">in </span>fastapi-demo
➜  fastapi <span class="nb">ls</span> <span class="nt">-lh</span> fastapi-demo
total 8
<span class="nt">-rw-r--r--</span>  1 samzonglu  staff     0B  2 15 14:28 README.rst
drwxr-xr-x  3 samzonglu  staff    96B  2 15 14:28 fastapi_demo
<span class="nt">-rw-r--r--</span>  1 samzonglu  staff   304B  2 15 14:28 pyproject.toml
drwxr-xr-x  4 samzonglu  staff   128B  2 15 14:28 tests

➜  fastapi <span class="nb">cd </span>fastapi-demo
➜  fastapi-demo poetry <span class="nb">env </span>use 3.10.2  <span class="c"># 配置项目的虚拟环境</span>

</code></pre></div></div>

<h3 id="requirementstxt-已存在项目使用-poetry">requirements.txt 已存在项目使用 poetry</h3>

<p>这里会遇到一个问题，已存在的项目基本都已经有了 requirements.txt，所以 poetry 最好可以直接读取它</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add <span class="sb">`</span><span class="nb">cat </span>requirements.txt<span class="sb">`</span>
</code></pre></div></div>

<p>将项目依赖导出为  requirements.txt</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">export</span> <span class="nt">--output</span> requirements.txt
</code></pre></div></div>

<h2 id="更新内容">更新内容</h2>

<p>如何把项目移交给一个 not use Poetry 的人运行，对于 Python 的 环境包 依赖，上述的 ouput/input 的方式，会存在一些问题，这里进行纠正。</p>

<h3 id="问题-pip-freeze-不能用了">问题 pip freeze 不能用了</h3>

<p>:::warning
pip freeze &gt; requirements.txt
:::</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>anyio @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/cd/3f/ae/baff749ce6cb4d7985e4142650605d2d30cb92eb418e2d121868e4413d/anyio-3.6.1-py3-none-any.whl
certifi @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/b1/9b/6f/cd63ce97294ee9a1fb57e5cebf02f251fbb8f9ac48353a27ceeddc410b/certifi-2022.6.15-py3-none-any.whl
charset-normalizer @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/86/c8/3e/d878881698fbd2b72f484e4fca340588d633102920a002b66a293f9480/charset_normalizer-2.1.0-py3-none-any.whl
click @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/63/f3/4c/2270b95f4d37b9ea73cd401abe68b6e9ede30380533cd4e7118a8e3aa3/click-8.1.3-py3-none-any.whl
fastapi @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/f9/37/53/c998e9ffd7ace66218174711f5c3ef1026a0bd3cd72f5fe2908e9b949b/fastapi-0.78.0-py3-none-any.whl
h11 @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/ef/5c/a2/a6d556bc5e3493616e52726df9c880b2da2fbf9c3be5e8351c84fbfafd/h11-0.13.0-py3-none-any.whl
idna @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/90/36/8c/81eabf6ac88608721ab27f439c9a6b9a8e6a21cc58c59ebb1a42720199/idna-3.3-py3-none-any.whl
pydantic @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/c2/13/d4/b9f7dbf75702d85504b4a5f36545ff903c7e2264d4889e94ce02637276/pydantic-1.9.1-cp310-cp310-macosx_11_0_arm64.whl
requests @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/14/1f/4d/1b93db6513b8ab38db841e4ce62691288ba549a5c1b6f3ca7274a1c9fd/requests-2.28.1-py3-none-any.whl
sniffio @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/2b/1b/93/9c34d727e29f7bb11ce5b2ca7f43e77cb4e96a81ee5e07a92763951416/sniffio-1.2.0-py3-none-any.whl
starlette @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/3d/fc/74/569a1206737284325f5bb2e4f34689632c159dafbe8b7ff30bf2893c2d/starlette-0.19.1-py3-none-any.whl
typing_extensions @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/4a/aa/fe/e4680f3423fbdb5ac89a6fb2f83d9e7ff7fb48173b0fa1604786182558/typing_extensions-4.3.0-py3-none-any.whl
urllib3 @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/8a/87/ce/4a44bf6bb59a745f4af7082c6977ab23a478fca039ad4d631dfdc0185b/urllib3-1.26.10-py2.py3-none-any.whl
uvicorn @ file:///Users/samzonglu/Library/Caches/pypoetry/artifacts/62/76/ec/dcafe6bae872839618dbf982c87eb314eee97784f7df74895e07bd198a/uvicorn-0.18.2-py3-none-any.whl
</code></pre></div></div>

<p>可以看到，默认情况下<code class="language-plaintext highlighter-rouge">pip freeze</code>在输出时，携带里对应的安装路径；如果这个时候，我们把项目移交给其他人运行时，会遇到以下问题</p>

<blockquote>
  <p>ERROR: Could not install packages due to an EnvironmentError: [Errno 2] No such</p>
</blockquote>

<p>这是 pip 安装软件包的一种特殊语法（自 19.1 开始受支持）<a href="https://www.python.org/dev/peps/pep-0440/#direct-references">PEP404</a>，
但是该此种路径取决于环境，file:///URL 仅在本地文件系统上可用，你不能将生成的 requirements.txt 文件提供给其他人使用</p>

<h3 id="先说解决方法-01-poetry-style">先说解决方法 01 [poetry style]</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry <span class="nb">export</span> <span class="nt">--without-hashes</span> <span class="nt">--format</span><span class="o">=</span>requirements.txt <span class="o">&gt;</span> requirements.txt
</code></pre></div></div>

<p>通过 poetry 自带的导出能力，会携带更多的一些信息：对于环境中 python 版本的依赖，虽然更加友好一些。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">anyio</span><span class="o">==</span>3.6.1<span class="p">;</span> python_full_version <span class="o">&gt;=</span> <span class="s2">"3.6.2"</span>
<span class="nv">certifi</span><span class="o">==</span>2022.6.15<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.6"</span>
charset-normalizer<span class="o">==</span>2.1.0<span class="p">;</span> python_full_version <span class="o">&gt;=</span> <span class="s2">"3.6.0"</span>
<span class="nv">click</span><span class="o">==</span>8.1.3<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.7"</span>
<span class="nv">colorama</span><span class="o">==</span>0.4.5<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.7"</span> and python_full_version &lt; <span class="s2">"3.0.0"</span> and platform_system <span class="o">==</span> <span class="s2">"Windows"</span> or platform_system <span class="o">==</span> <span class="s2">"Windows"</span> and python_version <span class="o">&gt;=</span> <span class="s2">"3.7"</span> and python_full_version <span class="o">&gt;=</span> <span class="s2">"3.5.0"</span>
<span class="nv">fastapi</span><span class="o">==</span>0.78.0<span class="p">;</span> python_full_version <span class="o">&gt;=</span> <span class="s2">"3.6.1"</span>
<span class="nv">h11</span><span class="o">==</span>0.13.0<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.6"</span>
<span class="nv">idna</span><span class="o">==</span>3.3<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.5"</span>
<span class="nv">pydantic</span><span class="o">==</span>1.9.1<span class="p">;</span> python_full_version <span class="o">&gt;=</span> <span class="s2">"3.6.1"</span>
<span class="nv">requests</span><span class="o">==</span>2.28.1<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.7"</span> and python_version &lt; <span class="s2">"4"</span>
<span class="nv">sniffio</span><span class="o">==</span>1.2.0<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.5"</span>
<span class="nv">starlette</span><span class="o">==</span>0.19.1<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.6"</span>
typing-extensions<span class="o">==</span>4.3.0<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.7"</span>
<span class="nv">urllib3</span><span class="o">==</span>1.26.10<span class="p">;</span> <span class="o">(</span>python_version <span class="o">&gt;=</span> <span class="s2">"2.7"</span> and python_full_version &lt; <span class="s2">"3.0.0"</span><span class="o">)</span> or <span class="o">(</span>python_full_version <span class="o">&gt;=</span> <span class="s2">"3.6.0"</span> and python_version &lt; <span class="s2">"4"</span><span class="o">)</span>
<span class="nv">uvicorn</span><span class="o">==</span>0.18.2<span class="p">;</span> python_version <span class="o">&gt;=</span> <span class="s2">"3.7"</span>
</code></pre></div></div>

<h3 id="再说解决方法-02">再说解决方法 02</h3>

<p>在新版的 python 中，推荐采用另外一个命令方式，<code class="language-plaintext highlighter-rouge">pip list --format=freeze</code> 这样会输出一份干净的依赖清单，我们可以通过这个方式，快速导出一份 <code class="language-plaintext highlighter-rouge">原汁原味</code> 的 requirements.txt</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run pip list <span class="nt">--format</span><span class="o">=</span>freeze
<span class="nv">anyio</span><span class="o">==</span>3.6.1
<span class="nv">certifi</span><span class="o">==</span>2022.6.15
charset-normalizer<span class="o">==</span>2.1.0
<span class="nv">click</span><span class="o">==</span>8.1.3
<span class="nv">fastapi</span><span class="o">==</span>0.78.0
<span class="nv">h11</span><span class="o">==</span>0.13.0
<span class="nv">idna</span><span class="o">==</span>3.3
<span class="nv">pip</span><span class="o">==</span>22.2
<span class="nv">pydantic</span><span class="o">==</span>1.9.1
<span class="nv">requests</span><span class="o">==</span>2.28.1
<span class="nv">setuptools</span><span class="o">==</span>62.6.0
<span class="nv">sniffio</span><span class="o">==</span>1.2.0
<span class="nv">starlette</span><span class="o">==</span>0.19.1
<span class="nv">typing_extensions</span><span class="o">==</span>4.3.0
<span class="nv">urllib3</span><span class="o">==</span>1.26.10
<span class="nv">uvicorn</span><span class="o">==</span>0.18.2
<span class="nv">wheel</span><span class="o">==</span>0.37.1
</code></pre></div></div>

<h3 id="补充安装来自于-requirementstxt-的方式">补充安装来自于 requirements.txt 的方式</h3>

<blockquote>
  <p>with poetry</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>requirements.txt | xargs poetry add
</code></pre></div></div>

<blockquote>
  <p>without poetry</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div></div>

      
    </div>
    <br/>
    <div>
      <cite>2022-09-22</cite> <i class="icon-tag"></i>
      <a href="/tags.html#Python">Python</a>
      
      
      
    </div>
    <div style="clear: both;"></div>
    <hr/>
    

    <!-- Pagination links -->
    <nav>
      <ul class="pagination hidden-xs">
        
        <li class="disabled">
          <a>&laquo; Previous</a>
        </li>
        

        
        <li class="active">
          <a>1</a>
        </li>
        
        <li>
          <a href="/page2">2</a>
        </li>
        
        <li>
          <a href="/page3">3</a>
        </li>
        
        <li>
          <a href="/page4">4</a>
        </li>
        
        <li>
          <a href="/page5">5</a>
        </li>
        
        <li><span>...</span></li>
        <li><a href="/page24">24</a></li>
        

        
        

        
        

        
        <li>
          <a href="/page2">Next &raquo;</a>
        </li>
        
      </ul>
    </nav>
  </div>
  <div class="col-xs-12 col-md-4">
		<!-- <div>
			<a class="twitter-timeline" data-width="390" data-height="640" data-theme="light" href="https://twitter.com/samzong_lu?ref_src=twsrc%5Etfw">Tweets by SAMZONG</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
		</div> -->
    <div>
      <h2>传送门</h2>
      <ul>
        <li><a href="https://yuque.com/samzong">语雀-花园</a></li>
        <li><a href="https://github.com/samzong">Github</a></li>
      </ul>
    </div>
    <div class="categories">
      <h2>文章分类</h2>
      <ul class="tag_box">
        
        


  
     
    	
      <li><a href="/categories.html#Linux">
    		Linux <span>22</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#CentOS">
    		CentOS <span>15</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#HTML">
    		HTML <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#数据库">
    		数据库 <span>19</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#MySQL">
    		MySQL <span>14</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Git">
    		Git <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#TortoiseGit">
    		TortoiseGit <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#MongoDB">
    		MongoDB <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#PHP">
    		PHP <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Mac">
    		Mac <span>16</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#SourceTree">
    		SourceTree <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#OpenSource">
    		OpenSource <span>11</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Piwik">
    		Piwik <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Python">
    		Python <span>45</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#云服务">
    		云服务 <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Azure">
    		Azure <span>4</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#虚拟化">
    		虚拟化 <span>7</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#OpenStack">
    		OpenStack <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#CloudStack">
    		CloudStack <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Zabbix">
    		Zabbix <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Tomcat">
    		Tomcat <span>5</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Redis">
    		Redis <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Docker">
    		Docker <span>6</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Shell">
    		Shell <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Blog">
    		Blog <span>4</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Ghost">
    		Ghost <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#PostgreSQL">
    		PostgreSQL <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#AWS">
    		AWS <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Aliyun">
    		Aliyun <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Redmine">
    		Redmine <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Bigdata">
    		Bigdata <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Tools">
    		Tools <span>4</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#VPN">
    		VPN <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Windows">
    		Windows <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Jmeter">
    		Jmeter <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#随笔">
    		随笔 <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#读书笔记">
    		读书笔记 <span>16</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#SQL">
    		SQL <span>5</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Node">
    		Node <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#BI">
    		BI <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Network">
    		Network <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#微服务">
    		微服务 <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#ClickHouse">
    		ClickHouse <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#闲聊">
    		闲聊 <span>3</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Hexo">
    		Hexo <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Javascript">
    		Javascript <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Telegram">
    		Telegram <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Metabase">
    		Metabase <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#学习">
    		学习 <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Kubernetes">
    		Kubernetes <span>10</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Github">
    		Github <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#kubernetes">
    		kubernetes <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#腾讯云">
    		腾讯云 <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#阿里云">
    		阿里云 <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Gitlab">
    		Gitlab <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#前端">
    		前端 <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#DaoCloud Enterprise">
    		DaoCloud Enterprise <span>2</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Kubrnetes">
    		Kubrnetes <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#Kafka">
    		Kafka <span>1</span>
    	</a></li>
     
    	
      <li><a href="/categories.html#云原生">
    		云原生 <span>1</span>
    	</a></li>
    
  



      </ul>
    </div>
    <div>
      <h2>最近文章</h2>
      <ul>
        
        <li>
          <a href="/post/2022/11/Copy-To-Markdwon.html">Copy To Markdwon</a>
          

        </li>
        
        <li>
          <a href="/post/2022/11/Dubbo-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html">Dubbo 基础知识梳理</a>
          
  参考资料：



        </li>
        
        <li>
          <a href="/post/2022/11/Panads-fill-NaN-value-to-Zero.html">Panads fill NaN value to Zero</a>
          ```python
df = pandas.read_csv(‘somefile.txt’)


        </li>
        
        <li>
          <a href="/post/2022/10/Redash-for-Docker-%E9%83%A8%E7%BD%B2.html">Redash for Docker 部署</a>
          
  暗坑很多



        </li>
        
        <li>
          <a href="/post/2022/10/JWT-%E5%86%85%E7%BD%AE%E7%9A%84%E6%96%B9%E5%BC%8F.html">JWT 内置的方式</a>
          
  支持为 API 启用 jwt token 解码的能力 ,  读取网关的 jwt key
    
      读取请求 Header 中的 Authorization
    
  
  需要支持为网关配置多 jwt key , and 加密长度 ?
    
      解密的性能问题
      expire_time 过期时间的配置
      解密后的参数传递
    
  



        </li>
        
      </ul>
    </div>
  </div>
</div>

			</div>

		</div>

    <footer>
      <div class="container">
        <div class="row mobilepadding">
          			<hr>
      &copy; 2022 船长. Powered by <a href="http://jekyllrb.com" target="_blank" title="The simple, blog-aware, static site generator.">Jekyll</a>. Theme Creator <a href="https://github.com/einverne" target="_blank" title="Ein Verne's GitHub Repos">Ein Verne</a> . Host on <a href="https://github.com/samzong/samzong.me" target="_blank" title="Samzong's GitHub Repos">Github</a> .
      <br><br>
      </div>
    </div>
    </footer>

    




	<script async type="text/javascript" src="/assets/themes/evjekylltheme/bootstrap-3.3.5/js/bootstrap.min.js"></script>
	<script async type="text/javascript" src="/assets/themes/evjekylltheme/webcore.js"></script>

 </body>
</html>

