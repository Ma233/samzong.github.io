<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Notes | samzong</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://samzong.me/page/188"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Notes | samzong"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://samzong.me/page/188"><link data-rh="true" rel="alternate" href="https://samzong.me/page/188" hreflang="en"><link data-rh="true" rel="alternate" href="https://samzong.me/page/188" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="samzong RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="samzong Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="samzong JSON Feed"><link rel="stylesheet" href="/assets/css/styles.94db4b8a.css">
<script src="/assets/js/runtime~main.32fc6d5f.js" defer="defer"></script>
<script src="/assets/js/main.5385b353.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">ğŸ«µğŸ«µğŸ«µ  è­¦é’Ÿé•¿é¸£ï¼å°Šçºªå®ˆæ³•ï¼Œæ‹’ç»ç§‘å­¦ä¸Šç½‘ï¼Œæ‹’ç»ä¼ æ’­è¿æ³•ä¿¡æ¯ï¼›å¦‚æœ‰å‘ç°ï¼Œè¯·ç«‹å³æ‹¨æ‰“ 110 !  ğŸ«µğŸ«µğŸ«µ</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="ä»‹ç»"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2016/08/04/HowTo-Setup-MariaDB-Galera-Cluster-10-On-CentOS-6-x">HowTo Setup MariaDB Galera Cluster 10 On CentOS 6.x</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2016-08-04T13:14:15.000Z" itemprop="datePublished">August 4, 2016</time></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»‹ç»">ä»‹ç»<a href="#ä»‹ç»" class="hash-link" aria-label="Direct link to ä»‹ç»" title="Direct link to ä»‹ç»">â€‹</a></h2>
<p>MariaDB Galera Cluster æ˜¯ä¸€å¥—åœ¨ MySQL InnoDB å­˜å‚¨å¼•æ“ä¸Šé¢å®ç° multi-master åŠæ•°æ®å®æ—¶åŒæ­¥çš„ç³»ç»Ÿæ¶æ„ï¼Œä¸šåŠ¡å±‚é¢æ— éœ€åšè¯»å†™åˆ†ç¦»å·¥ä½œï¼Œæ•°æ®åº“è¯»å†™å‹åŠ›éƒ½èƒ½æŒ‰ç…§æ—¢å®šçš„è§„åˆ™åˆ†å‘åˆ° å„ä¸ªèŠ‚ç‚¹ä¸Šå»ã€‚åœ¨æ•°æ®æ–¹é¢å®Œå…¨å…¼å®¹ MariaDB å’Œ MySQLã€‚ä½¿ç”¨ MariaDB Galera çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æ–¹ä¾¿å¿«é€Ÿçš„æ­å»ºå‡ºé«˜å¯ç”¨çš„æ•°æ®åº“ Clusterï¼Œä¸æ˜¯ä¸»å¤‡æ¨¡å¼ï¼Œè€Œæ˜¯åŒæ´»æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰ä¸»èŠ‚ç‚¹å’Œå¤‡ä»½èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥çœ‹åšæ˜¯ä¸»èŠ‚ç‚¹ï¼Œéƒ½å¯ä»¥è¿›è¡Œè¯»å†™ï¼Œç”± Galera æ¥å®ç°åº•å±‚çš„æ•°æ®åŒæ­¥ã€‚</p>
<ul>
<li>çœŸæ­£çš„å¤šä¸»æ¶æ„ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½å¯ä»¥è¿›è¡Œè¯»å†™</li>
<li>åŒæ­¥å¤åˆ¶ï¼Œå„èŠ‚ç‚¹é—´æ— å»¶è¿Ÿä¸”èŠ‚ç‚¹å®•æœºä¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±</li>
<li>ç´§å¯†è€¦åˆï¼Œæ‰€æœ‰èŠ‚ç‚¹å‡ä¿æŒç›¸åŒçŠ¶æ€</li>
<li>è‡ªåŠ¨èŠ‚ç‚¹é…ç½®ï¼Œæ— éœ€æ‰‹å·¥å¤‡ä»½å½“å‰æ•°æ®åº“å¹¶æ‹·è´è‡³æ–°èŠ‚ç‚¹</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®éªŒç¯å¢ƒ">å®éªŒç¯å¢ƒ<a href="#å®éªŒç¯å¢ƒ" class="hash-link" aria-label="Direct link to å®éªŒç¯å¢ƒ" title="Direct link to å®éªŒç¯å¢ƒ">â€‹</a></h2>
<ul>
<li>Cluster node4 IP address 172.16.102.168</li>
<li>Cluster node5 IP address 172.16.102.165</li>
<li>Cluster node6 IP address 172.16.102.164</li>
<li>setenforce 0. sed -i &#x27;s/SELINUX=enforcing/SELINUX=disabled/&#x27; /etc/selinux/config</li>
<li>/etc/init.d/iptables stop;chkconfig iptables off</li>
</ul>
<blockquote>
<p>ä½¿ç”¨ vmware æµ‹è¯•éœ€æ³¨æ„ï¼šå…‹éš†æœºå™¨éœ€è¦åˆ é™¤ <code>/etc/udev/rules.d/70-persistent-net.rules</code> ä»¥åŠ<code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>ä¸­çš„ç½‘å¡ mac åœ°å€é€‰é¡¹ï¼Œä¸ç„¶ç½‘å¡èµ·ä¸æ¥</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¯å¢ƒæ£€æµ‹">ç¯å¢ƒæ£€æµ‹<a href="#ç¯å¢ƒæ£€æµ‹" class="hash-link" aria-label="Direct link to ç¯å¢ƒæ£€æµ‹" title="Direct link to ç¯å¢ƒæ£€æµ‹">â€‹</a></h2>
<ul>
<li>æ£€æŸ¥ iptables çŠ¶æ€ï¼š/etc/init.d/iptables status;chkconfig --list | grep iptables</li>
<li>æ£€æŸ¥ selinux çŠ¶æ€ï¼šgetenforce</li>
<li>æ£€æŸ¥ openssh-client åŒ…æ˜¯å¦å®‰è£…ï¼šç³»ç»Ÿä¸­æ˜¯å¦æœ‰ ssh å‘½ä»¤</li>
<li>æ£€æŸ¥æ˜¯å¦ç³»ç»Ÿä¸­å«æœ‰ mysql ç›¸å…³çš„åŒ…ï¼šrpm -qa | grep mysqlï¼Œæœ‰çš„è¯éƒ½éœ€è¦å¸è½½æ‰</li>
<li>æ£€æŸ¥ç½‘ç»œæ˜¯å¦é€šç•…ï¼š<code>ping www.baidu.com</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®‰è£…">å®‰è£…<a href="#å®‰è£…" class="hash-link" aria-label="Direct link to å®‰è£…" title="Direct link to å®‰è£…">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-åœ¨æ‰€æœ‰èŠ‚ç‚¹ç¼–è¾‘etchosts">1. åœ¨æ‰€æœ‰èŠ‚ç‚¹ç¼–è¾‘/etc/hosts<a href="#1-åœ¨æ‰€æœ‰èŠ‚ç‚¹ç¼–è¾‘etchosts" class="hash-link" aria-label="Direct link to 1. åœ¨æ‰€æœ‰èŠ‚ç‚¹ç¼–è¾‘/etc/hosts" title="Direct link to 1. åœ¨æ‰€æœ‰èŠ‚ç‚¹ç¼–è¾‘/etc/hosts">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vi /etc/hosts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">127.0</span><span class="token plain">.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add follows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">172.16</span><span class="token plain">.102.164 node6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">172.16</span><span class="token plain">.102.165 node5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">172.16</span><span class="token plain">.102.168 node4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä¾æ¬¡åœ¨node5å’Œnode6ä¸Šç¼–è¾‘/etc/hosts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-åœ¨æ‰€æœ‰-node-ä¸Šå®‰è£…-mariadb-galera">2. åœ¨æ‰€æœ‰ node ä¸Šå®‰è£… MariaDB Galera<a href="#2-åœ¨æ‰€æœ‰-node-ä¸Šå®‰è£…-mariadb-galera" class="hash-link" aria-label="Direct link to 2. åœ¨æ‰€æœ‰ node ä¸Šå®‰è£… MariaDB Galera" title="Direct link to 2. åœ¨æ‰€æœ‰ node ä¸Šå®‰è£… MariaDB Galera">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vi /etc/yum.repos.d/mariadb.repo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># MariaDB 10.0 CentOS repository list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># http://mariadb.org/mariadb/repositories/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mariadb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> MariaDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">baseurl </span><span class="token operator">=</span><span class="token plain"> http://yum.mariadb.org/10.0/centos6-amd64</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgkey</span><span class="token operator">=</span><span class="token plain">https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">enabled</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># yum --enablerepo=mariadb -y install MariaDB-Galera-server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä¾æ¬¡åœ¨node5å’Œnode6ä¸Šå®‰è£… MariaDB-Galera-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>æ³¨æ„å®‰è£…å®Œæˆä¹‹åï¼Œä¸è¦å¯åŠ¨ mysql</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-åœ¨å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸Šç¼–è¾‘etcmycnfdservercnf-é…ç½®æ–‡ä»¶">3. åœ¨å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸Šç¼–è¾‘/etc/my.cnf.d/server.cnf é…ç½®æ–‡ä»¶<a href="#3-åœ¨å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸Šç¼–è¾‘etcmycnfdservercnf-é…ç½®æ–‡ä»¶" class="hash-link" aria-label="Direct link to 3. åœ¨å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸Šç¼–è¾‘/etc/my.cnf.d/server.cnf é…ç½®æ–‡ä»¶" title="Direct link to 3. åœ¨å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸Šç¼–è¾‘/etc/my.cnf.d/server.cnf é…ç½®æ–‡ä»¶">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vi /etc/my.cnf.d/server.cnf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 19 è¡Œï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹ä¸ºéœ€æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">galera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_provider</span><span class="token operator">=</span><span class="token plain">/usr/lib64/galera/libgalera_smm.so</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># æŒ‡å®šèŠ‚ç‚¹åœ°å€ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ip,å¦‚æœæ²¡åšå®‰è£…1ï¼Œå¯ä»¥ç›´æ¥æŠŠclusterçš„ipå†™åœ¨è¿™é‡Œã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_cluster_address</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;gcomm://node4,node5,node6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">binlog_format</span><span class="token operator">=</span><span class="token plain">row</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">default_storage_engine</span><span class="token operator">=</span><span class="token plain">InnoDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bind-address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add follows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cluster name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_cluster_name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Visionet_MariaDB_Cluster&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># replication provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_sst_method</span><span class="token operator">=</span><span class="token plain">rsync</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># own IP address</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_node_address</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;172.16.102.168&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_node_name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;node4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># å¯åŠ¨æ•°æ®åº“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># /etc/rc.d/init.d/mysql bootstrap</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting MySQL. SUCCESS</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># åˆå§‹åŒ–ä½ çš„æ•°æ®åº“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mysql_secure_installation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-åœ¨å…¶å®ƒèŠ‚ç‚¹ä¸Šç¼–è¾‘etcmycnfdservercnf-é…ç½®æ–‡ä»¶">4. åœ¨å…¶å®ƒèŠ‚ç‚¹ä¸Šç¼–è¾‘/etc/my.cnf.d/server.cnf é…ç½®æ–‡ä»¶<a href="#4-åœ¨å…¶å®ƒèŠ‚ç‚¹ä¸Šç¼–è¾‘etcmycnfdservercnf-é…ç½®æ–‡ä»¶" class="hash-link" aria-label="Direct link to 4. åœ¨å…¶å®ƒèŠ‚ç‚¹ä¸Šç¼–è¾‘/etc/my.cnf.d/server.cnf é…ç½®æ–‡ä»¶" title="Direct link to 4. åœ¨å…¶å®ƒèŠ‚ç‚¹ä¸Šç¼–è¾‘/etc/my.cnf.d/server.cnf é…ç½®æ–‡ä»¶">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vim /etc/my.cnf.d/server.cnf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="node5">node5<a href="#node5" class="hash-link" aria-label="Direct link to node5" title="Direct link to node5">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node5 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vi /etc/my.cnf.d/server.cnf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 19 è¡Œï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹ä¸ºéœ€æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">galera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_provider</span><span class="token operator">=</span><span class="token plain">/usr/lib64/galera/libgalera_smm.so</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># æŒ‡å®šèŠ‚ç‚¹åœ°å€ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ip,å¦‚æœæ²¡åšå®‰è£…1ï¼Œå¯ä»¥ç›´æ¥æŠŠclusterçš„ipå†™åœ¨è¿™é‡Œã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_cluster_address</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;gcomm://node4,node5,node6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">binlog_format</span><span class="token operator">=</span><span class="token plain">row</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">default_storage_engine</span><span class="token operator">=</span><span class="token plain">InnoDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bind-address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add follows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cluster name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_cluster_name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Visionet_MariaDB_Cluster&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># replication provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_sst_method</span><span class="token operator">=</span><span class="token plain">rsync</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä»¥ä¸‹å†…å®¹æ³¨æ„ï¼Œæ³¨æ„åº”è®¾ç½®ä¸ºå½“å‰æœåŠ¡å™¨ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_node_address</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;172.16.102.165&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_node_name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;node5&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># å¯åŠ¨æ•°æ®åº“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node5 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># /etc/rc.d/init.d/mysql start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting MySQL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.SST </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> progress, setting </span><span class="token function" style="color:rgb(80, 250, 123)">sleep</span><span class="token plain"> higher. SUCCESS</span><span class="token operator">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="node6">node6<a href="#node6" class="hash-link" aria-label="Direct link to node6" title="Direct link to node6">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node6 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># vi /etc/my.cnf.d/server.cnf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 19 è¡Œï¼Œå–æ¶ˆä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹ä¸ºéœ€æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">galera</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_provider</span><span class="token operator">=</span><span class="token plain">/usr/lib64/galera/libgalera_smm.so</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># æŒ‡å®šèŠ‚ç‚¹åœ°å€ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ip,å¦‚æœæ²¡åšå®‰è£…1ï¼Œå¯ä»¥ç›´æ¥æŠŠclusterçš„ipå†™åœ¨è¿™é‡Œã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_cluster_address</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;gcomm://node4,node5,node6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">binlog_format</span><span class="token operator">=</span><span class="token plain">row</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">default_storage_engine</span><span class="token operator">=</span><span class="token plain">InnoDB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">innodb_autoinc_lock_mode</span><span class="token operator">=</span><span class="token number">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bind-address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add follows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># cluster name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_cluster_name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Visionet_MariaDB_Cluster&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># replication provider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_sst_method</span><span class="token operator">=</span><span class="token plain">rsync</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ä»¥ä¸‹å†…å®¹æ³¨æ„ï¼Œæ³¨æ„åº”è®¾ç½®ä¸ºå½“å‰æœåŠ¡å™¨ä¿¡æ¯</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_node_address</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;172.16.102.164&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">wsrep_node_name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;node6&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># å¯åŠ¨æ•°æ®åº“</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node6 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># /etc/rc.d/init.d/mysql start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Starting MySQL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.SST </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> progress, setting </span><span class="token function" style="color:rgb(80, 250, 123)">sleep</span><span class="token plain"> higher. SUCCESS</span><span class="token operator">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>æ³¨æ„ï¼šåªéœ€è¦åˆå§‹åŒ–ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æœåŠ¡å™¨çš„æ•°æ®åº“ï¼Œå…¶ä»–æ•°æ®çš„é…ç½®æ–‡ä»¶ä¼šè‡ªåŠ¨åŒæ­¥ï¼Œæ‰€ä»¥ä½ ç»™ node4 è®¾ç½®çš„ root å¯ä»¥åœ¨ node5 å’Œ node6 ç›´æ¥ä½¿ç”¨ï¼Œå½“ç„¶è¿™æ˜¯å®‰è£…æ­£ç¡®çš„å‰æã€‚</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç™»é™†å„ä¸ªèŠ‚ç‚¹æ•°æ®åº“æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ">ç™»é™†å„ä¸ªèŠ‚ç‚¹æ•°æ®åº“æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ<a href="#ç™»é™†å„ä¸ªèŠ‚ç‚¹æ•°æ®åº“æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ" class="hash-link" aria-label="Direct link to ç™»é™†å„ä¸ªèŠ‚ç‚¹æ•°æ®åº“æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ" title="Direct link to ç™»é™†å„ä¸ªèŠ‚ç‚¹æ•°æ®åº“æ£€æŸ¥é…ç½®æ˜¯å¦æˆåŠŸ">â€‹</a></h2>
<p>server.cnf çš„é…ç½®å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆ wsrep_local_state_comment çš„çŠ¶æ€åº”è¯¥æ˜¯ Syncedã€‚</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@node4 ~</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># mysql -u root -p</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enter password:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Welcome to the MariaDB monitor.  Commands end with </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> or </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">g.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your MariaDB connection </span><span class="token function" style="color:rgb(80, 250, 123)">id</span><span class="token plain"> is </span><span class="token number">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server version: </span><span class="token number">10.0</span><span class="token plain">.26-MariaDB-wsrep MariaDB Server, wsrep_25.13.raf7f02e</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Copyright </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">2000</span><span class="token plain">, </span><span class="token number">2016</span><span class="token plain">, Oracle, MariaDB Corporation Ab and others.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Type </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;help;&#x27;</span><span class="token plain"> or </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;\h&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> help. Type </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;\c&#x27;</span><span class="token plain"> to </span><span class="token function" style="color:rgb(80, 250, 123)">clear</span><span class="token plain"> the current input statement.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MariaDB </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">none</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">&gt;</span><span class="token plain"> show status like </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;wsrep_local_state_comment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---------------------------+--------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> Variable_name             </span><span class="token operator">|</span><span class="token plain"> Value  </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---------------------------+--------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> wsrep_local_state_comment </span><span class="token operator">|</span><span class="token plain"> Synced </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---------------------------+--------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain"> row </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.01</span><span class="token plain"> sec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MariaDB </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">none</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“è®º">ç»“è®º<a href="#ç»“è®º" class="hash-link" aria-label="Direct link to ç»“è®º" title="Direct link to ç»“è®º">â€‹</a></h2>
<p>MariaDB Galera æ²¡æœ‰ä¸»èŠ‚ç‚¹å’Œå¤‡ä»½èŠ‚ç‚¹ï¼Œé…ç½®æˆåŠŸä¹‹åï¼Œå¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ª node èŠ‚ç‚¹ä¸Šæ“ä½œä¼šè‡ªåŠ¨åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å®•æœºä¸ä¼šå½±å“å…¶ä»–èŠ‚ç‚¹çš„æ•°æ®å’Œç¨³å®šæ€§ï¼Œé…ç½® HAProxy è®¾ç½® VIP çš„æ–¹å¼æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œæé«˜æœåŠ¡çš„é«˜å¯ç”¨æ€§ï¼Œå¦å¤–ï¼Œå½“å®•æœºèŠ‚ç‚¹ä¸Šçº¿ä¹‹åï¼Œäº‹åŠ¡ä¼šè‡ªåŠ¨åŒæ­¥ä¸ä¸¢å¤±ã€‚</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/maria-db">MariaDB</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/page/187"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/page/189"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div></div>
</body>
</html>